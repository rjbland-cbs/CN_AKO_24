"use strict";(self.webpackChunkAngularCliApplication=self.webpackChunkAngularCliApplication||[]).push([[179],{932:(Ue,Cn,U)=>{var jt=U(1481),i=U(1571),xr=(U(5386),U(8292)),_r=U(8746),g=U(6895),V=U(4006),Nt=U(529),Sn=U(3362),hi=U(7705),zi=U(8893),gi=U(2046),We=U(7185);Array.isNullOrEmpty||(Array.isNullOrEmpty=function(n){return!n||0===n.length}),Array.isPopulated||(Array.isPopulated=function(n){return null!=n&&n.length>0}),Array.prototype.isEmpty||(Array.prototype.isEmpty=function(){return 0===this.length}),Object.isWithOwnProperty||(Object.isWithOwnProperty=function(n,s,t){return Object.prototype.hasOwnProperty.call(n,s)}),String.isNullOrEmpty||(String.isNullOrEmpty=function(n){return!n||0===n.length}),String.hasValue||(String.hasValue=function(n){return null!=n&&n.length>0}),String.prototype.isEmpty||(String.prototype.isEmpty=function(){return 0===this.length});let An=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez]}),n})(),pi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez,An,An]}),n})(),wn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez]}),n})(),xn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez,hi.Y4,zi._zm]}),n})(),_n=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez]}),n})(),Gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez]}),n})(),kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez,pi]}),n})(),q=(()=>{class n{constructor(){this.scrollEvent=new i.vpe,this.windowResizeEvent=new i.vpe,this.windowResizedEvent=new i.vpe(!0),this.fieldValueChangedEvent=new i.vpe,this.controlVisibilityChanged=new i.vpe,this.multipleControlVisibilityChanged=new i.vpe,this.pageInitializedEvent=new i.vpe,this.activeFieldChangedEvent=new i.vpe,this.cssLoadedEvent=new i.vpe,this.showSplashEvent=new i.vpe(!0),this.hideSplashEvent=new i.vpe(!0),this.sizeTreeReadyEvent=new i.vpe(!0),this.nextFieldEvent=new i.vpe,this.previousFieldEvent=new i.vpe,this.navigationModeChangedEvent=new i.vpe,this.newServerPayloadEvent=new i.vpe,this.newAppointmentPayloadEvent=new i.vpe,this.auditTrailProcessedEvent=new i.vpe,this.newAuditTrailServerInfoEvent=new i.vpe,this.auditTrailInitializeEvent=new i.vpe,this.executeServerActionsEvent=new i.vpe,this.handleActionsEvent=new i.vpe,this.handleActionEvent=new i.vpe,this.selectExternalRecordStart=new i.vpe,this.selectExternalRecordCompleted=new i.vpe}emitExecuteServerActionsEvent(t,e,r,o){this.executeServerActionsEvent.emit({actions:t,controlId:e,eventName:r,shouldApplyPageEvent:o})}emitHandleActionsEvent(t,e){this.handleActionsEvent.emit({actionsEventHandler:t,controlId:e})}emitHandleActionEvent(t,e,r){this.handleActionEvent.emit({actionObj:t,controlId:e,eventName:r})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var T=(()=>{return(n=T||(T={}))[n.Empty=0]="Empty",n[n.Response=1]="Response",n[n.SpecialAnswer=2]="SpecialAnswer",T;var n})(),Ye=(()=>((Ye||(Ye={})).ReceiptPage="ReceiptPage",Ye))(),st=(()=>{return(n=st||(st={}))[n.Route=0]="Route",n[n.Signal=1]="Signal",n[n.Check=2]="Check",n[n.RangeCheck=3]="RangeCheck",st;var n})(),Ke=(()=>{return(n=Ke||(Ke={}))[n.Route=0]="Route",n[n.Reference=1]="Reference",Ke;var n})(),ke=(()=>{return(n=ke||(ke={}))[n.Interviewing=0]="Interviewing",n[n.DataEditing=1]="DataEditing",n[n.None=2]="None",ke;var n})(),At=(()=>{return(n=At||(At={}))[n.Navigation=0]="Navigation",n[n.Insert=1]="Insert",n[n.None=2]="None",At;var n})(),_=(()=>{return(n=_||(_={})).AccessibilityRole="AccessibilityRole",n.Actions="Actions",n.Alignment="Alignment",n.Appearance="Appearance",n.AutoEnter="AutoEnter",n.Background="Background",n.BorderColor="BorderColor",n.CornerRadius="CornerRadius",n.BorderWidth="BorderWidth",n.BrushType="BrushType",n.Cells="Cells",n.CheckName="CheckName",n.Child="Child",n.Children="Children",n.Code="Code",n.ColumnIndex="ColumnIndex",n.ColSpan="ColSpan",n.Columns="Columns",n.CombineStriping="CombineStriping",n.CustomProperties="CustomProperties",n.Elements="Elements",n.Enabled="Enabled",n.Errors="Errors",n.EvenRowColor="EvenRowColor",n.FieldName="FieldName",n.FieldPropertyName="FieldPropertyName",n.Font="Font",n.FontName="FontName",n.GridLines="GridLines",n.GridLineColor="GridLineColor",n.GridLineWidth="GridLineWidth",n.GroupName="GroupName",n.Height="Height",n.HeaderSize="HeaderSize",n.HorizontalAlignment="HorizontalAlignment",n.HorizontalScrollBar="HorizontalScrollBar",n.HorizontalTextAlignment="HorizontalTextAlignment",n.ID="ID",n.InitialVisibility="InitialVisibility",n.IsSimpleText="IsSimpleText",n.IsSkipLinkTarget="IsSkipLinkTarget",n.Kind="Kind",n.LabelFor="LabelFor",n.LabelledBy="LabelledBy",n.LabelInterval="LabelInterval",n.LanguageName="LanguageName",n.Margin="Margin",n.MaximumResultCount="MaximumResultCount",n.Name="Name",n.ObjectKind="ObjectKind",n.OddRowColor="OddRowColor",n.OnClick="OnClick",n.OnGotFocus="OnGotFocus",n.OnLostFocus="OnLostFocus",n.OnMouseEnter="OnMouseEnter",n.OnMouseLeave="OnMouseLeave",n.OnMouseDown="OnMouseDown",n.OnMouseUp="OnMouseUp",n.OnTextChange="OnTextChange",n.OnValueChanged="OnValueChanged",n.Opacity="Opacity",n.Orientation="Orientation",n.Watermark="Watermark",n.ParallelName="ParallelName",n.PasswordChar="PasswordChar",n.PixelHeight="PixelHeight",n.PixelWidth="PixelWidth",n.Reference="Reference",n.RichTextItems="RichTextItems",n.RouteErrorText="RouteErrorText",n.RowHeight="RowHeight",n.RowIndex="RowIndex",n.RowSpan="RowSpan",n.Rows="Rows",n.Runs="Runs",n.ScreenReaderText="ScreenReaderText",n.ScreenReaderTextItems="ScreenReaderTextItems",n.SectionName="SectionName",n.ShowHeaders="ShowHeaders",n.ShowKeyboardFocus="ShowKeyboardFocus",n.SimpleText="SimpleText",n.SkipLinkDescription="SkipLinkDescription",n.SkipLinkIndex="SkipLinkIndex",n.SkipLinkName="SkipLinkName",n.Source="Source",n.SpecialAnswer="SpecialAnswer",n.Stretch="Stretch",n.StrokeColor="StrokeColor",n.StrokeStyle="StrokeStyle",n.StrokeWidth="StrokeWidth",n.StylableProperties="StylableProperties",n.SystemTexts="SystemTexts",n.TabIndex="TabIndex",n.Target="Target",n.TemplateTargetName="TemplateTargetName",n.Text="Text",n.TextElements="TextElements",n.TextMargin="TextMargin",n.ThumbSize="ThumbSize",n.TickPlacement="TickPlacement",n.TicksPerInterval="TicksPerInterval",n.Tooltip="Tooltip",n.TooltipItems="ToolTipItems",n.TrackSize="TrackSize",n.UnitType="UnitType",n.Uri="URI",n.Value="Value",n.VerticalAlignment="VerticalAlignment",n.VerticalScrollbar="VerticalScrollBar",n.VerticalTextAlignment="VerticalTextAlignment",n.Visibility="Visibility",n.Width="Width",_;var n})(),mi=(()=>{return(n=mi||(mi={}))[n.Page=0]="Page",n[n.Question=1]="Question",mi;var n})(),Qe=(()=>{return(n=Qe||(Qe={}))[n.Error=0]="Error",n[n.RouteItemReference=1]="RouteItemReference",Qe;var n})(),Oe=(()=>{return(n=Oe||(Oe={}))[n.Field=0]="Field",n[n.Group=1]="Group",Oe;var n})(),oe=(()=>{return(n=oe||(oe={}))[n.Ask=0]="Ask",n[n.Show=1]="Show",n[n.Keep=2]="Keep",n[n.OffRoute=3]="OffRoute",oe;var n})(),K=(()=>{return(n=K||(K={}))[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.Collapsed=2]="Collapsed",K;var n})();let se=(()=>{class n{constructor(t){this.eventService=t,this._components={},this.eventService.newServerPayloadEvent.subscribe({next:e=>{(e.RootControl||!e.IsVoidResponse)&&(this.components={})}})}get components(){return this._components}set components(t){this._components=t}get componentsAsList(){return Object.keys(this.components).map(t=>this.components[t])}registerComponent(t,e){this.components[t]=e}removeComponent(t){delete this.components[t]}getComponent(t){return t in this.components?this.components[t]:null}getComponentParentId(t){return this.getComponent(t)?.parentId??null}getComponentParent(t){const e=this.getComponentParentId(t);return e?this.getComponent(e):null}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(q))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var I=(()=>{return(n=I||(I={}))[n.String=1]="String",n[n.Real=2]="Real",n[n.Date=4]="Date",n[n.Time=8]="Time",n[n.Enumeration=16]="Enumeration",n[n.Classification=32]="Classification",n[n.Set=128]="Set",n[n.Integer=256]="Integer",n[n.Blob=512]="Blob",I;var n})();class ae{constructor(s){this.DataType=s}static isStringType(s){return s.DataType===I.String}static isIntegerType(s){return-1!==[I.Integer,I.Real].indexOf(s.DataType)}static isRealType(s){return s.DataType===I.Real}static isEnumerationType(s){return-1!==[I.Enumeration,I.Set].indexOf(s.DataType)}static isSetType(s){return s.DataType===I.Set}static isClassificationPseudoType(s){return s.DataType===I.Classification}static isBlobType(s){return s.DataType===I.Blob}}let kt=(()=>{class n{}return n.DATETIME="d-M-yyyy H:mm:ss.SSSZZ",n.DATE="d-M-yyyy",n.TIME="H:mm:ss",n})(),O=(()=>{class n{}return n.DEFAULT_COLOR={R:0,G:0,B:0,A:0},n.SHOW_SPLASH=!0,n.SHOW_SPLASH_DELAY=200,n.API_BASEPATH="api/application/",n.VALUE_SEPARATOR="-",n.DECIMAL_SEPARATOR=".",n.FLOATING_POINT_PRECISION=12,n.FORMAT=kt,n.NUMBER_MAX_LENGTH=18,n.STRING_MAX_SIZE=80,n.OPEN_MAX_LENGTH=255,n.OPEN_MAX_COLS=48,n.OPEN_DEFAULT_COLS=80,n.OPEN_MAX_ROWS=5,n.KEYSTROKE_DEBOUNCE=150,n.MAX_RESULT_COUNT=15,n.PIXEL_TRANSPARENT="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",n.SURVEY_LIST_RETURNFIELD="InstrumentId",n.APPOINTMENT_LIST_RETURNFIELD="AppointmentPrimaryKey",n})();var S=(()=>{return(n=S||(S={}))[n.Ok=0]="Ok",n[n.AnswerRestrictedStringInfo=1]="AnswerRestrictedStringInfo",n[n.AnswerRangeInfo=2]="AnswerRangeInfo",n[n.AnswerNumberInfo=3]="AnswerNumberInfo",n[n.AnswerEnumerationInvalidValue=4]="AnswerEnumerationInvalidValue",n[n.AnswerSetCardinalInfo=5]="AnswerSetCardinalInfo",n[n.TooManyValuesInSet=6]="TooManyValuesInSet",n[n.AnswerSetDuplicateValue=7]="AnswerSetDuplicateValue",n[n.AnswerSetInvalidValue=8]="AnswerSetInvalidValue",n[n.AnswerDateInfo=9]="AnswerDateInfo",n[n.IncompleteDate=10]="IncompleteDate",n[n.AnswerTimeInfo=11]="AnswerTimeInfo",n[n.IncompleteTime=12]="IncompleteTime",n[n.AnswerBlobAnswerMaxSizeExceeded=13]="AnswerBlobAnswerMaxSizeExceeded",n[n.AnswerBlobAnswerInvalidFileType=14]="AnswerBlobAnswerInvalidFileType",S;var n})(),wt=(()=>{return(n=wt||(wt={}))[n.NegativeInfinity=1]="NegativeInfinity",n[n.Number=2]="Number",n[n.PositiveInfinity=4]="PositiveInfinity",wt;var n})(),Bt=(()=>{return(n=Bt||(Bt={}))[n.EmptyButRequired=0]="EmptyButRequired",n[n.AnsweredButOffRoute=1]="AnsweredButOffRoute",Bt;var n})(),dt=(()=>{return(n=dt||(dt={})).errCatiCaseDeliveryDisabled="errCatiCaseDeliveryDisabled",n.errCatiCaseDeliveryDisabledByOperationTimes="errCatiCaseDeliveryDisabledByOperationTimes",n.errCatiCaseRefusedBySelect="errCatiCaseRefusedBySelect",n.errCatiInvalidConfiguration="errCatiInvalidConfiguration",n.errCatiInvalidFieldMapping="errCatiInvalidFieldMapping",n.errCatiKeyAlreadyBeingTreated="errCatiKeyAlreadyBeingTreated",n.errCatiNoSuitableCase="errCatiNoSuitableCase",n.errCatiNotASurveyDay="errCatiNotASurveyDay",n.errCatiNoValidDaybatch="errCatiNoValidDaybatch",n.errInvalidSurveyId="errInvalidSurveyId",n.errKeyExists="errKeyExists",n.errKeyNotFound="errKeyNotFound",n.errNonCatiServer="errNonCatiServer",n.errNonWebSurvey="errNonWebSurvey",n.errReadRecord="errReadRecord",n.errRecordHasActiveSession="errRecordHasActiveSession",n.errRecordLocked="errRecordLocked",n.errServerAccessDenied="errServerAccessDenied",n.errServerParkNameIncorrect="errServerParkNameIncorrect",n.errSessionExpired="errSessionExpired",n.errStartConditionFailed="errStartConditionFailed",n.errSurveyAccessDenied="errSurveyAccessDenied",n.errWriteRecord="errWriteRecord",n.txtAbortPageMessage="txtAbortPageMessage",n.txtAbortPageTitle="txtAbortPageTitle",n.txtAnswerBlobAnswerInvalidFileType="txtAnswerBlobAnswerInvalidFileType",n.txtAnswerBlobAnswerMaxSizeExceeded="txtAnswerBlobAnswerMaxSizeExceeded",n.txtAnswerBlobInfo="txtAnswerBlobInfo",n.txtAnswerClassificationInfo="txtAnswerClassificationInfo",n.txtAnswerDateInfo="txtAnswerDateInfo",n.txtAnswerEnumerationInfo="txtAnswerEnumerationInfo",n.txtAnswerEnumerationInvalidValue="txtAnswerEnumerationInvalidValue",n.txtAnswerNumberInfo="txtAnswerNumberInfo",n.txtAnswerOutOfRange="txtAnswerOutOfRange",n.txtAnswerRangeInfo="txtAnswerRangeInfo",n.txtAnswerRequired="txtAnswerRequired",n.txtAnswerRequiredField="txtAnswerRequiredField",n.txtAnswerRestrictedStringInfo="txtAnswerRestrictedStringInfo",n.txtAnswerSetCardinalInfo="txtAnswerSetCardinalInfo",n.txtAnswerSetDuplicateValue="txtAnswerSetDuplicateValue",n.txtAnswerSetInfo="txtAnswerSetInfo",n.txtAnswerSetInvalidValue="txtAnswerSetInvalidValue",n.txtAnswerStringInfo="txtAnswerStringInfo",n.txtAnswerTimeInfo="txtAnswerTimeInfo",n.txtAppoinmentBlocked="txtAppoinmentBlocked",n.txtAppointment="txtAppointment",n.txtAppointmentInThePast="txtAppointmentInThePast",n.txtAppointmentMaxExceeded="txtAppointmentMaxExceeded",n.txtAppointmentNoSurveyDay="txtAppointmentNoSurveyDay",n.txtAppointmentOk="txtAppointmentOk",n.txtAppointmentOutsideCallWindow="txtAppointmentOutsideCallWindow",n.txtAppointmentPastLastSurveyDay="txtAppointmentPastLastSurveyDay",n.txtAppointmentsInSelectedSlot="txtAppointmentsInSelectedSlot",n.txtAppointmentLoadLow="txtAppointmentLoadLow",n.txtAppointmentLoadMedium="txtAppointmentLoadMedium",n.txtAppointmentLoadHigh="txtAppoinmentLoadHigh",n.txtBack="txtBack",n.txtBlocked="txtBlocked",n.txtBlockedByGeneralOperationTime="txtBlockedByGeneralOperationTime",n.txtBlockedBySpecificOperationTime="txtBlockedBySpecificOperationTime",n.txtBrowserNotSupported="txtBrowserNotSupported",n.txtCancel="txtCancel",n.txtConfirm="txtConfirm",n.txtCurrencySymbol="txtCurrencySymbol",n.txtCurrentResults="txtCurrentResults",n.txtDateWatermark="txtDateWatermark",n.txtDay="txtDay",n.txtDontKnow="txtDontKnow",n.txtDontSuppress="txtDontSuppress",n.txtEnterSearchTerm="txtEnterSearchTerm",n.txtErrorPageMessage="txtErrorPageMessage",n.txtErrorPageTitle="txtErrorPageTitle",n.txtIncompleteDate="txtIncompleteDate",n.txtIncompleteTime="txtIncompleteTime",n.txtIntroPageMessage="txtIntroPageMessage",n.txtIntroPageTitle="txtIntroPageTitle",n.txtInvolvedFields="txtInvolvedFields",n.txtLastSurveyDay="txtLastSurveyDay",n.txtLauncher="txtLauncher",n.txtMaxAllowedAppointments="txtMaxAllowedAppointments",n.txtNext="txtNext",n.txtNextCase="txtNextCase",n.txtNoAnswerExpected="txtNoAnswerExpected",n.txtNoAnswerExpectedField="txtNoAnswerExpectedField",n.txtNoDirectStart="txtNoDirectStart",n.txtNonresponse="txtNonresponse",n.txtNoSurveyDay="txtNoSurveyDay",n.txtNoTimeslotSelected="txtNoTimeslotSelected",n.txtNumberWatermark="txtNumberWatermark",n.txtOk="txtOk",n.txtPage="txtPage",n.txtPrevious="txtPrevious",n.txtPrint="txtPrint",n.txtPrintCompletedData="txtPrintCompletedData",n.txtPrintSuccess="txtPrintSuccess",n.txtQuit="txtQuit",n.txtReceiptPageMessage="txtReceiptPageMessage",n.txtReceiptPageTitle="txtReceiptPageTitle",n.txtRecordHasBeenUpdated="txtRecordHasBeenUpdated",n.txtRefusal="txtRefusal",n.txtReset="txtReset",n.txtResumeInterview="txtResumeInterview",n.txtRetry="txtRetry",n.txtSave="txtSave",n.txtSearch="txtSearch",n.txtSearchReturned="txtSearchReturned",n.txtSearchTerm="txtSearchTerm",n.txtSelect="txtSelect",n.txtSelected="txtSelected",n.txtSelectedTimeslot="txtSelectedTimeslot",n.txtSelectedValue="txtSelectedValue",n.txtSelectRow="txtSelectRow",n.txtStart="txtStart",n.txtSuppress="txtSuppress",n.txtSurveyDaysInfo="txtSurveyDaysInfo",n.txtSurveyDaysLeftAfterCurrentPeriod="txtSurveyDaysLeftAfterCurrentPeriod",n.txtSurveyDaysLeftBeforeCurrentPeriod="txtSurveyDaysLeftBeforeCurrentPeriod",n.txtSurveyDaysLeftTotal="txtSurveyDaysLeftTotal",n.txtSurveyNotActive="txtSurveyNotActive",n.txtTextElementNotFound="txtTextElementNotFound",n.txtTimelineDay="txtTimelineDay",n.txtTimelineWeek="txtTimelineWeek",n.txtTimeWatermark="txtTimeWatermark",n.txtTooManyValuesInSet="txtTooManyValuesInSet",n.txtTotalAppointments="txtTotalAppointments",n.txtValueAboveMaximum="txtValueAboveMaximum",n.txtValueBelowMinimum="txtValueBelowMinimum",n.txtWeek="txtWeek",n.txtAppointmentDateType="txtAppointmentDateType",n.txtAppointmentDateFrom="txtAppointmentDateFrom",n.txtAppointmentDateTo="txtAppointmentDateTo",n.txtAppointmentExactDate="txtAppointmentExactDate",n.txtAppointmentWeekday="txtAppointmentWeekday",n.txtAppointmentPeriod="txtAppointmentPeriod",n.txtAppointmentNoPreference="txtAppointmentNoPreference",n.txtAppointmentTime="txtAppointmentTime",n.txtAppointmentTimeFrom="txtAppointmentTimeFrom",n.txtAppointmentTimeTo="txtAppointmentTimeTo",n.txtAppointmentNoTime="txtAppointmentNoTime",n.txtAppointmentExactTime="txtAppointmentExactTime",n.txtAppointmentDayPart="txtAppointmentDayPart",n.txtAppointmentSoft="txtAppointmentSoft",n.txtAppointmentMedium="txtAppointmentMedium",n.txtAppointmentHard="txtAppointmentHard",n.txtAppointmentSettingsNotSupported="txtAppointmentSettingsNotSupported",dt;var n})();class le{constructor(){this.sanitize=(s,t)=>s}convertToString(s){return s?.DataValue.ValueAsString??""}setNormalAnswer(s,t){const e=JSON.parse(JSON.stringify(t));t.DataValue.SpecialAnswer="",t.DataValue.AnswerStatus=s?T.Response:T.Empty,t.DataValue.ValueAsString=s||null,t.DataValue.IsDirty||(t.DataValue.IsDirty=e.DataValue.AnswerStatus===T.Empty&&!e.IsVisited&&t.DataValue.AnswerStatus===T.Empty||!this.isEqual(e,t)),this.applyErrors(s,t)}setEmptyAnswer(s){const t=JSON.parse(JSON.stringify(s));s.DataValue.SpecialAnswer="",s.DataValue.AnswerStatus=T.Empty,s.DataValue.ValueAsString=null,s.DataValue.IsDirty||(s.DataValue.IsDirty=!(t.DataValue.AnswerStatus!==T.Empty&&!t.IsVisited&&s.DataValue.AnswerStatus===T.Empty||this.isEqual(t,s)))}setSpecialAnswer(s,t){const e=JSON.parse(JSON.stringify(t));t.DataValue.SpecialAnswer=s,t.DataValue.AnswerStatus=s?T.SpecialAnswer:T.Empty,this.removeRangeCheckErrors(t),t.DataValue.ValueAsString=null,t.DataValue.IsDirty||(t.DataValue.IsDirty=!(e.DataValue.AnswerStatus===T.Empty&&!e.IsVisited&&t.DataValue.AnswerStatus===T.Empty||this.isEqual(e,t))),this.applyErrors(s,t)}getNormalAnswerAsString(s){let t="";return s.DataValue.AnswerStatus===T.Response&&String.hasValue(s.DataValue.ValueAsString)&&(t=s.DataValue.ValueAsString),t}getSpecialAnswerAsString(s){let t="";return s.DataValue.AnswerStatus===T.SpecialAnswer&&String.hasValue(s.DataValue.SpecialAnswer)&&(t=s.DataValue.SpecialAnswer),t}getAnswerAsString(s){let t="";return s.DataValue.AnswerStatus===T.Response&&String.hasValue(s.DataValue.ValueAsString)?t=s.DataValue.ValueAsString:s.DataValue.AnswerStatus===T.SpecialAnswer&&String.hasValue(s.DataValue.SpecialAnswer)&&(t=s.DataValue.SpecialAnswer),t}autoEnter(s,t){return!(s.DataValue.AnswerStatus===T.Empty||String.isNullOrEmpty(s.DataValue.ValueAsString))}hasRanges(s){return Array.isPopulated(s.Ranges)}getMaxFieldLength(s){const t=O.NUMBER_MAX_LENGTH;return Math.max(0,Math.min(null!=s.MaxLength&&s.MaxLength>0?s.MaxLength:this.hasRanges(s)&&this.getMaxRangeLength(s)||t,t))}hasNegativeRange(s){if(Array.isPopulated(s.Ranges)){const t=this.getLowerBound(s);return null!=t&&t<0}return!1}isNegativeOnlyRange(s){if(Array.isPopulated(s.Ranges)){const t=this.getUpperBound(s);return null!=t&&t<0}return!1}getLowerBound(s){if(null!=s.MaxLength&&s.MaxLength>0)return ae.isRealType(s)&&null!=s.Decimals&&s.Decimals>0?parseFloat(`-${"9".repeat(s.MaxLength-2-s.Decimals)}.${"9".repeat(s.Decimals)}`):parseInt(`-${"9".repeat(s.MaxLength-1)}`,10);if(Array.isPopulated(s.Ranges)){const t=O.NUMBER_MAX_LENGTH;if(-1!==s.Ranges.findIndex(r=>r.MinValue.Kind===wt.NegativeInfinity))return ae.isRealType(s)&&null!=s.Decimals&&s.Decimals>0?parseFloat(`-${"9".repeat(t-2-s.Decimals)}.${"9".repeat(s.Decimals)}`):parseInt(`-${"9".repeat(t-1)}`,10);const e=s.Ranges.filter(r=>r.MinValue.Kind===wt.Number);if(e)return Math.min(...e.map(r=>r.MinValue.Value))}}getUpperBound(s){if(null!=s.MaxLength&&s.MaxLength>0)return ae.isRealType(s)&&null!=s.Decimals&&s.Decimals>0?parseFloat(`${"9".repeat(s.MaxLength-1-s.Decimals)}.${"9".repeat(s.Decimals)}`):parseInt("9".repeat(s.MaxLength),10);if(Array.isPopulated(s.Ranges)){const t=O.NUMBER_MAX_LENGTH;if(-1!==s.Ranges.findIndex(r=>r.MaxValue.Kind===wt.PositiveInfinity))return ae.isRealType(s)&&null!=s.Decimals&&s.Decimals>0?parseFloat(`${"9".repeat(t-1-s.Decimals)}.${"9".repeat(s.Decimals)}`):parseInt("9".repeat(t),10);const e=s.Ranges.filter(r=>r.MinValue.Kind===wt.Number);if(e)return Math.max(...e.map(r=>r.MaxValue.Value))}}isInRange(s,t,e=!0,r=!0){if(Array.isPopulated(t.Ranges))for(let o=0,a=t.Ranges.length;o<a;o++){const l=t.Ranges[o];if(e&&l.MinValue.Kind===wt.Number&&s<l.MinValue.Value||r&&l.MaxValue.Kind===wt.Number&&s>l.MaxValue.Value)return!1}return!0}removeRangeCheckErrors(s){let t=0;if(s.Errors.isEmpty())return t;let e=s.Errors.findIndex(r=>r.ErrorKind===st.RangeCheck&&r.IsRelevant);for(;e>-1;)s.Errors.splice(e,1),t++,e=s.Errors.findIndex(r=>r.ErrorKind===st.RangeCheck&&r.IsRelevant);return t}applyErrors(s,t){const e=this.isValid(s,t.ValueType);if(t.DataValue.AnswerStatus===T.Response){if(e!==S.Ok){const r=this.getInvalidValue(s,t);return this.setRangeCheckError(e,r,t),!0}if(this.removeRangeCheckErrors(t)>0)return!0}else if(t.DataValue.AnswerStatus===T.SpecialAnswer&&!t.SpecialAnswers?.find(o=>o===s))return!0;return this.applyRouteErrors(s,t)}setRangeCheckError(s,t,e){this.removeRangeCheckErrors(e);const r={ErrorKind:st.RangeCheck,IsRelevant:!0,InvalidValue:t,IsSuppressed:!1,Key:this.getRangeCheckKey(s),Name:"",RouteErrorCause:Bt.EmptyButRequired};e.Errors.unshift(r)}isEnumerationType(s){return s.DataType===I.Enumeration}getInvalidValue(s,t){return""}getMaxRangeLength(s){const t=O.NUMBER_MAX_LENGTH;let e=0;if(Array.isPopulated(s.Ranges))for(let r=0,o=s.Ranges.length;r<o;r++){const a=s.Ranges[r],l=a.MinValue.Value,c=a.MinValue.Kind===wt.Number,d=l.toString(),u=a.MaxValue.Value,h=a.MaxValue.Kind===wt.Number,m=a.MaxValue.Value.toString();let f=0,w=0;if(ae.isRealType(s))if(s.Decimals)f=w=s.Decimals;else{const j=d.indexOf(".");f=c&&-1!==j?d.substring(j+1).length:0;const H=m.indexOf(".");w=h&&-1!==H?m.substring(H+1).length:0}const D=c?f?l.toFixed(f).length:d.length:t,G=h?w?u.toFixed(w).length:m.length:t,B=Math.max(D,G);if(B>=t)return t;B>e&&(e=B)}return e}applyRouteErrors(s,t){if(t.Errors.isEmpty())return!1;const e=t.Errors.findIndex(r=>r.ErrorKind===st.Route);return e>-1&&(String.isNullOrEmpty(s)?t.Errors[e].RouteErrorCause===Bt.AnsweredButOffRoute?t.Errors[e].IsRelevant=!1:t.IsVisited&&t.DataValue.AnswerStatus===T.Empty&&(t.Errors[e].IsRelevant=!0):t.Errors[e].RouteErrorCause===Bt.EmptyButRequired&&(t.Errors[e].IsRelevant=!1),!0)}getRangeCheckKey(s){switch(s){case S.Ok:return dt.txtOk;case S.AnswerDateInfo:return dt.txtAnswerDateInfo;case S.AnswerEnumerationInvalidValue:return dt.txtAnswerEnumerationInvalidValue;case S.AnswerNumberInfo:return dt.txtAnswerNumberInfo;case S.AnswerRangeInfo:return dt.txtAnswerRangeInfo;case S.AnswerRestrictedStringInfo:return dt.txtAnswerRestrictedStringInfo;case S.AnswerSetCardinalInfo:return dt.txtAnswerSetCardinalInfo;case S.AnswerSetDuplicateValue:return dt.txtAnswerSetDuplicateValue;case S.AnswerSetInvalidValue:return dt.txtAnswerSetInvalidValue;case S.AnswerTimeInfo:return dt.txtAnswerTimeInfo;case S.IncompleteDate:return dt.txtIncompleteDate;case S.TooManyValuesInSet:return dt.txtTooManyValuesInSet;case S.AnswerBlobAnswerInvalidFileType:return dt.txtAnswerBlobAnswerInvalidFileType;case S.AnswerBlobAnswerMaxSizeExceeded:return dt.txtAnswerBlobAnswerMaxSizeExceeded}return""}isEqual(s,t){return JSON.stringify(s)===JSON.stringify(t)}}let fi=(()=>{class n extends le{constructor(){super()}convertToString(t){return t?.DataValue.ValueAsString??""}convertFromString(t,e){this.setNormalAnswer(t,e)}isValid(t,e){return S.Ok}isAllowed(t,e){return S.Ok}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var L=U(1837),W=(()=>{return(n=W||(W={})).year="year",n.quarter="quarter",n.month="month",n.week="week",n.day="day",n.hour="hour",n.minute="minute",n.second="second",n.millisecond="millisecond",W;var n})();let Wt=(()=>{class n{get cultureInfo(){return this._cultureInfo}set cultureInfo(t){t&&(this._cultureInfo=Object.assign(t,{ShortDatePattern:this.parseShortDateFormat(t),ShortDatePatternLuxon:this.parseShortDateFormatLuxon(t),ShortTimePattern:this.parseShortTimeFormat(t)}))}getShortCultureId(t){return t.split("-")[0]}parseShortDateFormat(t){let e=t.ShortDatePattern;return-1!==e.indexOf("yyyyy")?e=e.replace("yyyyy","Y"):-1!==e.indexOf("yyyy")?e=e.replace("yyyy","YYYY"):-1!==e.indexOf("yyy")?e=e.replace("yyy","YYYY"):-1!==e.indexOf("yy")?e=e.replace("yy","YY"):-1!==e.indexOf("y")&&(e=e.replace("y","YY")),-1===e.indexOf("dddd")&&-1===e.indexOf("ddd")&&(-1!==e.indexOf("dd")?e=e.replace("dd","DD"):-1!==e.indexOf("d")&&(e=e.replace("d","D"))),e}parseShortDateFormatLuxon(t){let e=t.ShortDatePattern;return-1!==e.indexOf("YYYYYY")?e=e.replace("YYYYYY","yyyyyy"):-1!==e.indexOf("YYYYY")?e=e.replace("YYYYY","yyyyy"):-1!==e.indexOf("YYYY")?e=e.replace("YYYY","yyyy"):-1!==e.indexOf("YY")?e=e.replace("YY","yy"):-1!==e.indexOf("Y")&&(e=e.replace("Y","y")),-1!==e.indexOf("mmmm")?e=e.replace("mmmm","MMMM"):-1!==e.indexOf("mmm")?e=e.replace("mmm","MMM"):-1!==e.indexOf("mm")?e=e.replace("mm","MM"):-1!==e.indexOf("m")&&(e=e.replace("m","M")),-1!==e.indexOf("DD")?e=e.replace("DD","d"):-1!==e.indexOf("D")&&(e=e.replace("D","d")),e}parseShortTimeFormat(t){let e=t.ShortTimePattern;return-1!==e.indexOf("tt")?e=e.replace("tt","a"):-1!==e.indexOf("A")&&(e=e.replace("A","a")),e}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Hi=(()=>{class n extends le{constructor(t){super(),this.cultureInfoService=t,this.isSame=(e,r,o)=>{const a=L.ou.fromFormat(e,r);return!!a.isValid&&L.ou.fromFormat(o.DataValue.ValueAsString??"",kt.DATE).startOf(W.day).equals(a.startOf(W.day))}}get cultureInfo(){return this.cultureInfoService.cultureInfo}get sanitizedShortDateFormat(){return this.cultureInfo.ShortDatePattern.replace(/([dD])+/g,"d").replace(/([mM])+/g,"M").replace(/([yY])+/g,"y")}convertToDateTime(t){return t.DataValue&&t.DataValue.ValueAsString?t.ValueType.IncludeTime?-1!==t.DataValue.ValueAsString.indexOf(" ")?L.ou.fromFormat(t.DataValue.ValueAsString,kt.DATETIME):L.ou.fromFormat(`${t.DataValue.ValueAsString} 00:00:00`,kt.DATETIME):L.ou.fromFormat(t.DataValue.ValueAsString,kt.DATE):null}setDate(t,e){const r=e.ValueType,o="string"==typeof t?t:null,a="string"!=typeof t?t:L.ou.fromFormat(t,this.sanitizedShortDateFormat);let l="";if(a)if(r.IncludeTime){const c=e?.DataValue.ValueAsString;if(null!=c&&c.length>0&&c.indexOf(" ")>-1){const d=L.ou.fromFormat(c,kt.DATETIME);l=Object.assign({},a).set({second:d.second,minute:d.minute,hour:d.hour}).toFormat(kt.DATETIME)}else a.isValid&&this.dateIsWithinRange(a,r)&&this.dateIsEnabled(a,r)&&(l=a.startOf(W.day).toFormat(kt.DATETIME))}else a.isValid&&this.dateIsWithinRange(a,r)&&this.dateIsEnabled(a,r)&&(l=a.toFormat(kt.DATE));!l&&o&&(l=o),this.setNormalAnswer(l,e)}isValid(t,e){const o="string"==typeof t?t:null,a="string"!=typeof t?t:0===t.length?null:e.IncludeTime&&t.indexOf(" ")>=0?L.ou.fromFormat(t,O.FORMAT.DATETIME):t.indexOf("-")>=0?L.ou.fromFormat(t,O.FORMAT.DATE):L.ou.fromFormat(t,this.sanitizedShortDateFormat);if(null!=o&&0===t.length)return S.Ok;if(null!=a){if(!a.isValid)return S.AnswerDateInfo;if(!this.dateIsWithinRange(a,e))return S.AnswerRangeInfo}return S.Ok}applyErrors(t,e){const r=null==t?"":"string"==typeof t?t:t.toFormat(kt.DATE);return super.applyErrors(r,e)}isAllowed(t,e){return S.Ok}dateIsEnabled(t,{EnabledDays:e,DisabledDays:r,DayFilter:o}){let a=!0;return-1===o.split(",").map(Number).indexOf(t.weekday%7)&&(a=!1),a&&r.forEach(function(c){const d=L.ou.fromMillis(c).startOf(W.day),u=L.ou.fromMillis(c).startOf(W.day);d.equals(u)&&(a=!1)}),a||e.forEach(c=>{const d=L.ou.fromMillis(c).startOf(W.day),u=L.ou.fromMillis(c).startOf(W.day);d.equals(u)&&(a=!0)}),a}dateIsWithinRange(t,{MinDate:e,MaxDate:r}){return this.dateIsAfterMinDate(t,e)&&this.dateIsBeforeMaxDate(t,r)}dateIsAfterMinDate(t,e){return null==e||t.startOf(W.day)>=L.ou.fromMillis(e).startOf(W.day)}dateIsBeforeMaxDate(t,e){return null==e||t.startOf(W.day)<=L.ou.fromMillis(e).startOf(W.day)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Wt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),ce=(()=>{class n extends le{constructor(){super()}isSelected(t,e){return t.DataValue.ValueAsString===e.toString()}isSelectedSpecial(t,e){return t.DataValue.SpecialAnswer===e}setSelected(t,e){isNaN(e)?this.setEmptyAnswer(t):this.setNormalAnswer(e.toString(),t)}autoEnter(t){return t.DataValue.AnswerStatus===T.Response?!String.isNullOrEmpty(t.DataValue.ValueAsString):t.DataValue.AnswerStatus===T.SpecialAnswer&&!String.isNullOrEmpty(t.DataValue.SpecialAnswer)}categoryExists(t,e){return!(!this.isEnumerationType(t.ValueType)||Array.isNullOrEmpty(t.ValueType.Categories))&&null!=(t.ValueType.Categories?t.ValueType.Categories.find(o=>o.Code===e):void 0)}isValid(t,e){return t.length<1?S.Ok:e.Categories&&null==e.Categories.find(o=>o.Code.toString()===t)?S.AnswerEnumerationInvalidValue:S.Ok}isAllowed(t,e){return t.length<1?S.Ok:e.Categories&&null==e.Categories.find(o=>0===o.Code.toString().indexOf(t))?S.AnswerEnumerationInvalidValue:S.Ok}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Je=(()=>{class n extends le{constructor(){super(...arguments),this.integerCharValidator=/^[-]?[\d]*$/,this.sanitize=(t,e)=>{if(t.isEmpty())return"";const r=parseFloat(t);return isNaN(r)?"":Math.round(r).toString()},this.addThousandSeparators=(t,e,r,o=0)=>{const a=-1===[".",","].indexOf(r)?`.,${r}`:".,",c=new RegExp(`^[-]?[0]*[${a}]?[0]*$`).test(t),d=parseFloat(t.replace(r,O.DECIMAL_SEPARATOR));return c||isNaN(d)?t:d.toLocaleString(e,0===o?{maximumSignificantDigits:18}:{maximumFractionDigits:18,minimumFractionDigits:o})},this.removeThousandSeparators=(t,e,r,o)=>{if(!t)return t;const a=t.split(e);if(o&&e===r){const l=a.pop();return a.join("")+r+l}return a.join("")},this.addThousandSeparatorsToNonDecimalPartOfValue=(t,e)=>t.length<=3?t:this.addThousandSeparatorsToNonDecimalPartOfValue(t.substring(0,t.length-3),e)+e+t.substring(t.length-3)}convertToString(t){return t?.DataValue.ValueAsString??""}convertFromString(t,e){this.setNormalAnswer(t,e)}isValid(t,e){if(String.isNullOrEmpty(t))return S.Ok;const r=this.isAllowed(t,e);if(r!==S.Ok)return r;const o=this.hasRanges(e);return"-"===t?o?S.AnswerRangeInfo:S.AnswerNumberInfo:o&&!this.isInRange(parseFloat(t),e)?S.AnswerRangeInfo:S.Ok}isAllowed(t,e){if(String.isNullOrEmpty(t))return S.Ok;const r=this.hasRanges(e);if(!this.integerCharValidator.test(t))return r?S.AnswerRangeInfo:S.AnswerNumberInfo;const o=this.getMaxFieldLength(e);if(t.length>o)return r?S.AnswerRangeInfo:S.AnswerNumberInfo;const a=!r||this.hasNegativeRange(e),l=t.split("-").length-1;return!a&&l>0||a&&(t.indexOf("-")>0||l>1)?r?S.AnswerRangeInfo:S.AnswerNumberInfo:a&&o>1&&"-"===t?S.Ok:1===o&&"-"===t?r?S.AnswerRangeInfo:S.AnswerNumberInfo:S.Ok}autoEnter(t){if(String.isNullOrEmpty(t.DataValue.ValueAsString))return!1;const e=this.getMaxFieldLength(t.ValueType);return t.DataValue.ValueAsString?.length===e}}return n.\u0275fac=function(){let s;return function(e){return(s||(s=i.n5z(n)))(e||n)}}(),n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Ot=U(4668);let bi=(()=>{class n extends Je{constructor(t){super(),this.cultureInfoService=t,this.realCharValidator=new RegExp("^[-]?[\\d]*[.,]?[\\d]*$"),this.decimalSeparator=O.DECIMAL_SEPARATOR,this.sanitize=(e,r)=>{if(String.isNullOrEmpty(e))return"";if((e.match(/^-[.,]$/)||e===`-${this.decimalSeparator}`)&&(e="-0."),Object.is(parseFloat(e),-0)&&(e="0"),r.Decimals&&r.Decimals>0)return(0,Ot.Z)(e).toFixed(r.Decimals).substring(0,18).replace(".",this.decimalSeparator);if(""!==e&&r.Ranges&&r.Ranges[0]){const o=r.Ranges[0];if(this.rangeHasDecimals(o)){const a=this.getDecimalsOfRange(o);return(0,Ot.Z)(e).toFixed(a).substring(0,18).replace(".",this.decimalSeparator)}}return e.substring(0,18)},this.maxDecimalsReached=e=>{const r=e.ValueType;if(r.Decimals&&r.Decimals>0&&String.hasValue(e.DataValue.ValueAsString)){const o=parseFloat(e.DataValue.ValueAsString);if(!isNaN(o)){const a=e.DataValue.ValueAsString.match(/(?:\.(\d+))?$/);if(null!=a)return Math.max(0,a[1]?a[1].length:0)>=r.Decimals}}return!1},this.rangeHasDecimals=e=>!(Number.isInteger(e.MinValue.Value)&&Number.isInteger(e.MaxValue.Value))}setDecimalSeparator(t){this.decimalSeparator=t,[".",","].indexOf(t)<0&&(this.realCharValidator=new RegExp(`^[-]?[\\d]*[,.${t}]?[\\d]*$`))}convertToString(t){if(!String.isNullOrEmpty(t?.DataValue.ValueAsString)){const e=t.ValueType;let r=t.DataValue.ValueAsString;if(String.hasValue(r)){if(e.Decimals&&e.Decimals>0){const o=parseFloat(r.replace(this.decimalSeparator,O.DECIMAL_SEPARATOR));isNaN(o)||(r=o.toFixed(e.Decimals))}return r=r.replace(O.DECIMAL_SEPARATOR,this.decimalSeparator),r}}return""}convertFromString(t,e){const r=this.replaceSeparators(t);super.convertFromString(r,e)}autoEnter(t){if(!String.hasValue(t.DataValue.ValueAsString))return!1;const r=this.getMaxFieldLength(t.ValueType),o=this.maxDecimalsReached(t);return t.DataValue.ValueAsString.length===r||o}isValid(t,e){if(String.isNullOrEmpty(t))return S.Ok;const r=this.isAllowed(t,e);if(r!==S.Ok)return r;t=this.replaceSeparators(t);const o=this.hasRanges(e);return"-"===t?o?S.AnswerRangeInfo:S.AnswerNumberInfo:o&&!this.isInRange(parseFloat(t),e)?S.AnswerRangeInfo:S.Ok}isAllowed(t,e){if(String.isNullOrEmpty(t))return S.Ok;t=this.validationSanitize(t);const r=O.DECIMAL_SEPARATOR,o=this.hasRanges(e);if(!this.realCharValidator.test(t))return o?S.AnswerRangeInfo:S.AnswerNumberInfo;const a=this.getMaxFieldLength(e);if(t.length>a||t.length===a&&t.endsWith(r))return o?S.AnswerRangeInfo:S.AnswerNumberInfo;const l=this.fixedDecimals(e),c=o&&this.hasNegativeRange(e),d=a>1&&(0===l||l<a-2)&&(!o||c);if(d&&"-"===t)return S.Ok;const u=this.isNegativeOnlyRange(e);if(o&&u&&!t.startsWith("-"))return S.AnswerNumberInfo;const h=t.split(r),m=1===h.length;if(l>0&&(m?h[1]="0".repeat(l):h[1].length<l&&(h[1]+="0".repeat(l-h[1].length)),h.join(".").length>a))return o?S.AnswerRangeInfo:S.AnswerNumberInfo;const f=t.split("-").length-1;if(!d&&f>0)return o?S.AnswerRangeInfo:S.AnswerNumberInfo;const w=this.maxDecimals(e);if(0===w&&-1!==t.indexOf(r))return o?S.AnswerRangeInfo:S.AnswerNumberInfo;if(t===r||t===`-${r}`)return S.Ok;if(w>0&&!m&&h[1].length>w)return o?S.AnswerRangeInfo:S.AnswerNumberInfo;const D=parseFloat(t);return isNaN(D)?o?S.AnswerRangeInfo:S.AnswerNumberInfo:S.Ok}replaceSeparators(t){return t.replace(",",O.DECIMAL_SEPARATOR)}fixedDecimals(t){return ae.isRealType(t)&&t.Decimals&&t.Decimals>0?t.Decimals:0}maxDecimals(t){if(ae.isRealType(t)){const e=O.NUMBER_MAX_LENGTH;if(t.Decimals&&t.Decimals>0)return t.Decimals;if(t.MaxLength&&t.MaxLength>0)return t.MaxLength-2;if(Array.isPopulated(t.Ranges)){let r=0;for(let o=0,a=t.Ranges.length;o<a;o++){const l=t.Ranges[o],c=l.MinValue.Kind===wt.Number?this.getDecimalsOfValue(l.MinValue.Value):e-2,d=l.MaxValue.Kind===wt.Number?this.getDecimalsOfValue(l.MaxValue.Value):e-2,u=Math.max(c,d);u>r&&(r=u)}return r}return e-2}return 0}getDecimalsOfRange(t){return this.rangeHasDecimals(t)?Math.max(this.getDecimalsOfValue(t.MinValue.Value),this.getDecimalsOfValue(t.MaxValue.Value),0):0}getDecimalsOfValue(t){const e=t.toString().match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}validationSanitize(t){return String.isNullOrEmpty(t)?"":((t=t.replace(",",O.DECIMAL_SEPARATOR)).startsWith("-.")&&(t=t.replace("-.","-0.")),t.startsWith(".")&&(t=t.replace(".","0.")),t)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Wt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var vi=(()=>{return(n=vi||(vi={}))[n.Name=0]="Name",n[n.LocalName=1]="LocalName",vi;var n})();let Jt=(()=>{class n{constructor(t,e){this.platformLocation=t,this.renderStateService=e,this.getBaseResourceFolder=(r="")=>this.getBaseHref(!0,r)+"Resources/",this.getBaseHref=(r,o)=>{String.hasValue(o)||(o=this.renderStateService.surveyRoot);let a=String.hasValue(o)?o.startsWith("/")?o:`/${o}`:this.platformLocation.getBaseHrefFromDOM();return r&&(a=a.endsWith("debug")?a.substring(0,a.length-5):a),a.endsWith("/")?a:`${a}/`},this.compare=(r,o)=>(new kr).do(r,o),this.kebabCase=r=>r.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)?.join("-").toLowerCase()??""}generateStyleCssLink(t,e,r,o){const a=[];e&&(a[a.length]=e),r&&(a[a.length]=r),o&&(a[a.length]=o);const l=a.join("-");return this.getBaseResourceFolder(t)+l+".css"}convertStyleObjectToString(t){const e=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(`${this.kebabCase(r)}: ${t[r]};`);return e.join("")}addClass(t,e){t.classList?t.classList.add(e):t.className+=` ${e}`}removeClass(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(^|\\b)${e.split(" ").join("|")}(\\b|$)`,"gi")," ")}getInvolvedFieldName(t,e){if(null!=t){let r=t.Name;if(!String.isNullOrEmpty(r)&&e===vi.LocalName){const o=r.lastIndexOf(".");-1!==o&&(r=r.substring(o+1))}return r}return""}separateCategories(t,e="-",r="a"){const o=O.VALUE_SEPARATOR;let a=[];if(t){const l=o+e,c=t.startsWith(e),d=t.indexOf(l)>-1;if((c||d)&&(c&&(t=t.replace(o,r)),d)){const u=o+r;t=t.split(l).join(u)}a=t.split(o)}return a.map(l=>l.replace(r,e))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(g.lw),i.LFG(ut))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();class kr{constructor(){this._aLines=[],this._bLines=[],this._result=[],this._deleted=0,this._inserted=0,this._aMove=[],this._aMoveIndex=[],this._bMove=[],this._bMoveIndex=[],this.do=(s,t,e)=>{let r;return this._aLines=s,this._bLines=t,this._diffPlusFlag=e,this.recurseLCS(0,this._aLines.length-1,0,this._bLines.length-1),r=this._diffPlusFlag?{lines:this._result,lineCountDeleted:this._deleted,lineCountInserted:this._inserted,lineCountMoved:0,aMove:this._aMove,aMoveIndex:this._aMoveIndex,bMove:this._bMove,bMoveIndex:this._bMoveIndex}:{lines:this._result,lineCountDeleted:this._deleted,lineCountInserted:this._inserted,lineCountMoved:0},this.reset(),r},this.reset=()=>{this._result=[],this._deleted=0,this._inserted=0,this._aMove=[],this._aMoveIndex=[],this._bMove=[],this._bMoveIndex=[]},this.findUnique=(s,t,e)=>{const r=new Map;for(let o=t;o<=e;o++){const a=s[o];r.has(a)?(r.get(a).count++,r.get(a).index=o):r.set(a,{count:1,index:o})}return r.forEach((o,a,l)=>{1!==o.count?l.delete(a):l.set(a,o.index)}),r},this.uniqueCommon=(s,t,e,r,o,a)=>{const l=this.findUnique(s,t,e),c=this.findUnique(r,o,a);return l.forEach((d,u,h)=>{c.has(u)?h.set(u,{indexA:d,indexB:c.get(u)}):h.delete(u)}),l},this.longestCommonSubsequence=s=>{const t=[];s.forEach(r=>{let o=0;for(;t[o]&&t[o][t[o].length-1].indexB<r.indexB;)o++;t[o]||(t[o]=[]),0<o&&(r.prev=t[o-1][t[o-1].length-1]),t[o].push(r)});let e=[];if(0<t.length){const r=t.length-1;for(e=[t[r][t[r].length-1]];e[e.length-1].prev;)e.push(e[e.length-1].prev)}return e.reverse()},this.addToResult=(s,t)=>{t<0?(this._aMove.push(this._aLines[s]),this._aMoveIndex.push(this._result.length),this._deleted++):s<0&&(this._bMove.push(this._bLines[t]),this._bMoveIndex.push(this._result.length),this._inserted++),this._result.push({line:0<=s?this._aLines[s]:this._bLines[t],aIndex:s,bIndex:t})},this.addSubMatch=(s,t,e,r)=>{for(;s<=t&&e<=r&&this._aLines[s]===this._bLines[e];)this.addToResult(s++,e++);const o=t;for(;s<=t&&e<=r&&this._aLines[t]===this._bLines[r];)t--,r--;const a=this.uniqueCommon(this._aLines,s,t,this._bLines,e,r);if(0===a.size){for(;s<=t;)this.addToResult(s++,-1);for(;e<=r;)this.addToResult(-1,e++)}else this.recurseLCS(s,t,e,r,a);for(;t<o;)this.addToResult(++t,++r)},this.recurseLCS=(s,t,e,r,o)=>{const a=this.longestCommonSubsequence(o||this.uniqueCommon(this._aLines,s,t,this._bLines,e,r));if(a.isEmpty())this.addSubMatch(s,t,e,r);else{let l;for((s<a[0].indexA||e<a[0].indexB)&&this.addSubMatch(s,a[0].indexA-1,e,a[0].indexB-1),l=0;l<a.length-1;l++)this.addSubMatch(a[l].indexA,a[l+1].indexA-1,a[l].indexB,a[l+1].indexB-1);(a[l].indexA<=t||a[l].indexB<=r)&&this.addSubMatch(a[l].indexA,t,a[l].indexB,r)}}}}let de=(()=>{class n extends le{constructor(t){super(),this.helperService=t,this.minusSign="-"}getSelected(t){return t.DataValue&&String.hasValue(t.DataValue.ValueAsString)?this.helperService.separateCategories(t.DataValue.ValueAsString):[]}isSelected(t,e){return this.getSelected(t).indexOf(e.toString())>-1}isSelectedSpecial(t,e){return t.DataValue.SpecialAnswer===e}toggleCategory(t,e){return this.isSelected(t,e)?(this.removeCategory(t,e),!0):this.addCategory(t,e)}addCategory(t,e){if(!this.canAdd(t,e))return!1;const r=this.getSelected(t);return r.push(e.toString()),this.setAnswer(t,r),!0}removeCategory(t,e){const r=this.getSelected(t),o=r.indexOf(e.toString());o>-1&&(r.splice(o,1),this.setAnswer(t,r))}autoEnter(t){if(t.DataValue.AnswerStatus===T.Response){const e=this.getSelected(t),r=t.ValueType;if(r.Cardinality&&r.Cardinality>0)return e.length>=r.Cardinality;if(r.Categories)return r.Categories.length===e.length}else if(t.DataValue.AnswerStatus===T.SpecialAnswer)return!String.isNullOrEmpty(t.DataValue.SpecialAnswer);return!1}setAnswerFromString(t,e){this.setEmptyAnswer(e);const r=this.helperService.separateCategories(t);for(let o=0,a=r.length;o<a;o++)this.addCategory(e,parseInt(r[o],10))}isValid(t,e){if(String.isNullOrEmpty(t))return S.Ok;const r=this.isAllowed(t,e);if(r!==S.Ok)return r;const o=this.helperService.separateCategories(t);for(let l=0,c=o.length;l<c;l++)if(e.Categories&&o[l].length>0&&!e.Categories.find(u=>u.Code.toString()===o[l]))return S.AnswerSetInvalidValue;return this.getDuplicateValues(o).length>0?S.AnswerSetDuplicateValue:e.Categories&&o.length>e.Categories.length?S.AnswerSetInvalidValue:e.Cardinality&&e.Cardinality>0&&o.length>e.Cardinality?S.TooManyValuesInSet:S.Ok}isAllowed(t,e){if(t.length<1)return S.Ok;const r=S.AnswerSetInvalidValue,o=O.VALUE_SEPARATOR,a=o+o;if(o!==this.minusSign){const c=this.minusSign+o;if(t.indexOf(a)>-1||t.indexOf(c)>-1)return r}else{const c=a+o;if(t.startsWith(a)||t.indexOf(c)>-1)return r}const l=this.helperService.separateCategories(t);for(let c=0,d=l.length;c<d;c++)if(e.Categories&&l[c].length>0&&!e.Categories.find(h=>h.Code.toString().startsWith(l[c])))return r;return S.Ok}getInvalidValue(t,e){const r=this.helperService.separateCategories(t),o=this.getDuplicateValues(r);let a=t;return o.isEmpty()||(a=o.join(",")),a}categoryExists(t,e){const r=t.ValueType;return!!r.Categories&&null!=r.Categories.find(a=>a.Code.toString()===e)}canAdd(t,e){const r=this.getSelected(t);if(isNaN(e))return!1;const o=t.ValueType;return!(o.Cardinality&&o.Cardinality>0&&r.length>=o.Cardinality||r.indexOf(e.toString())>-1||!this.categoryExists(t,e.toString()))}setAnswer(t,e){const r=e.join(O.VALUE_SEPARATOR);this.setNormalAnswer(r,t)}getDuplicateValues(t){const e=[...t].sort(),r=[];for(let o=0,a=e.length-1;o<a;o++)e[o+1]===e[o]&&r.push(e[o]);return r}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Jt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends le{convertFromString(t,e){this.setNormalAnswer(t,e)}autoEnter(t,e){const r=t.DataValue.ValueAsString,o=t.ValueType.MaxLength;return!!(String.hasValue(r)&&null!=o&&o>0)&&r.length===o}isValid(t,e){return String.isNullOrEmpty(t)?S.Ok:e.Restriction&&!new RegExp(e.Restriction).test(t)?S.AnswerRestrictedStringInfo:S.Ok}isAllowed(t,e){return null==e.MaxLength||0===e.MaxLength||t.length<=e.MaxLength?S.Ok:S.AnswerSetInvalidValue}}return n.\u0275fac=function(){let s;return function(e){return(s||(s=i.n5z(n)))(e||n)}}(),n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Ui=(()=>{class n extends le{constructor(t){super(),this.cultureInfoService=t}convertToString(t){if(String.hasValue(t.DataValue.ValueAsString))if(t.ValueType.IncludeTime){const e=L.ou.fromFormat(t.DataValue.ValueAsString,O.FORMAT.DATETIME);if(e.isValid)return e.toFormat(this.cultureInfoService.cultureInfo.ShortTimePattern)}else{const e=L.ou.fromFormat(t.DataValue.ValueAsString,O.FORMAT.TIME);if(e.isValid)return e.toFormat(this.cultureInfoService.cultureInfo.ShortTimePattern)}return t.DataValue.ValueAsString||""}convertFromString(t,e){const r=e.DataValue.AnswerStatus===T.Response,o=e.DataValue.AnswerStatus===T.SpecialAnswer;if(!String.hasValue(t))return void((r||o)&&r&&this.setEmptyAnswer(e));let a="";const l=this.parseTime(t);if(l&&e.ValueType.IncludeTime)if(e?.DataValue.ValueAsString&&e?.DataValue.ValueAsString.indexOf(" ")>-1){const c=L.ou.fromFormat(e.DataValue.ValueAsString,kt.DATETIME);let d=L.ou.fromFormat(t,this.cultureInfoService.cultureInfo.ShortTimePattern);d=d.set({year:c.year,month:c.month,day:c.day}),a=d.toFormat(kt.DATETIME).toString()}else a=l.isValid?l.toFormat(kt.DATETIME):t;else a=l.isValid?l.toFormat(kt.TIME):t;this.setNormalAnswer(a,e)}matchesTimePattern(t){return String.hasValue(t)?L.ou.fromFormat(t,this.cultureInfoService.cultureInfo.ShortTimePattern).isValid&&(!this.cultureInfoService.cultureInfo.ShortTimePattern.toLowerCase().endsWith("a")||t.toLowerCase().endsWith(this.cultureInfoService.cultureInfo.AMDesignator.toLowerCase())||t.toLowerCase().endsWith(this.cultureInfoService.cultureInfo.PMDesignator.toLowerCase()))?S.Ok:S.AnswerTimeInfo:S.Ok}isValid(t,e){if(!String.hasValue(t))return S.Ok;let r=L.ou.fromFormat(t,kt.TIME);return e.DataType==I.Date&&e.IncludeTime&&(r=L.ou.fromFormat(t,kt.DATETIME)),r.isValid?S.Ok:S.AnswerTimeInfo}isAllowed(t,e){return S.Ok}parseTime(t="",e=!1){const r=this.cultureInfoService.cultureInfo.ShortTimePattern;let o=L.ou.fromFormat(t,r);if(o.isValid||e||(o=L.ou.fromISO(t),o.isValid))return o;const a=r.replace(/\s/g,""),l=a.replace(/:/g,"");return"aApP".split("").indexOf(t.charAt(t.length-1))>-1&&(t=t.replace(/[aA]/,"AM").replace(/[pP]/,"PM")),["t","tt","T","TT",a,l].some(d=>{const u=L.ou.fromFormat(t,d);return!!u.isValid&&(o=u,!0)}),o}getInvalidValue(t,e){return t}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Wt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),yi=(()=>{class n{constructor(t,e){this.injector=t,this.cultureInfoService=e}createConverter(t){switch(t){case I.Classification:return this.injector.get(fi);case I.Date:return this.injector.get(Hi);case I.Enumeration:return this.injector.get(ce);case I.Integer:return this.injector.get(Je);case I.Real:return this.injector.get(bi);case I.Set:return this.injector.get(de);case I.Time:return this.injector.get(Ui);default:return this.injector.get(Te)}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(i.zs3),i.LFG(Wt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Et=U(1135),Wi=U(6451),v=(()=>{return(n=v||(v={}))[n.Grid=0]="Grid",n[n.Panel=1]="Panel",n[n.ClassificationControl=2]="ClassificationControl",n[n.DateControl=3]="DateControl",n[n.DropDownList=4]="DropDownList",n[n.LookupControl=5]="LookupControl",n[n.NumberTextBox=6]="NumberTextBox",n[n.StringTextBox=7]="StringTextBox",n[n.TimeControl=8]="TimeControl",n[n.CategoryCheckBox=9]="CategoryCheckBox",n[n.CategoryRadioButton=10]="CategoryRadioButton",n[n.SpecialAnswerCheckBox=11]="SpecialAnswerCheckBox",n[n.SpecialAnswerRadioButton=12]="SpecialAnswerRadioButton",n[n.Response=13]="Response",n[n.Text=14]="Text",n[n.Button=15]="Button",n[n.ImageControl=16]="ImageControl",n[n.LanguageSelector=17]="LanguageSelector",n[n.ParallelTabs=18]="ParallelTabs",n[n.HyperLink=19]="HyperLink",n[n.Ellipse=20]="Ellipse",n[n.Line=21]="Line",n[n.Rectangle=22]="Rectangle",n[n.ErrorText=23]="ErrorText",n[n.CategoryButton=24]="CategoryButton",n[n.SpecialAnswerButton=25]="SpecialAnswerButton",n[n.SuppressButton=26]="SuppressButton",n[n.SetTextBox=27]="SetTextBox",n[n.EnumerationTextBox=28]="EnumerationTextBox",n[n.NumberSlider=29]="NumberSlider",n[n.LookupTextBox=30]="LookupTextBox",n[n.IndexControl=31]="IndexControl",n[n.LanguageButton=32]="LanguageButton",n[n.ParallelButton=33]="ParallelButton",n[n.IndexItemButton=34]="IndexItemButton",n[n.GroupErrorText=35]="GroupErrorText",n[n.PageErrorText=36]="PageErrorText",n[n.GroupSuppressButton=37]="GroupSuppressButton",n[n.PageSuppressButton=38]="PageSuppressButton",n[n.AudioControl=39]="AudioControl",n[n.VideoControl=40]="VideoControl",n[n.TableControl=41]="TableControl",n[n.TableRowControl=42]="TableRowControl",n[n.InvolvedFieldsControl=43]="InvolvedFieldsControl",n[n.GroupInvolvedFieldsControl=44]="GroupInvolvedFieldsControl",n[n.PageInvolvedFieldsControl=45]="PageInvolvedFieldsControl",n[n.Timer=46]="Timer",n[n.DataGrid=47]="DataGrid",n[n.DataGridNavigator=48]="DataGridNavigator",n[n.DataGridSearchBox=49]="DataGridSearchBox",n[n.DataGridKeySelector=50]="DataGridKeySelector",n[n.DataGridSearchButton=51]="DataGridSearchButton",n[n.RecordErrorsListBox=52]="RecordErrorsListBox",n[n.RecordErrorsInvolvedFieldsControl=53]="RecordErrorsInvolvedFieldsControl",n[n.Menu=54]="Menu",n[n.UploadControl=55]="UploadControl",n[n.AppointmentControl=56]="AppointmentControl",n[n.TextBox=57]="TextBox",n[n.SkiplinksContainer=59]="SkiplinksContainer",n[n.MapsControl=60]="MapsControl",n[n.StringDropDownList=61]="StringDropDownList",v;var n})();let pt=(()=>{class n{constructor(t){this.eventService=t,this.createChildControlSubject={[v.Grid]:e=>e.Children.forEach(r=>this.createControlSubjects(r)),[v.Panel]:e=>this.createControlSubjects(e.Child),[v.TableControl]:e=>e.Children.forEach(r=>this.createControlSubjects(r)),[v.TableRowControl]:e=>e.Children.forEach(r=>this.createControlSubjects(r)),[v.Menu]:e=>this.createMenuItemSubjects(e.MenuItems),[v.SkiplinksContainer]:e=>e.Children.forEach(r=>this.createControlSubjects(r))},this._controlSubjects={},this._menuItemSubjects={},this._rootControlSubject=new Et.X(null),this._renderStateSubject=new Et.X(null),this._clientSideShortcutsSubject=new Et.X([]),this._auditTrailServerInfoSubject=new Et.X(null),this._onTryLeavePageForwardSubject=new Et.X(null),this._runtimeParametersSubject=new Et.X(null),this._skipLinksSubject=new Et.X({}),this.recordErrorsSubject=new Et.X([]),this.fieldInfoSubjects=[],this.lookupStateSubjects=[],this.createControlSubject=e=>{this._controlSubjects[e.ID]=new Et.X(e)},this.createMenuItemSubjects=e=>{e.forEach(r=>{this.createMenuItemSubscription(r)})},this.createMenuItemSubscription=e=>{this._menuItemSubjects[e.ID]=new Et.X(e),Array.isNullOrEmpty(e.MenuItems)||this.createMenuItemSubjects(e.MenuItems)},this.createSubscriptionsForFields=e=>{e.forEach(r=>{null==r.Errors&&(r.Errors=[]),this.addFieldInfoSubject({FieldName:r.Name,DataValue:r.DataValue,ValueType:r.ValueType,Errors:r.Errors,InputControls:r.InputControls,IsCritical:r.IsCritical,IsRequired:r.IsRequired,IsVisited:r.IsVisited,EventSourceId:"",RouteStatus:r.RouteStatus,LookupInformation:r.LookupInformation,SpecialAnswers:r.SpecialAnswers,RoleTexts:r.RoleTexts}),r.FieldProperties.forEach(a=>{this.addFieldInfoSubject({FieldName:r.Name,FieldPropertyName:a.Definition.Name,DataValue:a.DataValue,ValueType:a.Definition.ValueType,Errors:[],InputControls:a.InputControls,IsCritical:!1,IsRequired:!1,IsVisited:!1,EventSourceId:"",RouteStatus:r.RouteStatus,LookupInformation:r.LookupInformation,SpecialAnswers:r.SpecialAnswers,RoleTexts:r.RoleTexts})})}),this.allFieldsObservable=(0,Wi.T)(...this.fieldInfoSubjects),this.allFieldsSubscription=this.allFieldsObservable.subscribe({next:r=>{this.eventService.fieldValueChangedEvent.emit(r)}})}}initialize(t){if(t.RootControl){this.cleanup();const e=t.RootControl,r=t.RenderState;return this.createControlSubjects(e),this.createSubscriptionsForFields(r.Page.Fields),this.createLookupStateSubjectsForFields(r.Page.Fields),this.updateRecordErrorsSubject(r.Page.RecordErrors),this.rootControl=e,this.clientSideShortcuts=t.ClientSideShortcuts||[],this.onTryLeavePageForward=t.OnTryLeavePageForward||null,!0}return t.IsVoidResponse||(this.rootControl=null),this.eventService.hideSplashEvent.emit(),!1}getFieldSubject(t,e){return this.isFieldPropertyReference(t)?this.getFieldSubjectByFieldPropertyName(t.FieldName,t.FieldPropertyName):this.isFieldReference(t)?this.getFieldSubjectByFieldName(t.FieldName):null!=e?this.getFieldSubjectByFieldPropertyName(t,e):this.getFieldSubjectByFieldName(t)}getFieldInfo(...t){return this.getFieldSubject(t[0],t[1])?.getValue()}getLookupStateSubjectByFieldName(t){return this.lookupStateSubjects.find(e=>this.lowerCaseStringCompare(e.getValue().fieldName,t))}getLookupStateByFieldName(t){return this.getLookupStateSubjectByFieldName(t)?.getValue()}createControlSubjects(t){t&&(this.createControlSubject(t),Object.keys(this.createChildControlSubject).indexOf(""+t.Kind)>-1&&this.createChildControlSubject[t.Kind](t))}getControlSubjectById(t){return this._controlSubjects[t]||null}getControlById(t){return this.getControlSubjectById(t)?.getValue()||null}getMenuItemSubjectById(t){return this._menuItemSubjects[t]||null}get renderStateSubject(){return this._renderStateSubject}get rootControlSubject(){return this._rootControlSubject}set rootControl(t){this._rootControlSubject.next(t)}get clientSideShortcutsSubject(){return this._clientSideShortcutsSubject}set clientSideShortcuts(t){this._clientSideShortcutsSubject.next(t)}get auditTrailServerInfoSubject(){return this._auditTrailServerInfoSubject}get auditTrailServerInfo(){return this._auditTrailServerInfoSubject.getValue()??null}set auditTrailServerInfo(t){this._auditTrailServerInfoSubject.next(t)}get runtimeParametersSubject(){return this._runtimeParametersSubject}get runtimeParameters(){return this.runtimeParametersSubject.getValue()}set runtimeParameters(t){this.runtimeParametersSubject.next(t)}get skipLinksSubject(){return this._skipLinksSubject}get skipLinks(){return this.skipLinksSubject.getValue()}set skipLinks(t){this.skipLinksSubject.next(t)}get skipLinksArray(){const t=this.skipLinks;return Object.keys(t).map(e=>t[e])}get onTryLeavePageForward(){return this._onTryLeavePageForwardSubject.getValue()}set onTryLeavePageForward(t){this._onTryLeavePageForwardSubject.next(t)}cleanup(){this.fieldInfoSubjects.forEach(t=>{t&&!t.closed&&t.unsubscribe()}),this.fieldInfoSubjects=[],this.allFieldsSubscription&&this.allFieldsSubscription.unsubscribe(),this.allFieldsObservable=null;for(const t in this._controlSubjects)if(Object.prototype.hasOwnProperty.call(this._controlSubjects,t)){const e=this._controlSubjects[t];e&&!e.closed&&e.unsubscribe()}this._controlSubjects={},this.lookupStateSubjects.forEach(t=>{t&&!t.closed&&t.unsubscribe()}),this.lookupStateSubjects=[],!!this.recordErrorsSubject&&!this.recordErrorsSubject.closed&&this.recordErrorsSubject.unsubscribe(),this.recordErrorsSubject=new Et.X([])}addFieldInfoSubject(t){const e=new Et.X(t);return this.fieldInfoSubjects.push(e),e}createLookupStateSubjectsForFields(t){t.forEach(e=>{this.addLookupStateSubject(e)})}addLookupStateSubject(t){const e=this.createLookupStateObject(t.Name,t.DataSource,t.LookupInformation);this.lookupStateSubjects.push(new Et.X(e))}createLookupStateObject(t,e,r){const o={fieldName:t,dataSource:e,lookupInformation:r,awaitingResponse:!1,searchText:"",activeKey:"",maximumResultCount:O.MAX_RESULT_COUNT},a=e?.Keys;if(Array.isPopulated(a))o.activeKey=a[0].Name??"";else{const l=r?.KeyAssignments;if(Array.isPopulated(l)){const c=l.find(d=>null!==d);if(null!=c){o.activeKey=c.KeyName;const d=c.StartValueFields.find(u=>u.Value?.AnswerStatus===T.Response);d&&(o.searchText=d.Value.ValueAsString??"")}}}return o}getFieldSubjectByFieldPropertyName(t,e){return this.fieldInfoSubjects.find(r=>{const o=r.getValue();return null!=o.FieldPropertyName&&this.lowerCaseStringCompare(o.FieldName,t)&&this.lowerCaseStringCompare(o.FieldPropertyName,e)})}getFieldSubjectByFieldName(t){return this.fieldInfoSubjects.find(e=>this.lowerCaseStringCompare(e.getValue().FieldName,t))}updateRecordErrorsSubject(t){t&&(t.filter(r=>r.Selected).isEmpty()&&!t.isEmpty()&&(t[0].Selected=!0),this.recordErrorsSubject.next(t))}isFieldReference(t){return Object.prototype.hasOwnProperty.call(t,_.ObjectKind)&&Object.prototype.hasOwnProperty.call(t,_.FieldName)&&!(null==t.FieldName)}isFieldPropertyReference(t){return Object.prototype.hasOwnProperty.call(t,_.ObjectKind)&&Object.prototype.hasOwnProperty.call(t,_.FieldName)&&!(null==t.FieldName)&&Object.prototype.hasOwnProperty.call(t,_.FieldPropertyName)&&!(null==t.FieldPropertyName)}lowerCaseStringCompare(t,e){return t===e||t.toLowerCase()===e.toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(q))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),ut=(()=>{class n{constructor(t,e,r,o,a){this.componentService=t,this.converterFactoryService=e,this.eventService=r,this.subscriptionService=o,this.document=a,this.handleMultipleControlVisibilityChanged=l=>{l.forEach(c=>{const d=this.findFieldForInputControlRecursive(c);d&&(d.RouteStatus=c.Visibility===K.Visible?oe.Ask:oe.OffRoute)})},this._renderStateChangedSubscription=this.subscriptionService.renderStateSubject.subscribe({next:l=>{this._renderState=l}}),this._controlVisibilityChangedSubscription=this.eventService.multipleControlVisibilityChanged.subscribe({next:l=>{this.handleMultipleControlVisibilityChanged(l)}})}get renderState(){return this._renderState}set renderState(t){this.updateRenderState(t)}get layoutModelState(){return this.renderState?.LayoutModelState??null}get activeCultureId(){return this.layoutModelState?.ActiveCultureId??""}get languageName(){return this.layoutModelState?.LanguageName??""}get languageInfo(){return this.layoutModelState?.LanguageInfo??null}get currentLanguage(){return Array.isPopulated(this.languageInfo)&&String.hasValue(this.languageName)?this.languageInfo.find(t=>t.Name===this.languageName):void 0}get styleName(){return this.layoutModelState?.StyleName??""}get resourceSetName(){return this.layoutModelState?.ResourceSetName??""}get resourceLanguageName(){return this.layoutModelState?.ResourceLanguageName??""}get parallelName(){return this.layoutModelState?.ParallelName??""}get previousParallelName(){return this._previousParallelName??""}set previousParallelName(t){this._previousParallelName=t}get parallelNameHasChanged(){return this.parallelName!==this.previousParallelName}get ruleSessionId(){return this.layoutModelState?.RuleSessionId??""}get hasValidAppointment(){return this.layoutModelState?.HasValidAppointment??!1}set hasValidAppointment(t){this.layoutModelState&&this.hasValidAppointment!==t&&(this.layoutModelState.HasValidAppointment=t,this.updateRenderState())}get activeFieldName(){return this.layoutModelState?.ActiveFieldName??""}get activeFieldPropertyName(){return this.layoutModelState?.ActiveFieldPropertyName??null}setActiveFieldName(t,e,r,o,a){const l=this.subscriptionService.getFieldSubject(this.activeFieldName,this.activeFieldPropertyName);if(l){const c=l?.getValue()??null;let d=!1,u=!1;if(c&&(u=c.DataValue.IsDirty||!1,d=c.IsCritical,c.IsVisited=!0,this.flagFieldNameAsVisited(c.FieldName),c.UpdateUI=!1,l.next(c)),(this.isRefreshModeQuestion||d)&&u){const m=this.subscriptionService.getFieldInfo(t,e);return void(m&&this.eventService.activeFieldChangedEvent.emit({elementId:o,eventSource:r,nextField:m,previousField:c,triggerFocus:a}))}if(this.layoutModelState){if(this.getPageError(!0,[st.RangeCheck])){const f=this.getPageErrorAsRouteItem(!0);this.layoutModelState.ActiveFieldName=f?.Name??t,this.layoutModelState.ActiveFieldPropertyName=void 0,a=!0,o=void 0}else this.layoutModelState.ActiveFieldName=t,this.layoutModelState.ActiveFieldPropertyName=e;this.layoutModelState.ActiveGroupName=this.getGroupByFieldName(t)?.Name??""}this.updateRenderState();const h=this.subscriptionService.getFieldInfo(this.activeFieldName,this.activeFieldPropertyName);h&&this.eventService.activeFieldChangedEvent.emit({elementId:o,eventSource:r,nextField:h,previousField:c&&c.FieldName===h.FieldName&&c.FieldPropertyName===h.FieldPropertyName?void 0:c,triggerFocus:a})}}get actualLayoutSetName(){return this.layoutModelState?.ActualLayoutSetName??""}get pageIndex(){return this.layoutModelState?.PageIndex??-1}get previousPageIndex(){return this._previousPageIndex}set previousPageIndex(t){this._previousPageIndex=t}get pageIndexHasChanged(){return this.previousPageIndex!==this.pageIndex}get maxPageIndex(){return this.layoutModelState?.MaxPageIndex??-1}get customPageName(){return this.layoutModelState?.CustomPageName??""}get dataEntrySettingsName(){return this.layoutModelState?.DataEntrySettingsName??""}get dataEntrySettingsInfo(){return this.layoutModelState?.DataEntrySettingsInfo??null}get currentDataEntrySettings(){return Array.isPopulated(this.dataEntrySettingsInfo)&&!String.isNullOrEmpty(this.dataEntrySettingsName)?this.dataEntrySettingsInfo.find(t=>t.Name===this.dataEntrySettingsName):void 0}get runtimeSettings(){return this.currentDataEntrySettings?.RuntimeSettings??null}get isRefreshModeQuestion(){return this.runtimeSettings?.RefreshMode===mi.Question}get optimizeNoStylesheets(){return this.runtimeSettings?.OptimizeNoStylesheets??!1}get useSkipLinks(){return this.runtimeSettings?.UseSkipLinks??!1}get disableAutoFocus(){return this.runtimeSettings?.DisableAutoFocus??!1}get shouldAutoFocus(){return!this.disableAutoFocus||!this.pageIndexHasChanged&&!this.parallelNameHasChanged}get enableGPS(){return this.runtimeSettings?.EnableGPS??!1}get highGPSAccuracy(){return this.runtimeSettings?.HighGPSAccuracy??!1}get keyboardNavigation(){return this.runtimeSettings?.KeyboardNavigation??ke.None}get skipShowFieldsAtKeyboardNavigation(){return this.runtimeSettings?.SkipShowFieldsAtKeyboardNavigation??!1}get navigationMode(){const t=this.keyboardNavigation;return t===ke.Interviewing?At.Insert:t===ke.DataEditing?At.Navigation:At.None}get autoSelectInputContent(){return this.runtimeSettings?.AutoSelectInputContent??!1}get useCssGrids(){return this.runtimeSettings?.UseCssGrids??!0}get page(){return this.renderState?.Page??null}get fields(){return this.page?.Fields??null}getFilteredFields(t){t=t||(o=>{const a=o.InputControls,l=!Array.isNullOrEmpty(a)&&!!a?.find(c=>{const d=document.getElementById(c.ID);if(d){const u=window.getComputedStyle(d);return"none"!=u.display&&"hidden"!=u.visibility&&"0px"!==u.width&&"0px"!==u.height}return!1});return o.Origin===Ke.Route&&l});const r=this.fields;return Array.isPopulated(r)?r.filter(t):[]}getFieldByName(t){const e=this.fields;return Array.isPopulated(e)?e.find(r=>r.Name===t):void 0}getFieldPropertyByName(t,e){const r=this.getFieldByName(t);return r?this.getFieldPropertyFromField(r,e):void 0}get groups(){return this.page?.Groups??null}getGroupByName(t){const e=this.groups;return Array.isPopulated(e)?e.find(r=>r.Name===t):void 0}getSectionByName(t){const e=this.sections;return Array.isNullOrEmpty(e)?void 0:e.find(r=>r.Name===t)}flagFieldNameAsVisited(t){this.flagFieldAsVisited(this.getFieldByName(t))}flagFieldAsVisited(t){if(null!=t){t.IsVisited=!0;const e=this.getFieldPropertyFromField(t,"IsVisited");null!=e&&(e.DataValue.AnswerStatus=T.Response,e.DataValue.ValueAsString="1",e.DataValue.SpecialAnswer=null)}}flagPageAsVisited(){this.getFilteredFields().forEach(e=>this.flagFieldAsVisited(e))}getFirstFieldNameFromGroup(t){const r=this.getGroupByName(t)?.RouteItems;if(Array.isPopulated(r))for(const o of r){if(o.Kind===Oe.Field)return o.Name;{const a=this.getFirstFieldNameFromGroup(o.Name);if(a)return a}}}getLookupInfoForField(t){return this.getFieldByName(t)?.LookupInformation}getDataSourceForField(t){return this.getFieldByName(t)?.DataSource}applyPageErrors(){const t=this.subscriptionService.fieldInfoSubjects;for(const e of t){const r=e.getValue();r.DataValue.AnswerStatus===T.Response&&this.converterFactoryService.createConverter(r.ValueType.DataType).applyErrors(r.DataValue.ValueAsString??"",r)&&e.next(r)}}get pageHasRangeErrors(){const t=this.fields;return!!Array.isPopulated(t)&&t.findIndex(e=>!!e.DataValue.IsDirty&&e.Errors&&e.Errors.findIndex(r=>r.IsRelevant&&r.ErrorKind===st.RangeCheck)>-1)>-1}getInvolvedFields(t,e){const r=this.getFirstRelevantFieldError(t);return!r||null!==e&&-1===e.indexOf(r.ErrorKind)?void 0:this.filteredInvolvedFields(r,t)}getGroupInvolvedFields(t,e,r){return this.getGroupError(t,e,r)?.InvolvedFields}getPageInvolvedFields(t,e){return this.getPageError(t,e)?.InvolvedFields}getGroupError(t,e,r){const o=this.getFirstRelevantGroupErrorOrReference(t,e);return!o||null!==r&&-1===r.indexOf(o.ErrorKind)?void 0:o}getPageError(t,e){const o=this.getFirstRelevantRouteItemErrorOrReference(this.routeItems,t);if(o){const a=o;if(a&&(null===e||-1!==e.indexOf(a.ErrorKind)))return a}}getPageErrorAsRouteItem(t){return this.getFirstRelevantRouteItemErrorOrReference(this.routeItems,t,Qe.RouteItemReference)||void 0}getFirstRelevantError(t){return t.find(e=>e.IsRelevant)}get activeField(){return this.getFieldByName(this.activeFieldName)}get currentActiveField(){return this.subscriptionService.getFieldInfo(this.activeFieldName,this.activeFieldPropertyName)}get isCurrentActiveFieldCritical(){const t=this.currentActiveField;return!!t&&t.IsCritical}get isCurrentActiveFieldDirty(){const t=this.currentActiveField;return!!t&&(t.DataValue.IsDirty??!1)}get isLastPage(){return this.customPageName===Ye.ReceiptPage}get recordErrors(){return this.page?.RecordErrors??null}getFieldIndexByName(t,e){return Array.isPopulated(t)||(t=this.getFilteredFields()),String.hasValue(e)||(e=this.activeFieldName),t.length>0?t.findIndex(r=>r.Name===e):-1}get surveyRoot(){return this.renderState?.SurveyRoot??""}get instrumentTitle(){return this.renderState?.InstrumentTitle??""}get textProvider(){return this.renderState?.TextProvider??{}}getTextBox(t){return this.textProvider[t]||{Text:""}}setTextBox(t,e){this.textProvider[t]={Text:e}}updateRenderState(t=this._renderState){this.previousParallelName=this.renderState?.LayoutModelState?.ParallelName??"",this.previousPageIndex=this.renderState?.LayoutModelState?.PageIndex??-1,this.subscriptionService.renderStateSubject.next(t)}getGroupByFieldName(t){const e=this.groups;return Array.isPopulated(e)?e.find(r=>!!r.RouteItems?.find(o=>o.Name===t)):void 0}get routeItems(){return this.page?.RouteItems??[]}get sections(){return this.page?.Sections??[]}getFieldPropertyFromField(t,e){if(!Array.isNullOrEmpty(t.FieldProperties))for(let r=0,o=t.FieldProperties.length;r<o;r++)if(t.FieldProperties[r].Definition.Name===e)return t.FieldProperties[r]}getFirstRelevantFieldError(t){const e=this.getFieldByName(t);if(e){const r=Array.isPopulated(e.Errors)?this.getFirstRelevantError(e.Errors):null;if(r){if(Array.isPopulated(e.InputControls)){const o=this.componentService.getComponent(e.InputControls[0].ID);o&&(r.InvolvedControl=o.dataObject)}return r}}}filteredInvolvedFields(t,e){return Array.isPopulated(t?.InvolvedFields)?t.InvolvedFields.filter(r=>r.Name!==e):void 0}getFirstRelevantGroupErrorOrReference(t,e,r){const a=this.getGroupByName(t)?.RouteItems;return Array.isPopulated(a)?this.getFirstRelevantRouteItemErrorOrReference(a,e,r):void 0}getFirstRelevantRouteItemErrorOrReference(t,e,r){for(const o of t)if(o.Kind===Oe.Field){const a=this.getFirstRelevantFieldError(o.Name);if(a)return r===Qe.RouteItemReference?o:a}else if(e){const a=this.getFirstRelevantGroupErrorOrReference(o.Name,e,r);if(a)return a}}findFieldForInputControlRecursive(t){const e=this.fields;if(Array.isPopulated(e)){let r=e.find(o=>o.InputControls.find(a=>a.ID===t.ID));return r||(Object.prototype.hasOwnProperty.call(t,_.Children)?t.Children.every(o=>(r=this.findFieldForInputControlRecursive(o),null==r)):Object.prototype.hasOwnProperty.call(t,_.Child)&&(r=this.findFieldForInputControlRecursive(t.Child))),r}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(se),i.LFG(yi),i.LFG(q),i.LFG(pt),i.LFG(g.K0))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Or=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[q,ut,pt],imports:[g.ez]}),n})(),Tr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez]}),n})(),On=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[g.ez,pi]}),n})();var p=(()=>{return(n=p||(p={}))[n.NextPage=0]="NextPage",n[n.PreviousPage=1]="PreviousPage",n[n.FirstPage=2]="FirstPage",n[n.LastPage=3]="LastPage",n[n.CurrentPage=4]="CurrentPage",n[n.NextField=5]="NextField",n[n.Save=6]="Save",n[n.Quit=7]="Quit",n[n.SetLanguage=8]="SetLanguage",n[n.SetLayoutSetGroup=9]="SetLayoutSetGroup",n[n.SetLayoutSet=10]="SetLayoutSet",n[n.SetDataEntrySettings=11]="SetDataEntrySettings",n[n.SetParallel=12]="SetParallel",n[n.GoToField=13]="GoToField",n[n.SuppressSignal=14]="SuppressSignal",n[n.AssignField=15]="AssignField",n[n.SetStyle=16]="SetStyle",n[n.SetDeviceFeatures=17]="SetDeviceFeatures",n[n.ShowCustomPage=18]="ShowCustomPage",n[n.ToggleVisibility=19]="ToggleVisibility",n[n.GoToBlockField=20]="GoToBlockField",n[n.GoToGroup=21]="GoToGroup",n[n.GoToUri=22]="GoToUri",n[n.StartSurvey=23]="StartSurvey",n[n.ProcedureCall=24]="ProcedureCall",n[n.Conditional=25]="Conditional",n[n.SetControlProperty=26]="SetControlProperty",n[n.Custom=27]="Custom",n[n.PreviousField=28]="PreviousField",n[n.Print=29]="Print",n[n.Finish=30]="Finish",n[n.AssignFieldProperty=31]="AssignFieldProperty",n[n.GoToParallelEnd=32]="GoToParallelEnd",n[n.DialNumber=33]="DialNumber",n[n.StartTimer=34]="StartTimer",n[n.StopTimer=35]="StopTimer",n[n.SetFocus=36]="SetFocus",n[n.CloseDialog=37]="CloseDialog",n[n.PlayAudio=38]="PlayAudio",n[n.PauseAudio=39]="PauseAudio",n[n.PlayPauseAudio=40]="PlayPauseAudio",n[n.StopAudio=41]="StopAudio",n[n.PlayVideo=42]="PlayVideo",n[n.PauseVideo=43]="PauseVideo",n[n.PlayPauseVideo=44]="PlayPauseVideo",n[n.StopVideo=45]="StopVideo",n[n.ShowDialog=46]="ShowDialog",n[n.FirstField=47]="FirstField",n[n.AuditTrail=48]="AuditTrail",n[n.LastField=49]="LastField",n[n.CutToClipboard=50]="CutToClipboard",n[n.CopyToClipboard=51]="CopyToClipboard",n[n.PasteFromClipboard=52]="PasteFromClipboard",n[n.GoToFieldProperty=53]="GoToFieldProperty",n[n.ServerEvent=54]="ServerEvent",n[n.UndoAllEdits=55]="UndoAllEdits",n[n.ForEach=56]="ForEach",n[n.PlayStopAudio=57]="PlayStopAudio",n[n.StopAllAudio=58]="StopAllAudio",n[n.PlayStopVideo=59]="PlayStopVideo",n[n.StopAllVideo=60]="StopAllVideo",n[n.SendKeys=61]="SendKeys",n[n.StartLocalProcess=62]="StartLocalProcess",p;var n})();class Ft{constructor(s){this.Kind=s}static isNextPageAction(s){return s.Kind===p.NextPage}static isPreviousPageAction(s){return s.Kind===p.PreviousPage}static isFirstPageAction(s){return s.Kind===p.FirstPage}static isLastPageAction(s){return s.Kind===p.LastPage}static isCurrentPageAction(s){return s.Kind===p.CurrentPage}static isNextFieldAction(s){return s.Kind===p.NextField}static isSaveAction(s){return s.Kind===p.Save}static isQuitAction(s){return s.Kind===p.Quit}static isSetLanguageAction(s){return s.Kind===p.SetLanguage}static isSetLayoutSetGroupAction(s){return s.Kind===p.SetLayoutSetGroup}static isSetLayoutSetAction(s){return s.Kind===p.SetLayoutSet}static isSetDataEntrySettingsAction(s){return s.Kind===p.SetDataEntrySettings}static isSetParallelAction(s){return s.Kind===p.SetParallel}static isGoToFieldAction(s){return s.Kind===p.GoToField}static isSuppressSignalAction(s){return s.Kind===p.SuppressSignal}static isAssignFieldAction(s){return s.Kind===p.AssignField}static isSetStyleAction(s){return s.Kind===p.SetStyle}static isSetDeviceFeaturesAction(s){return s.Kind===p.SetDeviceFeatures}static isShowCustomPageAction(s){return s.Kind===p.ShowCustomPage}static isToggleVisibilityAction(s){return s.Kind===p.ToggleVisibility}static isGoToBlockFieldAction(s){return s.Kind===p.GoToBlockField}static isGoToGroupAction(s){return s.Kind===p.GoToGroup}static isGoToUriAction(s){return s.Kind===p.GoToUri}static isStartSurveyAction(s){return s.Kind===p.StartSurvey}static isProcedureCallAction(s){return s.Kind===p.ProcedureCall}static isConditionalAction(s){return s.Kind===p.Conditional}static isSetControlPropertyAction(s){return s.Kind===p.SetControlProperty}static isCustomAction(s){return s.Kind===p.Custom}static isPreviousFieldAction(s){return s.Kind===p.PreviousField}static isPrintAction(s){return s.Kind===p.Print}static isFinishAction(s){return s.Kind===p.Finish}static isAssignFieldPropertyAction(s){return s.Kind===p.AssignFieldProperty}static isGoToParallelEndAction(s){return s.Kind===p.GoToParallelEnd}static isDialNumberAction(s){return s.Kind===p.DialNumber}static isStartTimerAction(s){return s.Kind===p.StartTimer}static isStopTimerAction(s){return s.Kind===p.StopTimer}static isSetFocusAction(s){return s.Kind===p.SetFocus}static isCloseDialogAction(s){return s.Kind===p.CloseDialog}static isPlayAudioAction(s){return s.Kind===p.PlayAudio}static isPauseAudioAction(s){return s.Kind===p.PauseAudio}static isPlayPauseAudioAction(s){return s.Kind===p.PlayPauseAudio}static isPlayStopAudioAction(s){return s.Kind===p.PlayStopAudio}static isStopAudioAction(s){return s.Kind===p.StopAudio}static isStopAllAudioAction(s){return s.Kind===p.StopAllAudio}static isPlayVideoAction(s){return s.Kind===p.PlayVideo}static isPauseVideoAction(s){return s.Kind===p.PauseVideo}static isPlayPauseVideoAction(s){return s.Kind===p.PlayPauseVideo}static isPlayStopVideoAction(s){return s.Kind===p.PlayStopVideo}static isStopVideoAction(s){return s.Kind===p.StopVideo}static isStopAllVideoAction(s){return s.Kind===p.StopAllVideo}static isSendKeysAction(s){return s.Kind===p.SendKeys&&Object.prototype.hasOwnProperty.call(s,"Keys")}static isShowDialogAction(s){return s.Kind===p.ShowDialog}static isFirstFieldAction(s){return s.Kind===p.FirstField}static isAuditTrailAction(s){return s.Kind===p.AuditTrail}static isLastFieldAction(s){return s.Kind===p.LastField}static isCutToClipboardAction(s){return s.Kind===p.CutToClipboard}static isCopyToClipboardAction(s){return s.Kind===p.CopyToClipboard}static isPasteFromClipboardAction(s){return s.Kind===p.PasteFromClipboard}static isGoToFieldPropertyAction(s){return s.Kind===p.GoToFieldProperty}static isServerEventAction(s){return s.Kind===p.ServerEvent}static isUndoAllEditsAction(s){return s.Kind===p.UndoAllEdits}static isForEachAction(s){return s.Kind===p.ForEach}static isConditionFieldAction(s){return-1!==[p.NextField,p.FirstField,p.LastField].indexOf(s.Kind)}static isControlAction(s){return-1!==[p.ToggleVisibility,p.StartTimer,p.StopTimer,p.SetFocus,p.PlayAudio,p.PauseAudio,p.PlayPauseAudio,p.PlayStopAudio,p.StopAudio,p.PlayVideo,p.PauseVideo,p.PlayPauseVideo,p.PlayStopVideo,p.StopVideo,p.CutToClipboard,p.CopyToClipboard,p.PasteFromClipboard].indexOf(s.Kind)}static isAssignAction(s){return-1!==[p.AssignField,p.AssignFieldProperty].indexOf(s.Kind)}static isValuesAction(s){return-1!==[p.AuditTrail,p.ServerEvent].indexOf(s.Kind)}}class Ze extends Ft{constructor(s,t=p.GoToField){super(t),this.FieldName=s}}var Yi=U(7445),Pr=U(4128),it=(()=>{return(n=it||(it={}))[n.None=0]="None",n[n.Session=1]="Session",n[n.Page=2]="Page",n[n.Field=3]="Field",n[n.Answer=4]="Answer",n[n.Keyboard=5]="Keyboard",it;var n})(),b=(()=>{return(n=b||(b={})).Backspace="Backspace",n.Tab="Tab",n.Enter="Enter",n.Pause="Pause",n.CapsLock="CapsLock",n.Escape="Escape",n.Esc="Esc",n.Space=" ",n.Spacebar="Spacebar",n.PageUp="PageUp",n.PageDown="PageDown",n.End="End",n.Home="Home",n.ArrowLeft="ArrowLeft",n.Left="Left",n.ArrowUp="ArrowUp",n.Up="Up",n.ArrowRight="ArrowRight",n.Right="Right",n.ArrowDown="ArrowDown",n.Down="Down",n.Insert="Insert",n.Delete="Delete",n.Del="Del",n.Select="Select",n.NumLock="NumLock",n.ScrollLock="ScrollLock",n.Scroll="Scroll",n.Dead="Dead",n.LeftBracket="[",n.RightBracket="]",n.Alt="Alt",n.AltGr="AltGraph",n.Shift="Shift",n.Control="Control",b;var n})(),Ki=U(8505),fe=U(262),Rt=(()=>{return(n=Rt||(Rt={}))[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.RequestTimeout=408]="RequestTimeout",n[n.InternalServerError=500]="InternalServerError",n[n.RenderStateNull=605]="RenderStateNull",n[n.LoginRequired=601]="LoginRequired",n[n.LoginFailed=602]="LoginFailed",n[n.Redirect=603]="Redirect",n[n.TempRedirect=603]="TempRedirect",Rt;var n})();let Ci=(()=>{class n{constructor(t){this.http=t,this.accessToken=null,this.handleException=e=>e.status===Rt.LoginFailed?Promise.resolve(null):Promise.reject(e.message)}set requestTokenPath(t){this._requestTokenPath=t}requestAccessToken(t){return this.http.post(this._requestTokenPath,{UserName:t&&t.name||"",Password:t&&t.password||""}).pipe((0,Ki.b)(r=>this.accessToken=r),(0,fe.K)(this.handleException))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Nt.eN))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Si=(()=>{return(n=Si||(Si={}))[n.Unknown=0]="Unknown",n[n.WindowsDesktop=1]="WindowsDesktop",n[n.Browser=2]="Browser",n[n.IPad=3]="IPad",n[n.IPhone=4]="IPhone",n[n.AndroidTablet=5]="AndroidTablet",n[n.AndroidPhone=6]="AndroidPhone",n[n.WindowsTablet=7]="WindowsTablet",n[n.WindowsPhone=8]="WindowsPhone",n[n.DocumentCreator=9]="DocumentCreator",Si;var n})(),zt=(()=>{return(n=zt||(zt={}))[n.None=0]="None",n[n.InternetExplorer=1]="InternetExplorer",n[n.Firefox=2]="Firefox",n[n.Chrome=3]="Chrome",n[n.Opera=4]="Opera",n[n.Safari=5]="Safari",n[n.Other=6]="Other",n[n.Edge=7]="Edge",zt;var n})(),Ai=(()=>{return(n=Ai||(Ai={}))[n.Windows=0]="Windows",n[n.HTML=1]="HTML",n[n.Silverlight=2]="Silverlight",n[n.IOS=3]="IOS",n[n.Android=4]="Android",n[n.WindowsPhone=5]="WindowsPhone",Ai;var n})(),wi=(()=>{return(n=wi||(wi={})).InternetExplorer="ie",n.Edge="edge",n.Firefox="firefox",n.Chrome="chrome",n.Opera="opera",n.Safari="safari",n.Other="other",wi;var n})();let Yt=(()=>{class n{constructor(t,e){this.document=t,this.renderStateService=e,postRuntimeParameters=postRuntimeParameters??{},this.client={Browser:this.detectBrowser(),Device:Si.Browser,HasChanged:!1,Height:0,Language:this.getClientLanguage(),Latitude:0,Longitude:0,Orientation:this.getOrientation(),OS:this.getUserAgent(),PixelRatio:1,Platform:Ai.HTML,RecorderAvailable:!1,Referrer:this.getReferrer(),ReferrerUrl:t.referrer,ScreenHeight:0,ScreenWidth:0,ScrollbarSize:this.getScrollbarSize(),TouchEnabled:this.detectTouchEnabled(),Width:0},this.updateClientSize()}getClient(){return this.renderStateService.enableGPS&&this.setGeolocation(this.renderStateService.highGPSAccuracy),this.client}updateClientSize(){const t=this.isMobile,e={...this.client},{devicePixelRatio:r,innerWidth:o,innerHeight:a}=window;this.client.Orientation=this.getOrientation(),this.client.PixelRatio=r||1,this.client.Width=this.client.ScreenWidth=t?document.documentElement.clientWidth:o,this.client.Height=this.client.ScreenHeight=t?document.documentElement.clientHeight:a,this.client.HasChanged=e.Width!=this.client.Width||e.Height!=this.client.Height}get isMobile(){let t=!1;return e=window.navigator.userAgent||window.navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substring(0,4)))&&(t=!0),t;var e}get isIOS(){return/iPad|iPhone|iPod|Mac/.test(navigator.userAgent)}getBrowserClass(){const e=this.client&&null!=this.client.Browser?this.client.Browser:this.detectBrowser();return wi[zt[e]]||"other"}setGeolocation(t){window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(r=>this.handleLocation(r),()=>this.handleLocationError(),{enableHighAccuracy:t}):(this.client.Latitude=0,this.client.Longitude=0)}handleLocation({coords:t}){const{latitude:e,longitude:r}=t;this.client.Latitude=e,this.client.Longitude=r}handleLocationError(){this.client.Latitude=0,this.client.Longitude=0}getUserAgent(){return window.navigator.userAgent}getOrientation(){return isNaN(window.screen.orientation?.angle)?window.orientation||0:window.screen.orientation?.angle}getClientLanguage(){return(Array.isPopulated(window.navigator.languages)?window.navigator.languages[0]:window.navigator.language||window.navigator.userLanguage)??""}getReferrer(){return Object.prototype.hasOwnProperty.call(postRuntimeParameters,"Referer")?postRuntimeParameters.Referer:Object.prototype.hasOwnProperty.call(postRuntimeParameters,"Referrer")?postRuntimeParameters.Referrer:""}detectBrowser(){const t=window,e=this.document;return t.opr&&t.opr.addons||t.opera||window.navigator.userAgent.indexOf(" OPR/")>=0?zt.Opera:typeof t.InstallTrigger<"u"?zt.Firefox:e.documentMode?zt.InternetExplorer:/safari|Safari/.test(navigator.userAgent)?/edge|Edge/.test(navigator.userAgent)?zt.Edge:/chrome|Chrome/.test(navigator.userAgent)||/crios|CriOS/.test(navigator.userAgent)?zt.Chrome:zt.Safari:zt.Other}detectTouchEnabled(){return"ontouchstart"in window||window.navigator.maxTouchPoints>0}getScrollbarSize(){const t=this.document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style["-ms-overflow-style"]="scrollbar",this.document.body.appendChild(t);const e=t.offsetWidth;t.style.overflow="scroll";const r=this.document.createElement("div");r.style.width="100%",t.appendChild(r);const o=r.offsetWidth;return t.parentNode&&t.parentNode.removeChild(t),e-o}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(g.K0),i.LFG(ut))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t,e,r){this.renderStateService=t,this.securityService=e,this.userAgentService=r,this.serverParkInfo=null,this.lockId=null,this.lastLockTime=null}executeActionPayload(t,e,r,o){const a={RenderState:this.renderStateService.renderState,AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,Actions:t,ControlID:e||null,EventName:r||null,ClientFeatures:this.userAgentService.getClient(),LockID:this.lockId,LastLockTime:this.lastLockTime,ShouldApplyPageEvent:o||!1};return this.extendParkId(a),a.RenderState&&(a.RenderState.Page.Fields=a.RenderState.Page.Fields.filter(l=>!(l.RouteStatus===oe.OffRoute&&l.InputControls.isEmpty())),a.RenderState.Page.ActiveField=null,a.RenderState.Page.Fields.forEach(l=>delete l.DataSource)),a}classificationPayload(t,e,r,o){const a=this.renderStateService.layoutModelState;return{AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,Code:t,GetAncestors:!1,LanguageName:this.renderStateService.languageName,LibraryFileName:e,State:{InstrumentID:a?.InstrumentId??null,Port:o?.Prt??null,SessionID:a?.RuleSessionId??null,Server:o?.SrvrNm??null,ServerPark:a?.ServerPark??null,Binding:o?.Binding??null,ParkId:o?null:this.parkId??null,Esd:o?null:this.esd??null},TypeName:r}}startInterviewPayload(t){return{RuntimeParameters:t,ClientFeatures:this.userAgentService.getClient(),AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null}}fetchLookupPayload(t,e,r=O.MAX_RESULT_COUNT){const o=this.renderStateService.getDataSourceForField(t),a=this.renderStateService.getLookupInfoForField(t),l={RenderState:this.renderStateService.renderState,LookupRequest:{ExternalDataFileName:o?.ExternalDataFileName??a?.ExternalDataFileName??null,ReturnField:o?.ReturnField??a?.ReturnField??null,ActiveKey:o?.Keys[0].Name??(a&&Array.isPopulated(a.KeyAssignments)?a.KeyAssignments[0].KeyName:null)??null,FieldFilter:o?.FieldDefs.map(c=>c.Name)??a?.FieldFilter??[],SearchTerm:e,MaxResultCount:r,RecordFilter:o?.RecordFilter??a?.RecordFilter??null,DataModelFileName:o?.UsedDatamodelFileName??a?.UsedDatamodelFileName??null,StartIndex:0},AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient()};return this.extendParkId(l),l}requestTimeSlotsPayload(t,e,r,o,a,l,c,d,u){const h={RenderState:this.renderStateService.renderState,TimeslotsRequest:{Start:t,End:e,InstrumentSelection:r,AggregationMode:o,InterviewerTimeZone:a,InterviewerTimeIsDST:l,IncludeHard:c,IncludeMedium:d,IncludeSoft:u},AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient()};return this.extendParkId(h),h}setAppointmentPayload(t,e,r){const o={RenderState:this.renderStateService.renderState,AppointmentVariables:r,TimeslotStart:t,TimeslotEnd:e,AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient(),IncludeHard:!0,IncludeMedium:!0,IncludeSoft:!0};return o.RenderState&&(o.RenderState.Page.ActiveField=null,o.RenderState.Page.Fields.forEach(a=>delete a.DataSource)),this.extendParkId(o),o}selectRecordPayload(t,e,r,o){const a={RenderState:this.renderStateService.renderState,AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,LookupFieldName:t,ExternalFieldNames:e,ExternalFieldValues:r,GotoNextField:o,ClientFeatures:this.userAgentService.getClient()};return a.RenderState&&(a.RenderState.Page.ActiveField=null,a.RenderState.Page.Fields.forEach(l=>delete l.DataSource)),this.extendParkId(a),a}requestSearchPayload(t){const e=t.dataSource,r=t.lookupInformation,o={RenderState:this.renderStateService.renderState,LookupRequest:{ExternalDataFileName:e?.ExternalDataFileName??r?.ExternalDataFileName??null,ReturnField:e?.ReturnField??r?.ReturnField??null,ActiveKey:t.activeKey,FieldFilter:e?.FieldFilter??r?.FieldFilter??[],SearchTerm:t.searchText,MaxResultCount:t.maximumResultCount||O.MAX_RESULT_COUNT,RecordFilter:e?.RecordFilter??r?.RecordFilter??null,DataModelFileName:e?.UsedDatamodelFileName??r?.UsedDatamodelFileName??null,StartIndex:t.startIndex||0},AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient()};return o.RenderState&&(o.RenderState.Page.ActiveField=null,o.RenderState.Page.Fields.forEach(a=>delete a.DataSource)),this.extendParkId(o),o}appointmentListPayload(t){const e=t.dataSource,r={RenderState:this.renderStateService.renderState,AppointmentListRequest:{DaysFromToday:e.DaysFromToday,GroupName:e.GroupName,IncludeAllInstruments:e.IncludeAllInstruments,PeriodInHours:e.PeriodInHours,ToWhomKind:e.ToWhomKind,FieldFilter:e.FieldFilter||[],MaxResultCount:t.maximumResultCount||O.MAX_RESULT_COUNT,RecordFilter:e.RecordFilter,ReturnField:e.ReturnField||O.APPOINTMENT_LIST_RETURNFIELD,StartIndex:t.startIndex||0},AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient()};return r.RenderState&&(r.RenderState.Page.ActiveField=null,r.RenderState.Page.Fields.forEach(o=>delete o.DataSource)),this.extendParkId(r),r}surveyListPayload(t){const e=t.dataSource,r={RenderState:this.renderStateService.renderState,SurveyListRequest:{FieldFilter:e.FieldFilter||[],MaxResultCount:t.maximumResultCount||O.MAX_RESULT_COUNT,RecordFilter:e.RecordFilter,ReturnField:e.ReturnField||O.SURVEY_LIST_RETURNFIELD,StartIndex:t.startIndex||0},AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient()};return r.RenderState&&(r.RenderState.Page.ActiveField=null,r.RenderState.Page.Fields.forEach(o=>delete o.DataSource)),this.extendParkId(r),r}auditTrailPayload(t,e,r){return{Events:e,Settings:{AuditTrailServer:t?.ServerName??null,AuditTrailPort:t?.ServerPort??null,AuditTrailBinding:t?.ServerBinding??null,InstrumentID:t?.InstrumentID??"",SessionID:t?.SessionID??"",ServerPark:t?.ServerPark??"",ParkId:this.parkId,Esd:this.esd},CurrentTime:r,AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null}}measureTimePayload(t,e){return{CustomPageName:this.renderStateService.customPageName,ElapsedTime:t,TotalTime:e,LayoutSetName:this.renderStateService.actualLayoutSetName,PageIndex:this.renderStateService.pageIndex,ParallelName:this.renderStateService.parallelName,SessionID:this.renderStateService.ruleSessionId,InstrumentTitle:this.renderStateService.layoutModelState?.InstrumentName,UserAgent:this.userAgentService.client.OS}}uploadPayload(t,e){const r={FieldName:t,FieldPropertyName:e,RenderState:this.renderStateService.renderState,AccessToken:this.securityService.accessToken?.AccessToken||null,RefreshToken:this.securityService.accessToken?.RefreshToken||null,ClientFeatures:this.userAgentService.getClient()};return r.RenderState&&(r.RenderState.Page.ActiveField=null,r.RenderState.Page.Fields.forEach(o=>delete o.DataSource)),this.extendParkId(r),r}extendParkId(t){Object.assign(t,{ServerDefinitions:this.parkId?null:this.serverParkInfo,ParkId:this.parkId?this.parkId:null,Esd:this.esd?this.esd:null})}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(ut),i.LFG(Ci),i.LFG(Yt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Qi=(()=>{class n{constructor(t,e){this.eventService=t,this.subscriptionService=e,this.eventService.newAuditTrailServerInfoEvent.subscribe({next:r=>this.setServerInfo(r)})}get subject(){return this.subscriptionService.auditTrailServerInfoSubject}get serverInfo(){return this.subscriptionService.auditTrailServerInfo}set serverInfo(t){this.subscriptionService.auditTrailServerInfo=t}setServerInfo(t){let e=null;if(t.AuditTrailLevel>0)if(t.ServerParkInfo){const r=t.ServerParkInfo.find(o=>"AUDITTRAIL"===o.Role);r&&(e={Level:t.AuditTrailLevel,InstrumentID:t.RenderState.LayoutModelState.InstrumentId,SessionID:t.RenderState.LayoutModelState.RuleSessionId,ServerPort:r.Prt,ServerName:r.SrvrNm,ServerPark:t.RenderState.LayoutModelState.ServerPark,ServerBinding:r.Binding})}else e={Level:t.AuditTrailLevel,InstrumentID:t.RenderState.LayoutModelState.InstrumentId,SessionID:t.RenderState.LayoutModelState.RuleSessionId,ServerPort:null,ServerName:null,ServerPark:t.RenderState.LayoutModelState.ServerPark,ServerBinding:null,ParkId:t.ParkId};this.serverInfo=e}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(q),i.LFG(pt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t,e,r,o){this.eventService=t,this.payloadService=e,this.serverInfoService=r,this.http=o,this.configArr=[],this.trailArr=[[]],this.maxPayloadEvents=50,this.pollingInterval=2e3,this.maxConcurrentRequests=2,this.timer=(0,Yi.F)(this.pollingInterval),this.logEnterFieldEvent=(a,l,c,d)=>{this.config?.Level>=it.Field&&(this.trail.push(this.createEnterFieldEvent(a,l,c,d)),this.pollWork())},this.logLeaveFieldEvent=(a,l,c,d)=>{this.config?.Level>=it.Field&&(this.trail.push(this.createLeaveFieldEvent(a,l,c,d)),this.pollWork())},this.logClassifyEvent=(a,l)=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createClassifyEvent(a,l)),this.pollWork())},this.logCategoryEvent=(a,l)=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createCategoryEvent(a,l)),this.pollWork())},this.logSpecialAnswerEvent=(a,l)=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createSpecialAnswerEvent(a,l)),this.pollWork())},this.logGoToURIEvent=a=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createGoToURIEvent(a)),this.pollWork())},this.logToggleVisibilityEvent=a=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createToggleVisibilityEvent(a)),this.pollWork())},this.logEnterFieldPropertyEvent=(a,l,c)=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createEnterFieldPropertyEvent(a,l,c)),this.pollWork())},this.logLeaveFieldPropertyEvent=(a,l,c)=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createLeaveFieldPropertyEvent(a,l,c)),this.pollWork())},this.logCustomAuditTrailEvent=a=>{this.config?.Level>it.None&&(this.trail.push(this.createCustomAuditTrailEvent(a)),this.pollWork())},this.logRangeErrorEvent=(a,l,c,d)=>{this.config?.Level>=it.Answer&&(this.trail.push(this.createRangeErrorEvent(a,l,c,d)),this.pollWork())},this.activateAuditLogging=a=>{this.configArr[this.configIndex=0]=a,this.config?.Level>=it.Field&&(!this.fieldChangedSubscription||this.fieldChangedSubscription.closed)&&(this.fieldChangedSubscription=this.eventService.activeFieldChangedEvent.subscribe({next:l=>{l.previousField&&(l.previousField.FieldPropertyName?this.logLeaveFieldPropertyEvent(l.previousField.FieldName,l.previousField.FieldPropertyName,this.getFieldAnswerValue(l.previousField)):l.previousField.FieldName&&this.logLeaveFieldEvent(l.previousField.FieldName,l.previousField.DataValue.AnswerStatus,this.getFieldAnswerValue(l.previousField),this.fieldHasSpecialAnswer(l.previousField)),l.nextField&&(l.nextField.FieldPropertyName?this.logEnterFieldPropertyEvent(l.nextField.FieldName,l.nextField.FieldPropertyName,this.getFieldAnswerValue(l.nextField)):l.nextField.FieldName&&this.logEnterFieldEvent(l.nextField.FieldName,l.nextField.DataValue.AnswerStatus,this.getFieldAnswerValue(l.nextField),this.fieldHasSpecialAnswer(l.nextField))))}}))},this.pollWork=()=>{(!this.timerSubscription||this.timerSubscription.closed)&&(this.timerSubscription=this.timer.subscribe({next:()=>{if(this.stopPolling(),this.lastEventIsKeyStroke()){const l=(0,Yi.F)(500).subscribe(()=>{this.processWork().subscribe({next:()=>{this.eventService.auditTrailProcessedEvent.emit(),this.pollWork()}}),l.unsubscribe()})}else this.processWork().subscribe({next:()=>{this.eventService.auditTrailProcessedEvent.emit(),this.pollWork()}})}}))},this.stopPolling=()=>{this.timerSubscription&&!this.timerSubscription.closed&&this.timerSubscription.unsubscribe()},this.processWork=()=>{const a=[];for(let l=0;l<this.trailArr.length;l++){for(;!Array.isNullOrEmpty(this.trailArr[l]);){const c=Math.min(this.trailArr[l].length,this.maxPayloadEvents),d=this.prepareAuditTrailEvents(this.trailArr[l].slice(0,c));this.trailArr[l].splice(0,c);const h=this.payloadService.auditTrailPayload(this.configArr[l],d,this.timeStamp);if(a.push(this.http.post(this._auditTrailPath,h,{responseType:"text"})),a.length>=this.maxConcurrentRequests)break}if(a.length>=this.maxConcurrentRequests)break}return(0,Pr.D)(a)},this.prepareAuditTrailEvents=a=>{for(let l=0,c=a.length;l<c;l++)a[l].IsKeyStroke&&(a[l].Content=this.formatKeyboardEvent(a[l].Content));return a},this.eventService.auditTrailInitializeEvent.subscribe({next:()=>{this.initialize(),this.eventService.auditTrailInitializeEvent.unsubscribe()}})}get isActive(){return this.configArr.length>0}get config(){return this.configArr[this.configIndex]}get trail(){return this.trailArr[this.configIndex]||(this.trailArr[this.configIndex]=[]),this.trailArr[this.configIndex]}get hasOutStandingEvents(){return!Array.isNullOrEmpty(this.trailArr?.filter(t=>t.length>0))}get outStandingEvents(){this.stopPolling();const t=this.prepareAuditTrailEvents(this.trail);return this.trailArr[this.configIndex]=[],t}get timeStamp(){return L.ou.now().toUTC().toString()}get auditTrailPath(){return this._auditTrailPath}set auditTrailPath(t){this._auditTrailPath=t}initialize(){this.serverInfoService.subject.subscribe({next:t=>{null==t||0===t.Level?this.isActive&&this.deactivateAuditLogging():this.isActive?this.configArr[this.configIndex=this.configArr.length]=t:this.activateAuditLogging(t)}})}logActionEvent(t,e,r=it.Answer,o){this.config?.Level>=r&&(this.trail.push(this.createActionEvent(t,e,o)),this.pollWork())}logKeyStrokeEvent(t){if(this.config?.Level>=it.Keyboard){const e=this.createKeyStroke(t);if(e)if(this.lastEventIsKeyStroke())this.trail[this.trail.length-1].Content+=e;else{const r=this.createEvent(e);r.IsKeyStroke=!0,this.trail.push(r)}this.pollWork()}}deactivateAuditLogging(){this.configArr=[],!!this.fieldChangedSubscription&&!this.fieldChangedSubscription.closed&&this.fieldChangedSubscription.unsubscribe(),this.stopPolling()}getFieldAnswerValue(t){let e=null;return null!=t?.DataValue&&(t.DataValue.AnswerStatus===T.Response?e=t.DataValue.ValueAsString:t.DataValue.AnswerStatus===T.SpecialAnswer&&(e=t.DataValue.SpecialAnswer)),e??""}fieldHasSpecialAnswer(t){return t?.DataValue.AnswerStatus===T.SpecialAnswer}escapeValue(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}lastEventIsKeyStroke(){return!this.trail.isEmpty()&&this.trail[this.trail.length-1].IsKeyStroke}createActionEvent(t,e,r){const o=r?r.map(c=>`'${c}'`).join(", "):"",a=String.isNullOrEmpty(e)?"":`ControlID="${e}"`;return this.createEvent(`<ActionEvent Action="${t}(${o})" ${a} />`)}createEnterFieldEvent(t,e,r,o){return this.createFieldEvent(!0,t,e,r,o)}createLeaveFieldEvent(t,e,r,o){return this.createFieldEvent(!1,t,e,r,o)}createFieldEvent(t,e,r,o,a){const d=["<",t?"EnterFieldEvent":"LeaveFieldEvent",' FieldName="',e,'"',!a&&o?` Value="${this.escapeValue(o)}"`:a?` SpecialAnswer="${this.escapeValue(o)}"`:"",' AnswerStatus="',T[r],'" />'].join("");return this.createEvent(d)}createCategoryEvent(t,e){return this.createEvent(`<CategoryEvent IsSelected="${t}" Code="${e}" />`)}createSpecialAnswerEvent(t,e){return this.createEvent(`<SpecialAnswerEvent IsSelected="${t}" Name="${e}" />`)}createGoToURIEvent(t){return this.createEvent(`<GotoUriEvent Uri="${t}" />`)}createToggleVisibilityEvent(t){return this.createEvent(`<ToggleVisibilityEvent ControlName="${t}" />`)}createClassifyEvent(t,e){return this.createEvent(`<ClassifyEvent Code="${t}" Action="${e}" />`)}createRangeErrorEvent(t,e,r,o){return this.createEvent(`<RangeErrorEvent FieldName="${t}" Value="${e}" AnswerStatus="${r}" ErrorKind="RangeCheck" ErrorMessage="${o}"/>`)}formatKeyboardEvent(t){return`<KeyboardEvent KeyStrokes="${t}" />`}createEnterFieldPropertyEvent(t,e,r){return this.createFieldPropertyEvent(!0,t,e,r)}createLeaveFieldPropertyEvent(t,e,r){return this.createFieldPropertyEvent(!1,t,e,r)}createCustomAuditTrailEvent(t){let e="<CustomAuditTrailEvent><Properties>";for(const r of t.Properties)r.Name&&(e+=`<CustomEventProperty Name="${this.escapeValue(r.Name)}" Value="${this.escapeValue(r.Value)}" />`);return e+="</Properties></CustomAuditTrailEvent>",this.createEvent(e)}createFieldPropertyEvent(t,e,r,o){const l=`<${t?"EnterFieldPropertyEvent":"LeaveFieldPropertyEvent"} FieldName="${e}" FieldPropertyName="${r}" Value="${this.escapeValue(o)}" />`;return this.createEvent(l)}createKeyStroke(t){const e=t.ctrlKey?"CTRL":t.altKey?"ALT":t.shiftKey&&t.key.length>1?"SHFT":"";let r="";if("unidentified"===t.key.toLowerCase()){const l=t.target;l.selectionStart&&(r=l.value.charAt(l.selectionStart-1))}else r=t.key?t.key:String.fromCharCode(t.which);if(r===b.Alt||r===b.Shift||r===b.Control)return null;let o="";switch(t.key){case b.Backspace:o="BACK";break;case b.Tab:o="TAB";break;case b.Enter:o="ENTR";break;case b.Pause:o="PAUSE";break;case b.CapsLock:o="CAPS";break;case b.Esc:case b.Escape:o="ESC";break;case b.Spacebar:case b.Space:o=" ";break;case b.PageUp:o="PGUP";break;case b.PageDown:o="PGDN";break;case b.End:o="END";break;case b.Home:o="HOME";break;case b.Left:case b.ArrowLeft:o="LEFT";break;case b.Up:case b.ArrowUp:o="UP";break;case b.Right:case b.ArrowRight:o="RGHT";break;case b.Down:case b.ArrowDown:o="DOWN";break;case b.Insert:o="INS";break;case b.Delete:case b.Del:o="DEL";break;case b.Select:o="SELECT";break;case b.NumLock:o="NUMLOCK";break;case b.Scroll:case b.ScrollLock:o="SCROLLLOCK";break;case b.Dead:o="";break;case b.LeftBracket:o="LBRK";break;case b.RightBracket:o="RBRK"}r=""!==o?o:this.escapeValue(r);const a=[e||r.length>1?"[":"",e,e&&r&&""!==r?"-":"",r,e||r.length>1?"]":""].join("");return e&&!r?"":a}createEvent(t){return{Content:t,ConfigIndex:this.configIndex,IsKeyStroke:!1,TimeStamp:L.ou.now().toUTC().toString()}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(q),i.LFG(Pe),i.LFG(Qi),i.LFG(Nt.eN))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();class Mr{constructor(s,t,e,r){this.oldValue=s,this.newValue=t,this.propertyName=e,this.control=r}hasChanged(){return this.oldValue!==this.newValue}}let M=(()=>{class n{}return n.getField="getfield",n.getItem="getitem",n.getCategory="getcategory",n.getProperty="getproperty",n.getErrors="geterrors",n.isSpecialAnswerAllowed="isspecialanswerallowed",n.getCategoryByCode="getcategorybycode",n.getCategoryByName="getcategorybyname",n.getRoleText="getroletext",n.roleTextExists="roletextexists",n.getTextbox="gettextbox",n.first="first",n.last="last",n.exists="exists",n.all="all",n.count="count",n.min="min",n.max="max",n.sum="sum",n.state="state",n.page="page",n.client="client",n.texts="texts",n.answerStatus="answerstatus",n.valueAsText="valueastext",n.specialAnswer="specialanswer",n.dataType="datatype",n.stringValue="stringvalue",n.decimalValue="decimalvalue",n.realValue="realvalue",n.dateValue="datevalue",n.timeValue="timevalue",n.enumerationValue="enumerationvalue",n.classificationValue="classificationvalue",n.setValue="setvalue",n.integerValue="integervalue",n.blobValue="blobvalue",n.firstRelevant="firstrelevant",n.isRelevant="isrelevant",n.isSelected="isselected",n.navigationMode="navigationmode",n.runtimeSettings="runtimesettings",n.fileName="filename",n.stringType="stringtype",n.realType="realtype",n.enumerationType="enumerationtype",n.classificationPseudoType="classificationpseudotype",n.setType="settype",n.integerType="integertype",n.blobType="blobtype",n.memberType="membertype",n.categories="categories",n.hasValue="hasvalue",n.value="value",n.hasFieldProperties="hasfieldproperties",n.response="response",n.empty="empty",n})();var xt=(()=>{return(n=xt||(xt={}))[n.AppliedFunction=0]="AppliedFunction",n[n.AtomicName=1]="AtomicName",n[n.BooleanConstant=2]="BooleanConstant",n[n.ComposedName=3]="ComposedName",n[n.IntegerConstant=4]="IntegerConstant",n[n.MethodCall=5]="MethodCall",n[n.StringConstant=6]="StringConstant",n[n.EnumerationConstant=7]="EnumerationConstant",n[n.IndexedName=8]="IndexedName",n[n.Conditional=9]="Conditional",n[n.RealConstant=10]="RealConstant",n[n.SetConstant=11]="SetConstant",n[n.RangeCollection=12]="RangeCollection",xt;var n})(),Q=(()=>{return(n=Q||(Q={})).Abs="ABS",n.Addition="+",n.And="AND",n.Arrangement="ARRANGEMENT",n.CornerRadius="CORNERRADIUS",n.Date="DATE",n.Division="/",n.IntegerDivision="DIV",n.EndsWith="ENDSWITH",n.Equality="=",n.Frac="FRAC",n.GreaterThan=">",n.GreaterThanOrEqual=">=",n.GridUnit="GRIDUNIT",n.In="IN",n.InRange="INRANGE",n.Inequality="<>",n.Length="LEN",n.LessThan="<",n.LessThanOrEqual="<=",n.Lowercase="LOWERCASE",n.Max="MAX",n.Min="MIN",n.Modulo="MOD",n.Multiplication="*",n.Not="NOT",n.Or="OR",n.Position="POSITION",n.Round="ROUND",n.StartsWith="STARTSWITH",n.SubString="SUBSTRING",n.Subtraction="-",n.Thickness="THICKNESS",n.Time="TIME",n.ToInteger="TOINTEGER",n.ToString="TOSTRING",n.ToReal="TOREAL",n.ToRichText="TORICHTEXT",n.Trunc="TRUNC",n.Uppercase="UPPERCASE",Q;var n})(),$e=(()=>{return(n=$e||($e={}))[n.MinMax=0]="MinMax",n[n.Simple=1]="Simple",$e;var n})();let Tn=(()=>{class n{evaluateFunction(t,e=[]){switch(t){case Q.Equality:return this.evaluateEquality(e);case Q.Inequality:return this.evaluateInequality(e);case Q.GreaterThan:return this.evaluateGreaterThan(e);case Q.GreaterThanOrEqual:return this.evaluateGreaterThanOrEqual(e);case Q.LessThan:return this.evaluateLessThan(e);case Q.LessThanOrEqual:return this.evaluateLessThanOrEqual(e);case Q.Addition:return this.evaluateAddition(e);case Q.Subtraction:return this.evaluateSubtraction(e);case Q.Multiplication:return this.evaluateMultiplication(e);case Q.Division:return this.evaluateDivision(e);case Q.IntegerDivision:return this.evaluateIntegerDivision(e);case Q.And:return this.evaluateAND(e);case Q.Or:return this.evaluateOR(e);case Q.Not:return this.evaluateNOT(e);case Q.Uppercase:return this.evaluateUpperCase(e);case Q.Lowercase:return this.evaluateLowerCase(e);case Q.StartsWith:return this.evaluateStartsWith(e);case Q.EndsWith:return this.evaluateEndsWith(e);case Q.Modulo:return this.evaluateModulo(e);case Q.Max:return this.evaluateMax(e);case Q.Min:return this.evaluateMin(e);case Q.Length:return this.evaluateLength(e);case Q.In:return this.evaluateIn(e);case Q.ToString:return this.evaluateToString(e);case Q.ToInteger:return this.evaluateToInteger(e);case Q.ToReal:return this.evaluateToReal(e);case Q.Position:return this.evaluatePosition(e);case Q.SubString:return this.evaluateSubstring(e);case Q.Round:return this.evaluateRound(e);case Q.Trunc:return this.evaluateTrunc(e);case Q.InRange:return(([r,o])=>this.evaluateInRanges(r,o))(e);case Q.ToRichText:return this.evaluateToRichText(e)}}evaluateEquality([t,e]){return t===e}evaluateInequality([t,e]){return t!==e}evaluateAND([t,e]){return t&&e}evaluateOR([t,e]){return t||e}evaluateNOT([t]){return!t}evaluateGreaterThan([t,e]){return t>e}evaluateGreaterThanOrEqual([t,e]){return t>=e}evaluateLessThan([t,e]){return t<e}evaluateLessThanOrEqual([t,e]){return t<=e}evaluateAddition([t,e,r]){if(r===I.Set){const o=e.toString();if(!String.isNullOrEmpty(t)){const a=t.split("-");return-1===a.indexOf(o)?(a.push(o),a.join("-")):t}return o}return this.isFloat(t)||this.isFloat(e)?parseFloat((t+e).toPrecision(O.FLOATING_POINT_PRECISION)):t+e}evaluateSubtraction([t,e,r]){if(r===I.Set){if(t.length>0){const o=e.split("-"),a=o.indexOf(e.toString());if(-1!==a)return o.splice(a,1),o.join("-")}return t}return this.isFloat(t)||this.isFloat(e)?parseFloat((t-e).toPrecision(O.FLOATING_POINT_PRECISION)):t-e}evaluateMultiplication([t,e]){return new Ot.Z(t).times(e)}evaluateDivision([t,e]){return this.isFloat(t)||this.isFloat(e)?parseFloat((t/e).toPrecision(O.FLOATING_POINT_PRECISION)):t/e}evaluateMax([t,e]){return this.isFloat(t)||this.isFloat(e)?parseFloat(Math.max(t,e).toPrecision(O.FLOATING_POINT_PRECISION)):Math.max(t,e)}evaluateMin([t,e]){return this.isFloat(t)||this.isFloat(e)?parseFloat(Math.min(t,e).toPrecision(O.FLOATING_POINT_PRECISION)):Math.min(t,e)}isFloat(t){return Number(t)===t&&(t%1!=0||Number.isInteger(t))}evaluateIntegerDivision([t,e]){return Math.floor(t/e)}evaluateModulo([t,e]){return t%e}evaluateIn([t,e,r]){const o=t?.toString(),a=e?.toString();return!String.isNullOrEmpty(a)&&-1===["DONTKNOW","EMPTY","REFUSAL"].indexOf(a)&&(r===I.Set?-1!==a.split("-").indexOf(o):-1!==a.indexOf(o))}evaluateSubstring([t,e,r]){const o=t?.toString(),a=e>0?e-1:0,l=r>0?r:0;return!String.isNullOrEmpty(o)&&-1===["DONTKNOW","EMPTY","REFUSAL"].indexOf(o)&&a<o.length?o.substring(a,a+l):""}evaluatePosition([t,e,r]){const o=t?.toString(),a=e?.toString(),l=r>0?r-1:void 0;return String.isNullOrEmpty(o)||String.isNullOrEmpty(a)||-1!==["DONTKNOW","EMPTY","REFUSAL"].indexOf(a)?0:a.indexOf(o,l)+1}evaluateUpperCase([t]){return t?.toUpperCase()??""}evaluateLowerCase([t]){return t?.toLowerCase()??""}evaluateStartsWith([t,e]){return 0===t?.indexOf(e)}evaluateEndsWith([t,e]){const r=t?.indexOf(e);return r===(t?.length??0)-(e?.length??0)}evaluateLength([t]){return t?.length??0}evaluateToString([t,e,r]){return t.toString()}evaluateToInteger([t]){return parseInt(t,10)}evaluateToReal([t]){return parseFloat(t)}evaluateRound([t]){return Math.round(t)}evaluateTrunc([t]){return Math.trunc(t)}evaluateInRanges(t,e){for(let r=0,o=e.length;r<o;r++)if(this.evaluateInRange(t,e[r]))return!0;return!1}evaluateInRange(t,e){switch(e.Kind){case $e.MinMax:return this.evaluateInMinMaxRange(t,e);case $e.Simple:return this.evaluateInSimpleRange(t,e);default:return!1}}evaluateInMinMaxRange(t,{MinValue:e,MaxValue:r}){return e<=t&&t<=r}evaluateInSimpleRange(t,{Value:e}){return t===e}evaluateToRichText([t]){return{SimpleText:t,MaxTabCount:0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();class Ir{f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"Empty"}}class Er{constructor(s){this.injector=s}f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(s){if("body"===document.activeElement.tagName.toLowerCase()){const t=document.querySelectorAll('[tabindex="1"]');t.length>0&&(t[0].focus(),s.stopPropagation(),s.preventDefault())}return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"Empty"}}class Pn extends Ft{constructor(s,t){super(s),this.Condition=t}}class Mn extends Pn{constructor(s=null,t){super(p.NextField,s),this.eventSource=t}}var C=(()=>{return(n=C||(C={})).NextField="NextField",n.PreviousField="FieldLeft",n.NextPage="NextPage",n.PreviousPage="PreviousPage",n.FirstPage="FirstPage",n.LastPage="LastPage",n.ToggleNavigation="ToggleNavigation",n.FocusControl="FocusControl",n.GoToField="GoToField",n.FirstInputControl="FirstInputControl",n.LastInputControl="LastInputControl",n.RestorePreviousValue="RestorePreviousValue",n.SetInsertMode="SetInsertMode",n.SetNavigationMode="SetNavigationMode",n.RestoreMode="RestoreMode",C;var n})(),Me=(()=>{return(n=Me||(Me={}))[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",Me;var n})();class Fr{constructor(s){this.injector=s,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.NextField}execute(){this.eventService.emitHandleActionEvent(new Mn(null,Me.Keyboard))}}class Lr extends Pn{constructor(s=null){super(p.PreviousField,s)}}class Dr{constructor(s){this.injector=s,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.PreviousField}execute(s){s.preventDefault(),this.eventService.emitHandleActionEvent(new Lr)}}class Vr extends Ft{constructor(){super(p.NextPage)}}class jr{constructor(s){this.injector=s,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.NextPage}execute(s){s.preventDefault(),this.eventService.emitHandleActionEvent(new Vr)}}class Nr extends Ft{constructor(){super(p.PreviousPage)}}class Rr{constructor(s){this.injector=s,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.PreviousPage}execute(s){s.preventDefault(),this.eventService.emitHandleActionEvent(new Nr)}}class Br extends Ft{constructor(){super(p.FirstPage)}}class zr{constructor(s){this.injector=s,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.FirstPage}execute(){this.eventService.emitHandleActionEvent(new Br)}}class Gr extends Ft{constructor(){super(p.LastPage)}}class Hr{constructor(s){this.injector=s,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.LastPage}execute(){this.eventService.emitHandleActionEvent(new Gr)}}class Ur{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}get navigationCommandKind(){return C.ToggleNavigation}execute(){this.navigationService.toggleNavigationMode()}}var Ie=U(5698),Ee=(()=>{return(n=Ee||(Ee={}))[n.Enter=0]="Enter",n[n.Leave=1]="Leave",Ee;var n})();let Ji=(()=>{class n{constructor(t,e,r){this.eventService=t,this.renderStateService=e,this.subscriptionService=r}get routeItemEvents(){return this._routeItemEvents}get initialized(){return void 0!==this.routeItemEvents}initialize(t){this._routeItemEvents=t||[],this.pageInitializedSubscription||(this.pageInitializedSubscription=this.eventService.pageInitializedEvent.subscribe({next:()=>{this.handleInitialFieldChange(),this.subscribeToChanges()}}))}shouldDebounce(){return!(!this.initialized||!Array.isPopulated(this.routeItemEvents)||!this.routeItemEvents.find(t=>t&&t.OnExecute&&Array.isPopulated(t.OnExecute.Actions)&&t.OnExecute.Actions.find(e=>e.Kind===p.SetFocus)))}subscribeToChanges(){this.activeFieldChangedSubscription||(this.activeFieldChangedSubscription=this.eventService.activeFieldChangedEvent.subscribe({next:t=>{this.handleFieldChange(t)}}))}handleInitialFieldChange(){if(!this.renderStateService.renderState)return;const t=this.renderStateService.activeFieldName;if(!t)return;const r=this.subscriptionService.getFieldSubject(t,this.renderStateService.activeFieldPropertyName);if(r){const o=r.getValue();this.handleFieldChange({nextField:o})}}handleFieldChange(t){!this.routeItemEvents||this.routeItemEvents.forEach(e=>{if(e.Kind===Ee.Leave&&e.FieldName===(t.previousField?t.previousField.FieldName:null)||e.Kind===Ee.Enter&&e.FieldName===(t.nextField?t.nextField.FieldName:null)){if(e.Kind===Ee.Enter){if(e.FieldName===this.lastOnEnterField)return;this.lastOnEnterField=e.FieldName}this.eventService.emitHandleActionsEvent(e.OnExecute)}})}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>q)),i.LFG((0,i.Gpc)(()=>ut)),i.LFG((0,i.Gpc)(()=>pt)))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),ue=(()=>{class n{constructor(t,e,r,o,a,l){this.ngZone=t,this.clientSideRouteItemEventService=e,this.document=r,this.eventService=o,this.renderStateService=a,this.subscriptionService=l,this.getScrollParent=c=>null==c?null:c.scrollHeight>c.offsetHeight&&"DIV"===c.nodeName?c:this.getScrollParent(c.parentNode),this.fieldChangeSubscription||(this.fieldChangeSubscription=this.eventService.activeFieldChangedEvent.subscribe({next:c=>{c.nextField&&c.nextField.FieldName&&this.focusActiveField(c.nextField.FieldName,c.elementId,c.eventSource,c.triggerFocus)}})),this.sizeTreeReadySubscription||(this.sizeTreeReadySubscription=this.eventService.sizeTreeReadyEvent.subscribe({next:()=>{const c=this.document.activeElement;c&&!this.isInViewport(c)&&c.scrollIntoView(!1)}}))}focusActiveField(t,e,r,o=!0){if(t&&(!this.renderStateService.disableAutoFocus||null!=r)&&o){const l=this.subscriptionService.getFieldSubject(t);if(l){const c=e?u=>u.ID===e:u=>u.TabIndex??!1,d=l.getValue().InputControls.filter(c);d.length>0&&d[0].ID?this.focusElementId(d[0].ID):String.hasValue(e)&&this.focusElementId(e)}}}focusElementId(t){const e=this.document.querySelectorAll(`[id="${t}"]`);let r;return e.length>0&&(r=e[e.length-1]),r&&!this.isInViewport(r)&&this.ngZone.runOutsideAngular(()=>{this.ngZone.onStable.pipe((0,Ie.q)(1)).subscribe({next:()=>{r?.scrollIntoView(!0)}})}),r&&this.ngZone.runOutsideAngular(()=>{this.ngZone.onStable.pipe((0,Ie.q)(1)).subscribe({next:()=>{r?.focus()}})}),r}focusHiddenTag(){this.focusElementId("firstFocusable")?.setAttribute("tabindex","-1")}isFirstInputControlInActiveField(t){const e=this.renderStateService.activeFieldName;if(e){const r=this.subscriptionService.getFieldInfo(e);if(r){const o=r.InputControls.filter(a=>null!=a.TabIndex&&a.TabIndex>-1);if(o.length>0&&o[0].ID===t)return!0}}return!1}hasSetFocusEventInClientSideRouteItem(){const t=this.renderStateService.activeFieldName;return!!(t&&this.clientSideRouteItemEventService.routeItemEvents.filter(r=>r.FieldName===t&&Array.isPopulated(r.OnExecute.Actions)&&r.OnExecute.Actions.find(o=>o.Kind===p.SetFocus)).length>0)}isInViewport(t){if(t){const e=t.getBoundingClientRect();let r=this.getScrollParent(t);return r=null===r?document.getElementsByClassName("rootControl")[0]:r,r?e.top>=r.getBoundingClientRect().top&&e.bottom<=r.getBoundingClientRect().top+r.clientHeight:e.top>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}return!1}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(i.R0b),i.LFG(Ji),i.LFG(g.K0),i.LFG(q),i.LFG(ut),i.LFG(pt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();class Wr{constructor(s,t){this.injector=s,this.controlId=t,this.focusService=this.injector.get(ue)}get navigationCommandKind(){return C.FocusControl}execute(){this.focusService.focusElementId(this.controlId)}}class Yr{constructor(s,t){this.injector=s,this.fieldName=t,this.eventService=this.injector.get(q)}get navigationCommandKind(){return C.GoToField}execute(s){s.preventDefault(),this.eventService.emitHandleActionEvent(new Ze(this.fieldName))}}class Kr{constructor(s){this.injector=s,this.focusService=this.injector.get(ue),this.navigationService=this.injector.get(nt)}get navigationCommandKind(){return C.FirstInputControl}execute(s){const t=this.navigationService.findComponent(s);let e="";if(t){if(null==t.getVersion||t.getVersion()<=1)return;const r=t.getNeighbours();r.isEmpty()||(e=r[0].ID)}""!==e&&this.focusService.focusElementId(e)}}class Qr{constructor(s){this.injector=s,this.focusService=this.injector.get(ue),this.navigationService=this.injector.get(nt)}get navigationCommandKind(){return C.LastInputControl}execute(s){const t=this.navigationService.findComponent(s);let e="";if(t){if(null==t.getVersion||t.getVersion()<=1)return;const r=t.getNeighbours();r.isEmpty()||(e=r[r.length-1].ID)}""!==e&&this.focusService.focusElementId(e)}}class Jr{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt),this.subscriptionService=this.injector.get(pt),this.renderStateService=this.injector.get(ut)}get navigationCommandKind(){return C.RestorePreviousValue}execute(){if(this.navigationService.previousFieldValue){const s=Object.assign({},this.navigationService.previousFieldValue);if(null!==s){const e=this.subscriptionService.getFieldSubject(this.renderStateService.activeFieldName);if(e){const r=e.getValue();r.DataValue.AnswerStatus=s.AnswerStatus,r.DataValue.SpecialAnswer=s.SpecialAnswer,r.DataValue.ValueAsString=s.ValueAsString,r.EventSourceId="RestorePreviousValueCommand",e.next(r)}}}}}class In{constructor(s,t){this.injector=s,this.mode=t,this.navigationService=this.injector.get(nt)}get navigationCommandKind(){return C.SetNavigationMode}execute(){this.navigationService.setNavigationMode(this.mode)}}class Zr{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt),this.renderStateService=this.injector.get(ut)}get navigationCommandKind(){return C.RestoreMode}execute(){this.navigationService.setNavigationMode(this.renderStateService.navigationMode)}}class x{static createCommand(s,t,e,r){switch(s){case C.NextField:return new Fr(t);case C.PreviousField:return new Dr(t);case C.NextPage:return new jr(t);case C.PreviousPage:return new Rr(t);case C.FirstPage:return new zr(t);case C.LastPage:return new Hr(t);case C.ToggleNavigation:return new Ur(t);case C.FocusControl:return new Wr(t,e);case C.GoToField:return new Yr(t,r);case C.FirstInputControl:return new Kr(t);case C.LastInputControl:return new Qr(t);case C.RestorePreviousValue:return new Jr(t);case C.SetInsertMode:return new In(t,At.Insert);case C.SetNavigationMode:return new In(t,At.Navigation);case C.RestoreMode:return new Zr(t)}}static createCommands(s,t,e,r){const o=[];for(const a of s)o.push(x.createCommand(a,t,e,r));return o}}class qr{constructor(s){this.injector=s}f2KeyPressed(){return[]}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"Empty"}}var J=(()=>{return(n=J||(J={}))[n.Up=0]="Up",n[n.Down=1]="Down",n[n.Left=2]="Left",n[n.Right=3]="Right",J;var n})();let nt=(()=>{class n{constructor(t,e,r,o,a){this.eventService=t,this.subscriptionService=e,this.renderStateService=r,this.componentService=o,this.injector=a,this.previousFieldValue=null,this.navigationMode=At.Insert,this.subscriptionService.renderStateSubject.subscribe({next:l=>{l&&this.handleRenderStateChange()}}),this.eventService.activeFieldChangedEvent.subscribe({next:()=>{this.renderStateService.navigationMode!==this.navigationMode&&this.setNavigationMode(this.renderStateService.navigationMode)}})}toggleNavigationMode(){this.setNavigationMode(this.navigationMode===At.Navigation?At.Insert:At.Navigation)}setInsertMode(t=!0){this.renderStateService.navigationMode!==At.None&&this.setNavigationMode(At.Insert,t)}setNavigationMode(t,e=!0){const r=this.navigationMode;this.navigationMode=t,r!==this.navigationMode&&this.eventService.navigationModeChangedEvent.emit(e)}f2KeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.f2KeyPressed(t),t)}enterKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.enterKeyPressed(t),t)}leftKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.leftKeyPressed(t),t)}rightKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.rightKeyPressed(t),t)}upKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.upKeyPressed(t),t)}downKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.downKeyPressed(t),t)}pageUpKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.pageUpKeyPressed(t),t)}pageDownKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.pageDownKeyPressed(t),t)}homeKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.homeKeyPressed(t),t)}endKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.endKeyPressed(t),t)}tabKeyPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.tabKeyPressed(t),t)}shiftTabPressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.shiftTabPressed(t),t)}escapePressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.escapePressed(t),t)}spacePressed(t){const e=this.getNavigationStrategy(t);e&&this.runCommands(e.spacePressed(t),t)}findComponent(t){if(t instanceof KeyboardEvent){const e=t.target;if(null!=e){const r=e.getAttribute("data-component-id")||e.id;return this.componentService.getComponent(r)}}return null}findAdjacentField(t,e){let r=null;const o=this.findComponent(t);if(o){if(null==o.getVersion||o.getVersion()<=1)return null;switch(e){case J.Left:r=this.getFieldLeft(this.renderStateService.activeFieldName,o);break;case J.Right:r=this.getFieldRight(this.renderStateService.activeFieldName,o);break;case J.Down:r=this.getFieldDown(this.renderStateService.activeFieldName,o);break;case J.Up:r=this.getFieldUp(this.renderStateService.activeFieldName,o)}}return r}findAdjacentControl(t,e){let r=null;const o=this.findComponent(t);if(o){if(null==o.getVersion||o.getVersion()<=1)return null;let a;const l=o.getNeighbours();if(!(l.length>1))return null;a=this.getNeighbourPositions(l);const c=o.getPosition();c&&(r=this.findClosestControlId(c,e,a,u=>o.controlId!==u&&o.isEnabled&&o.isVisible))}return r}getFieldLeft(t,e){let r="";try{if(null!==e){const o=this.getInputControlsRect(t);if(null!==o){const a=this.subscriptionService.fieldInfoSubjects;let l=-1;for(let c=0;c<a.length;c++){const d=a[c].getValue();if(d.FieldName.toLowerCase()!==t.toLowerCase()){const u=this.getInputControlsRect(d.FieldName);null!==u&&u.top<=o.bottom&&u.bottom>=o.top&&u.left<o.left&&(-1===l||o.left-u.left<l)&&(l=o.left-u.left,r=d.FieldName)}}if(""===r){let c=null;for(let d=0;d<a.length;d++){const u=a[d].getValue();if(u.FieldName.toLowerCase()!==t.toLowerCase()){const h=this.getInputControlsRect(u.FieldName);null!==h&&h.bottom<o.top&&(""===r||null!=c&&(h.top>c.bottom||h.top<=c.bottom&&h.bottom>=c.top&&h.left>c.left))&&(r=u.FieldName,c=h)}}}}}}catch{return""}return r}getFieldRight(t,e){let r="";try{if(null!==e){const o=this.getInputControlsRect(t);if(null!==o){const a=this.subscriptionService.fieldInfoSubjects;let l=-1;for(let c=0;c<a.length;c++){const d=a[c].getValue();if(d.FieldName.toLowerCase()!==t.toLowerCase()){const u=this.getInputControlsRect(d.FieldName);null!=u&&u.bottom>=o.top&&u.top<=o.bottom&&u.left>o.left&&(-1===l||u.left-o.left<l)&&(l=u.left-o.left,r=d.FieldName)}}if(""===r){let c=null;for(let d=0;d<a.length;d++){const u=a[d].getValue();if(u.FieldName.toLowerCase()!==t.toLowerCase()){const h=this.getInputControlsRect(u.FieldName);null!==h&&h.top>o.bottom&&(""===r||null!=c&&(h.bottom<c.top||h.bottom>=c.top&&h.top<=c.bottom&&h.left<c.left))&&(r=u.FieldName,c=h)}}}}}}catch{return""}return r}getFieldUp(t,e){let r="";try{if(null!==e){const o=this.getInputControlsRect(t);if(null!==o){const a=this.subscriptionService.fieldInfoSubjects;let l=-1;for(let c=0;c<a.length;c++){const d=a[c].getValue();if(d.FieldName.toLowerCase()!==t.toLowerCase()){const u=this.getInputControlsRect(d.FieldName);null!=u&&u.left<=o.right&&u.right>=o.left&&u.top<o.top&&(-1===l||o.top-u.top<l)&&(l=o.top-u.top,r=d.FieldName)}}if(""===r)for(let c=0;c<a.length;c++){const d=a[c].getValue();if(d.FieldName.toLowerCase()!==t.toLowerCase()){const u=this.getInputControlsRect(d.FieldName);null!==u&&u.bottom<o.top&&(l=-1,""===r&&(r=d.FieldName))}}}}}catch{return""}return r}getFieldDown(t,e){let r="";try{if(null!==e){const o=this.getInputControlsRect(t);if(null!==o){const a=this.subscriptionService.fieldInfoSubjects;let l=-1;for(let c=0;c<a.length;c++){const d=a[c].getValue();if(d.FieldName.toLowerCase()!==t.toLowerCase()){const u=this.getInputControlsRect(d.FieldName);null!=u&&u.left<=o.right&&u.right>=o.left&&u.top>o.top&&(-1===l||u.top-o.top<l)&&(l=u.top-o.top,r=d.FieldName)}}if(""===r)for(let c=0;c<a.length;c++){const d=a[c].getValue();if(d.FieldName.toLowerCase()!==t.toLowerCase()){const u=this.getInputControlsRect(d.FieldName);null!==u&&u.top>o.bottom&&(l=-1,""===r&&(r=d.FieldName))}}}}}catch{return""}return r}getInputControlsRect(t){const e=this.subscriptionService.getFieldInfo(t)?.InputControls||[];let r=!1,o=0,a=0,l=0,c=0;for(const d of e){const u=d.ID,h=this.componentService.getComponent(u);if(null!==h){const m=h.dataObject;if(m.Enabled&&m.Visibility===K.Visible&&this.inContentArea(u)){const f=h.getPosition();r?(o=Math.min(f.left,o),a=Math.min(f.top,a),l=Math.max(f.right,l),c=Math.max(f.bottom,c)):(o=f.left,a=f.top,l=f.right,c=f.bottom,r=!0)}}}return r?new DOMRect(o,a,l-o,c-a):null}inContentArea(t){const e=this.componentService.getComponent(t);if(null!==e){if("contentarea"===e.dataObject?.PlaceholderKindName?.toLowerCase())return!0;if(String.hasValue(e.parentId))return this.inContentArea(e.parentId)}return!1}handleRenderStateChange(){if(this.setNavigationMode(this.renderStateService.navigationMode),this.renderStateService.activeFieldName){const t=this.subscriptionService.getFieldSubject(this.renderStateService.activeFieldName);t&&this.saveFieldValue(t.value.DataValue)}}saveFieldValue(t){null!=t&&(this.previousFieldValue=Object.assign({},t))}getNavigationStrategy(t){let e=null;const r=this.findComponent(t);return r?this.navigationMode===At.Navigation&&r.getKeyboardNavigationStrategy?e=r.getKeyboardNavigationStrategy():this.navigationMode===At.Insert&&r.getKeyboardInsertStrategy?e=r.getKeyboardInsertStrategy():this.navigationMode===At.None&&r.getKeyboardEmptyStrategy&&(e=r.getKeyboardEmptyStrategy()):e=this.navigationMode===At.Navigation?this.getDefaultNavigationStrategy():this.navigationMode===At.Insert?this.getDefaultInsertStrategy():this.getDefaultEmptyStrategy(),e}findClosestControlId(t,e,r,o){let a=null,l=Number.MAX_VALUE;for(const c in r)if(o(c)){const d=r[c].position,w=this.angle360(t.left+(t.width>>1),t.top+(t.height>>1),d.left+(d.width>>1),d.top+(d.height>>1));let D=!1;if(e===J.Left?D=w>=120&&w<=240:e===J.Right?D=w>=300||w<=60:e===J.Up?D=w>=210&&w<=330:e===J.Down&&(D=w>=30&&w<=150),D){const G=this.getDistance(t,d);G<l&&(l=G,a=c)}}return a}getDistance(t,e){return Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}angle(t,e,r,o){let c=Math.atan2(o-e,r-t);return c*=180/Math.PI,c}angle360(t,e,r,o){let a=this.angle(t,e,r,o);return a<0&&(a=360+a),a}getNeighbourPositions(t){const e={};return t.forEach((r,o)=>{const a=this.componentService.getComponent(r.ID);if(a){const l=a.getPosition();l&&(e[r.ID]={position:l,index:o})}}),e}runCommands(t,e){if(Array.isPopulated(t))for(const r of t)r.execute(e)}getDefaultNavigationStrategy(){return new qr(this.injector)}getDefaultInsertStrategy(){return new Ir}getDefaultEmptyStrategy(){return new Er(this.injector)}nextVisibleControlIdByTabIndex(t){const e=this.allVisibleControlsWithTabIndex(),r=e.findIndex(o=>o.tabIndex===t)+1;return r<e.length?e[r]?.id:null}previousVisibleControlIdByTabIndex(t){const e=this.allVisibleControlsWithTabIndex(),r=e.findIndex(o=>o.tabIndex===t)-1;return r>=0?e[r]?.id:null}allVisibleControlsWithTabIndex(){return Array.from(document.querySelectorAll("[tabindex]")).map(t=>t).sort((t,e)=>t.tabIndex-e.tabIndex).filter(t=>{const e=window.getComputedStyle(t);return"none"!=e.display&&"hidden"!=e.visibility&&"0px"!==e.width&&"0px"!==e.height})}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>q)),i.LFG((0,i.Gpc)(()=>pt)),i.LFG((0,i.Gpc)(()=>ut)),i.LFG((0,i.Gpc)(()=>se)),i.LFG(i.zs3))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t,e,r,o,a){this.functionService=t,this.helperService=e,this.navigationService=r,this.renderStateService=o,this.userAgentService=a,this.expressionEvaluator={},this.methodCallExpressionEvaluator={},this.atomicNameExpressionEvaluator={},this.childPropertyValueRetriever={},this.atomicNameProperties={},this.createExpressionEvaluator(),this.createMethodCallExpressionEvaluator(),this.createAtomicNameExpressionEvaluator(),this.createChildPropertyValueRetriever()}evaluateExpression(t){return this.expressionEvaluator[t.Kind].call(this,t)}createExpressionEvaluator(){this.expressionEvaluator[xt.AppliedFunction]=this.evaluateAppliedFunctionExpression,this.expressionEvaluator[xt.AtomicName]=this.evaluateAtomicNameExpression,this.expressionEvaluator[xt.BooleanConstant]=this.evaluateBooleanConstantExpression,this.expressionEvaluator[xt.ComposedName]=this.evaluateComposedNameExpression,this.expressionEvaluator[xt.IntegerConstant]=this.evaluateIntegerConstantExpression,this.expressionEvaluator[xt.MethodCall]=this.evaluateMethodCallExpression,this.expressionEvaluator[xt.StringConstant]=this.evaluateStringConstantExpression,this.expressionEvaluator[xt.EnumerationConstant]=this.evaluateEnumerationConstantExpression,this.expressionEvaluator[xt.IndexedName]=this.evaluateIndexedNameExpression,this.expressionEvaluator[xt.Conditional]=this.evaluateConditionalExpression,this.expressionEvaluator[xt.RealConstant]=this.evaluateRealConstantExpression,this.expressionEvaluator[xt.SetConstant]=this.evaluateSetConstantExpression,this.expressionEvaluator[xt.RangeCollection]=this.evaluateRangeCollectionExpression}createMethodCallExpressionEvaluator(){this.methodCallExpressionEvaluator[M.getField]=this.callGetField,this.methodCallExpressionEvaluator[M.getItem]=this.callGetItem,this.methodCallExpressionEvaluator[M.getCategory]=this.callGetCategory,this.methodCallExpressionEvaluator[M.getProperty]=this.callGetProperty,this.methodCallExpressionEvaluator[M.getErrors]=this.callGetErrors,this.methodCallExpressionEvaluator[M.isSpecialAnswerAllowed]=this.callIsSpecialAnswerAllowed,this.methodCallExpressionEvaluator[M.getCategoryByCode]=this.callGetCategoryByCode,this.methodCallExpressionEvaluator[M.getCategoryByName]=this.callGetCategoryByName,this.methodCallExpressionEvaluator[M.getRoleText]=this.callGetRoleText,this.methodCallExpressionEvaluator[M.roleTextExists]=this.callRoleTextExists,this.methodCallExpressionEvaluator[M.getTextbox]=this.callGetTextbox,this.methodCallExpressionEvaluator[M.first]=this.callFirst,this.methodCallExpressionEvaluator[M.last]=this.callLast,this.methodCallExpressionEvaluator[M.exists]=this.callExists,this.methodCallExpressionEvaluator[M.all]=this.callAll,this.methodCallExpressionEvaluator[M.count]=this.callCount,this.methodCallExpressionEvaluator[M.min]=this.callMin,this.methodCallExpressionEvaluator[M.max]=this.callMax,this.methodCallExpressionEvaluator[M.sum]=this.callSum}createAtomicNameExpressionEvaluator(){this.atomicNameExpressionEvaluator[M.state]=()=>this.renderStateService.layoutModelState,this.atomicNameExpressionEvaluator[M.page]=()=>Object.assign(this.renderStateService.page??{},{ActiveField:this.renderStateService.activeField}),this.atomicNameExpressionEvaluator[M.client]=()=>this.userAgentService.client,this.atomicNameExpressionEvaluator[M.texts]=()=>this.renderStateService.textProvider,this.atomicNameExpressionEvaluator[M.response]=()=>T.Response,this.atomicNameExpressionEvaluator[M.empty]=()=>T.Empty,this.atomicNameExpressionEvaluator[M.specialAnswer]=()=>T.SpecialAnswer}createChildPropertyValueRetriever(){const t=(r,o)=>this.isDataType(r,o)?this.getValueAsString(r):"",e=(r,o)=>this.isDataType(r,o)?this.getValueAsInteger(r):null;this.childPropertyValueRetriever[M.answerStatus]=r=>this.getAnswerStatus(r),this.childPropertyValueRetriever[M.valueAsText]=r=>this.getStringValue(r),this.childPropertyValueRetriever[M.specialAnswer]=r=>this.getSpecialAnswer(r),this.childPropertyValueRetriever[M.dataType]=r=>this.getDataType(r),this.childPropertyValueRetriever[M.stringValue]=r=>this.getStringValue(r),this.childPropertyValueRetriever[M.decimalValue]=r=>this.getValueAsDecimal(r),this.childPropertyValueRetriever[M.realValue]=r=>this.getValueAsDecimal(r),this.childPropertyValueRetriever[M.dateValue]=r=>t(r,I.Date),this.childPropertyValueRetriever[M.timeValue]=r=>t(r,I.Time),this.childPropertyValueRetriever[M.enumerationValue]=r=>e(r,I.Enumeration),this.childPropertyValueRetriever[M.classificationValue]=r=>t(r,I.Classification),this.childPropertyValueRetriever[M.setValue]=r=>t(r,I.Set),this.childPropertyValueRetriever[M.integerValue]=r=>e(r,I.Integer),this.childPropertyValueRetriever[M.blobValue]=r=>this.isDataType(r,I.Blob)?r:null,this.childPropertyValueRetriever[M.fileName]=r=>this.isDataType(r,I.Blob)?this.getBlobFilename(r):null,this.childPropertyValueRetriever[M.firstRelevant]=r=>null!=r?this.findFirstRelevantError(r):null,this.childPropertyValueRetriever[M.isRelevant]=(r,o)=>null!=r&&(Array.isArray(r)?!!this.findFirstRelevantError(r):this.getCaseInsensitivePropertyValue(r,o)),this.childPropertyValueRetriever[M.categories]=r=>{const o=r;if(o&&Array.isPopulated(o.Categories))return o.Categories;const a=r;if(a){const l=this.getValueType(a);if(l&&Array.isPopulated(l.Categories))return l.Categories.map(c=>this.getCategoryBy(a,c.Code)).filter(c=>c)}return null},this.childPropertyValueRetriever[M.isSelected]=r=>{if(null!=r){const o=r.field??this.renderStateService.getFieldByName(r.fieldName);if(o)return!!String.hasValue(o.DataValue.ValueAsString)&&-1!==o.DataValue.ValueAsString.split("-").indexOf(r.value.toString())}return!1},this.childPropertyValueRetriever[M.navigationMode]=()=>this.navigationService.navigationMode,this.childPropertyValueRetriever[M.runtimeSettings]=()=>this.renderStateService.runtimeSettings,this.childPropertyValueRetriever[M.stringType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.realType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.enumerationType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.classificationPseudoType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.setType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.integerType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.blobType]=r=>this.getValueType(r),this.childPropertyValueRetriever[M.memberType]=r=>r,this.childPropertyValueRetriever[M.hasValue]=(r,o)=>this.getCaseInsensitivePropertyValue(r,o)||null!=r,this.childPropertyValueRetriever[M.value]=(r,o)=>this.getCaseInsensitivePropertyValue(r,o)||(r??null),this.childPropertyValueRetriever[M.hasFieldProperties]=r=>!Array.isNullOrEmpty(r.FieldProperties)}evaluateAppliedFunctionExpression(t){const e=[];t.Arguments.forEach(o=>{e[e.length]=this.evaluateExpression(o)});let r=t.FunctionName;return r===Q.In?t.Arguments[1].Kind===xt.RangeCollection?r=Q.InRange:null!=t.Arguments[1].ReturnType&&(e[e.length]=t.Arguments[1].ReturnType):-1!==[Q.Addition,Q.Subtraction].indexOf(t.FunctionName)&&null!=t.Arguments[0].ReturnType&&(e[e.length]=t.Arguments[0].ReturnType),this.functionService.evaluateFunction(r,e)}evaluateMethodCallExpression(t){const e=this.evaluateExpression(t.ObjectName),r=t.MethodName.toLowerCase(),o=this.methodCallExpressionEvaluator[r];return o?o.call(this,e,t.Arguments):null}evaluateAtomicNameExpression(t){const e=t.Name.toLowerCase();return this.atomicNameExpressionEvaluator[e]?this.atomicNameExpressionEvaluator[e]():this.atomicNameProperties[e]??t.Name}evaluateComposedNameExpression(t){const e=this.evaluateExpression(t.Parent),r=t.Child;return this.setReturnType(t),(this.childPropertyValueRetriever[r.toLowerCase()]??((o,a)=>this.getPropertyValue(o,a)))(e,r)}evaluateIntegerConstantExpression(t){return t.Value}evaluateStringConstantExpression(t){return t.Value}evaluateBooleanConstantExpression(t){return t.Value}evaluateEnumerationConstantExpression(t){return t.Value}evaluateIndexedNameExpression(t){const e=this.evaluateExpression(t.Collection),r=this.evaluateExpression(t.Index);return!Array.isNullOrEmpty(e)&&r>=0&&r<e.length?e[r]:null}evaluateConditionalExpression(t){return this.evaluateExpression(!t.Condition||this.evaluateExpression(t.Condition)?t.ThenValue:t.ElseValue)}evaluateRealConstantExpression(t){return t.Value}evaluateSetConstantExpression(t){return t.Value}evaluateRangeCollectionExpression(t){return t.Ranges}callGetField(t,e){return this.callGetItem(t,e)}callGetItem(t,[{Value:e}]=[{}]){for(let r=0,o=t.length;r<o;r++)if(t[r].Name.toLowerCase()===e.toLowerCase())return t[r]}callGetCategory(t,[{Value:e}]=[{}]){return this.getCategoryBy(t,e)}callGetProperty(t,[{Value:e}]=[{}]){for(let r=0,o=t.length;r<o;r++)if(t[r].Definition.Name.toLowerCase()===e.toLowerCase())return t[r];return null}callGetErrors(t,[{Value:e}]=[{}]){return t&&Array.isPopulated(t.RouteItems)?this.getErrors(t.RouteItems,e):[]}callIsSpecialAnswerAllowed(t,[{Value:e}]=[{}]){return null!=t.SpecialAnswers.find(r=>r.toLowerCase()===e.toLowerCase())}callGetCategoryByCode(t,[{Value:e}]=[{}]){return this.getCategoryBy(t,e)}callGetCategoryByName(t,[{Value:e}]=[{}]){return this.getCategoryBy(t,e,"Name")}callGetRoleText(t,[{Value:e}]=[{}]){return t&&t.RoleTexts&&t.RoleTexts[e]?t.RoleTexts[e]:null}callRoleTextExists(t,[{Value:e}]=[{}]){return t?.RoleTexts&&Object.prototype.hasOwnProperty.call(t.RoleTexts,e)}callGetTextbox(t,[{Value:e}]=[{}]){return this.renderStateService.getTextBox(e)}callFirst(t,[e]=[]){return t.find(r=>{this.atomicNameProperties.item=r;const o=this.evaluateExpression(e);return delete this.atomicNameProperties.item,o})}callLast(t,e){return this.callFirst([...t].reverse(),e)}callExists(t,e){return!!this.callFirst(t,e)}callAll(t,e){return this.callCount(t,e)===t.length}callCount(t,[e]=[]){let r=0;return t.forEach(o=>{this.atomicNameProperties.item=o,(null==e||this.evaluateExpression(e))&&(r+=1),delete this.atomicNameProperties.item}),r}callMin(t,[e]=[]){return this.callMinMax(t,e)}callMax(t,[e]=[]){return this.callMinMax(t,e,!0)}callSum(t,e){let r=0;return t.forEach(o=>{this.atomicNameProperties.item=o,r+=this.evaluateExpression(e[0]),delete this.atomicNameProperties.item}),r}getValueType(t){return(t?.ValueType||t?.Definition?.ValueType)??null}getDataType(t){return this.getValueType(t)?.DataType??I.String}isDataType(t,e){return null!=t&&this.getDataType(t)===e}getStringValue(t){if(t){const e=this.getValueAsString(t);return this.getDataType(t)===I.String&&e?e:""}return null}getAnswerStatus(t){return t?.DataValue.AnswerStatus??T.Empty}getValueAsString(t){return t?.DataValue.ValueAsString??""}getSpecialAnswer(t){return t?.DataValue.SpecialAnswer??""}getBlobFilename(t){let e=t.DataValue.FileName;return e||(e=""),e}getValueAsInteger(t){const e=this.getValueAsString(t);if(!String.isNullOrEmpty(e)){const r=parseInt(e,10);return isNaN(r)?0:r}return null}getValueAsDecimal(t){const e=this.getValueAsString(t);if(!String.isNullOrEmpty(e)){const r=parseFloat(e);return isNaN(r)?0:r}return null}findFirstRelevantError(t){for(let e=0,r=t.length;e<r;e++)if(t[e].IsRelevant)return t[e];return null}getErrors(t,e){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(l.Kind===Oe.Field){const c=this.renderStateService.getFieldByName(l.Name);c&&Array.isPopulated(c.Errors)&&r.push(...c.Errors)}else if(e){const c=this.renderStateService.getGroupByName(l.Name);if(c){const d=this.getErrors(c.RouteItems,e);r.push(...d)}}}return r}getPropertyValue(t,e){if(null!=t){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];if(t.DataValue&&Object.prototype.hasOwnProperty.call(t.DataValue,e))return t.DataValue[e];if(t.ValueType&&Object.prototype.hasOwnProperty.call(t.ValueType,e))return t.ValueType[e];const r=this.getCaseInsensitivePropertyValue(t,e);if(null!=r)return r}return null}getCaseInsensitivePropertyValue(t,e){if(null!=t){const r=e.toLowerCase();for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&o.toLowerCase()===r)return t[o]}return null}getCategoryBy(t,e,r="Code"){if(-1!==[I.Enumeration,I.Set].indexOf(t?.ValueType?.DataType)){const o=t.ValueType;if(o&&Array.isPopulated(o.Categories)){const a=o.Categories.find(l=>l[r]===e);if(null!=a)return{fieldName:t.Name,field:t,value:a.Code,name:a.Name}}}return null}callMinMax(t,[e]=[],r=!1){const o=[];return t.length>0?("string"==typeof t&&(t=this.helperService.separateCategories(t)),t.forEach(a=>{this.atomicNameProperties.item=a,o.push(this.evaluateExpression(e)),delete this.atomicNameProperties.item}),(r?Math.max:Math.min)(...o.map(a=>parseInt(a,10)))):null}setReturnType(t){const e={[M.stringValue]:I.String,[M.decimalValue]:I.Real,[M.realValue]:I.Real,[M.dateValue]:I.Date,[M.timeValue]:I.Time,[M.enumerationValue]:I.Enumeration,[M.classificationValue]:I.Classification,[M.setValue]:I.Set,[M.integerValue]:I.Integer,[M.blobValue]:I.Blob},r=t.Child.toLowerCase();-1!==Object.keys(e).indexOf(r)&&(t.ReturnType=e[r])}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Tn),i.LFG(Jt),i.LFG(nt),i.LFG(ut),i.LFG(Yt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{measure(t,e,r,o){const l=`[${t}] ${e} ${Array.isPopulated(o)?o.map(d=>` ${d.toString()}`):""}`,c={title:l,start:`${l}:start`,end:`${l}:end`};performance.mark(c.start),r(),performance.mark(c.end),performance.measure(c.title,c.start,c.end)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Kt=(()=>{return(n=Kt||(Kt={}))[n.Constant=0]="Constant",n[n.Condition=1]="Condition",n[n.Expression=2]="Expression",Kt;var n})(),Zt=(()=>{return(n=Zt||(Zt={}))[n.Boolean=0]="Boolean",n[n.Brush=1]="Brush",n[n.Color=2]="Color",n[n.CornerRadius=3]="CornerRadius",n[n.Double=4]="Double",n[n.Font=5]="Font",n[n.GridType=6]="GridType",n[n.HorizontalAlignment=7]="HorizontalAlignment",n[n.Integer=8]="Integer",n[n.LineStyle=9]="LineStyle",n[n.BorderStyle=10]="BorderStyle",n[n.RichText=11]="RichText",n[n.ScrollBars=12]="ScrollBars",n[n.ScrollBarVisibility=13]="ScrollBarVisibility",n[n.Thickness=14]="Thickness",n[n.Unit=15]="Unit",n[n.VerticalAlignment=16]="VerticalAlignment",n[n.Visibility=17]="Visibility",n[n.String=18]="String",n[n.ErrorKindFilter=19]="ErrorKindFilter",Zt;var n})();let En=(()=>{class n{constructor(t){this.expressionService=t,this.propertyValueEvaluator={},this.createPropertyValueEvaluator()}evaluatePropertyValue(t){return t?this.propertyValueEvaluator[t.Kind](t):null}createPropertyValueEvaluator(){this.propertyValueEvaluator[Kt.Constant]=this.evaluateConstantPropertyValue.bind(this),this.propertyValueEvaluator[Kt.Condition]=this.evaluateConditionalPropertyValue.bind(this),this.propertyValueEvaluator[Kt.Expression]=this.evaluateExpressionPropertyValue.bind(this)}evaluateConstantPropertyValue(t){return class Xr extends class $r{constructor(s){this.Kind=s}static isConditionalPropertyValue(s){return s.Kind===Kt.Condition}static isExpressionPropertyValue(s){return s.Kind===Kt.Expression}static isConstantPropertyValue(s){return s.Kind===Kt.Constant}}{constructor(s,t){super(Kt.Constant),this.Value=s,this.ConstantType=t}static isBooleanPropertyValue(s){return s.ConstantType===Zt.Boolean}static isDoublePropertyValue(s){return s.ConstantType===Zt.Double}static isErrorKindFilterPropertyValue(s){return s.ConstantType===Zt.ErrorKindFilter}static isFontPropertyValue(s){return s.ConstantType===Zt.Font}static isRichTextPropertyValue(s){return s.ConstantType===Zt.RichText}static isStringPropertyValue(s){return s.ConstantType===Zt.String}}.isFontPropertyValue(t)&&t.FontName||t.Value}evaluateConditionalPropertyValue(t){let e;try{e=this.expressionService.evaluateExpression(t.Condition)}catch{e=!1}return this.evaluatePropertyValue(e?t.ThenValue:t.ElseValue)}evaluateExpressionPropertyValue(t){try{return this.expressionService.evaluateExpression(t.Expression)}catch{return null}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Fe))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{hasStylableProperty(t,e){let r=!1;if(t.StylableProperties)for(let o=0,a=t.StylableProperties.length;o<a;o++)if(t.StylableProperties[o].Name===e){r=!0;break}return r}getValueForStylableProperty(t,e){let r=null;if(t.StylableProperties)for(let o=0,a=t.StylableProperties.length;o<a;o++)if(t.StylableProperties[o].Name===e){r=t.StylableProperties[o].Value.Value;break}return r}tryGetValueForStylableProperty(t,e,r){return!!this.hasStylableProperty(t,e)&&(r(this.getValueForStylableProperty(t,e)),!0)}setValueForStylableProperty(t,e,r){if(t.StylableProperties)for(let o=0,a=t.StylableProperties.length;o<a;o++)if(t.StylableProperties[o].Name===e){t.StylableProperties[o].Value.Value=r;break}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),xi=(()=>{class n{constructor(t,e,r,o,a,l){this.eventService=t,this.expressionService=e,this.performanceService=r,this.propertyValueService=o,this.stylablePropertyService=a,this.subscriptionService=l,this.clientSideProperties=[]}initialize(t){this.clientSideProperties=t,this.navigationModeSubscription||(this.navigationModeSubscription=this.eventService.navigationModeChangedEvent.subscribe({next:e=>{e&&this.executeProperties()}})),this.windowResizedSubscription||(this.windowResizedSubscription=this.eventService.windowResizedEvent.subscribe({next:()=>{this.executeProperties()}}))}executeProperties(){Array.isNullOrEmpty(this.clientSideProperties)||this.performanceService.measure(this.constructor.name,this.executeProperties.name,()=>{const t=[];this.clientSideProperties.forEach(e=>{try{const r=this.executeProperty(e),o=[_.Visibility,_.BorderWidth];null!=r&&null!=r.control&&-1!==o.indexOf(r.propertyName)&&r.hasChanged()&&t.push(r.control)}catch{}}),t.length>0&&(this.eventService.controlVisibilityChanged.emit(t[0]),this.eventService.multipleControlVisibilityChanged.emit(t))})}executeProperty(t){if(t&&("ToolTipText"===t.PropertyName&&(t.PropertyName="ToolTip"),t.PropertyValue&&t.ControlID)){const e=this.propertyValueService.evaluatePropertyValue(t.PropertyValue);if(null!=e)return this.updateControl(t,e)}return null}updateControl(t,e){const r=this.getControlOrMenuItemSubject(t.ControlID),o=r.control||r.menuItem;if(o){const a=o.getValue();let l=null;t.PropertyName===_.FontName&&this.hasFontProperties(a)?(l=String.hasValue(a.FontName)?a.FontName:a.Font,"string"!=typeof e?(a.FontName=null,a.Font=e):(a.FontName=e,a.Font=null)):r.control&&this.stylablePropertyService.tryGetValueForStylableProperty(a,t.PropertyName,d=>l=d)?this.stylablePropertyService.setValueForStylableProperty(a,t.PropertyName,e):(l=a[t.PropertyName],a[t.PropertyName]=e);const c=new Mr(l,e,t.PropertyName,a);if(c.hasChanged())return o.next(a),c}return null}getControlOrMenuItemSubject(t){return{control:this.subscriptionService.getControlSubjectById(t),menuItem:this.subscriptionService.getMenuItemSubjectById(t)}}hasFontProperties(t){return Object.prototype.hasOwnProperty.call(t,_.FontName)||Object.prototype.hasOwnProperty.call(t,_.Font)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(q),i.LFG(Fe),i.LFG(Le),i.LFG(En),i.LFG(De),i.LFG(pt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Fn=(()=>{class n{constructor(t,e){this.document=t,this.componentService=e}cutToClipboard(t,e){const r=this.componentService.getComponent(e);if(r&&"function"==typeof r.getText){const o=r.getText();o&&this.copyTextToClipboard(o,()=>{"function"==typeof r.clearText&&r.clearText()})}}copyToClipboard(t,e){const r=this.componentService.getComponent(e);if(r&&"function"==typeof r.getText){const o=r.getText();o&&this.copyTextToClipboard(o)}}pasteFromClipboard(t,e){const r=this.componentService.getComponent(e);r&&this.copyTextFromClipBoard(o=>{"function"==typeof r.setText&&r.setText(o)})}copyTextToClipboard(t,e,r){const o=window;if(o){const a=o.navigator;a&&a.clipboard?a.clipboard.writeText(t).then(()=>{"function"==typeof e&&e()},c=>{console.error("Async: Unable to copy text to clipboard: ",c),"function"==typeof r&&r()}):this.copyTextToClipboardFallback(t)}}copyTextToClipboardFallback(t,e,r){this.textToClipboardFallback("copy",t,e,r)}textToClipboardFallback(t,e,r,o){const a=this.document,l=this.createTemporaryTextArea(a,!0);l.value=e;try{const c=a.execCommand(t);console.log("Fallback: Copying text command was "+(c?"successful":"unsuccessful")),"function"==typeof r&&r()}catch(c){console.error("Fallback: Unable to copy text to clipboard: ",c),"function"==typeof o&&o()}a.body.removeChild(l)}copyTextFromClipBoard(t,e){const r=window;if(r){const o=r.navigator;o&&o.clipboard?o.clipboard.readText().then(function(l){l&&"function"==typeof t&&t(l)},function(l){console.error("Async: Unable to retrieve text from clipboard: ",l),"function"==typeof e&&e()}):this.textFromClipboardFallback(t,e)}}textFromClipboardFallback(t,e){const r=this.document,o=this.createTemporaryTextArea(r);try{r.execCommand("paste")&&"function"==typeof t&&t(o.value)}catch(a){console.error("Fallback: Unable to copy text: ",a),"function"==typeof e&&e()}finally{r.body.removeChild(o)}}createTemporaryTextArea(t,e=!1){const r=t.createElement("textarea");return r.style.position="absolute",r.style.top="-9999px",r.style.left="-9999px",r.style.width="500px",r.style.height="500px",t.body.appendChild(r),r.focus(),e&&r.select(),r}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(g.K0),i.LFG(se))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Qt=U(7579),Ln=U(7521),to=U.n(Ln);const Dn="command";class Zi{constructor(s,t,e,r,o){this.combo=s,this.callback=t,this.allowIn=e,this.action=r,this.persistent=o,this.combo=Array.isArray(s)?s:[s],this.allowIn=e||[]}get formatted(){if(!this._formatted){const s=this.combo;for(let t=0;t<s.length;t++)s[t]=Zi.symbolize(s[t]);this._formatted=s}return this._formatted}static symbolize(s){const t={[Dn]:"\u2318",shift:"\u21e7",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193",return:"\u23ce",backspace:"\u232b"},e=s.split("+");for(let r=0;r<e.length;r++)"mod"===e[r]&&(e[r]=window.navigator&&window.navigator.platform.indexOf("Mac")>=0?Dn:"ctrl"),e[r]=t[e[r]]||e[r];return e.join(" + ")}}let Vn=(()=>{class n{constructor(t,e,r,o){this.componentService=t,this.focusService=e,this.renderStateService=r,this.subscriptionService=o}get speedKeys(){return[].concat(this.fromCharCodes(48,57),this.fromCharCodes(65,90),this.fromCharCodes(97,122))}speedKeyPressed(t){if(!this.renderStateService.isLastPage){const e=this.renderStateService.activeFieldName,r=!String.isNullOrEmpty(e),a=!String.isNullOrEmpty(this.renderStateService.activeFieldPropertyName);if(r&&!a){const l=this.subscriptionService.getFieldInfo(e);if(l&&[I.Set,I.Enumeration].indexOf(l.DataValue.DataType)>-1){const c=l.InputControls.find(d=>d.SpeedKey?.toLowerCase()===t.key.toLowerCase());if(c){const d=this.componentService.getComponent(c.ID);d&&"function"==typeof d.handleSpeedKeyPressed&&d.handleSpeedKeyPressed(t),this.focusService.focusActiveField(e)}}}}}fromCharCodes(t,e){const r=[];if(t>=0&&e>=t)for(let o=t;o<=e;o++)r.push(String.fromCharCode(o));return r}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>se)),i.LFG((0,i.Gpc)(()=>ue)),i.LFG((0,i.Gpc)(()=>ut)),i.LFG((0,i.Gpc)(()=>pt)))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),qi=(()=>{class n{constructor(t,e,r){this.eventService=t,this.navigationService=e,this.speedKeyService=r,this.registeredHotkeys=[],this.hotkeys=[],this.pausedHotkeys=[],this._preventIn=["INPUT","SELECT","TEXTAREA"],this.eventSubject=new Qt.x,this.eventDelay=500,this.lastEvent={combo:"",event:null,function:null},Ln.prototype.stopCallback=(o,a)=>!(` ${a.className} `.indexOf(" mousetrap ")>-1)&&"true"===a?.contentEditable,this.mousetrap=new(to())}initialize(){this.eventSubscription||(this.eventSubscription=this.eventSubject.subscribe({next:e=>this.handleSubscriptionUpdate(e)}));const t=["INPUT","SELECT","TEXTAREA","BUTTON","DIV","UL","LI"];this.registerKeystrokeHotkey("f2",e=>{this.navigationService.f2KeyPressed(e)},t),this.registerKeystrokeHotkey("enter",e=>{this.navigationService.enterKeyPressed(e)},t),this.registerKeystrokeHotkey("tab",e=>{this.navigationService.tabKeyPressed(e)},t),this.registerKeystrokeHotkey("shift+tab",e=>{this.navigationService.shiftTabPressed(e)},t),this.registerKeystrokeHotkey("left",e=>{this.navigationService.leftKeyPressed(e)},t),this.registerKeystrokeHotkey("right",e=>{this.navigationService.rightKeyPressed(e)},t),this.registerKeystrokeHotkey("up",e=>{this.navigationService.upKeyPressed(e)},t),this.registerKeystrokeHotkey("down",e=>{this.navigationService.downKeyPressed(e)},t),this.registerKeystrokeHotkey("pagedown",e=>{this.navigationService.pageDownKeyPressed(e)},t),this.registerKeystrokeHotkey("pageup",e=>{this.navigationService.pageUpKeyPressed(e)},t),this.registerKeystrokeHotkey("home",e=>{this.navigationService.homeKeyPressed(e)},t),this.registerKeystrokeHotkey("end",e=>{this.navigationService.endKeyPressed(e)},t),this.registerKeystrokeHotkey("escape",e=>{this.navigationService.escapePressed(e)},t),this.registerKeystrokeHotkey("space",e=>{this.navigationService.spacePressed(e)},t),this.registerKeystrokeHotkey(this.speedKeyService.speedKeys,e=>this.speedKeyService.speedKeyPressed(e),t)}unregisterSystemHotkeys(){this.remove(this.registeredHotkeys)}registerHotkey(t,e,r){t&&this.registerKeystrokeHotkey(t,e,r)}registerHotkeyFromObject(t){if(t){const e=o=>{t.OnExecute.Name=t.Name,this.eventService.emitHandleActionsEvent(t.OnExecute),o.preventDefault()},r=this.generateHotkeyCombo(t);this.registerKeystrokeHotkey(r,e,["INPUT","SELECT","TEXTAREA"])}}pause(t){return t?Array.isArray(t)?t.map(e=>this.pause(e)):t?(this.remove(t),this.pausedHotkeys.push(t),t):null:this.pause(this.hotkeys)}unpause(t){if(!t)return this.unpause(this.pausedHotkeys);if(Array.isArray(t))return t.map(e=>this.unpause(e));if(t){const e=this.pausedHotkeys.indexOf(t);if(e>-1)return this.add(t),this.pausedHotkeys.splice(e,1)}return null}handleSubscriptionUpdate(t){t.event&&"repeat"in t.event&&t.event.repeat?this.lastEvent=null:this.lastEvent&&t.combo===this.lastEvent.combo?setTimeout(()=>{this.lastEvent=null},this.eventDelay):t&&(this.lastEvent=t,t.function&&t.function.call(this,t.event,t.combo))}registerKeystrokeHotkey(t,e,r){const o=new Zi(t,e,r),a=this.add(o);Array.isArray(a)?a.forEach(l=>{this.registeredHotkeys.push(l)}):a&&this.registeredHotkeys.push(a)}generateHotkeyCombo(t){let e="";t.Ctrl&&(e+="ctrl+"),t.Shift&&(e+="shift+"),t.Alt&&(e+="alt+");let r=t.Key.toLowerCase();return"pgdn"===r?r="pagedown":"pgup"===r&&(r="pageup"),e+=r,e}add(t,e){return Array.isArray(t)?t.map(r=>this.add(r,e)):(this.remove(t),this.hotkeys.push(t),this.mousetrap.bind(t.combo,(r,o)=>this.mousetrapBindCallback(t,r,o),e),t)}mousetrapBindCallback(t,e,r){let o=!0;if(e){const a=e.target||e.srcElement,l=a.nodeName.toUpperCase();` ${a.className} `.indexOf(" mousetrap ")>-1?o=!0:this._preventIn.indexOf(l)>-1&&Array.isPopulated(t.allowIn)&&-1===t.allowIn.map(c=>c.toUpperCase()).indexOf(l)&&(o=!1)}return o?t.callback.call(this,e,r):void 0}remove(t){const e=[];if(!t){for(const r of this.hotkeys)e.push(this.remove(r));return e}if(Array.isArray(t)){for(const r of t)e.push(this.remove(r));return e}{const r=this.findHotkey(t);if(r>-1)return this.hotkeys.splice(r,1),this.mousetrap.unbind(t.combo),t}return null}findHotkey(t){return this.hotkeys.indexOf(t)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>q)),i.LFG((0,i.Gpc)(()=>nt)),i.LFG((0,i.Gpc)(()=>Vn)))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var jn=U(5963);let _i=(()=>{class n{constructor(t){this.eventService=t,this.timers={},this.eventService.newServerPayloadEvent.subscribe({next:e=>{(e.RootControl||!e.IsVoidResponse)&&this.destroyAllTimers()}})}createTimer(t){return void 0!==t.Interval&&(this.timers[t.ID]&&this.deleteTimer(t.ID),this.timers[t.ID]={reference:t},t.AutoStart&&this.startTimer(t.ID),!0)}destroyAllTimers(){this.deleteTimers(this.getTimerKeys())}deleteTimers(t){t.forEach(e=>this.deleteTimer(e))}deleteTimer(t){t&&this.timers[t]&&(this.stopTimer(t),delete this.timers[t])}startTimer(t){if(t&&this.timers[t]){if("object"==typeof this.timers[t].observable)return;this.timers[t].observable=(0,jn.H)(0,this.timers[t].reference.Interval),this.subscribeToTimer(t)}}stopTimer(t){if(t&&this.timers[t]){const e=this.timers[t];e&&(e.subscription&&e.subscription.unsubscribe(),delete e.subscription,delete e.observable)}}getTimerKeys(){return Object.keys(this.timers)}handleCallback(t,e){if(e>0){const r=this.timers[t].reference;this.eventService.emitHandleActionsEvent(r.OnTick,t),r.Repeat||this.stopTimer(t)}}subscribeToTimer(t){if(t){const e=this.timers[t];if(e&&e.observable)return e.subscription=e.observable.subscribe({next:r=>this.handleCallback(t,r)}),t}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>q)))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Tt=(()=>{return(n=Tt||(Tt={})).Audio="Audio",n.Document="Document",n.Image="Image",n.Video="Video",Tt;var n})(),_t=(()=>{return(n=_t||(_t={}))[n.Client=0]="Client",n[n.Server=1]="Server",n[n.Any=2]="Any",_t;var n})();class Nn{constructor(s,t){this.controlId=s,this.eventName=t,this.actions=[],this.localActions=[],this.serverActions=[],this.serverActionKinds=[],this.optionalIndexes=[]}get hasServerOnlyActions(){return this.serverActions.length>this.optionalIndexes.length}get shouldApplyPageEvent(){return this.hasServerOnlyActions}get hasPrintAction(){return this.serverActionKinds.findIndex(s=>s===p.Print)>-1}get preferServerActions(){return!this.hasPrintAction&&this.hasServerOnlyActions}hasToggleVisibilityBeforeGoTo(s,t){if(this.actions&&this.actions.length>0){const e=this.actions.findIndex(r=>r===s);if(e>0)return-1!==this.actions.slice(0,e).findIndex(o=>o.Kind===p.ToggleVisibility&&t.includes(o.ControlID))}return!1}}let Rn=(()=>{class n{constructor(t,e,r,o,a,l,c,d,u,h,m,f){this.auditTrailService=t,this.clientSidePropertiesService=e,this.clipboardService=r,this.document=o,this.eventService=a,this.expressionService=l,this.helperService=c,this.hotkeyService=d,this.renderStateService=u,this.stylablePropertiesService=h,this.subscriptionService=m,this.timerService=f,this.defaultStr="default",this.confirm=()=>!0,this.decline=()=>!1,this.nullValueReturn=()=>null,this.afo=this.createAFO(),this.eventService.activeFieldChangedEvent.subscribe({next:w=>this.handleActiveFieldChanged(w)}),this.eventService.handleActionsEvent.subscribe({next:w=>this.handleActions(w.actionsEventHandler,w.controlId)}),this.eventService.handleActionEvent.subscribe({next:w=>this.handleAction(w.actionObj,w.controlId,w.eventName)})}initialize(){}handleActions(t,e){null!=t&&this.processActions(t.Actions,t.Name,e)}handleAction(t,e="",r=""){const o=new Nn(e,r);if(Ft.isConditionalAction(t))this.splitConditionalActions(t,o),this.executeActions(o);else{const a=this.isServerAction(t,o);null!=a&&(+a==_t.Server?(o.serverActions=[this.getServerActionFn(t)],this.executeServerActions(o)):-1!==[_t.Client,_t.Any].indexOf(+a)&&this.executeLocalAction(t,e))}}nextPage(){if(this.isNextPageActionAllowed())return this.renderStateService.flagPageAsVisited(),n.createActionKeyValuePair(p.NextPage)}previousPage(){if(this.isPreviousPageActionAllowed())return n.createActionKeyValuePair(p.PreviousPage)}firstPage(){if(!this.renderStateService.isLastPage)return n.createActionKeyValuePair(p.FirstPage)}lastPage(){if(!this.renderStateService.isLastPage)return n.createActionKeyValuePair(p.LastPage)}currentPage(){return n.createActionKeyValuePair(p.CurrentPage)}nextField(t,e,r=!1){if(this.isNextFieldActionAllowed()){if(t.Condition)return n.createActionKeyValuePair(p.NextField,JSON.stringify(t));if(this.isLeaveActiveFieldServerAction()||r)return n.createActionKeyValuePair(p.NextField);{let o=!1;const a=this.renderStateService.getFilteredFields(),l=this.renderStateService.getFieldIndexByName(a);if(l>=0&&l<a.length-1){let c;c=this.renderStateService.skipShowFieldsAtKeyboardNavigation&&t.eventSource===Me.Keyboard?a.find(d=>d.RouteStatus===oe.Ask&&a.indexOf(d)>l):a[l+1],c?(this.auditTrailService.logActionEvent("NextField",e,it.Field),this.renderStateService.setActiveFieldName(c.Name,void 0,"NextField",void 0),this.renderStateService.flagFieldAsVisited(c)):o=!0}else o=!0;return o&&this.surveyHasNextPage()&&!this.renderStateService.pageHasRangeErrors?(this.renderStateService.flagPageAsVisited(),n.createActionKeyValuePair(p.NextField)):void this.eventService.nextFieldEvent.emit()}}}previousField(t,e,r=!1){if(t.Condition)return n.createActionKeyValuePair(p.PreviousField,JSON.stringify(t));if(this.isLeaveActiveFieldServerAction()||r)return n.createActionKeyValuePair(p.PreviousField);{let o=!1;const a=this.renderStateService.getFilteredFields(),l=this.renderStateService.getFieldIndexByName(a);if(l>0){const c=a[l-1];this.auditTrailService.logActionEvent("PreviousField",e,it.Field),this.renderStateService.setActiveFieldName(c.Name,void 0,"PreviousField",void 0),this.renderStateService.flagFieldAsVisited(c)}else o=!0;return o&&this.surveyHasPreviousPage()?n.createActionKeyValuePair(p.PreviousField):void this.eventService.previousFieldEvent.emit()}}assignField(t,e,r=!1){if(r)return n.createActionKeyValuePair(p.AssignField,JSON.stringify(t));const o=this.getAssignActionFieldName(t);if(o){const a=this.subscriptionService.getFieldSubject(o);if(!a)return n.createActionKeyValuePair(p.AssignField,JSON.stringify(t));const l=a.getValue();if(l){let c=this.getAssignActionValue(t);if(String.isNullOrEmpty(c)||"empty"===c.toLowerCase())l.DataValue.AnswerStatus=T.Empty,l.DataValue.ValueAsString=null,l.DataValue.SpecialAnswer=null;else{let d;if(Array.isPopulated(l.SpecialAnswers)&&-1!==(d=l.SpecialAnswers.map(u=>u.toLowerCase()).indexOf(c.toLowerCase())))l.DataValue.AnswerStatus=T.SpecialAnswer,l.DataValue.ValueAsString=null,l.DataValue.SpecialAnswer=l.SpecialAnswers[d];else{const u=c.split("");if(u.forEach((m,f)=>{(0===f||f>0&&"\\"!==u[f-1])&&(u[f]=m.replace("'","")),f>0&&"\\"===u[f-1]&&(u[f-1]=u[f-1].replace("\\",""))}),c=u.join(""),!Array.isNullOrEmpty(l.ValueType?.Categories)){const m=l?.ValueType?.Categories?.find(f=>f.Name.toLowerCase()===c.toLowerCase());c=m?m.Code.toString():c}const h=!c.isEmpty();l.DataValue.AnswerStatus=h?T.Response:T.Empty,l.DataValue.ValueAsString=h?c:null,l.DataValue.SpecialAnswer=null}}l.EventSourceId="AssignFieldAction",a.next(l),this.auditTrailService.logActionEvent("AssignField",e,void 0,[o,c])}}}assignFieldProperty(t,e,r=!1){if(r)return n.createActionKeyValuePair(p.AssignFieldProperty,JSON.stringify(t));const o=this.getAssignActionFieldName(t),a=t.FieldPropertyName;if(o&&a){const l=this.subscriptionService.getFieldSubject(o,a);if(!l)return n.createActionKeyValuePair(p.AssignFieldProperty,JSON.stringify(t));const c=l.getValue();if(c){const d=this.getAssignActionValue(t);c.DataValue.AnswerStatus=d.isEmpty()?T.Empty:T.Response,c.DataValue.ValueAsString=d,c.EventSourceId="AssignFieldPropertyAction",l.next(c),this.auditTrailService.logActionEvent("AssignFieldProperty",e,void 0,[o,a,d])}}}firstField(t){if(this.isNextFieldActionAllowed())return n.createActionKeyValuePair(p.FirstField,JSON.stringify(t))}lastField(t){if(this.isNextFieldActionAllowed())return n.createActionKeyValuePair(p.LastField,JSON.stringify(t))}goToField(t,e,r=!1){if(+this.isGoToFieldServerAction(t)==_t.Server||r)return n.createActionKeyValuePair(p.GoToField,JSON.stringify(t));this.renderStateService.setActiveFieldName(t.FieldName,void 0,"GoToField",void 0,!0)}goToBlockField(t){return n.createActionKeyValuePair(p.GoToBlockField,JSON.stringify(t))}goToGroup(t){return n.createActionKeyValuePair(p.GoToGroup,JSON.stringify(t))}goToUri(t){let e="";if(t.Arguments)for(let o=0,a=t.Arguments.length;o<a;o++){const l=t.Arguments[o].split("=");if("target"===l[0].toLowerCase()){e=(-1===l[1].indexOf("_")?"_":"")+l[1].toLowerCase();break}}!RegExp(/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/).test(t.Uri)&&!t.Uri.startsWith("tel:")&&!t.Uri.startsWith("callto:")&&!t.Uri.startsWith("mailto:")&&!t.Uri.startsWith("mk:")&&(t.Uri=`${this.helperService.getBaseHref(!0)}${t.Uri}`),this.auditTrailService.logGoToURIEvent(t.Uri),window.open(t.Uri,e)}goToParallelEnd(){return n.createActionKeyValuePair(p.GoToParallelEnd)}goToFieldProperty(t,e,r=!1){if(+this.isGoToFieldPropertyServerAction(t)==_t.Server||r)return n.createActionKeyValuePair(p.GoToField,JSON.stringify(t));{const o=t.FieldName,a=t.FieldPropertyName,l=this.renderStateService.getFieldPropertyByName(o,a);if(l){const c=l.InputControls;if(!Array.isNullOrEmpty(c)){const d=c.findIndex(u=>this.subscriptionService.getControlById(u.ID)?.Visibility===K.Visible);-1!==d&&this.renderStateService.setActiveFieldName(o,a,"GoToFieldProperty",c[d].ID,!0)}}return}}startTimer(t,e){const r=t.ControlID;this.timerService.startTimer(r),this.auditTrailService.logActionEvent("StartTimer",e,void 0,[r])}stopTimer(t,e){const r=t.ControlID;this.timerService.stopTimer(r),this.auditTrailService.logActionEvent("StopTimer",e,void 0,[r])}closeDialog(){return n.createActionKeyValuePair(p.CloseDialog)}showDialog(t){return n.createActionKeyValuePair(p.ShowDialog,JSON.stringify(t))}playAudio(t,e){t&&t.ControlID&&(this.playMedia(t.ControlID+"_audio"),this.auditTrailService.logActionEvent("PlayAudio",e,it.Answer,[t.ControlID]))}pauseAudio(t,e){t&&t.ControlID&&(this.pauseMedia(t.ControlID+"_audio"),this.auditTrailService.logActionEvent("PauseAudio",e,it.Answer,[t.ControlID]))}playPauseAudio(t,e){t&&t.ControlID&&(this.playPauseMedia(t.ControlID+"_audio"),this.auditTrailService.logActionEvent("PlayPauseAudio",e,it.Answer,[t.ControlID]))}playStopAudio(t,e){t&&t.ControlID&&(this.playPauseMedia(t.ControlID+"_audio",!0),this.auditTrailService.logActionEvent("PlayStopAudio",e,it.Answer,[t.ControlID]))}stopAudio(t,e){t&&t.ControlID&&(this.stopMedia(t.ControlID+"_audio"),this.auditTrailService.logActionEvent("StopAudio",e,it.Answer,[t.ControlID]))}stopAllAudio(t,e){this.stopAllMedia(Tt.Audio),this.auditTrailService.logActionEvent("StopAllAudio",e,it.Answer)}playVideo(t,e){t&&t.ControlID&&(this.playMedia(t.ControlID+"_video"),this.auditTrailService.logActionEvent("PlayVideo",e,it.Answer,[t.ControlID]))}pauseVideo(t,e){t&&t.ControlID&&(this.pauseMedia(t.ControlID+"_video"),this.auditTrailService.logActionEvent("PauseVideo",e,it.Answer,[t.ControlID]))}playPauseVideo(t,e){t&&t.ControlID&&(this.playPauseMedia(t.ControlID+"_video"),this.auditTrailService.logActionEvent("PlayPauseVideo",e,it.Answer,[t.ControlID]))}playStopVideo(t,e){t&&t.ControlID&&(this.playPauseMedia(t.ControlID+"_video",!0),this.auditTrailService.logActionEvent("PlayStopVideo",e,it.Answer,[t.ControlID]))}stopVideo(t,e){t&&t.ControlID&&(this.stopMedia(t.ControlID+"_video"),this.auditTrailService.logActionEvent("StopVideo",e,it.Answer,[t.ControlID]))}stopAllVideo(t,e){this.stopAllMedia(Tt.Video),this.auditTrailService.logActionEvent("StopAllVideo",e,it.Answer)}custom(t,e){}save(){return n.createActionKeyValuePair(p.Save)}quit(){return n.createActionKeyValuePair(p.Quit)}setLanguage(t){return n.createActionKeyValuePair(p.SetLanguage,JSON.stringify(t))}setLayoutSetGroup(t){return n.createActionKeyValuePair(p.SetLayoutSetGroup,JSON.stringify(t))}setLayoutSet(t){return n.createActionKeyValuePair(p.SetLayoutSet,JSON.stringify(t))}setDataEntrySettings(t){return n.createActionKeyValuePair(p.SetDataEntrySettings,JSON.stringify(t))}setParallel(t){return n.createActionKeyValuePair(p.SetParallel,JSON.stringify(t))}suppressSignal(t){return n.createActionKeyValuePair(p.SuppressSignal,JSON.stringify(t))}setStyle(t){return n.createActionKeyValuePair(p.SetStyle,JSON.stringify(t))}setDeviceFeatures(t){return n.createActionKeyValuePair(p.SetDeviceFeatures,JSON.stringify(t))}showCustomPage(t){return n.createActionKeyValuePair(p.ShowCustomPage,JSON.stringify(t))}toggleVisibility(t){const e=this.subscriptionService.getControlSubjectById(t.ControlID);if(e){const r=e.getValue();null==r.InitialVisibility&&(r.InitialVisibility=r.Visibility),r.Visibility=r.Visibility!==K.Visible?K.Visible:r.InitialVisibility===K.Visible?t.InvisibleValue:r.InitialVisibility,e.next(r),this.eventService.controlVisibilityChanged.emit(r),this.auditTrailService.logToggleVisibilityEvent(r.ID)}}startSurvey(t){return n.createActionKeyValuePair(p.StartSurvey,JSON.stringify(t))}procedureCall(t){return n.createActionKeyValuePair(p.ProcedureCall,JSON.stringify(t))}conditional(t){return n.createActionKeyValuePair(p.Conditional,JSON.stringify(t))}setControlProperty(t){if(!this.subscriptionService.getControlById(t.ControlID))return n.createActionKeyValuePair(p.SetControlProperty,JSON.stringify(t));{const r={ControlID:t.ControlID,PropertyName:t.PropertyName,PropertyValue:t.Value};try{const o=this.clientSidePropertiesService.executeProperty(r);o&&-1!==[_.Visibility,_.Width,_.Height,_.Margin,_.FontName].indexOf(t.PropertyName)&&o.control&&this.eventService.controlVisibilityChanged.emit(o.control)}catch{}}}print(t){return n.createActionKeyValuePair(p.Print,JSON.stringify(t))}finish(){return n.createActionKeyValuePair(p.Finish)}dialNumber(t){return n.createActionKeyValuePair(p.DialNumber,JSON.stringify(t))}setFocus(t,e){if(t&&t.ControlID){const r=this.document.getElementById(t.ControlID);r&&(r.tabIndex&&r.tabIndex>-1||(r.tabIndex=0),r.scrollIntoView(),r.focus()),this.auditTrailService.logActionEvent("SetFocus",e,void 0,[t.ControlID])}}auditTrail(t){this.auditTrailService.logCustomAuditTrailEvent({Properties:t.Values.map(e=>({Name:e.Name,Value:e.Value||(e.ValueAsExpression?this.expressionService.evaluateExpression(e.ValueAsExpression):"")}))})}cutToClipboard(t){this.clipboardService.cutToClipboard(t.RootID,t.ControlID)}copyToClipboard(t){this.clipboardService.copyToClipboard(t.RootID,t.ControlID)}pasteFromClipboard(t){this.clipboardService.pasteFromClipboard(t.RootID,t.ControlID)}serverEvent(){return n.createActionKeyValuePair(p.ServerEvent)}undoAllEdits(){return n.createActionKeyValuePair(p.UndoAllEdits)}forEach(t,e=""){if(this.isForEachServerAction(t))return n.createActionKeyValuePair(p.ForEach);const r=t.Item.toLowerCase(),o=t.Body.map(l=>this.getLocalActionFn(l,e)),a=this.expressionService.evaluateExpression(t.Collection);Array.isNullOrEmpty(a)||(a.forEach(l=>{this.expressionService.atomicNameProperties[r]=l,this.executeLocalActions(o,!1)}),delete this.expressionService.atomicNameProperties[r])}sendKeys(t){const e=t.Keys;if(!String.isNullOrEmpty(e)){const r=/<(Shift)?(Ctrl)?(Alt)?>/gi.test(e)?{shift:/<(Shift)(Ctrl)?(Alt)?>/gi.test(e),ctrl:/<(Shift)?(Ctrl)(Alt)?>/gi.test(e),alt:/<(Shift)?(Ctrl)?(Alt)>/gi.test(e)}:{},o={tab:-1!==e.indexOf("[Tab]"),esc:-1!==e.indexOf("[Escape]"),functionKeys:/\[F[1-9]{1,2}]/i.test(e),backspace:-1!==e.indexOf("[Back]"),enter:-1!==e.indexOf("[Enter]"),space:-1!==e.indexOf("[Space]"),prtScr:-1!==e.indexOf("[PrintScreen]"),insert:-1!==e.indexOf("[Insert]"),del:-1!==e.indexOf("[Delete]"),home:-1!==e.indexOf("[Home]"),end:-1!==e.indexOf("[End]"),PgUp:-1!==e.indexOf("[PageUp]"),PgDn:-1!==e.indexOf("[PageDown]"),up:-1!==e.indexOf("[Up]"),down:-1!==e.indexOf("[Down]"),left:-1!==e.indexOf("[Left]"),right:-1!==e.indexOf("[Right]")},a=document.activeElement;a&&(Object.values(Object.assign({},r,o)).find(l=>l)||(a.value+=e))}}startLocalProcess(t){console.log("Skipped start local process action with parameters: "+JSON.stringify(t))}createDefaultActionKeyValuePair(t){return t?n.createActionKeyValuePair(t.Kind,JSON.stringify(t)):null}static createActionKeyValuePair(t,e){return{Key:t,Value:e||null}}createAFO(){return{[this.defaultStr]:{isServerAction:this.confirm,localAction:null,serverAction:this.createDefaultActionKeyValuePair},[p.NextPage]:{isServerAction:this.isNextPageActionAllowed,localAction:null,serverAction:this.nextPage},[p.PreviousPage]:{isServerAction:this.isPreviousPageActionAllowed,localAction:null,serverAction:this.previousPage},[p.FirstPage]:{isServerAction:()=>!this.renderStateService.isLastPage,localAction:null,serverAction:this.firstPage},[p.LastPage]:{isServerAction:()=>!this.renderStateService.isLastPage,localAction:null,serverAction:this.lastPage},[p.CurrentPage]:{isServerAction:this.confirm,localAction:null,serverAction:this.currentPage},[p.NextField]:{isServerAction:this.isNextFieldServerAction,localAction:this.nextField,serverAction:this.nextField},[p.Save]:{isServerAction:this.confirm,localAction:null,serverAction:this.save},[p.Quit]:{isServerAction:this.confirm,localAction:null,serverAction:this.quit},[p.SetLanguage]:{isServerAction:this.confirm,localAction:null,serverAction:this.setLanguage},[p.SetLayoutSetGroup]:{isServerAction:this.confirm,localAction:null,serverAction:this.setLayoutSetGroup},[p.SetLayoutSet]:{isServerAction:this.confirm,localAction:null,serverAction:this.setLayoutSet},[p.SetDataEntrySettings]:{isServerAction:this.confirm,localAction:null,serverAction:this.setDataEntrySettings},[p.SetParallel]:{isServerAction:this.confirm,localAction:null,serverAction:this.setParallel},[p.GoToField]:{isServerAction:this.isGoToFieldServerAction,localAction:this.goToField,serverAction:this.goToField},[p.SuppressSignal]:{isServerAction:this.confirm,localAction:null,serverAction:this.suppressSignal},[p.AssignField]:{isServerAction:this.isAssignFieldServerAction,localAction:this.assignField,serverAction:this.assignField},[p.SetStyle]:{isServerAction:this.confirm,localAction:null,serverAction:this.setStyle},[p.SetDeviceFeatures]:{isServerAction:this.confirm,localAction:null,serverAction:this.setDeviceFeatures},[p.ShowCustomPage]:{isServerAction:this.confirm,localAction:null,serverAction:this.showCustomPage},[p.ToggleVisibility]:{isServerAction:this.decline,localAction:this.toggleVisibility,serverAction:null},[p.GoToBlockField]:{isServerAction:this.confirm,localAction:null,serverAction:this.goToBlockField},[p.GoToGroup]:{isServerAction:this.confirm,localAction:null,serverAction:this.goToGroup},[p.GoToUri]:{isServerAction:this.decline,localAction:this.goToUri,serverAction:null},[p.StartSurvey]:{isServerAction:this.confirm,localAction:null,serverAction:this.startSurvey},[p.ProcedureCall]:{isServerAction:this.confirm,localAction:null,serverAction:this.procedureCall},[p.Conditional]:{isServerAction:this.nullValueReturn,localAction:this.executeLocalConditionalAction,serverAction:this.conditional},[p.SetControlProperty]:{isServerAction:this.decline,localAction:this.setControlProperty,serverAction:null},[p.Custom]:{isServerAction:this.decline,localAction:this.custom,serverAction:null},[p.PreviousField]:{isServerAction:this.isPreviousFieldServerAction,localAction:this.previousField,serverAction:this.previousField},[p.Print]:{isServerAction:this.confirm,localAction:null,serverAction:this.print},[p.Finish]:{isServerAction:this.confirm,localAction:null,serverAction:this.finish},[p.AssignFieldProperty]:{isServerAction:this.isAssignPropertyFieldServerAction,localAction:this.assignFieldProperty,serverAction:this.assignFieldProperty},[p.GoToParallelEnd]:{isServerAction:this.confirm,localAction:null,serverAction:this.goToParallelEnd},[p.DialNumber]:{isServerAction:this.confirm,localAction:null,serverAction:this.dialNumber},[p.StartTimer]:{isServerAction:this.decline,localAction:this.startTimer,serverAction:null},[p.StopTimer]:{isServerAction:this.decline,localAction:this.stopTimer,serverAction:null},[p.SetFocus]:{isServerAction:this.decline,localAction:this.setFocus,serverAction:null},[p.CloseDialog]:{isServerAction:this.confirm,localAction:null,serverAction:this.closeDialog},[p.PlayAudio]:{isServerAction:this.decline,localAction:this.playAudio,serverAction:null},[p.PauseAudio]:{isServerAction:this.decline,localAction:this.pauseAudio,serverAction:null},[p.PlayPauseAudio]:{isServerAction:this.decline,localAction:this.playPauseAudio,serverAction:null},[p.StopAudio]:{isServerAction:this.decline,localAction:this.stopAudio,serverAction:null},[p.PlayVideo]:{isServerAction:this.decline,localAction:this.playVideo,serverAction:null},[p.PauseVideo]:{isServerAction:this.decline,localAction:this.pauseVideo,serverAction:null},[p.PlayPauseVideo]:{isServerAction:this.decline,localAction:this.playPauseVideo,serverAction:null},[p.StopVideo]:{isServerAction:this.decline,localAction:this.stopVideo,serverAction:null},[p.ShowDialog]:{isServerAction:this.confirm,localAction:null,serverAction:this.showDialog},[p.FirstField]:{isServerAction:this.isNextFieldActionAllowed,localAction:null,serverAction:this.firstField},[p.AuditTrail]:{isServerAction:this.decline,localAction:this.auditTrail,serverAction:null},[p.LastField]:{isServerAction:this.isNextFieldActionAllowed,localAction:null,serverAction:this.lastField},[p.CutToClipboard]:{isServerAction:this.decline,localAction:this.cutToClipboard,serverAction:null},[p.CopyToClipboard]:{isServerAction:this.decline,localAction:this.copyToClipboard,serverAction:null},[p.PasteFromClipboard]:{isServerAction:this.decline,localAction:this.pasteFromClipboard,serverAction:null},[p.GoToFieldProperty]:{isServerAction:this.isGoToFieldPropertyServerAction,localAction:this.goToFieldProperty,serverAction:this.goToFieldProperty},[p.ServerEvent]:{isServerAction:this.confirm,localAction:null,serverAction:this.serverEvent},[p.UndoAllEdits]:{isServerAction:this.confirm,localAction:null,serverAction:this.undoAllEdits},[p.ForEach]:{isServerAction:this.isForEachServerAction,localAction:this.forEach,serverAction:this.forEach},[p.PlayStopAudio]:{isServerAction:this.decline,localAction:this.playStopAudio,serverAction:null},[p.StopAllAudio]:{isServerAction:this.decline,localAction:this.stopAllAudio,serverAction:null},[p.PlayStopVideo]:{isServerAction:this.decline,localAction:this.playStopVideo,serverAction:null},[p.StopAllVideo]:{isServerAction:this.decline,localAction:this.stopAllVideo,serverAction:null},[p.SendKeys]:{isServerAction:this.decline,localAction:this.sendKeys,serverAction:null},[p.StartLocalProcess]:{isServerAction:this.decline,localAction:this.startLocalProcess,serverAction:null}}}processActions(t,e="",r="",o=!1){let a=!1;if(Array.isPopulated(t)){const l=new Nn(r,e);this.splitActions(t,l,o),o?l.shouldApplyPageEvent?a=!0:this.executeLocalActions(l.localActions,!1):this.executeActions(l)}return a}handleActiveFieldChanged(t){if(t.previousField&&"actionService"!==t.eventSource){const r=this.renderStateService.isRefreshModeQuestion,o=t.previousField.IsCritical,a=t.previousField.DataValue.IsDirty??!1;t.previousField.FieldName!==t.nextField.FieldName&&(r||o)&&a&&this.handleAction(new Ze(t.nextField.FieldName))}}isLeavePageOrServerAction(t,e,r){return r&&Ft.isAssignAction(t)||this.isServerAction(t,e)}isServerAction(t,e){return(this.afo[t.Kind]?.isServerAction||this.afo[this.defaultStr].isServerAction).call(this,t,e)}getServerActionFn(t){return(this.afo[t.Kind]?.serverAction??this.afo[this.defaultStr].serverAction).bind(this,t,"")}getUnboundLocalActionFn(t){return this.afo[t]?.localAction??this.afo[this.defaultStr].localAction}getLocalActionFn(t,e){return this.getUnboundLocalActionFn(t.Kind).bind(this,t,e)}executeLocalAction(t,e){this.getUnboundLocalActionFn(t.Kind).call(this,t,e)}splitActions(t,e,r=!1){t.forEach(o=>{this.splitAction(o,e,r)})}splitAction(t,e,r){if(Ft.isConditionalAction(t))this.splitConditionalActions(t,e);else{const o=this.isLeavePageOrServerAction(t,e,r);if(null!=o){if(+o&&e.serverActionKinds.push(t.Kind),o===_t.Any){e.serverActions.push(this.getServerActionFn(t));const a=this.getLocalActionFn(t,e.controlId||"");e.localActions.push((c=!1)=>{c||a()}),e.optionalIndexes.push(e.serverActions.length-1)}else+o==_t.Server?e.serverActions.push(this.getServerActionFn(t)):+o==_t.Client&&null!==this.afo[t.Kind].localAction&&e.localActions.push(this.getLocalActionFn(t,e.controlId));e.actions.push(t)}}}executeActions(t){this.executeLocalActions(t.localActions,t.preferServerActions),t.hasServerOnlyActions&&this.executeServerActions(t)}executeLocalActions(t,e){Array.isNullOrEmpty(t)||t.forEach(r=>r(e))}executeServerActions({serverActions:t,controlId:e,eventName:r,preferServerActions:o}){let a=!1;const l=[];if(t.forEach(c=>{const d=c(o);d&&(l.push(d),-1!==[p.NextPage,p.NextField,p.LastPage].indexOf(d.Key)&&(a=!0))}),!l.isEmpty()){const c=a&&this.handleOnTryLeavePageForwardActions(e);this.eventService.emitExecuteServerActionsEvent(l,e,r,c)}}handleOnTryLeavePageForwardActions(t){const e=this.subscriptionService.onTryLeavePageForward;return null!=e&&this.processActions(e.Actions,e.Name,t,!0)}isNextPageActionAllowed(){return!(this.renderStateService.isLastPage||this.renderStateService.pageHasRangeErrors)}isPreviousPageActionAllowed(){return!(this.renderStateService.isLastPage||this.renderStateService.pageHasRangeErrors)}isNextFieldServerAction(t){if(!this.isNextFieldActionAllowed())return null;if(t.Condition||this.isLeaveActiveFieldServerAction())return!0;const e=this.renderStateService.getFilteredFields(),r=this.renderStateService.getFieldIndexByName(e);if(r>=0&&r<e.length-1){const o=this.renderStateService.skipShowFieldsAtKeyboardNavigation&&t.eventSource===Me.Keyboard?e.find(a=>a.RouteStatus===oe.Ask&&e.indexOf(a)>r):e[r+1];return!this.isFieldInputControlReachable(o)&&!this.isFieldElementVisible(o)||_t.Any}return this.surveyHasNextPage()||null}isPreviousFieldServerAction(t){if(t.Condition||this.isLeaveActiveFieldServerAction())return!0;const e=this.renderStateService.getFilteredFields(),r=this.renderStateService.getFieldIndexByName(e);return r>0?!this.isFieldInputControlReachable(e[r-1])&&!this.isFieldElementVisible(e[r-1])||_t.Any:this.surveyHasPreviousPage()||null}isLeaveActiveFieldServerAction(t){return(!String.hasValue(t)||this.renderStateService.activeFieldName!==t)&&(this.renderStateService.isRefreshModeQuestion||this.renderStateService.isCurrentActiveFieldCritical)&&this.renderStateService.isCurrentActiveFieldDirty}getAssignActionFieldName(t){return this.fromExpression(t.FieldNameAsExpression)||t.FieldName}getAssignActionValue(t){return this.fromExpression(t.ValueAsExpression)??t.ValueAsString}fromExpression(t){if(t)try{return this.expressionService.evaluateExpression(t).toString()}catch{}return null}isAssignFieldServerAction(t){const e=this.getAssignActionFieldName(t);return!e||!this.subscriptionService.getFieldSubject(e)||_t.Any}isAssignPropertyFieldServerAction(t){const e=this.getAssignActionFieldName(t),r=t.FieldPropertyName;return!e||!r||!this.subscriptionService.getFieldSubject(e,r)||_t.Any}isGoToFieldServerAction(t){const e=t.FieldName,r=this.renderStateService.getFieldByName(e);return this.isLeaveActiveFieldServerAction(e)||!r||Array.isNullOrEmpty(r.InputControls)||r.Origin!==Ke.Route||_t.Any}isGoToFieldPropertyServerAction(t,e){const r=t.FieldName,a=this.renderStateService.getFieldPropertyByName(r,t.FieldPropertyName);return this.isLeaveActiveFieldServerAction(r)||!a||!Array.isPopulated(a.InputControls)||a.InputControls.filter(c=>this.subscriptionService.getControlById(c.ID)?.Visibility===K.Visible).isEmpty()&&!e?.hasToggleVisibilityBeforeGoTo(t,a.InputControls.map(c=>c.ID))||_t.Any}isFieldElementVisible(t){if(t&&Array.isPopulated(t.InputControls)){const e=this.document.getElementById(t.InputControls[0].ID);if(e){const r=window.getComputedStyle(e);return"hidden"!==r.visibility&&"collapse"!==r.visibility&&"none"!==r.display}}return!1}isFieldInputControlReachable(t){if(t&&Array.isPopulated(t.InputControls)){const e=this.subscriptionService.getControlById(t.InputControls[0].ID);if(e)return e.Visibility===K.Visible||e.CanVisibilityChange}return!1}isNextFieldActionAllowed(){const t=this.renderStateService.currentActiveField;if(!t||t.Errors.isEmpty())return!0;const e=this.renderStateService.getFirstRelevantError(t.Errors);return!e||!Array.isPopulated(e.InvolvedFields)||-1===[st.Signal,st.Check].indexOf(e.ErrorKind)||e.InvolvedFields[e.InvolvedFields.length-1].Name!==t.FieldName||e.InvolvedFields.findIndex(o=>{const a=this.renderStateService.getFieldByName(o.Name);return!!a&&a.DataValue.IsDirty})>=0}playMedia(t){const e=this.getMediaElementById(t);if(e){const r=()=>{},o=()=>{};e.play().then(r,o)}}pauseMedia(t){const e=this.getMediaElementById(t);e&&e.pause()}playPauseMedia(t,e){const r=this.getMediaElementById(t);r&&(r.paused?r.play():r.pause(),e&&(r.currentTime=0))}stopMedia(t){const e=this.getMediaElementById(t);e&&(e.pause(),e.currentTime=0)}stopAllMedia(t){const e=this.getMediaElementsByTagName(t.toLowerCase());if(e.length>0)for(let r=0;r<e.length;r++)this.stopMedia(e[r].id)}getMediaElementById(t){return this.document.getElementById(t)}getMediaElementsByTagName(t){return this.document.getElementsByTagName(t)}splitConditionalActions(t,e){t.ConditionAsExpression?this.expressionService.evaluateExpression(t.ConditionAsExpression)?this.splitActions(t.ThenBranch,e):this.splitActions(t.ElseBranch,e):this.splitActions(t.Condition?t.ThenBranch:t.ElseBranch,e)}executeLocalConditionalAction(t,e,r=!1){let o;if(o=t.ConditionAsExpression?this.expressionService.evaluateExpression(t.ConditionAsExpression)?t.ThenBranch:t.ElseBranch:t.Condition?t.ThenBranch:t.ElseBranch,!o.isEmpty()){const a=o.map(l=>this.getLocalActionFn(l,e));this.executeLocalActions(a,r)}}surveyHasNextPage(){return this.renderStateService.pageIndex<this.renderStateService.maxPageIndex}surveyHasPreviousPage(){return this.renderStateService.pageIndex>0}isForEachServerAction(t){return!t.Collection}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>qe)),i.LFG((0,i.Gpc)(()=>xi)),i.LFG((0,i.Gpc)(()=>Fn)),i.LFG(g.K0),i.LFG((0,i.Gpc)(()=>q)),i.LFG((0,i.Gpc)(()=>Fe)),i.LFG(Jt),i.LFG((0,i.Gpc)(()=>qi)),i.LFG((0,i.Gpc)(()=>ut)),i.LFG((0,i.Gpc)(()=>De)),i.LFG((0,i.Gpc)(()=>pt)),i.LFG((0,i.Gpc)(()=>_i)))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Xe=(()=>{return(n=Xe||(Xe={}))[n.FieldAssignment=0]="FieldAssignment",n[n.Condition=1]="Condition",Xe;var n})();class Bn{constructor(s){this.Kind=s}static isFieldAssignmentRule(s){return s.Kind===Xe.FieldAssignment}static isConditionalRule(s){return s.Kind===Xe.Condition}}let zn=(()=>{class n{constructor(t,e,r,o,a,l){this.converterFactoryService=t,this.eventService=e,this.expressionService=r,this.performanceService=o,this.propertiesService=a,this.subscriptionService=l}initialize(t){this.rules=t,this.unsubscribeFromChanges(),(!this.pageInitializedSubscription||this.pageInitializedSubscription.closed)&&(this.pageInitializedSubscription=this.eventService.pageInitializedEvent.subscribe({next:()=>{this.subscribeToChanges()}})),(!this.renderStateSubscription||this.renderStateSubscription.closed)&&(this.renderStateSubscription=this.subscriptionService.renderStateSubject.subscribe({next:e=>{null!=e&&this.execute()}}))}unsubscribeFromChanges(){this.fieldValueChangedSubscription&&!this.fieldValueChangedSubscription.closed&&this.fieldValueChangedSubscription.unsubscribe()}execute(){this.performanceService.measure(this.constructor.name,this.execute.name,()=>{this.unsubscribeFromChanges(),this.executeRules(this.rules),this.propertiesService.executeProperties(),this.subscribeToChanges()})}executeRules(t){Array.isNullOrEmpty(t)||t.forEach(e=>this.executeRule(e))}executeRule(t){Bn.isFieldAssignmentRule(t)?this.executeFieldAssignmentRule(t):Bn.isConditionalRule(t)&&this.executeConditionalRule(t)}executeFieldAssignmentRule(t){try{const e=this.expressionService.evaluateExpression(t.RightHandSide),r=this.subscriptionService.getFieldSubject(t.FieldName);if(r){const o=r.getValue();if(o){const a=e.toString();if(String.isNullOrEmpty(a)||a.toLowerCase()===M.empty||"0"===a&&t.PropertyName.toLowerCase()===M.answerStatus)o.DataValue.AnswerStatus=T.Empty,o.DataValue.ValueAsString=null,o.DataValue.SpecialAnswer=null;else{const l=this.converterFactoryService.createConverter(o.DataValue.DataType);let c;Array.isPopulated(o.SpecialAnswers)&&-1!==(c=o.SpecialAnswers.map(d=>d.toLowerCase()).indexOf(a.toLowerCase()))?(o.DataValue.AnswerStatus=T.SpecialAnswer,o.DataValue.ValueAsString=null,o.DataValue.SpecialAnswer=o.SpecialAnswers[c]):l.isValid(a,o.ValueType)===S.Ok?(o.DataValue.AnswerStatus=T.Response,o.DataValue.SpecialAnswer=null,o.DataValue.ValueAsString=a):(o.DataValue.AnswerStatus=T.Response,o.DataValue.SpecialAnswer=null,o.DataValue.ValueAsString=l.sanitize(a,o.ValueType))}o.EventSourceId="FieldAssignmentRule",r.next(o)}}}catch{}}executeConditionalRule(t){let e,r;try{e=this.expressionService.evaluateExpression(t.Condition),r=!0}catch{r=!1}r&&null!=e&&this.executeRules(e?t.ThenBranch:t.ElseBranch)}subscribeToChanges(){(!this.fieldValueChangedSubscription||this.fieldValueChangedSubscription.closed)&&(this.fieldValueChangedSubscription=this.eventService.fieldValueChangedEvent.subscribe({next:()=>{setTimeout(()=>this.execute(),0)}}))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(yi),i.LFG(q),i.LFG(Fe),i.LFG(Le),i.LFG(xi),i.LFG(pt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),qt=(()=>{class n{hasColor(t){return null!=t&&(t.A>0||t.B>0||t.G>0||t.R>0)}generateRGBColorForProperty(t,e){let r="";return e&&t?r=`${e}: ${this.generateRGBColor(t)};`:t&&(r=this.generateRGBColor(t)),r}generateRGBAColorForProperty(t,e){let r="";return e&&t?r=`${e}: ${this.generateRGBAColor(t)};`:t&&(r=this.generateRGBAColor(t)),r}generateRGBAColor(t){return null!=t.A?`rgba(${[t.R,t.G,t.B,t.A/255].join(", ")})`:this.generateRGBColor(t)}generateRGBColor(t){return`rgb(${[t.R,t.G,t.B].join(", ")})`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Gn=(()=>{class n{hasCustomProperties(t,...e){return Array.isNullOrEmpty(e)?!Array.isNullOrEmpty(t.CustomProperties):!(e.findIndex(r=>!this.hasCustomProperty(t,r))>=0)}hasCustomProperty(t,e){const r=t.CustomProperties;return!Array.isNullOrEmpty(r)&&r.findIndex(o=>o.Name===e)>=0}getValuesForCustomProperties(t,...e){const r={};return e.forEach(o=>{r[o]=this.getValueForCustomProperty(t,o)}),r}getValueForCustomProperty(t,e){const r=t.CustomProperties;if(Array.isPopulated(r)){const o=r.find(a=>a.Name===e);if(o)return o.Value}return null}tryGetValuesForCustomProperties(t,e,r){const o={};let a=!0;return e.forEach(l=>{this.tryGetValueForCustomProperty(t,l,c=>o[l]=c)||(a=!1)}),r(o),a}tryGetValueForCustomProperty(t,e,r){return!!this.hasCustomProperty(t,e)&&(r(this.getValueForCustomProperty(t,e)),!0)}setValueForCustomProperty(t,e,r){const o=t.CustomProperties;Array.isNullOrEmpty(o)||o.forEach(a=>{a.Name===e&&(a.Value=r)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var $i=U(9808),Hn=U(2843),uo=U(5625),ho=U(3900),at=U(7489),ki=(()=>{return(n=ki||(ki={})).Admin="ADMIN",n.AuditTrail="AUDITTRAIL",n.CATI="CATI",n.Classification="CLASSIFICATION",n.Data="DATA",n.DataEntry="DATAENTRY",n.Resource="RESOURCE",n.Session="SESSION",n.Web="WEB",ki;var n})(),ti=(()=>{return(n=ti||(ti={}))[n.External=0]="External",n[n.ManipulaFile=1]="ManipulaFile",n[n.SurveyList=2]="SurveyList",n[n.AppointmentList=3]="AppointmentList",ti;var n})();let Oi=(()=>{class n{constructor(t,e,r,o){this.http=t,this.eventService=e,this.payloadService=r,this.subscriptionService=o}set fetchLookupResultsPath(t){this._fetchLookupResultsPath=t}set fetchSurveyListResultsPath(t){this._fetchSurveyListResultsPath=t}set fetchAppointmentListResultsPath(t){this._fetchAppointmentListResultsPath=t}set selectExternalRecordPath(t){this._selectExternalRecordPath=t}performLookup(t,e,r){const o=this.payloadService.fetchLookupPayload(t,e,r);this.http.post(this._fetchLookupResultsPath,o).pipe((0,fe.K)(this.handleException)).subscribe({next:a=>{console.info("[LookupService] PerformLookup success",a),this.handlePerformLookup(t,a)},error:a=>{console.error("[LookupService] PerformLookup error",a)},complete:()=>{console.info("[LookupService] PerformLookup complete")}})}selectExternalRecord(t,e,r,o){this.eventService.selectExternalRecordStart.emit();const a=this.payloadService.selectRecordPayload(t,e,r,o);this.http.post(this._selectExternalRecordPath,a).subscribe({next:l=>{console.info("[LookupService] Select external record success:",l),this.eventService.newServerPayloadEvent.emit(l),this.eventService.selectExternalRecordCompleted.emit()},error:l=>{console.error("[LookupService] Select external record failed",l),this.eventService.selectExternalRecordCompleted.emit()}})}requestSearch(t,e,r=!1){switch(r&&this.resetStartIndex(e),e?.dataSource?.Kind){case ti.AppointmentList:{const o=this.payloadService.appointmentListPayload(e);this.http.post(this._fetchAppointmentListResultsPath,o).pipe((0,fe.K)(this.handleException)).subscribe({next:a=>{this.handleFetchAppointmentList(t,a)}});break}case ti.SurveyList:{const o=this.payloadService.surveyListPayload(e);this.http.post(this._fetchSurveyListResultsPath,o).pipe((0,fe.K)(this.handleException)).subscribe({next:a=>{this.handleFetchSurveyList(t,a)}});break}default:{const o=this.payloadService.requestSearchPayload(e);this.http.post(this._fetchLookupResultsPath,o).pipe((0,fe.K)(this.handleException)).subscribe({next:a=>{this.handleRequestSearch(t,a)}});break}}}setSearchTerm(t,e){if(!String.isNullOrEmpty(t)&&null!=e){const r=this.subscriptionService.getLookupStateSubjectByFieldName(t);if(r){const o=r.getValue();o.searchText=e,r.next(o)}}}setActiveKey(t,e){if(e&&t){const r=this.subscriptionService.getLookupStateByFieldName(t);r&&(r.activeKey=e,this.requestSearch(t,r,!0))}}setStartIndex(t,e){if(t&&!isNaN(e)){const r=this.subscriptionService.getLookupStateByFieldName(t);if(r){const o=r.searchResult;o&&(r.startIndex=o.StartIndex=e=e>=1?e<o.ResultCount?e:o.ResultCount-1:1,this.requestSearch(t,r))}}}handlePerformLookup(t,e){const r=this.subscriptionService.getLookupStateSubjectByFieldName(t);if(r){const o=r.getValue(),a=o?.searchResult?.ResultCount??null;o.searchResult={DataRows:e?.DataRows||[],FieldNames:e?.FieldNames||[],ResultCount:e?.ResultCount||0,StartIndex:e?.StartIndex||0},e?.ResultCount>0?(null!==o.returnFieldIndex&&Array.isPopulated(e.FieldNames)&&null!=o.dataSource&&String.hasValue(o.dataSource.ReturnField)&&(o.returnFieldIndex=e.FieldNames.findIndex(l=>this.lowerCaseStringCompare(l,o.dataSource.ReturnField))),null!=e.StartIndex&&((o.startIndex??0)>0&&null!=a&&e.ResultCount<a&&(o.searchResult.ResultCount=a),o.startIndex=e.StartIndex>=1?e.StartIndex:0)):((o.lastSelectedIndex??0)>=0&&(o.lastSelectedIndex=-2),delete o.selectedRecord,o.startIndex=1),r.next(o)}}handleException(t){return Promise.reject(t.message)}handleRequestSearch(t,e){this.handlePerformLookup(t,e)}handleFetchAppointmentList(t,e){this.handlePerformLookup(t,e)}handleFetchSurveyList(t,e){this.handlePerformLookup(t,e)}resetStartIndex(t){null!=t&&(t.startIndex=0)}lowerCaseStringCompare(t,e){return t===e||null!=t&&null!=e&&t.toLowerCase()===e.toLowerCase()}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Nt.eN),i.LFG(q),i.LFG(Pe),i.LFG(pt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Xi=U(4004),go=U(2181);let Un=(()=>{class n{constructor(t,e,r){this.eventService=t,this.payloadService=e,this.http=r,this.initialize=()=>{if(!this.measureTimeSubscription){const o=this.eventService.hideSplashEvent.pipe((0,Xi.U)(()=>"hideSplash")),a=this.eventService.sizeTreeReadyEvent.pipe((0,Xi.U)(()=>"sizeTreeReady"));o.pipe((0,go.b)(a)).subscribe({next:()=>{this.requestSentStarted&&this.requestReceivedStarted&&(this.stop(),this.sendMeasureTime())}})}},this.sendMeasureTime=()=>{if(0===this.elapsedTime||0===this.totalTime)return;const o=this.payloadService.measureTimePayload(this.elapsedTime,this.totalTime);this.http.post(this._measureTimePath,o).subscribe({next:()=>{},error:a=>{console.log(a)},complete:()=>{}})}}set measureTimePath(t){this._measureTimePath=t}requestReceived(){this.requestSentStarted&&!this.requestReceivedStarted&&(this.elapsedTime=0,this.requestReceivedStarttime=performance.now(),this.requestReceivedStarted=!0)}requestSent(){!this.requestSentStarted&&!this.requestReceivedStarted&&(this.totalTime=0,this.requestSentStarttime=performance.now(),this.requestSentStarted=!0)}stop(){const t=performance.now();this.totalTime=Math.trunc(t-this.requestSentStarttime),this.elapsedTime=Math.trunc(t-this.requestReceivedStarttime),this.requestReceivedStarttime=0,this.requestSentStarttime=0,this.requestSentStarted=!1,this.requestReceivedStarted=!1}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(q),i.LFG(Pe),i.LFG(Nt.eN))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),ei=(()=>{class n{constructor(t){this.helperService=t,this._lookups={Audio:{},Document:{},Image:{},Video:{}}}get mediaUrls(){return this._mediaUrls}set mediaUrls(t){this._mediaUrls=t,this.determineKeys(Tt.Audio),this.determineKeys(Tt.Document),this.determineKeys(Tt.Image),this.determineKeys(Tt.Video)}getMediaUrlForAudio(t){return this.getMediaUrl(Tt.Audio,t)}getMediaUrlForDocument(t){return this.getMediaUrl(Tt.Document,t)}getMediaUrlForImage(t){return this.getMediaUrl(Tt.Image,t)||O.PIXEL_TRANSPARENT}getMediaUrlForVideo(t){return this.getMediaUrl(Tt.Video,t)}getMediaUrl(t,e){if(this.mediaUrls&&String.hasValue(t)&&String.hasValue(e)){const r=t,o=this._lookups[r][e.toLowerCase()];if(!o)return null;const a=this.mediaUrls[r][o];if(a)return a.startsWith("http:")||a.startsWith("https:")||a.startsWith("file:")?this.mediaUrls[r][e]:this.helperService.getBaseHref(!0)+a}return null}determineKeys(t){const e=t;Object.keys(this._mediaUrls[e]).forEach(o=>{this._lookups[e][o.toLowerCase()]=o})}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Jt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var Ve=U(6315);let Ti=(()=>{class n{constructor(){this._prefix="blaise_"}setSessionStorageItem(t,e){sessionStorage.setItem(this._prefix+t,JSON.stringify(e))}getSessionStorageItem(t){const e=sessionStorage.getItem(this._prefix+t);return e?JSON.parse(e):{}}removeSessionStorageItem(t){sessionStorage.removeItem(this._prefix+t)}clearSessionStorage(){sessionStorage.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var $t=(()=>{return(n=$t||($t={}))[n.OFF=0]="OFF",n[n.ERROR=1]="ERROR",n[n.WARN=2]="WARN",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.LOG=5]="LOG",$t;var n})();class Wn{constructor(){this.level=$t.LOG,this.global=!0,this.globalAs="logger",this.store=!1,this.storeAs="angular2.logger.level",this.send=!1,this.sendUrl="log"}}let tn=(()=>{class n{constructor(t,e){this.http=t,this.options=e,this.consoleDebugMethod=console.debug?"debug":"log",this.defaultOptions=new Wn,this.isErrorEnabled=()=>this.level>=$t.ERROR,this.isWarnEnabled=()=>this.level>=$t.WARN,this.isInfoEnabled=()=>this.level>=$t.INFO,this.isDebugEnabled=()=>this.level>=$t.DEBUG,this.isLogEnabled=()=>this.level>=$t.LOG,this._loadLevel=()=>Number(sessionStorage.getItem(this._storeAs)),this.global=()=>window[this._globalAs]=this,this.sendToUrl=h=>{this.send&&(h=`${L.ou.now().toMillis()} ${h}`,this.http.post(`${this.baseHref}${this.sendUrl}`,{Type:this.level,Message:h}).subscribe())};const{level:r,global:o,globalAs:a,store:l,storeAs:c,send:d,sendUrl:u}=Object.assign({},this.defaultOptions,e);this._level=r,this._globalAs=a,this._storeAs=c,this._send=d,this._sendUrl=u,this._baseHref=`${window.location.pathname}${O.API_BASEPATH}`,o&&this.global(),(l||this._loadLevel())&&this.store()}get send(){return this._send}set send(t){this._send=t}get sendUrl(){return this._sendUrl}get baseHref(){return this._baseHref}get level(){return this._level}set level(t){this._store&&this._storeLevel(t),this._level=t}error(...t){this.isErrorEnabled()&&(this.sendToUrl(t[0]),console.error(...t))}warn(...t){this.isWarnEnabled()&&(this.sendToUrl(t[0]),console.warn(...t))}info(...t){this.isInfoEnabled()&&(this.sendToUrl(t[0]),console.info(...t))}debug(...t){this.isDebugEnabled()&&(this.sendToUrl(t[0]),console[this.consoleDebugMethod](...t))}log(...t){this.isLogEnabled()&&(this.sendToUrl(t[0]),console.log(...t))}store(){this._store=!0;const t=this._loadLevel();return t?this._level=t:this._storeLevel(this.level),this}unstore(){return this._store=!1,sessionStorage.removeItem(this._storeAs),this}_storeLevel(t){sessionStorage[this._storeAs]=t}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Nt.eN),i.LFG(Wn,8))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),en=(()=>{class n{constructor(t,e,r,o){this.http=t,this.storageService=e,this.subscriptionService=r,this.loggerService=o,this.runtimeParametersJsonPath="assets/runtimeParameters.json",this.setRuntimeParameters=()=>{const a=this.storageService.getSessionStorageItem("runtimeParameters");a?(this.runtimeParameters=a,this.storageService.removeSessionStorageItem("runtimeParameters")):this.runtimeParameters={}}}get runtimeParameters(){return this.subscriptionService.runtimeParameters??{}}set runtimeParameters(t){this.subscriptionService.runtimeParameters=t}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Nt.eN),i.LFG(Ti),i.LFG(pt),i.LFG(tn))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var y=(()=>{return(n=y||(y={}))[n.Auto=0]="Auto",n[n.Pixels=1]="Pixels",n[n.Stretch=2]="Stretch",y;var n})();class je{constructor(s=0,t=(s>0?y.Pixels:y.Auto)){this.value=s,this.unitType=t}}var k=(()=>{return(n=k||(k={}))[n.Auto=0]="Auto",n[n.Pixels=1]="Pixels",n[n.Percentage=2]="Percentage",n[n.Star=3]="Star",k;var n})();class Yn{constructor(s=0,t=(s>0?k.Pixels:k.Auto)){this.value=s,this.unitType=t}}class he{constructor(s,t,e,r,o,a){this.colIndex=s,this.rowIndex=t,this.prevWidth=null,this.prevHeight=null,this.widthVersion=0,this.heightVersion=0,this.colSpan=1,this.rowSpan=1,this.exploded=!0,this.name=`Cell (${s},${t})`,this.width=new Yn,this.width.unitType=e,this.width.value=r,this.height=new Yn,this.height.unitType=o,this.height.value=a}addChild(s){s.parent=this,this._child=s}calculate(s){this.calculateWidth(s),this.calculateHeight(s),this._child&&this._child.calculate(s)}calculateWidth(s){if(this.widthVersion<s){let t=0;this.exploded&&(t=this.width.unitType===k.Star?this.parent.width.unitType!==y.Auto?this.calculateStarWidth(s):0:this.width.unitType===k.Pixels?this.width.value:this.width.unitType===k.Percentage?this.calculatePercentageWidth():this.calculateAutoWidth(s)),this.pixelWidth=t,this.widthVersion=s}return this._child&&this._child.calculateWidth(s),this.pixelWidth||this._child?.pixelWidth||0}calculateHeight(s){if(this.heightVersion<s){let t=0;this.exploded&&(t=this.height.unitType===k.Star?this.parent.height.unitType!==y.Auto?this.calculateStarHeight(s):0:this.height.unitType===k.Pixels?this.height.value:this.height.unitType===k.Percentage?this.calculatePercentageHeight():this.calculateAutoHeight(s)),this.pixelHeight=t,this.heightVersion=s}return this._child&&this._child.calculateHeight(s),this.pixelHeight||this._child?.pixelHeight||0}getChildren(){const s=[];return this._child&&s.push(this._child),s}clearChildren(){this._child&&this._child.clearChildren(),this._child=null}getWidth(){return this.widthReady()?Math.max(0,this.pixelWidth??0):null}getHeight(){return this.heightReady()?Math.max(0,this.pixelHeight??0):null}getOuterWidth(s){let t=this.calculateWidth(s);return this.margin&&(t+=this.margin.Left+this.margin.Right),t}getOuterHeight(s){let t=this.calculateHeight(s);return this.margin&&(t+=this.margin.Top+this.margin.Bottom),t}getInnerWidth(s){let t=this.calculateWidth(s);return this.border&&(t-=this.border.Left+this.border.Right),t}getInnerHeight(s){let t=this.calculateHeight(s);return this.border&&(t-=this.border.Top+this.border.Bottom),t}isReady(){return this.widthReady()&&this.heightReady()}widthReady(){return null!=this.pixelWidth}heightReady(){return null!=this.pixelHeight}containsWidthSpanChild(){return!!this._child&&this._child.colSpan>1}containsHeightSpanChild(){return!!this._child&&this._child.rowSpan>1}containsSpanChild(){return this.containsWidthSpanChild()||this.containsHeightSpanChild()}hasOverflowingChild(){return!!this._child&&((this._child.pixelWidth??0)>(this.pixelWidth??0)||(this._child.pixelHeight??0)>(this.pixelHeight??0))}saveState(){this.prevWidth=this.pixelWidth,this.prevHeight=this.pixelHeight}dimensionsChanged(){return this.getWidth()!==this.prevWidth||this.getHeight()!==this.prevHeight}calculateAutoWidth(s){return 1===this._child?.colSpan?this._child.getOuterWidth(s):0}calculateAutoHeight(s){return 1===this._child?.rowSpan?this._child.getOuterHeight(s):0}calculateOtherWidth(s){const t=this.parent.getColumnSiblings(this.rowIndex,this.colIndex);let e=0;for(const r of t)r.width.unitType!==k.Star&&r.widthReady()&&(e+=r.pixelWidth??0);return e}calculateOtherHeight(s){const t=this.parent.getRowSiblings(this.colIndex,this.rowIndex);let e=0;for(const r of t)r.height.unitType!==k.Star&&r.heightReady()&&(e+=r.pixelHeight??0);return e}calculateStarWidth(s){if(this._child&&this._child?.colSpan>1&&this.parent.colWidths){let t=0;for(let e=0;e<this._child?.colSpan;e++)t+=this.parent.colWidths[e+this.colIndex];return t}{const t=this.calculateOtherWidth(s);return Math.max(0,this.parent.getInnerWidth(s)-t-this.parent.getGridLineWidth(s))/Math.max(this.parent.countColumnWidth(this.rowIndex,k.Star),1)*this.width.value}}calculateStarHeight(s){const t=this.calculateOtherHeight(s);return Math.max(0,this.parent.getInnerHeight(s)-t-this.parent.getGridLineHeight(s))/Math.max(this.parent.countRowHeight(this.colIndex,k.Star),1)*this.height.value}calculatePercentageWidth(){return null!=this.parent.pixelWidth?(this.parent.pixelWidth-(this.parent.border?this.parent.border.Left+this.parent.border.Right:0))/100*this.width.value:0}calculatePercentageHeight(){return this.parent.pixelHeight?(this.parent.pixelHeight-(this.parent.border?this.parent.border.Top+this.parent.border.Bottom:0))/100*this.height.value:0}}class nn{constructor(s){this.name=s,this.prevWidth=null,this.prevHeight=null,this.widthVersion=0,this.heightVersion=0,this.colSpan=1,this.rowSpan=1,this.pixelWidth=null,this.pixelHeight=null,this.exploded=!0,this.width=new je,this.height=new je}calculate(s){this.calculateWidth(s),this.calculateHeight(s)}calculateWidth(s){if(this.widthVersion<s){let t=0;this.exploded&&(t=this.width.unitType===y.Stretch?this.calculateStretchWidth():this.width.unitType===y.Auto?this.calculateAutoWidth(s):this.calculateFixedWidth()),this.pixelWidth=t,this.widthVersion=s}return this.pixelWidth}calculateHeight(s){if(this.heightVersion<s){let t=0;this.exploded&&(t=this.height.unitType===y.Stretch?this.calculateStretchHeight():this.height.unitType===y.Auto?this.calculateAutoHeight(s):this.calculateFixedHeight()),this.pixelHeight=t,this.heightVersion=s}return this.pixelHeight}getWidth(){const s=this.width.unitType===y.Pixels?this.width.value:this.pixelWidth;return this.widthReady()?null!=s?Math.max(0,s):0:null}getHeight(){const s=this.height.unitType===y.Pixels?this.height.value:this.pixelHeight;return this.heightReady()?null!=s?Math.max(0,s):0:null}getOuterWidth(s){let t=this.calculateWidth(s)??0;return this.margin&&t>0&&(t+=this.margin.Left+this.margin.Right),t}getOuterHeight(s){let t=this.calculateHeight(s)??0;return this.margin&&t>0&&(t+=this.margin.Top+this.margin.Bottom),t}getInnerWidth(s){let t=this.calculateWidth(s)??0;return this.border&&t>0&&(t-=this.border.Left+this.border.Right,t<0&&(t=0)),t}getInnerHeight(s){let t=this.calculateHeight(s)??0;return this.border&&t>0&&(t-=this.border.Top+this.border.Bottom,t<0&&(t=0)),t}isReady(){return this.widthReady()&&this.heightReady()}widthReady(){return null!=this.pixelWidth}heightReady(){return null!=this.pixelHeight}saveState(){this.prevWidth=this.pixelWidth,this.prevHeight=this.pixelHeight}dimensionsChanged(){return this.getWidth()!==this.prevWidth||this.getHeight()!==this.prevHeight}calculateFixedWidth(){return this.width.value}calculateStretchWidth(){let s=0;return this.parent&&null!=this.parent.pixelWidth&&(s=this.parent.getInnerWidth(this.widthVersion),this.margin&&(s-=this.margin.Left+this.margin.Right)),Math.max(s,0)}calculateFixedHeight(){return this.height.value}calculateStretchHeight(){let s=0;if(this.parent&&null!=this.parent.pixelHeight){if(s=this.parent.getInnerHeight(this.heightVersion),this.rowSpan>1&&this.parent instanceof he){const t=this.parent;let e=t.rowIndex+1;for(;e<t.rowIndex+this.rowSpan;){const r=t.parent.getCell(t.colIndex,e);r&&r.heightReady()&&(s+=r.getInnerHeight(this.heightVersion)),e++}}this.margin&&(s-=this.margin.Top+this.margin.Bottom)}return Math.max(s,0)}}class ii extends nn{constructor(s,t){super(s),this.scrollbarSize=t,this.contentWidth=null,this.contentHeight=null,this.isGroupBox=!1}calculate(s){super.calculate(s),this.child&&this.child.calculate(s)}getChildren(){const s=[];return this.child&&s.push(this.child),s}addChild(s){this.child=s,this.child&&(this.child.parent=this)}clearChildren(){this.child&&this.child.clearChildren(),this.child=null}hasOverflowingChild(){return!!this.child&&((this.child.pixelWidth??0)>(this.pixelWidth??0)||(this.child.pixelHeight??0)>(this.pixelHeight??0))}widthReady(){return(this.width.unitType!==y.Auto||null!=this.contentWidth)&&super.widthReady()}heightReady(){return(this.height.unitType!==y.Auto||null!=this.contentHeight)&&super.heightReady()}calculateAutoWidth(s){if(this.isGroupBox)return this.contentWidth??this.width.value;if(this.child){const t=this.child.getOuterWidth(s)??0;return(this.child.pixelHeight??0)>(this.pixelHeight??0)?t+this.scrollbarSize:t}return 0}calculateAutoHeight(s){if(this.isGroupBox)return this.contentHeight??this.height.value;if(this.child){const t=this.child.getOuterHeight(s)??0;return(this.child.pixelWidth??0)>(this.pixelWidth??0)?t+this.scrollbarSize:t}return 0}}class ht extends nn{constructor(s){super(s),this.prevContentWidth=null,this.prevContentHeight=null,this.contentWidth=null,this.contentHeight=null}getChildren(){return[]}addChild(){}clearChildren(){}widthReady(){return(this.width.unitType!==y.Auto||null!=this.contentWidth)&&super.widthReady()}heightReady(){return(this.height.unitType!==y.Auto||null!=this.contentHeight)&&super.heightReady()}saveState(){super.saveState(),this.prevContentWidth=this.contentWidth,this.prevContentHeight=this.contentHeight}dimensionsChanged(){return this.contentWidth!==this.prevContentWidth||this.contentHeight!==this.prevContentHeight||super.dimensionsChanged()}calculateAutoWidth(s){return this.contentWidth??this.width.value}calculateAutoHeight(s){return this.contentHeight??this.height.value}}var Z=(()=>{return(n=Z||(Z={}))[n.None=0]="None",n[n.Horizontal=1]="Horizontal",n[n.Vertical=2]="Vertical",n[n.Both=3]="Both",Z;var n})();class ni extends nn{constructor(s){super(s),this.cells=[]}addChild(s){if(s instanceof he){const t=s;t.parent=this,this.cells.push(t)}}calculate(s){super.calculate(s);for(const r of this.cells)r.calculate(s);this.colWidths=this.getColumnWidths(s),this.rowHeights=this.getRowHeights(s);const t=[],e=[];for(const r of this.cells){if(r.width.unitType!==k.Star){if(this.colWidths[r.colIndex]!==(r.pixelWidth??0)&&(r.pixelWidth=this.colWidths[r.colIndex],r.getChildren().length>0)){const o=r.getChildren()[0];(o.width.unitType===y.Stretch||o.colSpan>1)&&(this.setWidthVersionRecursive(o,o.widthVersion-1),t.push(o))}}else this.setWidthVersionRecursive(r,r.widthVersion-1),e.push(r);if(r.height.unitType!==k.Star){if(this.rowHeights[r.colIndex]!==(r.pixelWidth??0)&&(r.pixelHeight=this.rowHeights[r.rowIndex],r.getChildren().length>0)){const o=r.getChildren()[0];(o.height.unitType===y.Stretch||o.rowSpan>1)&&(this.setHeightVersionRecursive(o,o.heightVersion-1),t.push(o))}}else this.setHeightVersionRecursive(r,r.heightVersion-1),e.push(r)}for(const r of e)r.calculate(s);for(const r of t)r.calculate(s);this.colWidths=this.getColumnWidths(s),this.rowHeights=this.getRowHeights(s)}rowCount(){let s=0;if(this.cells.length>0){for(const t of this.cells)t.rowIndex>s&&(s=t.rowIndex);s+=1}return s}columnCount(){let s=0;if(this.cells.length>0){for(const t of this.cells)t.colIndex>s&&(s=t.colIndex);s+=1}return s}getColumnWidths(s){const t=[];for(const e of this.cells)t[e.colIndex]=0;for(const e of this.cells)e.widthReady()&&(!e.containsWidthSpanChild()||e.width.unitType===k.Pixels)&&(t[e.colIndex]=e.colIndex in t?Math.max(t[e.colIndex],e.pixelWidth??0):e.pixelWidth??0);for(const e of this.cells)if(e.widthReady()&&e.containsWidthSpanChild()){const r=e.getChildren()[0],o=[];let a=r.getOuterWidth(s),l=e.colIndex;for(let c=0;c<r.colSpan;c++){const d=this.getCell(l,e.rowIndex);d&&(d.width.unitType===k.Auto?o.push(d.colIndex):a=Math.max(0,a-d.getOuterWidth(s))),l++}if(o.length>0&&a>0){let c=0;for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&(c+=t[o[d]]);if(c<=a){const d=a/o.length;for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[o[u]]=Math.max(t[o[u]],d))}}}return t}getRowHeights(s){const t=[];for(const e of this.cells)t[e.rowIndex]=0;for(const e of this.cells)e.heightReady()&&(!e.containsHeightSpanChild()||e.height.unitType===k.Pixels)&&(t[e.rowIndex]=e.rowIndex in t?Math.max(t[e.rowIndex],e.pixelHeight??0):e.pixelHeight??0);for(const e of this.cells)if(e.heightReady()&&e.containsHeightSpanChild()){const r=e.getChildren()[0],o=[];let a=r.getOuterHeight(s),l=e.rowIndex;for(let c=0;c<r.rowSpan;c++){const d=this.getCell(e.colIndex,l);d&&(d.height.unitType===k.Auto?o.push(d.rowIndex):a=Math.max(0,a-(d.pixelHeight??0))),l++}if(o.length>0&&a>0){let c=0;for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&(c+=t[o[d]]);if(c<=a){const d=a/o.length;for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[o[u]]=Math.max(t[o[u]],d))}}}return t}getGridLineWidth(s){const t=this.columnCount();let e=0;return(this.gridLines===Z.Both||this.gridLines===Z.Vertical)&&t>1&&(e+=(t-1)*this.gridLineWidth),e}getGridLineHeight(s){const t=this.rowCount();let e=0;return(this.gridLines===Z.Both||this.gridLines===Z.Horizontal)&&t>1&&(e+=(t-1)*this.gridLineWidth),e}getColumnSiblings(s,t){return Array.isPopulated(this.cells)?this.cells.filter(e=>e.rowIndex===s&&e.colIndex!==t):[]}getRowSiblings(s,t){return Array.isPopulated(this.cells)?this.cells.filter(e=>e.colIndex===s&&e.rowIndex!==t):[]}countColumnWidth(s,t){const e=this.getColumnSiblings(s);let r=0;for(const o of e)o.width.unitType===t&&(r+=o.width.value);return r}countRowHeight(s,t){const e=this.getRowSiblings(s);let r=0;for(const o of e)o.height.unitType===t&&(r+=o.height.value);return r}getChildren(){return this.cells}clearChildren(){for(const s of this.cells)s.clearChildren();this.cells=[]}getCell(s,t){return Array.isPopulated(this.cells)?this.cells.find(e=>e.rowIndex===t&&e.colIndex===s)??null:null}hasOverflow(){return!(!this.isReady()||!(this.getColumnWidths(this.widthVersion).reduce((a,l)=>a+l,0)>(this.pixelWidth??0)||this.getRowHeights(this.heightVersion).reduce((a,l)=>a+l,0)>(this.pixelHeight??0)))}saveState(){super.saveState();for(const s of this.cells)s.saveState()}dimensionsChanged(){for(const s of this.cells)if(s.dimensionsChanged())return!0;return super.dimensionsChanged()}calculateStretchWidth(){let s=0;return this.parent&&null!=this.parent.pixelWidth&&(s=this.parent.getInnerWidth(this.widthVersion),this.margin&&(s-=this.margin.Left+this.margin.Right)),Math.max(s,0)}calculateStretchHeight(){let s=0;return this.parent&&null!=this.parent.pixelHeight&&(s=this.parent.getInnerHeight(this.heightVersion),this.border&&(s-=this.border.Top+this.border.Bottom),this.margin&&(s-=this.margin.Top+this.margin.Bottom)),Math.max(s,0)}calculateAutoWidth(s){this.calculateCellWidths(s);const t=this.getColumnWidths(s);return t[t.length]=this.getGridLineWidth(s),t[t.length]=this.border?this.border.Left+this.border.Right:0,t.reduce((e,r)=>e+r,0)}calculateAutoHeight(s){this.calculateCellHeights(s);const t=this.getRowHeights(s);return t[t.length]=this.getGridLineHeight(s),t[t.length]=this.border?this.border.Top+this.border.Bottom:0,t.reduce((e,r)=>e+r,0)}setWidthVersionRecursive(s,t){if(s.width.unitType===y.Stretch||s.width.unitType===k.Star||s.width.unitType===k.Percentage){s.widthVersion=t;for(const e of s.getChildren())this.setWidthVersionRecursive(e,t)}}setHeightVersionRecursive(s,t){if(s.height.unitType===y.Stretch||s.height.unitType===k.Star||s.height.unitType===k.Percentage){s.heightVersion=t;for(const e of s.getChildren())this.setHeightVersionRecursive(e,t)}}calculateCellWidths(s){for(const t of this.cells)t.calculateWidth(s)}calculateCellHeights(s){for(const t of this.cells)t.calculateHeight(s)}}class Kn extends ni{}var Pi=(()=>{return(n=Pi||(Pi={})).Off="off",n.Polite="polite",n.Assertive="assertive",n.Rude="rude",Pi;var n})(),Mt=(()=>{return(n=Mt||(Mt={})).Alert="alert",n.Alertdialog="alertdialog",n.Button="button",n.Checkbox="checkbox",n.Combobox="combobox",n.Dialog="dialog",n.Grid="grid",n.Gridcell="gridcell",n.Link="link",n.Listbox="listbox",n.Log="log",n.Marquee="marquee",n.Menu="menu",n.Menubar="menubar",n.Menuitem="menuitem",n.Menuitemcheckbox="menuitemcheckbox",n.Menuitemradio="menuitemradio",n.Option="option",n.Presentation="presentation",n.Progressbar="progressbar",n.Radio="radio",n.Radiogroup="radiogroup",n.Row="row",n.Scrollbar="scrollbar",n.Slider="slider",n.Spinbutton="spinbutton",n.Status="status",n.Tab="tab",n.Tablist="tablist",n.Tabpanel="tabpanel",n.Textbox="textbox",n.Timer="timer",n.Tooltip="tooltip",n.Tree="tree",n.Treegrid="treegrid",n.Treeitem="treeitem",Mt;var n})();class po{constructor(){this.isCheckable=()=>this.control.Kind===v.CategoryCheckBox||this.control.Kind===v.CategoryRadioButton||this.control.Kind===v.SpecialAnswerRadioButton||this.control.Kind===v.SpecialAnswerCheckBox,this.isChecked=s=>{let e,r,o,t=!1;switch(s.Kind){case v.CategoryCheckBox:e=s,r=this.field.DataValue.ValueAsString?this.field.DataValue.ValueAsString:"",o=void 0===e.Reference.Code?"":e.Reference.Code.toString(),t=r.split(O.VALUE_SEPARATOR).findIndex(a=>a===o.toString())>-1;break;case v.SpecialAnswerCheckBox:e=s,t=this.field.DataValue.AnswerStatus===T.SpecialAnswer&&this.field.DataValue.SpecialAnswer===e.Reference.SpecialAnswer;break;case v.CategoryRadioButton:e=s,t=this.field.DataValue.AnswerStatus===T.Response&&this.field.DataValue.ValueAsString===e.Reference.Code.toString();break;case v.SpecialAnswerRadioButton:e=s,t=this.field.DataValue.AnswerStatus===T.SpecialAnswer&&this.field.DataValue.SpecialAnswer===e.Reference.SpecialAnswer}return t},this.isErrorControl=()=>this.control.Kind===v.ErrorText||this.control.Kind===v.GroupErrorText||this.control.Kind===v.PageErrorText,this.isTextControl=()=>this.control.Kind===v.ErrorText||this.control.Kind===v.GroupErrorText||this.control.Kind===v.PageErrorText||this.control.Kind===v.Text,this.UseOptimizedNoStylesheetVersion=!1}setControl(s){this.control=s,this.update()}setField(s){this.field=s,this.update()}destroy(){this.removeDescribedByElement()}update(){this.setAriaAutocomplete(),this.setAriaChecked(),this.setAriaDisabled(),this.setAriaHidden(),this.setAriaInvalid(),this.setAriaLabel(),this.setAriaLabelFor(),this.setAriaLabelledBy(),this.setAriaLive(),this.setAriaDescribedBy(),this.setAriaRequired(),this.setRole()}setAriaAutocomplete(){switch(this.control.Kind){case v.DateControl:this.AriaAutoComplete="none";break;case v.LookupTextBox:this.AriaAutoComplete="list"}}setAriaRequired(){this.field&&(this.AriaRequired=this.field.IsRequired)}setAriaDescribedBy(){this.control&&this.hasWaterMark(this.control)&&this.control.Watermark&&String.hasValue(this.control.Watermark.Text)&&this.createDescribedByElement(this.AriaDescribedBy=`aria_description_for_${this.control.ID}`,this.control.Watermark.Text)}createDescribedByElement(s,t){if(!String.isNullOrEmpty(this.AriaDescribedBy)&&!String.isNullOrEmpty(t)){let e=document.getElementById(s);null==e&&(e=document.createElement("span"),e.id=s,e.setAttribute("aria-hidden","true"),e.className="aria-description",e.style.display="none",document.body.appendChild(e)),e.innerHTML=t}}removeDescribedByElement(){if(this.control){const t=document.getElementById(`aria_description_for_${this.control.ID}`);null!=t&&document.body.removeChild(t)}}setAriaChecked(){this.control&&this.field&&this.isCheckable()&&(this.AriaChecked=this.isChecked(this.control))}setAriaLabel(){this.AriaLabel=this.control.ScreenReaderText||""}setAriaLabelFor(){Object.prototype.hasOwnProperty.call(this.control,_.LabelFor)&&(this.AriaLabelFor=this.control.LabelFor||"")}setAriaLabelledBy(){this.AriaLabelledBy=this.control.LabelledBy||""}setAriaDisabled(){this.AriaDisabled=!this.control.Enabled||void 0}setAriaHidden(){this.AriaHidden=this.control.Visibility!==K.Visible}setAriaInvalid(){this.field&&(this.isErrorControl()||(this.AriaInvalid=!Array.isNullOrEmpty(this.field.Errors.filter(s=>s.IsRelevant))))}setAriaLive(){this.control.CanVisibilityChange&&(this.AriaLive=Pi.Assertive)}setRole(){if(""===this.control.AccessibilityRole)if(this.control.CanVisibilityChange&&this.isTextControl())this.Role=Mt.Alert;else switch(this.control.Kind){case v.Button:case v.CategoryButton:case v.SpecialAnswerButton:this.Role=Mt.Button;break;case v.CategoryRadioButton:case v.SpecialAnswerRadioButton:this.Role=Mt.Radio;break;case v.DateControl:this.Role=Mt.Textbox;break;case v.CategoryCheckBox:case v.SpecialAnswerCheckBox:this.Role=Mt.Checkbox;break;case v.NumberSlider:this.Role=Mt.Slider;break;case v.ParallelTabs:this.Role=Mt.Tabpanel;break;case v.EnumerationTextBox:case v.NumberTextBox:case v.SetTextBox:case v.StringTextBox:this.Role=Mt.Textbox;break;case v.DropDownList:this.Role=Mt.Combobox;break;case v.ErrorText:case v.GroupErrorText:case v.PageErrorText:this.Role=Mt.Alert;break;case v.Grid:case v.TableControl:this.Role=Mt.Presentation}else this.Role=this.control.AccessibilityRole}hasWaterMark(s){return Object.prototype.hasOwnProperty.call(s,_.Watermark)}}class rn{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(s){return[x.createCommand(C.ToggleNavigation,this.injector)]}enterKeyPressed(s){return s.preventDefault(),[x.createCommand(C.NextField,this.injector)]}leftKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentField(s,J.Left);return String.hasValue(t)?[x.createCommand(C.GoToField,this.injector,void 0,t)]:[x.createCommand(C.PreviousField,this.injector)]}rightKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentField(s,J.Right);return String.hasValue(t)?[x.createCommand(C.GoToField,this.injector,void 0,t)]:[x.createCommand(C.NextField,this.injector)]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentField(s,J.Up);return String.hasValue(t)?[x.createCommand(C.GoToField,this.injector,void 0,t)]:[x.createCommand(C.PreviousField,this.injector)]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentField(s,J.Down);return String.hasValue(t)?[x.createCommand(C.GoToField,this.injector,void 0,t)]:[x.createCommand(C.NextField,this.injector)]}pageUpKeyPressed(s){return[x.createCommand(C.PreviousPage,this.injector)]}pageDownKeyPressed(s){return[x.createCommand(C.NextPage,this.injector)]}homeKeyPressed(s){return[x.createCommand(C.FirstPage,this.injector)]}endKeyPressed(s){return[x.createCommand(C.LastPage,this.injector)]}tabKeyPressed(s){return[]}shiftTabPressed(s){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(s){return[x.createCommand(C.SetInsertMode,this.injector)]}getName(){return"Navigation"}}class on{f2KeyPressed(s){return[]}enterKeyPressed(s){return[]}leftKeyPressed(s){return[]}rightKeyPressed(s){return[]}upKeyPressed(s){return[]}downKeyPressed(s){return[]}pageUpKeyPressed(s){return[]}pageDownKeyPressed(s){return[]}homeKeyPressed(s){return[]}endKeyPressed(s){return[]}tabKeyPressed(s){return[]}shiftTabPressed(s){return[]}escapePressed(s){return[]}spacePressed(s){return[]}getName(){return"Empty"}}class Mi{constructor(s,t,e){this.Text=s,this.Font=t,this.FontName=e}get hasText(){return null!=this.Text&&this.Text.length>0}get hasFontInfo(){return null!=this.Font}get hasFontName(){return null!=this.FontName&&this.FontName.length>0}get isEnabled(){return this.hasText&&(this.hasFontInfo||this.hasFontName)}static deserialize(s){return s?new Mi(s.Text,s.Font,s.FontName):new Mi}}var A=(()=>{return(n=A||(A={})).AvailabilityHighColor="AvailabilityHighColor",n.AvailabilityMediumColor="AvailabilityMediumColor",n.AvailabilityLowColor="AvailabilityLowColor",n.Background="Background",n.BlockedBackground="BlockedBackground",n.BlockedBorderColor="BlockedBorderColor",n.BlockedBorderWidth="BlockedBorderWidth",n.BorderColor="BorderColor",n.BorderWidth="BorderWidth",n.CornerRadius="CornerRadius",n.GridType="GridType",n.Height="Height",n.HorizontalAlignment="HorizontalAlignment",n.HorizontalScrollbar="HorizontalScrollBar",n.HorizontalTextAlignment="HorizontalTextAlignment",n.Margin="Margin",n.OutlineColor="OutlineColor",n.OutlineOffset="OutlineOffset",n.OutlineStyle="OutlineStyle",n.OutlineWidth="OutlineWidth",n.SelectedBackground="SelectedBackground",n.SelectedBorderColor="SelectedBorderColor",n.SelectedBorderWidth="SelectedBorderWidth",n.Stretch="Stretch",n.TextMargin="TextMargin",n.VerticalAlignment="VerticalAlignment",n.VerticalScrollbar="VerticalScrollBar",n.VerticalTextAlignment="VerticalTextAlignment",n.Visibility="Visibility",n.Width="Width",A;var n})(),X=(()=>{return(n=X||(X={}))[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right",X;var n})(),mt=(()=>{return(n=mt||(mt={}))[n.Top=0]="Top",n[n.Middle=1]="Middle",n[n.Bottom=2]="Bottom",mt;var n})();let Qn=(()=>{class n{constructor(t){this.stylablePropertyService=t,this.calculateComponentDimensions=(e,r)=>{const o=this.getComponentProperties(r);this.calculateComponentWidth(e,o),this.calculateComponentHeight(e,o)},this.getComponentProperties=e=>{const r={height:{},width:{},margin:{}},o=this.isTableRowControl(e)?e.RowHeight:this.stylablePropertyService.getValueForStylableProperty(e,A.Height),a=this.stylablePropertyService.getValueForStylableProperty(e,A.Width),l=this.stylablePropertyService.getValueForStylableProperty(e,A.Margin),c=this.stylablePropertyService.getValueForStylableProperty(e,A.BorderWidth);return r.height[_.UnitType]=o.UnitType,r.height[_.Value]=o.Value,r.width[_.UnitType]=a.UnitType,r.width[_.Value]=a.Value,r.margin.top=parseInt(l.Top,10)||0,r.margin.right=parseInt(l.Right,10)||0,r.margin.bottom=parseInt(l.Bottom,10)||0,r.margin.left=parseInt(l.Left,10)||0,r.borderWidth=parseInt(c,10)||void 0,this.isImageControl(e)&&(r.backgroundImageScale=e.Stretch,r.pixelWidth=e.PixelWidth,r.pixelHeight=e.PixelHeight),r},this.getCalculationData=(e,r)=>{const o=[],a=[],l={Width:0,Height:0,Rows:[],Columns:[]};e?.parentElement?.parentElement&&(l.Height=e.parentElement.parentElement.clientHeight,l.Width=e.parentElement.parentElement.clientWidth),r.Rows.forEach((c,d)=>{o.push(e.children[1].children[d].clientHeight)}),r.Columns.forEach((c,d)=>{a.push(e.children[1].children[0].children[d].clientWidth)}),r.Columns.forEach((c,d)=>{const u=at.cloneDeep(r.Columns),h=at.remove(u,f=>at.isEqual(f,r.Columns[d])),m=at.clone(a);m.splice(d,1),l.Columns.push(this.getCalculationDataForStarColumn(h[0],u,m))}),r.Columns.forEach((c,d)=>{l.Columns[d].CalculatedSize=c.UnitType===k.Star?Math.floor((l.Width-l.Columns[d].FixedSizes)/l.Columns[d].TotalStars*l.Columns[d].ElementStars):c.UnitType===k.Pixels?r.Columns[d].Value:e.children[0].children[0].children[d].clientWidth});for(let c=0;c<r.Rows.length;c++){const d=at.cloneDeep(r.Rows),u=at.remove(d,f=>at.isEqual(f,r.Rows[c])),h=at.filter(d,f=>!f.Spacer),m=at.clone(o);m.splice(c,1),l.Rows.push(this.getCalculationDataForStarRow(u[0],h,m))}for(let c=0;c<r.Rows.length;c++)l.Rows[c].CalculatedSize=r.Rows[c].RowDefinition.UnitType===k.Star?Math.floor((l.Height-l.Rows[c].FixedSizes)/l.Rows[c].TotalStars*l.Rows[c].ElementStars):r.Rows[c].RowDefinition.UnitType===k.Pixels?r.Rows[c].RowDefinition.Value:e.children[1].children[c].clientHeight;return l},this.getCalculationDataForStarRow=(e,r,o)=>{const a=[],l=[],c=e.RowDefinition.Value||1;let d=0,u=!1,h=c;for(let m=0,f=r.length;m<f;m++){const w=r[m];w.RowDefinition.UnitType!==k.Star&&(w.RowDefinition.UnitType===k.Percentage&&(u=!0),a[a.length]=r,d+=o[m]),w.RowDefinition.UnitType===k.Star&&(l[l.length]=w,h+=w.RowDefinition.Value||1)}return{CalculatedSize:0,FixedSizes:d,HasPercentageSiblings:u,TotalStars:h,ElementStars:c}},this.getCalculationDataForStarColumn=(e,r,o)=>{const a=[],l=[],c=e.Value||1;let d=0,u=!1,h=c;for(let m=0,f=r.length;m<f;m++){const w=r[m];w.UnitType!==k.Star&&(w.UnitType===k.Percentage&&(u=!0),a[a.length]=r,d+=o[m]||0),w.UnitType===k.Star&&(l[l.length]=w,h+=w.Value||1)}return{CalculatedSize:0,FixedSizes:d,HasPercentageSiblings:u,TotalStars:h,ElementStars:c}},this.calculateComponentWidth=(e,r)=>{switch(r.width[_.UnitType]){case y.Auto:at.set(e,"width",null!=r.pixelWidth?`${r.pixelWidth}px`:"auto");break;case y.Pixels:at.set(e,"width",this.calculateValueForPIXEL("width",r));break;case y.Stretch:at.set(e,"width",this.calculateValueForSTRETCH("width",r))}},this.calculateComponentHeight=(e,r)=>{switch(r.height[_.UnitType]){case y.Auto:at.set(e,"height",null!=r.pixelHeight?`${r.pixelHeight}px`:"auto");break;case y.Pixels:at.set(e,"height",this.calculateValueForPIXEL("height",r));break;case y.Stretch:at.set(e,"height",this.calculateValueForSTRETCH("height",r))}},this.calculateValueForPIXEL=(e,r)=>`${r[e].Value}px`,this.calculateValueForSTRETCH=(e,r)=>{const o=this.calculateMarginFromProperties(e,r);return o?`calc(100% - ${o}px)`:"100%"}}calculateMarginFromProperties(t,e){return"width"===t?e.margin.left+e.margin.right:e.margin.top+e.margin.bottom}isTableRowControl(t){return t.Kind===v.TableRowControl}isImageControl(t){return t.Kind===v.ImageControl}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(De))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Ii=(()=>{class n{constructor(t,e){this.document=t,this.renderStateService=e,this.createFontSpan=r=>{this.createAltFontSpan(r.FontName,r.Font,r.ID,this.getChar(r.Kind))}}createAltFontSpan(t=null,e=null,r=null,o="W",a=null){if(String.hasValue(t)||null!=e){const l=this.generateAltFontId(t,r,o,a);if(l&&null!=this.document.getElementById(l))return;const c=this.document.createElement("span");c.innerHTML="8"===o?"8888888888":"WWWWWWWWWW",l&&(c.id=l),c.setAttribute("aria-hidden","true"),c.style.visibility="hidden",c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",c.style.whiteSpace="nowrap",t?c.className=`determine-font ${t}`:e&&(e.Family&&(c.style.fontFamily=e.Family),e.Size&&(c.style.fontSize=e.Size+"px"),e.Bold&&(c.style.fontStyle="bold"),e.Italic&&(c.style.fontStyle="italic")),this.document.body.appendChild(c)}}getOffsetWidthSpanElement(t){const e=this.getSpan(t);return e?e.offsetWidth:0}getAltOffsetWidthSpanElement(t,e,r="W",o){const a=this.generateAltFontId(t,e,r,o);if(a){const l=this.getSpanById(a);if(l)return l.offsetWidth}return 0}getOffsetHeightSpanElement(t){const e=this.getSpan(t);return e?e.offsetHeight:0}getAltOffsetHeightSpanElement(t,e,r="W",o){const a=this.generateAltFontId(t,e,r,o);if(a){const l=this.getSpanById(a);if(l)return l.offsetHeight}return 0}removeFontSpan(t){!t.FontName&&t.Font&&this.removeAltFontSpan(t.ID,this.getChar(t.Kind))}removeAltFontSpan(t,e="W",r){const o=this.generateAltFontId(null,t,e,r);if(o){const a=this.document.getElementById(o);a&&(a.parentNode?a.parentNode.removeChild(a):document.removeChild(a))}}getSpan(t){const e=this.generateFontId(t);return e?this.getSpanById(e):null}getSpanById(t){return this.document.getElementById(t)}getChar(t){switch(t){case v.EnumerationTextBox:case v.NumberTextBox:case v.SetTextBox:return"8";default:return"W"}}generateFontId(t){return this.generateAltFontId(t.FontName,t.ID,this.getChar(t.Kind))}generateAltFontId(t=null,e=null,r="W",o=null){if(String.isNullOrEmpty(t)&&String.isNullOrEmpty(e)&&String.isNullOrEmpty(o))return null;const a=[];return a.push("determine"),String.hasValue(t)?a.push(t):String.hasValue(e)&&(a.push(e),String.hasValue(o)&&a.push(o)),a.push("8"===r?"number":"string"),a.join("-")}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(g.K0),i.LFG(ut))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),rt=(()=>{class n{}return n.BACKSPACE=[8],n.TAB=[9],n.CLEAR=[12],n.ENTER=[13],n.ESC=[27],n.SPACE=[32],n.PAGEUP=[33],n.PAGEDOWN=[34],n.END=[35],n.HOME=[36],n.LEFT=[37],n.UP=[38],n.RIGHT=[39],n.DOWN=[40],n.PRT_SCR=[44],n.INSERT=[45],n.DELETE=[46],n.SHIFT=[16],n.CTRL=[17],n.ALT=[18],n.BREAK=[19],n.CAPSLOCK=[20],n.CMDLEFT=[91],n.CMDRIGHT=[93],n.COMMA=[188],n.COLON=[186],n.PERIOD=[110,190],n.DASH=[109,173,189],n.EQUALS=[187],n.QUOTE=[222],n.SLASH=[111,191],n.BACK_TICK=[192],n.ARROWS=[37,38,39,40],n.ARROW_LEFT=[37],n.ARROW_UP=[38],n.ARROW_RIGHT=[39],n.ARROW_DOWN=[40],n.NUMERIC=[48,49,50,51,52,53,54,55,56,57],n.NUMPAD_NUMERIC=[96,97,98,99,100,101,102,103,104,105],n.ZERO=[48,96],n.ALPHA=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],n.CONTROL=[8,9,12,13,27,35,36,45,46,37,38,39,40],n.FUNCTION=[112,113,114,115,116,117,118,119,120,121,122,123],n})(),Jn=(()=>{class n{isAlpha(t,e){return this.isKeyAllowed(t,rt.ALPHA,e)}isAlphaNumeric(t,e){return this.isKeyAllowed(t,[].concat(rt.ALPHA,rt.NUMERIC,rt.NUMPAD_NUMERIC),e)}isDecimalSeparatorKey(t,e){return this.isKeyAllowed(t,[].concat(rt.PERIOD,rt.COMMA),e)}isEditKey(t,e){return this.isKeyAllowed(t,[].concat(rt.BACKSPACE,rt.DELETE),e)}isCopyOrPasteKey(t,e){return 1==e&&(67===t||86===t||88===t||65===t)}isFunctionKey(t,e){return this.isKeyAllowed(t,rt.FUNCTION,e)}isDigitKey(t,e){return this.isKeyAllowed(t,[].concat(rt.NUMERIC,rt.NUMPAD_NUMERIC),e)}isNumPadKey(t,e){return this.isKeyAllowed(t,rt.NUMPAD_NUMERIC,e)}isZeroKey(t,e){return this.isKeyAllowed(t,rt.ZERO,e)}isMinusKey(t,e){return this.isKeyAllowed(t,rt.DASH,e)}isNumeric(t,e){return this.isKeyAllowed(t,[].concat(rt.NUMERIC,rt.NUMPAD_NUMERIC),e)}isDateSeparatorKey(t,e){return this.isKeyAllowed(t,[].concat(rt.DASH,rt.SLASH,rt.PERIOD),e)}isTimeSeparatorKey(t,e){return this.isKeyAllowed(t,[].concat(rt.PERIOD,rt.COLON),e)}isAmPmDesignatorKey(t,e){return!(String.isNullOrEmpty(e)||String.isNullOrEmpty(t)||String.isNullOrEmpty(e))&&e.toUpperCase().indexOf(t.toUpperCase())>=0}isNavigationKey(t,e){return this.isKeyAllowed(t,[].concat(rt.ENTER,rt.TAB,rt.PAGEUP,rt.PAGEDOWN,rt.HOME,rt.END,rt.LEFT,rt.RIGHT),e)}isArrowKey(t,e){return this.isKeyAllowed(t,rt.ARROWS,e)}isKeyAllowed(t,e,r){return(r?e.concat(r):e).indexOf(t)>=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var ri=(()=>{return(n=ri||(ri={}))[n.Paragraph=0]="Paragraph",n[n.Table=1]="Table",ri;var n})();class Ei{constructor(s){this.Kind=s}static isParagraph(s){return s.Kind===ri.Paragraph}static isTable(s){return s.Kind===ri.Table}}var Y=(()=>{return(n=Y||(Y={}))[n.Text=0]="Text",n[n.Tab=1]="Tab",n[n.Image=2]="Image",n[n.Hyperlink=3]="Hyperlink",n[n.Ellipse=4]="Ellipse",n[n.Line=5]="Line",n[n.Rectangle=6]="Rectangle",n[n.Button=7]="Button",n[n.AudioControl=8]="AudioControl",n[n.VideoControl=9]="VideoControl",n[n.Timer=10]="Timer",n[n.Label=11]="Label",n[n.TextBox=12]="TextBox",Y;var n})();class oi{constructor(s,t,e,r,o,a,l,c,d,u,h,m,f,w,D,G,B,j,H,F,ct,gt){this.Kind=s,this.Name=t,this.LabelledBy=e,this.AccessibilityRole=r,this.ID=o,this.Background=a,this.Enabled=l,this.ScreenReaderText=c,this.ShowKeyboardFocus=d,this.TabIndex=u,this.TooltipText=h,this.Visibility=m,this.OutlineStyle=f,this.OutlineWidth=w,this.OutlineColor=D,this.OutlineOffset=G,this.OnGotFocus=B,this.OnLostFocus=j,this.OnMouseDown=H,this.OnMouseUp=F,this.OnMouseEnter=ct,this.OnMouseLeave=gt}static isAudioElement(s){return s.Kind===Y.AudioControl}static isButtonElement(s){return s.Kind===Y.Button}static isEllipseElement(s){return s.Kind===Y.Ellipse}static isHyperlinkElement(s){return s.Kind===Y.Hyperlink}static isImageElement(s){return s.Kind===Y.Image}static isLabelElement(s){return s.Kind===Y.Label}static isLineElement(s){return s.Kind===Y.Line}static isRectangleElement(s){return s.Kind===Y.Rectangle}static isShapeElement(s){return-1!==[Y.Ellipse,Y.Line,Y.Rectangle].indexOf(s.Kind)}static isTextBoxElement(s){return s.Kind===Y.TextBox}static isTextElement(s){return-1!==[Y.Label,Y.Text].indexOf(s.Kind)}static isTimerElement(s){return s.Kind===Y.Timer}static isVideoElement(s){return s.Kind===Y.VideoControl}static hasTextString(s){return-1!==[Y.Hyperlink,Y.Label,Y.Text].indexOf(s.Kind)}static isClickActionsElement(s){return-1!==[Y.Button,Y.Hyperlink,Y.Image].indexOf(s.Kind)}}var ge=(()=>{return(n=ge||(ge={}))[n.Solid=0]="Solid",n[n.Dash=1]="Dash",n[n.Dot=2]="Dot",ge;var n})(),$=(()=>{return(n=$||($={}))[n.Horizontal=0]="Horizontal",n[n.Vertical=1]="Vertical",$;var n})(),be=(()=>{return(n=be||(be={}))[n.None=0]="None",n[n.Solid=1]="Solid",n[n.Dash=2]="Dash",n[n.Dot=3]="Dot",be;var n})(),Xt=(()=>{return(n=Xt||(Xt={}))[n.SolidColor=0]="SolidColor",n[n.LinearGradient=1]="LinearGradient",n[n.Image=2]="Image",Xt;var n})(),Gt=(()=>{return(n=Gt||(Gt={}))[n.Center=0]="Center",n[n.Stretch=1]="Stretch",n[n.Fit=2]="Fit",n[n.Fill=3]="Fill",Gt;var n})(),Ht=(()=>{return(n=Ht||(Ht={}))[n.None=0]="None",n[n.Visible=1]="Visible",n[n.Auto=2]="Auto",Ht;var n})(),ve=(()=>{return(n=ve||(ve={})).Top="Top",n.Right="Right",n.Bottom="Bottom",n.Left="Left",ve;var n})();let ye=(()=>{class n{constructor(t,e,r,o,a){this.colorService=t,this.helperService=e,this.mediaService=r,this.stylablePropertyService=o,this.userAgentService=a}applyStrokeStyles(t,e){const r=this.getBorderColor(e);if(r)return{border:[this.getBorderWidth(e),this.getBorderStyle(e),r].join(" ")}}generateStyleObject(t,e){e=e||[];const r={};if(null!=t){const o=t.StylableProperties;for(let l=0,c=o.length;l<c;l++){const d=o[l].Name,u=o[l].Value.Value;let h=null;if(-1===e.indexOf(d))switch(d){case A.Background:h=this.generateBackgroundStyle(u);break;case A.BorderColor:h=this.generateBorderColorStyle(u);break;case A.BorderWidth:h=this.generateBorderWidthStyle(u);break;case A.CornerRadius:h=this.generateBorderRadiusStyle(u);break;case A.HorizontalScrollbar:{const m=this.stylablePropertyService.getValueForStylableProperty(t,A.Width).UnitType;h=this.generateHorizontalOverflowStyle(u,m);break}case A.HorizontalTextAlignment:h=this.generateHorizontalTextAlignmentStyle(u);break;case A.Margin:h=this.generateMarginStyle(u);break;case A.Stretch:h=this.generateImageScaleStyle(u);break;case A.TextMargin:h=this.generatePaddingStyle(u);break;case A.VerticalScrollbar:{const m=this.stylablePropertyService.getValueForStylableProperty(t,A.Height).UnitType;h=this.generateVerticalOverflowStyle(u,m);break}case A.VerticalTextAlignment:h=this.generateVerticalTextAlignmentStyle(u);break;case A.Visibility:h=this.generateVisibilityStyle(u)}h&&Object.assign(r,h)}const a=this.generateVisibilityStyle(t.Visibility);a&&Object.assign(r,a)}return r}generateStyleObjectWithFont(t,e){return Object.assign(this.generateStyleObject(t,e),this.generateFontStyle(t.Font))}generateImageScaleStyle(t,e=0,r=0){const o={};switch(t){case Gt.Center:break;case Gt.Stretch:o.backgroundSize=e<r?"100% auto":"auto 100%";break;case Gt.Fit:o.backgroundSize=e<r?"auto 100%":"100% auto";break;case Gt.Fill:o.backgroundSize="100% 100%"}return o.backgroundPosition="center",o.backgroundRepeat="no-repeat",o}generateAlignmentObject(t,e,r){const o={},l=this.stylablePropertyService.getValueForStylableProperty(t,e?A.HorizontalTextAlignment:A.HorizontalAlignment);l&&Object.assign(o,this.generateHorizontalTextAlignmentStyle(l));const d=this.stylablePropertyService.getValueForStylableProperty(t,e?A.VerticalTextAlignment:A.VerticalAlignment);return d&&Object.assign(o,this.generateVerticalTextAlignmentStyle(d)),r&&!e&&(l||d)&&Object.assign(o,{display:"flex"}),o}generateBackgroundStyle(t,e="transparent"){const r={};switch(t[_.BrushType]){case Xt.LinearGradient:{const o=t,a=this.getLinearGradientDirection(o.StartPoint,o.EndPoint),l=o.GradientStops.map(c=>`${this.colorService.generateRGBAColor(c.Color)} ${100*c.Offset}%`);l.unshift(a),r.background=`linear-gradient(${l.join(", ")})`;break}case Xt.Image:{const o=t,a=this.mediaService.getMediaUrlForImage(o.ID);a&&(r.background=e,r.backgroundImage=`url("${a}")`,Object.assign(r,this.generateImageScaleStyle(o.Stretch)));break}default:{const o=t;r.background=this.colorService.hasColor(o.SolidColor)?this.colorService.generateRGBAColorForProperty(o.SolidColor):e;break}}return r}generateBorderColorStyle(t){return{borderColor:this.colorService.generateRGBAColorForProperty(t)}}generateBorderWidthStyle(t){const e={borderStyle:"solid"};return e.borderWidth="number"==typeof t?`${t}px`:this.generateSpacingStyle(t),e}generateBorderRadiusStyle(t){const e=t.TopLeft,r=t.TopRight,o=t.BottomLeft,a=t.BottomRight;return{borderBottomLeftRadius:o?o+"px":"0",borderBottomRightRadius:a?a+"px":"0",borderTopLeftRadius:e?e+"px":"0",borderTopRightRadius:r?r+"px":"0"}}generateMarginStyle(t){return{margin:this.generateSpacingStyle(t)}}generatePaddingStyle(t){return{padding:this.generateSpacingStyle(t)}}generateVisibilityStyle(t){switch(t){case K.Collapsed:return{display:"none"};case K.Hidden:return{visibility:"hidden"};default:return{visibility:"visible"}}}getVisibilityClass(t){switch(t){case K.Collapsed:return"display-none";case K.Hidden:return"visibility-hidden";default:return"visibility-visible"}}getTextAlignmentClass(t){switch(t){case X.Left:return"text-align-start";case X.Right:return"text-align-end";case X.Center:return"text-align-center"}}generateHorizontalTextAlignmentStyle(t){switch(t){case X.Right:return{textAlign:"end",justifyContent:"flex-end"};case X.Center:return{textAlign:"center",justifyContent:"center"};case X.Left:return{textAlign:"start",justifyContent:"flex-start"}}}generateVerticalTextAlignmentStyle(t){switch(t){case mt.Top:return{verticalAlign:"top",alignItems:"flex-start"};case mt.Bottom:return{verticalAlign:"bottom",alignItems:"flex-end"};case mt.Middle:return{verticalAlign:"middle",alignItems:"center"}}}applyTopPaddingForVerticalTextAlignment(t,e,r){let o=0;const a=t.firstElementChild;if(a){const l=a.firstElementChild;if(l){const c=e.getComputedStyle(a).getPropertyValue("height"),d=e.getComputedStyle(l).getPropertyValue("height");if(c.length>0&&d.length>0){const u=c.match(/\d+/),h=d.match(/\d+/);if(u&&h){const m=parseInt(u[0],10),f=parseInt(h[0],10);!isNaN(m)&&!isNaN(f)&&(r===mt.Middle?o=m-f>>1:r===mt.Bottom&&(o=m-f))}}}a.style.paddingTop=o>0?o+"px":"0"}}generateImageBackgroundStyle(t,e){return{backgroundClip:"padding-box",backgroundImage:`url("${t}")`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:{[Gt.Center]:"auto",[Gt.Fill]:"100% 100%",[Gt.Fit]:"cover",[Gt.Stretch]:"contain"}[e]}}getFieldMaxLength(t,e,r,o=!1){const a=t.length,l=e.MaxLength??0,c=e.Ranges;let d=l>0?Math.min(l,r):r;if(Array.isPopulated(c)){const h=c[0].MinValue.Kind===wt.Number,m=c[0].MaxValue.Kind===wt.Number,f=e.Decimals?e.Decimals:-1!==c[0].MinValue.Value.toString().indexOf(".")?c[0].MinValue.Value.toString().split(".")[1].length:0,w=e.Decimals?e.Decimals:-1!==c[0].MaxValue.Value.toString().indexOf(".")?c[0].MaxValue.Value.toString().split(".")[1].length:0,D=h?c[0].MinValue.Value.toFixed(f).length:O.NUMBER_MAX_LENGTH,G=m?c[0].MaxValue.Value.toFixed(w).length:O.NUMBER_MAX_LENGTH;d=Math.min(Math.max(D,G),r)}let u=Math.max(d,a);return o&&(u+=Math.floor((d-(e.Decimals??0))/3)),u}addGridLinesStyle(t,e){const r=this.stylablePropertyService.getValueForStylableProperty(t,_.GridLines),o=this.stylablePropertyService.getValueForStylableProperty(t,_.GridLineColor),a=this.stylablePropertyService.getValueForStylableProperty(t,_.GridLineWidth),l=`solid ${a}px ${this.colorService.generateRGBAColor(o)}`;if(r&&a)for(let c=0,d=e.Rows.length;c<d;c++){const u={};(r===Z.Horizontal||r===Z.Both)&&c>0&&(u.borderTop=l);for(let h=0,m=e.Columns.length;h<m;h++)(r===Z.Vertical||r===Z.Both)&&h>0&&(u.borderLeft=l),e.Rows[c].Columns[h].Style=u}}getEnabledClass(t){return t?"enabled":"disabled"}copyFontStyle(t){return Object.assign({},{fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration})}generateFontStyle(t){const e={},r=t.Color??O.DEFAULT_COLOR;return e.fontFamily=t.Family,e.fontSize=`${t.Size}px`,e.lineHeight="1.4",e.color=this.colorService.generateRGBAColor(r),t.Bold&&(e.fontWeight="bold"),t.Italic&&(e.fontStyle="italic"),t.Underline?e.textDecoration="underline":t.StrikeThrough&&(e.textDecoration="line-through"),e}getOutlineStyle(t){switch(this.stylablePropertyService.getValueForStylableProperty(t,A.OutlineStyle)){case be.Solid:return"solid";case be.Dash:return"dashed";case be.Dot:return"dotted";default:return"none"}}getOutlineWidth(t){const e=this.stylablePropertyService.getValueForStylableProperty(t,A.OutlineWidth);return null!=e&&e>0?`${e}px`:"0"}getOutlineColor(t){const e=this.stylablePropertyService.getValueForStylableProperty(t,A.OutlineColor);return this.colorService.hasColor(e)?this.colorService.generateRGBAColorForProperty(e):"transparent"}getOutlineOffset(t){const e=this.stylablePropertyService.getValueForStylableProperty(t,A.OutlineOffset);return null!=e&&e>0?`${e}px`:"0"}getBorder(t){let e="none";const r=this.getBorderWidth(t);if(r){const o=this.getBorderStyle(t);if("none"!==o){const a=this.getBorderColor(t);"transparent"!==a&&(e=[r,o,a].join(" "))}}return e}getBorderWidth(t){const e=this.stylablePropertyService.getValueForStylableProperty(t,_.StrokeWidth);return e?`${e}px`:"0"}getBorderStyle(t){let r;switch(this.stylablePropertyService.getValueForStylableProperty(t,_.StrokeStyle)){case ge.Solid:r="solid";break;case ge.Dash:r="dashed";break;case ge.Dot:r="dotted";break;default:r="none"}return r}getBorderColor(t){const e=this.stylablePropertyService.getValueForStylableProperty(t,_.StrokeColor);return this.colorService.hasColor(e)?this.colorService.generateRGBAColorForProperty(e):"transparent"}generateAlignmentCssVarsObject(t){const e={},r=this.stylablePropertyService.getValueForStylableProperty(t,A.HorizontalAlignment);if(r)switch(r){case X.Left:e.justifySelf="start";break;case X.Center:e.justifySelf="center";break;case X.Right:e.justifySelf="end"}const o=this.stylablePropertyService.getValueForStylableProperty(t,A.HorizontalTextAlignment);if(o)switch(o){case X.Left:e.justifyContent="start";break;case X.Center:e.justifyContent="center";break;case X.Right:e.justifyContent="end"}const a=this.stylablePropertyService.getValueForStylableProperty(t,A.VerticalAlignment);if(a)switch(a){case mt.Top:e.alignSelf="start";break;case mt.Middle:e.alignSelf="center";break;case mt.Bottom:e.alignSelf="end"}const l=this.stylablePropertyService.getValueForStylableProperty(t,A.VerticalTextAlignment);if(l)switch(l){case X.Left:e.alignContent="start";break;case X.Center:e.alignContent="center";break;case X.Right:e.alignContent="end"}return e}getLinearGradientDirection(t,e){let r="",o="";return e.X>t.X?r=" right":e.X<t.X&&(r=" left"),e.Y>t.Y?o=" bottom":e.Y<t.Y&&(o=" top"),o||r?`to${o}${r}`:""}generateSpacingStyle(t){const e=t[ve.Top],r=t[ve.Right],o=t[ve.Bottom],a=t[ve.Left];let l;return l=r===a&&e===o&&r===e?e?e+"px":"0":r===a&&e===o?[e?e+"px":"0",r?r+"px":"0"].join(" "):r===a?[e?e+"px":"0",r?r+"px":"0",o?o+"px":"0"].join(" "):[e?e+"px":"0",r?r+"px":"0",o?o+"px":"0",a?a+"px":"0"].join(" "),l}generateHorizontalOverflowStyle(t,e){switch(t){case Ht.None:return{overflowX:"hidden"};case Ht.Visible:return{overflowX:"scroll","-webkit-overflow-scrolling":"touch"};case Ht.Auto:return e===y.Auto?{overflowX:"visible"}:{overflowX:"auto"}}}generateVerticalOverflowStyle(t,e){switch(t){case Ht.None:return{overflowY:"hidden"};case Ht.Visible:return{overflowY:"scroll","-webkit-overflow-scrolling":"touch"};case Ht.Auto:return e===y.Auto?{overflowY:"visible"}:{overflowY:"auto"}}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(qt),i.LFG(Jt),i.LFG(ei),i.LFG(De),i.LFG(Yt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),sn=(()=>{class n{constructor(t,e,r,o,a,l){this.colorService=t,this.eventService=e,this.helperService=r,this.mediaService=o,this.styleGeneratorService=a,this.timerService=l,this.data="data",this.handle="handle",this.click="click",this.focus="focus",this.blur="blur",this.mouseenter="mouseenter",this.mouseleave="mouseleave",this.mousedown="mousedown",this.mouseup="mouseup",this.change="change",this.load="load",this.runEvents=[this.focus,this.blur,this.mouseenter,this.mouseleave,this.mousedown,this.mouseup],this.eventsFunctionObj={[this.click]:_.OnClick,[this.focus]:_.OnGotFocus,[this.blur]:_.OnLostFocus,[this.mouseenter]:_.OnMouseEnter,[this.mouseleave]:_.OnMouseLeave,[this.mousedown]:_.OnMouseDown,[this.mouseup]:_.OnMouseUp,[this.change]:_.OnTextChange},this.eventsStrObj={},((c,d)=>{c.map(u=>{this.eventsStrObj[u]={},this.eventsStrObj[u].event=u,d.map(h=>{this.eventsStrObj[u][h]=`${h}-${u}`})})})([this.load,this.click,...this.runEvents,this.change],[this.data,this.handle])}convertToPlainText(t){let e="";return null!=t&&(String.hasValue(t.SimpleText)?e=t.SimpleText:Array.isPopulated(t.TextElements)&&(e=t.TextElements.map(r=>this.getPlainTextFromElement(r)).join(" "))),e}convertToHTML(t,e=!0,r=!e){const o=e?"auto":"no-auto",a=r?"word-break":"no-word-break";let l;return t&&(String.hasValue(t.SimpleText)?l=this.formatText(t.SimpleText):Array.isPopulated(t.TextElements)&&(l=t.TextElements.map(c=>this.createRichTextElement(c)).join(""))),l?`<div class="text-container ${o} ${a}">${l}</div>`:""}checkDynamicActions(t){if(t&&t.nativeElement){const e=t.nativeElement;if(e){const r=[this.load,...this.runEvents,this.change];for(let a=0,l=r.length;a<l;a++){const c=r[a],d=e.querySelectorAll(`.${this.eventsStrObj[c].handle}`);for(let u=0,h=d.length;u<h;u++){const m=d.item(u);m.addEventListener(c,()=>{c===this.load?this.eventService.controlVisibilityChanged.emit():this.handleActions(m,this.eventsStrObj[c].data,"")})}}const o=e.querySelectorAll(`.${this.eventsStrObj.click.handle}`);for(let a=0,l=o.length;a<l;a++){const c=o.item(a);c.addEventListener(this.click,()=>{this.handleDynamicClick(c)})}}}}getPlainTextFromElement(t){let e="";return Ei.isParagraph(t)?e=this.getPlainTextFromParagraph(t):Ei.isTable(t)&&(e=this.getPlainTextFromTable(t)),e}getPlainTextFromParagraph(t){let e="";return null!=t.SimpleText?e=t.SimpleText:Array.isPopulated(t.Runs)&&(e=t.Runs.map(r=>this.getPlainTextFromRun(r)).join("\n")),e}getPlainTextFromRun(t){let e="";return null!=t.SimpleText?e=t.SimpleText:Array.isPopulated(t.Elements)&&(e=t.Elements.map(r=>this.getPlainTextFromRunElement(r)).join(" ")),e}getPlainTextFromRunElement(t){let e="";return oi.hasTextString(t)?e=t.Text:oi.isImageElement(t)?e=(t.ScreenReaderText||t.TooltipText)??"":oi.isButtonElement(t)&&(e=this.convertToPlainText(t.Text)),e}getPlainTextFromTable(t){let e="";return Array.isNullOrEmpty(t.Rows)||(e=t.Rows.map(r=>this.getPlainTextFromTableRow(r)).join("\n")),e}getPlainTextFromTableRow(t){let e="";return Array.isNullOrEmpty(t.Cells)||(e=[...t.Cells].sort((r,o)=>o.ColumnIndex-r.ColumnIndex).map(r=>this.getPlainTextFromTableCell(r)).join("\t")),e}getPlainTextFromTableCell(t){let e="";return null!=t.SimpleText?e=t.SimpleText:Array.isPopulated(t.Paragraphs)&&(e=t.Paragraphs.map(r=>this.getPlainTextFromParagraph(r)).join("\n")),e}createRichTextElement(t){let e="";return Ei.isParagraph(t)?e=this.createParagraph(t):Ei.isTable(t)&&(e=this.createTable(t)),e}createParagraph(t){const e=t.Alignment,o=null!=e?` class="${{[X.Left]:"left",[X.Center]:"center",[X.Right]:"right"}[e]}"`:"";let a;return a=null!=t.SimpleText?this.formatText(t.SimpleText):Array.isPopulated(t.Runs)?t.Runs.map(l=>this.createRun(l,e)).join(""):"<div>&nbsp;</div>",`<div${o}>${a}</div>`}createRun(t,e){let r="";return null!=t.SimpleText?r=this.createSimpleTextElement(t.SimpleText,t.Font,t.HeaderSize):Array.isPopulated(t.Elements)&&(r=t.Elements.map(o=>this.createRunElement(o,t.Font,t.HeaderSize,t.Language,e)).join("")),r}createRunElement(t,e,r,o,a){let l="";switch(t.Kind){case Y.Text:l=this.createTextElement(t,e,r,o);break;case Y.Tab:console.error("The tab element is deprecated, no longer used and therefore not implemented"),l="";break;case Y.Image:l=this.createImageElement(t);break;case Y.Hyperlink:l=this.createHyperlinkElement(t,e);break;case Y.Ellipse:l=this.createEllipseElement(t);break;case Y.Line:l=this.createLineElement(t);break;case Y.Rectangle:l=this.createRectangleElement(t);break;case Y.Button:l=this.createButtonElement(t,e);break;case Y.AudioControl:l=this.createAudioControlElement(t);break;case Y.VideoControl:l=this.createVideoControlElement(t);break;case Y.Timer:l=this.createTimerElement(t);break;case Y.Label:l=this.createLabelElement(t);break;case Y.TextBox:l=this.createTextBoxElement(t)}return a?`<span data-alignment="${a}">${l}</span>`:`<span>${l}</span>`}createSimpleTextElement(t,e,r){const o=r>0&&r<7?`h${r}`:"span",a=this.createFontStyleFromDefinition(e);return["<",o,a?` style="${a}"`:"",">",this.formatText(t),"</",o,">"].join("")}createTextElement(t,e,r,o){const a=r>0&&r<7?`h${r}`:"span",l=o?` lang="${o}"`:"",c=this.formatText(t.Text),d=this.createFontStyleFromDefinition(e);return["<",a,this.createRunElementProperties(t,[],d),l,">",c,"</",a,">"].join("")}createImageElement(t){const e=` id="link_${t.ID}"`,r=this.getUriFromDefinition(t),o=r.length>0,a=o?` href="${r}"`:"",l=` target="${t.Target||"_BLANK"}"    `,d=this.getMediaSource(t.Kind,t.SourceUrl,t.Source),u=String.isNullOrEmpty(t.ScreenReaderText)?"":` alt="${t.ScreenReaderText}"`,h=[],m=this.generateWHOStyleString(t.Width,t.Height,t.Opacity);(""===t.Height||""===t.Width)&&(h[0]=this.eventsStrObj[this.load].handle);const w=["<img",this.createRunElementProperties(t,h,m),' draggable="false"',d,u,"></img>"];return(o?w.concat(["<a",e,' style="display:none;"',l,a,' rel="noopener noreferrer"',"></a>"]):w).join("")}createHyperlinkElement(t,e){const r=` id="link_${t.ID}"`,o=this.getUriFromDefinition(t),a=o.length>0,l=a?` href="${o}"`:"",c=` target="${t.Target||"_BLANK"}"`,d=["hyperlink-display",this.eventsStrObj.click.handle];let u=this.createFontStyleFromDefinition(e);u+=this.generateUnitSizeString(_.Width,t.Width),u+=this.generateUnitSizeString(_.Height,t.Height);const m=["<span",this.createRunElementProperties(t,d,u),">",t.Text,"</span>"];return(a?m.concat(["<a",r,' style="display:none;"',c,l,' rel="noopener noreferrer"',"></a>"]):m).join("")}createEllipseElement(t){const e=t.StrokeWidth,r=t.Width.Value;let o,a,l;switch(t.Width.UnitType){case y.Pixels:o=` width="${r}"`,a=` cx="${r>>1}"`,l=` rx="${r-(e<<1)>>1}"`;break;case y.Auto:o=' width="0"',a=' cx="0"',l=' rx="0"';break;case y.Stretch:o=' width="100%"',a=' cx="50%"',l=e>0?` rx="calc(50% - ${e<<1}px)"`:' rx="50%"'}const c=t.Height.Value;let d,u,h;switch(t.Height.UnitType){case y.Pixels:d=` height="${c}"`,u=` cy="${c>>1}"`,h=` ry="${c-(e<<1)>>1}"`;break;case y.Auto:d=' height="0"',u=' cy="0"',h=' ry="0"';break;case y.Stretch:d=' height="100%"',u=' cy="50%"',h=e>0?` ry="calc(50% - ${e<<1}px)"`:' ry="50%"'}return['<svg xmlns="http://www.w3.org/2000/svg"',o,d,"><ellipse",a,u,l,h,` style="fill:${this.colorService.generateRGBAColorForProperty(t.Background.SolidColor)};stroke:${this.colorService.generateRGBAColorForProperty(t.StrokeColor)};stroke-width:${e}px;stroke-dasharray:${this.createDashArray(t.StrokeStyle,Math.max(r,c,1))};"`," /></svg>"].join("")}createLineElement(t){const e=t.StrokeWidth,r=this.colorService.generateRGBAColorForProperty(t.StrokeColor),o=t.Orientation===$.Horizontal,a=t.Orientation===$.Vertical,l=o?t.Width.Value:e,c=a?t.Height.Value:e,d=this.createDashArray(t.StrokeStyle,Math.max(l,c,1));let u,h;return u=a||t.Width.UnitType===y.Pixels?` width="${l}"`:t.Width.UnitType===y.Stretch?' width="100%"':"",h=o||t.Height.UnitType===y.Pixels?` height="${c}"`:t.Height.UnitType===y.Stretch?' height="100%"':"",['<svg xmlns="http://www.w3.org/2000/svg"',u,h,"><line",` x1="${o?"0":"50"}%"`,` x2="${o?"100":"50"}%"`,` y1="${o?"50":"0"}%"`,` y2="${o?"50":"100"}%"`,` style="stroke:${r};stroke-width:${e};stroke-dasharray:${d};"`,"></line></svg>"].join("")}createRectangleElement(t){const e=t.StrokeWidth,r=t.Width.Value;let o,a;switch(t.Width.UnitType){case y.Pixels:o=` width="${r}"`,a=` width="${r-(e<<1)}"`;break;case y.Auto:o=' width="0"',a=' width="0"';break;case y.Stretch:o=' width="100%"',a=` width="calc(100% - ${e<<1}px)"`}const l=t.Height.Value;let c,d;switch(t.Height.UnitType){case y.Pixels:c=` height="${l}"`,d=` height="${l-(e<<1)}"`;break;case y.Auto:c=' height="0"',d=' height="0"';break;case y.Stretch:c=' height="100%"',d=` height="calc(100% - ${e<<1}px)"`}const u=t.CornerRadius.TopLeft,h=this.colorService.generateRGBAColorForProperty(t.StrokeColor),m=this.colorService.generateRGBAColorForProperty(t.Background.SolidColor),f=this.createDashArray(t.StrokeStyle,Math.max(r,l,1));return['<svg xmlns="http://www.w3.org/2000/svg"',o,c,"><rect",` x="${e>>1}"`,` y="${e>>1}"`,` rx="${u}"`,` ry="${u}"`,a,d,this.createRunElementProperties(t,void 0,`fill:${m};stroke:${h};stroke-width:${e}px;stroke-dasharray:${f};`),"></rect>Your browser does not support inline SVG.</svg>"].join("")}createButtonElement(t,e){const o=this.convertToHTML(t.Text,(t.Width?.UnitType??null)===y.Auto);let l="cursor: pointer;";return l+=this.createFontStyleFromDefinition(e),l+=this.generateUnitSizeString(_.Width,t.Width),l+=this.generateUnitSizeString(_.Height,t.Height),["<button",this.createRunElementProperties(t,[],l),">",o,"</button>"].join("")}createAudioControlElement(t){let e;e=String.hasValue(t.SourceUrl)?t.SourceUrl:this.mediaService.getMediaUrlForAudio(t.Source)??"";const r=this.isEnabled(t),o=` style="width:${t.Width};height:${t.Height};"`,a=r&&t.AutoPlay?' autoplay="autoplay"':"",l=t.ShowControls?' controls="controls"':"",c=r?`<source src="${e}" />`:"";return["<div",this.createRunElementProperties(t),'><audio preload="auto"',o,a,l,">",c,"Your browser does not support the audio tag.</audio></div>"].join("")}createVideoControlElement(t){let e;e=String.isNullOrEmpty(t.SourceUrl)?this.mediaService.getMediaUrlForVideo(t.Source)??"":t.SourceUrl;const r=this.createRunElementProperties(t),o=null!=e&&(e.startsWith("http")||e.startsWith("www")),a=this.isEnabled(t);return o?a?['<iframe allowfullscreen frameborder="0"',` src="${e}"`,r,"></iframe>"].join(""):"":["<div",r,'><video playsinline preload="auto"',` style="width:${t.Width};height:${t.Height};"`,a&&t.AutoPlay?' autoplay="autoplay"':"",t.ShowControls?' controls="controls"':"",">",a?`<source src="${e}" />`:"","Your browser does not support the video tag.</video></div>"].join("")}createTimerElement(t){return this.isEnabled(t)&&this.timerService.createTimer(t),""}createLabelElement(t){let e=this.generateUnitSizeString(_.Width,t.Width);return e+=this.generateUnitSizeString(_.Height,t.Height),["<label",this.createRunElementProperties(t,void 0,e),">",t.Text,"</label>"].join("")}createTextBoxElement(t){let r=this.generateUnitSizeString(_.Width,t.Width);return r+=this.generateUnitSizeString(_.Height,t.Height),['<input type="text" autocapitalize="off" autocomplete="off"',this.createRunElementProperties(t,[],r),"></input>"].join("")}createRunElementProperties(t,e=[],r=""){const o=` id="${t.ID}"`,a=` name="${t.Name}"`,l=(r+=this.generateStyleString(t)).length>0?` style="${r}"`:"",c=this.setAccessibilityProperties(t),d=this.isEnabled(t),u=d?"":' disabled="disabled"',h=d&&null!=t.TabIndex&&-1!==t.TabIndex?` tabIndex="${t.TabIndex}"`:"",m=String.isNullOrEmpty(t.TooltipText)?"":` title="${t.TooltipText}"`;e[e.length]=t.ShowKeyboardFocus?"focus-outline":"focus-no-outline";const f=[...this.runEvents];oi.isClickActionsElement(t)?f.push(this.click):oi.isTextBoxElement(t)&&f.push(this.change);let w="";for(let G=0,B=f.length;G<B;G++){const j=f[G],F=t[this.eventsFunctionObj[j]];this.hasActions(F)&&d&&(w+=` ${this.eventsStrObj[j].data}="${this.generateActionString(F)}"`,e[e.length]=this.eventsStrObj[j].handle)}return[o,a,` class="${e.join(" ")}"`,l,c,u,h,m,w].join("")}createTable(t){const e=this.generateStyleString(t),r=e.length>0?` style="${e}"`:"",o=this.setAccessibilityProperties(t),a=this.createGridLineDefinition(t);return["<table",r,o,"><thead></thead><tbody>",this.createTableRows(t.Rows,t.Columns,a),"</tbody></table>"].join("")}createGridLineDefinition(t){return Object.prototype.hasOwnProperty.call(t,A.GridType)&&t.GridType!==Z.None?t:void 0}createTableRows(t,e,r){return t.map((o,a)=>this.createTableRow(o,a,e,r)).join("")}createTableRow(t,e,r,o){const a=this.generateStyleString(t);return["<tr",a.length>0?` style="${a}"`:"",">",this.createTableCells(t,e,r,o),"</tr>"].join("")}createTableCells(t,e,r,o){return t.Cells.map((a,l)=>this.createTableCell(e,r[l],a,o)).join("")}createTableCell(t,e,r,o){const a={SimpleText:r.SimpleText,TextElements:r.Paragraphs,MaxTabCount:0};return["<td",` rowspan="${r.RowSpan}"`,` colspan="${r.ColSpan}"`,` style="${this.generateCellStyleString(e,r,t,o)}"`,"><span>",this.convertToHTML(a,(e.Width?.UnitType??null)===k.Auto),"</span></td>"].join("")}handleDynamicClick(t){const e=this.handleActions(t,this.eventsStrObj.click.data,"OnClick");if(t?.nextElementSibling?.id===`link_${t.id}`){const r=t.nextElementSibling;if(r&&!e)try{r.click()}catch{console.error('Cannot click on hyperlink: no function named "click" available.')}}}handleActions(t,e,r){try{const o=t.attributes.getNamedItem(e)?.value;if(String.hasValue(o)){const a=JSON.parse(o);if(null!=a)return a.Name=r,this.eventService.emitHandleActionsEvent(a,t.id),!0}}catch(o){console.error("Could not execute action(s) assigned to the rich text element",o)}return!1}getUriFromDefinition(t){let e="";if(t.Uri){const r=t.Uri;e=r.includes("://")||r.startsWith("mailto:")||r.startsWith("callto:")||r.startsWith("tel:")||r.startsWith("mk:")?r:this.helperService.getBaseHref(!0)+r}return e}createFontStyleFromDefinition(t){let e="";return t&&(e=[this.getStyleProperty("font-weight",t.Bold,"inherit","bold","normal"),this.getStyleProperty("font-style",t.Italic,"inherit","italic","normal"),this.getStyleProperty("text-decoration",t.Underline,"inherit","underline","none"),this.getStyleProperty("font-size",t.Size,"inherit",t.Size.Value+"px","inherit"),this.getStyleProperty("font-family",t.Family,"inherit",t.Family.Value,"inherit"),this.getStyleProperty("color",t.Color,"inherit",this.colorService.generateRGBAColorForProperty(t.Color.Value),"inherit")].join(" ")),e}generateCellStyleString(t,e,r,o){const a={},l={Left:0,Top:0,Right:0,Bottom:0};let d,c=null;if(null!=o){const u=o.GridWidth;u>0&&this.colorService.hasColor(o.GridColor)&&((o.GridType===Z.Both||o.GridType===Z.Horizontal)&&r>0&&(l.Top=u),(o.GridType===Z.Both||o.GridType===Z.Vertical&&e.ColumnIndex>0)&&(l.Left=u),c=o.GridColor)}return this.colorService.hasColor(e.BorderColor)&&(e.BorderWidth.Top>0&&(l.Top=e.BorderWidth.Top),e.BorderWidth.Left>0&&(l.Left=e.BorderWidth.Left),l.Bottom=e.BorderWidth.Bottom,l.Right=e.BorderWidth.Right,c=e.BorderColor),null!=c&&(Object.assign(a,this.styleGeneratorService.generateBorderWidthStyle(l)),Object.assign(a,this.styleGeneratorService.generateBorderColorStyle(c)),Object.assign(a,{"border-style":"solid"})),this.colorService.hasColor(t.Background.SolidColor)&&(d=this.colorService.generateRGBAColorForProperty(t.Background.SolidColor)),this.colorService.hasColor(t.Background.SolidColor)&&(d=this.colorService.generateRGBAColorForProperty(t.Background.SolidColor)),String.isNullOrEmpty(d)||Object.assign(a,{background:d}),t.Width.UnitType===k.Auto?Object.assign(a,{width:"1%","white-space":"nowrap"}):t.Width.UnitType===k.Pixels?Object.assign(a,{width:`${t.Width.Value}px`,"max-width":`${t.Width.Value}px`,overflow:"hidden"}):t.Width.UnitType===k.Star&&Object.assign(a,{width:"auto"}),Object.assign(a,this.styleGeneratorService.generateMarginStyle(e.Margin)),this.helperService.convertStyleObjectToString(a)}getStyleProperty(t,e,r,o,a){let l="";return e&&(l=`${t}: ${this.getStyleValue(e,r,o,a)};`),l}getStyleValue(t,e,r,o){let a;return a=t.UseCurrent?e:t.UseExplicit&&t.Value?r.toString():o,a}generateActionString(t){return JSON.stringify(t).replace(/"/g,"&quot;")}generateStyleString(t){let e="";const r={};let o=!1;for(const a in t)if(Object.isWithOwnProperty(t,a))switch(a){case A.Background:t.Background&&(Object.assign(r,this.styleGeneratorService.generateBackgroundStyle(t.Background)),o=!0);break;case A.BorderColor:Object.assign(r,this.styleGeneratorService.generateBorderColorStyle(t[a])),o=!0;break;case A.BorderWidth:Object.assign(r,this.styleGeneratorService.generateBorderWidthStyle(t[a])),o=!0;break;case A.CornerRadius:Object.assign(r,this.styleGeneratorService.generateBorderRadiusStyle(t[a])),o=!0;break;case A.Margin:Object.assign(r,this.styleGeneratorService.generateMarginStyle(t[a])),o=!0;break;case A.HorizontalTextAlignment:Object.assign(r,this.styleGeneratorService.generateHorizontalTextAlignmentStyle(t[a])),o=!0;break;case A.VerticalTextAlignment:Object.assign(r,this.styleGeneratorService.generateVerticalTextAlignmentStyle(t[a])),o=!0;break;case A.Visibility:(t[a]===K.Hidden||t[a]===K.Collapsed)&&(Object.assign(r,this.styleGeneratorService.generateVisibilityStyle(t[a])),o=!0);break;case A.Stretch:Object.assign(r,this.styleGeneratorService.generateImageScaleStyle(t[a])),o=!0}return o&&(e+=this.helperService.convertStyleObjectToString(r)),e}formatText(t){return" "===t?"&nbsp;":this.unescape(t)}unescape(t){let e="";return t&&(e=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\s*\xA0+\s*/g,r=>r.replace(/[\xA0, \s]/g,"&nbsp;")).replace(/\s\s/g," &nbsp;")),e}setAccessibilityProperties(t){let e="";return Object.prototype.hasOwnProperty.call(t,_.LabelFor)&&null!=t.LabelFor&&(e+=` for="${t.LabelFor}"`),Object.prototype.hasOwnProperty.call(t,"LabelledBy")&&null!=t.LabelledBy&&(e+=` aria-labelledby="${t.LabelledBy}"`),Object.prototype.hasOwnProperty.call(t,"ScreenReaderText")&&null!=t.ScreenReaderText&&(e+=` aria-label="${t.ScreenReaderText}"`),Object.prototype.hasOwnProperty.call(t,"AccessibilityRole")&&null!=t.AccessibilityRole&&(e+=` role="${t.AccessibilityRole}"`),e}getMediaSource(t,e,r){return` src="${this.getMediaSourceUrl(t,e,r)}"`}getMediaSourceUrl(t,e,r){const o={[Y.AudioControl]:Tt.Audio,[Y.Image]:Tt.Image,[Y.VideoControl]:Tt.Video},a=this.helperService.getBaseHref(!0);return e?e.startsWith("http")||e.startsWith("www")||e.startsWith(a)?e:a+e:r&&this.mediaService.getMediaUrl(o[t],r)||O.PIXEL_TRANSPARENT}generateWHOStyleString(t,e,r){return[t?`width: ${t}px;`:"",e?`height: ${e}px;`:"",`opacity: ${r};`].join("")}generateUnitSizeString(t,e){let r="";switch(e.UnitType){case y.Auto:r="auto";break;case y.Pixels:r=e.Value>0?`${e.Value}px`:"0";break;case y.Stretch:r="100%"}return`${t.toLowerCase()}: ${r};`}generateGridUnitSizeString(t,e){let r;switch(e.UnitType){case k.Pixels:case k.Percentage:r=e.Value>0?`${e.Value}px`:"0"}return String.isNullOrEmpty(r)?"":`${t}: ${r};`}createDashArray(t,e){let r;switch(t){case ge.Dash:r=`${e/4}, ${e/10}`;break;case ge.Dot:r=`${e/10}, ${e/10}`;break;default:r="0"}return r}isEnabled(t){return this.isVisible(t)&&t.Enabled}isVisible(t){return-1===[K.Hidden,K.Collapsed].indexOf(t.Visibility)}hasActions(t){return!Array.isNullOrEmpty(t?.Actions)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(qt),i.LFG(q),i.LFG(Jt),i.LFG(ei),i.LFG(ye),i.LFG(_i))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var si=(()=>{return(n=si||(si={}))[n.Keystroke=0]="Keystroke",n[n.Gesture=1]="Gesture",n[n.Speech=2]="Speech",si;var n})(),Ce=(()=>{return(n=Ce||(Ce={})).Left="SwipeLeft",n.Up="SwipeUp",n.Right="SwipeRight",n.Down="SwipeDown",Ce;var n})();let Zn=(()=>{class n{constructor(t,e){this.eventService=t,this.document=e,this.mc=null,this.registeredGestures=[],this.hasTouchEvents=!1,this.initialize=()=>{if(this.hasTouchEvents="ontouchstart"in window||navigator.maxTouchPoints>0,!this.mc&&this.hasTouchEvents){const r=this.document.getElementById("placeholder");r&&(this.mc=new Hammer(r,{touchAction:"auto",inputClass:Hammer.TouchMouseInput,cssProps:{userSelect:"auto",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)",touchCallout:"none",touchSelect:"none",userDrag:"none"}}))}},this.registerGestureFromObject=r=>{if(r&&this.hasTouchEvents){const o=this.getEventFromGesture(r.Gesture);o&&this.registerGesture(o,l=>{this.eventService.emitHandleActionsEvent(r.OnExecute),l.preventDefault()})}},this.unregisterGesture=r=>{this.hasTouchEvents&&(this.registeredGestures.splice(this.registeredGestures.indexOf(r),1),this.mc.off(r))},this.unregisterGestures=()=>{this.hasTouchEvents&&(this.registeredGestures.forEach(r=>this.mc.off(r)),this.registeredGestures=[])},this.getEventFromGesture=r=>{switch(r){case Ce.Left:case Ce.Up:case Ce.Right:case Ce.Down:return r.toLowerCase();default:return null}},this.registerGesture=(r,o)=>{this.hasTouchEvents&&(this.unregisterGesture(r),r&&(this.registeredGestures.push(r),this.mc.on(r,o)))}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>q)),i.LFG(g.K0))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),an=(()=>{class n{constructor(t,e,r){this.subscriptionService=t,this.hotkeyService=e,this.gestureService=r,this.handleUpdate=o=>{this.clearShortcuts(),o.forEach(a=>{switch(a.Kind){case si.Gesture:this.gestureService.registerGestureFromObject(a);break;case si.Keystroke:this.hotkeyService.registerHotkeyFromObject(a)}})},this.clearShortcuts=()=>{this.hotkeyService.unregisterSystemHotkeys(),this.gestureService.unregisterGestures(),this.hotkeyService.initialize(),this.gestureService.initialize()}}ngOnInit(){this.clientSideShortcutsSubscription||(this.clientSideShortcutsSubscription=this.subscriptionService.clientSideShortcutsSubject.subscribe({next:t=>{t&&this.handleUpdate(t)}}))}ngOnDestroy(){this.clientSideShortcutsSubscription&&this.clientSideShortcutsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(pt),i.LFG(qi),i.LFG(Zn))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),ln=(()=>{class n{constructor(t){this.subscriptionService=t,this.isError=e=>[v.ErrorText,v.GroupErrorText,v.PageErrorText].indexOf(e.kind)>0}get skipLinks(){return this.subscriptionService.skipLinks}set skipLinks(t){this.subscriptionService.skipLinks=t}add(t){const e=this.skipLinks;null==e[t.id]&&(e[t.id]=t,this.skipLinks=e)}remove(t){const e=this.skipLinks;null!=e[t]&&delete e[t],this.skipLinks=e}clear(){this.skipLinks={}}create(t){const e={id:t.ID,kind:t.Kind,name:t.SkipLinkName,description:t.SkipLinkDescription||t.SkipLinkName,index:t.SkipLinkIndex,isError:!1};return this.add(e),e}addAnchor(t,e){const r=e.parentElement,o=document.createElement("a");o.setAttribute("id",t.SkipLinkName),o.setAttribute("tabindex","-1"),r&&r.insertBefore(o,r.firstChild)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(pt))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Fi=(()=>{class n{constructor(){this.handleTooltip=new i.vpe}showTooltip(t,e){this.emitTooltip(t,e,!0)}hideTooltip(){this.emitTooltip()}emitTooltip(t,e=null,r=!1){this.handleTooltip.emit({tooltip:t,hostElement:e,visible:r})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E=(()=>{class n{constructor(t,e,r,o,a,l,c,d,u,h,m,f,w,D,G,B,j,H,F,ct,gt,St,re,yt,Dt,vn,yn){this.auditTrailService=t,this.colorService=e,this.converterFactoryService=r,this.cultureInfoService=o,this.customPropertyService=a,this.dataService=l,this.dimensionGeneratorService=c,this.eventService=d,this.focusService=u,this.fontService=h,this.helperService=m,this.keyCodesService=f,this.lookupService=w,this.mediaService=D,this.navigationService=G,this.performanceService=B,this.renderStateService=j,this.richTextConverter=H,this.shortcutService=F,this.sizeTreeService=ct,this.skipLinkService=gt,this.stylablePropertyService=St,this.styleGeneratorService=re,this.subscriptionService=yt,this.tooltipService=Dt,this.userAgentService=vn,this.injector=yn}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(qe),i.LFG(qt),i.LFG(yi),i.LFG(Wt),i.LFG(Gn),i.LFG(Di),i.LFG(Qn),i.LFG(q),i.LFG(ue),i.LFG(Ii),i.LFG(Jt),i.LFG(Jn),i.LFG(Oi),i.LFG(ei),i.LFG(nt),i.LFG(Le),i.LFG(ut),i.LFG(sn),i.LFG(an),i.LFG(Li),i.LFG(ln),i.LFG(De),i.LFG(ye),i.LFG(pt),i.LFG(Fi),i.LFG(Yt),i.LFG(i.zs3))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=["autoWidthElement"],fo=["autoHeightElement"];let et=(()=>{class n{constructor(t,e,r){this.sp=t,this.el=e,this.cd=r,this._cssClass=[],this.cssStyle={},this.containsRichText=!1}get element(){return this.el?this.el.nativeElement:null}get autoWidthElement(){return this.autoWidthElementRef?this.autoWidthElementRef.nativeElement:null}get autoHeightElement(){return this.autoHeightElementRef?this.autoHeightElementRef.nativeElement:null}get style(){return this._style??{}}get cssClass(){return this._cssClass}get controlId(){return this.dataObject.ID}get controlKind(){return this.dataObject.Kind}get isEnabled(){return this.dataObject.Enabled}get isVisible(){return this.dataObject.Visibility===K.Visible}get disabled(){return this.isEnabled?void 0:"disabled"}get tabIndex(){return this.dataObject.Enabled?this.hasTabIndex(this.dataObject)?this.dataObject.TabIndex>-1?this.dataObject.TabIndex:-1:void 0:-1}get hasAutoWidth(){return this.widthUnitType===y.Auto}get hasAutoHeight(){return this.heightUnitType===y.Auto}get widthUnitType(){return this.width?.UnitType??y.Auto}get heightUnitType(){return this.height?.UnitType??y.Auto}get watermarkText(){return this.watermark&&String.hasValue(this.watermark.Text)?this.watermark.Text:void 0}get watermarkTextLength(){return this.watermark&&null!=this.watermark.Text?this.watermark.Text.length:0}get useCssVars(){return this.sp.renderStateService.useCssGrids}get elementWidth(){return this.useCssVars?this.cssStyle.width:void 0}get elementHeight(){return this.useCssVars?this.cssStyle.height:void 0}get elementDisplay(){return this.useCssVars?this.cssStyle.display:void 0}get elementAlignSelf(){return this.useCssVars&&this.heightUnitType!==y.Stretch?this.cssStyle.alignSelf:void 0}get elementJustifySelf(){return this.useCssVars&&this.widthUnitType!==y.Stretch?this.cssStyle.justifySelf:void 0}get elementVerticalTextAlignment(){return this.useCssVars?{[mt.Top]:"stretch",[mt.Middle]:"center",[mt.Bottom]:"end"}[this.verticalTextAlignment]:void 0}get elementHorizontalTextAlignment(){return this.useCssVars?{[X.Left]:"stretch",[X.Center]:"center",[X.Right]:"end"}[this.horizontalTextAlignment]:void 0}get elementBackground(){return this.useCssVars&&!this.cssStyle.background?.startsWith("linear")?this.cssStyle.background:void 0}get elementBackgroundClip(){return this.useCssVars?this.cssStyle.backgroundClip:void 0}get elementBackgroundImage(){return this.useCssVars?!this.cssStyle.backgroundImage&&this.cssStyle.background?.startsWith("linear")?this.cssStyle.background:this.cssStyle.backgroundImage:void 0}get elementBackgroundPosition(){return this.useCssVars?this.cssStyle.backgroundPosition:void 0}get elementBackgroundRepeat(){return this.useCssVars?this.cssStyle.backgroundRepeat:void 0}get elementBackgroundSize(){return this.useCssVars?this.cssStyle.backgroundSize:void 0}get elementOpacity(){return this.useCssVars?this.cssStyle.opacity:void 0}get elementBorderColor(){return this.useCssVars?this.cssStyle.borderColor:void 0}get elementBorderRadius(){return this.useCssVars?this.cssStyle.borderRadius:void 0}get elementBorderBottomLeftRadius(){return this.useCssVars?this.cssStyle.borderBottomLeftRadius:void 0}get elementBorderBottomRightRadius(){return this.useCssVars?this.cssStyle.borderBottomRightRadius:void 0}get elementBorderTopLeftRadius(){return this.useCssVars?this.cssStyle.borderTopLeftRadius:void 0}get elementBorderTopRightRadius(){return this.useCssVars?this.cssStyle.borderTopRightRadius:void 0}get elementBorderStyle(){return this.useCssVars?this.cssStyle.borderStyle:void 0}get elementBorderWidth(){return this.useCssVars?this.cssStyle.borderWidth:void 0}get elementMargin(){return this.useCssVars?this.cssStyle.margin:void 0}get elementPadding(){return this.useCssVars?this.cssStyle.padding:void 0}get elementOverflowX(){return this.useCssVars?this.cssStyle.overflowX:void 0}get elementOverflowY(){return this.useCssVars?this.cssStyle.overflowY:void 0}get elementTextAlign(){return this.useCssVars?this.cssStyle.textAlign:void 0}get elementVisibility(){return this.useCssVars?this.cssStyle.visibility:void 0}get elementFontColor(){return this.useCssVars?this.cssStyle.color:void 0}get elementFontFamily(){return this.useCssVars?this.cssStyle.fontFamily:void 0}get elementFontSize(){return this.useCssVars?this.cssStyle.fontSize:void 0}get elementFontStyle(){return this.useCssVars?this.cssStyle.fontStyle:void 0}get elementFontWeight(){return this.useCssVars?this.cssStyle.fontWeight:void 0}get elementFontDecoration(){return this.useCssVars?this.cssStyle.textDecoration:void 0}get watermarkFontColor(){return this.isWatermarkWithFontObject(this.watermark)&&null!=this.watermark.Font.Color?this.sp.colorService.generateRGBAColor(this.watermark.Font.Color):void 0}get watermarkFontFamily(){return this.isWatermarkWithFontObject(this.watermark)&&String.hasValue(this.watermark.Font.Family)?this.watermark.Font.Family:void 0}get watermarkFontSize(){return this.isWatermarkWithFontObject(this.watermark)&&null!=this.watermark.Font.Size?this.watermark.Font.Size>0?`${this.watermark.Font.Size}px`:"0":void 0}get watermarkFontStyle(){return this.isWatermarkWithFontObject(this.watermark)&&this.watermark.Font.Italic?"italic":void 0}get watermarkFontWeight(){return this.isWatermarkWithFontObject(this.watermark)&&this.watermark.Font.Bold?"bold":void 0}get watermarkFontDecoration(){}get isIOS(){return this.sp.userAgentService.isIOS}static isControlContainerComponent(t){return Object.prototype.hasOwnProperty.call(t,_.IsSkipLinkTarget)}ngOnInit(){this.ariaObject=new po,this.ariaObject.UseOptimizedNoStylesheetVersion=this.sp.renderStateService.optimizeNoStylesheets,this.configureControlSize(),this.controlSubject=this.sp.subscriptionService.getControlSubjectById(this.controlId),this.controlSubject&&(this.controlSubscription=this.controlSubject.subscribe({next:t=>{t&&this.sp.performanceService.measure("BaseComponent","handleControlChanged",()=>{this.handleControlUpdate(t),this.applyStylesAndDimensions(),this.cd.markForCheck()},[this.dataObject.ID])}}))}ngAfterViewInit(){this.containsRichText&&this.sp.richTextConverter.checkDynamicActions(this.el)}ngOnDestroy(){this.controlSubscription&&this.controlSubscription.unsubscribe(),this.ariaObject&&this.ariaObject.destroy()}handleControlUpdate(t){this.sp.performanceService.measure("BaseComponent",this.handleControlUpdate.name,()=>{if(this.ariaObject.setControl(t),this.hasWaterMark(t)&&(this.watermark=Mi.deserialize(t.Watermark)),this.setWidthFromStylableProperties(),this.setHeightFromStylableProperties(),this.horizontalAlignment=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalAlignment),this.verticalAlignment=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.VerticalAlignment),this.horizontalTextAlignment=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment),this.verticalTextAlignment=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.VerticalTextAlignment),this.useCssVars){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Margin);this.cssStyle.width=this.convertIUnitToString(this.width,e.Left+e.Right),this.cssStyle.height=this.convertIUnitToString(this.height,e.Top+e.Bottom),this.heightUnitType===y.Auto&&(this.cssStyle.alignSelf="start"),this.widthUnitType===y.Auto&&(this.cssStyle.justifySelf="start"),this.cssStyle.display=this.widthUnitType!==y.Auto?"grid":"inline-grid",this.elementColumnStart=this.dataObject.ColumnIndex+1,this.elementColumnEnd=this.elementColumnStart+this.dataObject.ColSpan,this.elementRowStart=this.dataObject.RowIndex+1,this.elementRowEnd=this.elementRowStart+this.dataObject.RowSpan}this.updateControlSize()},[this.dataObject.ID])}executeActions(t){t&&this.sp.performanceService.measure("BaseComponent",this.executeActions.name,()=>{this.sp.eventService.emitHandleActionsEvent(t,this.controlId)},[this.dataObject.ID])}getDimensions(){const t={width:"",height:""};if(this.controlSize){const e=this.controlSize.getWidth();null!=e&&(t.width=e>0?e+"px":"0");const r=this.controlSize.getHeight();null!=r&&(t.height=r>0?r+"px":"0")}else this.sp.dimensionGeneratorService.calculateComponentDimensions(t,this.dataObject);return t}getComponentName(){return(v[this.controlKind]?`${v[this.controlKind]}Component`:"BaseComponent").replace("Control","")}getCssClasses(){const t=[];if(t.push(this.getComponentName()),t.push(this.sp.cultureInfoService.cultureInfo.IsRightToLeft?"rtl":"ltr"),this.useCssVars&&(t.push("css-vars"),[v.Grid,v.Panel].includes(this.controlKind)?t.push("container-control"):t.push("leaf-control"),this.useFontObject(this.dataObject)&&t.push("font-object")),this.parentType&&t.push(`ParentType-${this.parentType}`),t.push(this.sp.styleGeneratorService.getVisibilityClass(this.dataObject.Visibility)),t.push(this.sp.styleGeneratorService.getEnabledClass(this.dataObject.Enabled)),this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment),r=this.sp.styleGeneratorService.getTextAlignmentClass(e);t.push(r)}return t.push(...this.getFontCssClasses()),this.hasKeyboardFocus(this.dataObject)&&t.push(this.dataObject.ShowKeyboardFocus?"focus-outline":"focus-no-outline"),t.push(`width-${y[this.widthUnitType].toLowerCase()}`),t.push(`height-${y[this.heightUnitType].toLowerCase()}`),t}getFontCssClasses(t=!1){const e=[];return this.hasFontName(this.dataObject)&&e.push(this.dataObject.FontName),t&&this.watermark&&(String.hasValue(this.watermark.FontName)?(e.push("watermark"),e.push(`${this.watermark.FontName}-wm`)):this.watermarkHasFontObject()&&e.push("watermark-font")),e}getStyleObject(){return this.useFontObject(this.dataObject)?this.sp.styleGeneratorService.generateStyleObjectWithFont(this.dataObject):this.sp.styleGeneratorService.generateStyleObject(this.dataObject)}sizeTreeSetWidth(){this.sp.sizeTreeService.cssLoaded&&this.controlSize&&(this.controlSize.dimensionsChanged()&&(this.applyStylesAndDimensions(),this.cd.detectChanges(),n.detectChangesWidthCounter++,this.logSizeTreeInfo(),this.controlSize.saveState()),this.controlSize.widthReady()||this.setContentWidth())}sizeTreeSetHeight(){this.controlSize&&(this.controlSize.dimensionsChanged()&&(this.applyStylesAndDimensions(),this.cd.detectChanges(),n.detectChangesHeightCounter++,this.logSizeTreeInfo(),this.controlSize.saveState()),this.controlSize.heightReady()||this.setContentHeight())}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;t.width.unitType===y.Auto&&(null!=this.autoWidthElement&&(t.contentWidth=Math.ceil(this.autoWidthElement.getBoundingClientRect().width)),null===t.contentWidth&&(t.contentWidth=this.element?Math.ceil((this.element.firstElementChild||this.element).getBoundingClientRect().width):0),null===t.contentWidth&&(t.contentWidth=0))}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;t.height.unitType===y.Auto&&(null!=this.autoHeightElement&&(t.contentHeight=Math.ceil(this.autoHeightElement.getBoundingClientRect().height)),null===t.contentHeight&&(t.contentHeight=this.element?Math.ceil((this.element.firstElementChild||this.element).getBoundingClientRect().height):0),null===t.contentHeight&&(t.contentHeight=0))}}sizeTreeReady(){this.sp.performanceService.measure("BaseComponent",this.sizeTreeReady.name,()=>{this.controlSize&&this.controlSize.dimensionsChanged()&&(this.applyStylesAndDimensions(),this.cd.detectChanges(),n.detectChangesReadyCounter++,this.logSizeTreeInfo(),this.controlSize.saveState())},[this.dataObject.ID])}getPosition(){return this.element?.getBoundingClientRect()??null}getNeighbours(){return[]}getVersion(){return 2}getKeyboardNavigationStrategy(){return new rn(this.sp.injector)}getKeyboardInsertStrategy(){return null}getKeyboardEmptyStrategy(){return new on}setText(t){}clearText(){}convertIUnitToString(t,e){switch(t.UnitType){case y.Auto:return"auto";case y.Pixels:return`${t.Value}px`;case y.Stretch:return`calc(100% - ${e}px)`}}convertIGridUnitToString(t){switch(t.UnitType){case k.Auto:return"auto";case k.Pixels:return`${t.Value}px`;case k.Percentage:return`${t.Value}%`;case k.Star:return`minmax(min-content, ${t.Value}fr)`}}configureControlSize(t=!0){this.sp.performanceService.measure("BaseComponent",this.configureControlSize.name,()=>{if(t){const e=this.sp.sizeTreeService.find(this.controlId);if(e?this.controlSize=e:(this.controlSize=this.sp.sizeTreeService.createControlSize(this.dataObject),!this.sp.sizeTreeService.hasRoot()&&this.controlSize&&this.sp.sizeTreeService.setRootControlSize(this.controlSize)),this.updateControlSize(),this.controlSize){const r=this.createChildControlSizes();for(const o of r)this.sp.sizeTreeService.connect(o,this.controlSize)}}},[this.dataObject.ID])}updateControlSize(){this.sp.performanceService.measure("BaseComponent",this.updateControlSize.name,()=>{if(this.controlSize){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Width),e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Height);this.controlSize.width=new je(t.Value,t.UnitType),this.controlSize.height=new je(e.Value,e.UnitType),this.controlSize.margin=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Margin),this.controlSize.border=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.BorderWidth),this.controlSize.colSpan=this.dataObject.ColSpan,this.controlSize.rowSpan=this.dataObject.RowSpan,this.controlSize.exploded=this.dataObject.Visibility!==K.Collapsed}},[this.dataObject.ID])}createChildControlSizes(){return[]}applyStylesAndDimensions(){this.sp.performanceService.measure("BaseComponent",this.applyStylesAndDimensions.name,()=>{this._cssClass=this.getCssClasses(),this.useCssVars?this.applyCssVars():(this._style=this.getStyleObject(),Object.assign(this._style,this.getDimensions()))},[this.dataObject.ID])}setWidthFromStylableProperties(){this.width=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Width)}setHeightFromStylableProperties(){this.height=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Height)}hasWaterMark(t){return Object.prototype.hasOwnProperty.call(this.dataObject,_.Watermark)}watermarkHasFontObject(t=this.watermark){return null!=t&&!t.hasFontName&&null!=t.Font}isWatermarkWithFontObject(t){return this.watermarkHasFontObject(t)}hasFontProperties(t){return Object.prototype.hasOwnProperty.call(this.dataObject,_.FontName)||Object.prototype.hasOwnProperty.call(this.dataObject,_.Font)}hasFontName(t){return this.hasFontProperties(t)&&String.hasValue(t.FontName)}useFontObject(t){return this.hasFontProperties(t)&&String.isNullOrEmpty(t.FontName)&&null!=t.Font}hasKeyboardFocus(t){return Object.prototype.hasOwnProperty.call(this.dataObject,_.ShowKeyboardFocus)}hasTabIndex(t){return Object.prototype.hasOwnProperty.call(this.dataObject,_.TabIndex)}applyCssVars(){let t;t=this.useFontObject(this.dataObject)?this.sp.styleGeneratorService.generateStyleObjectWithFont(this.dataObject):this.sp.styleGeneratorService.generateStyleObject(this.dataObject);const e=this.sp.styleGeneratorService.generateAlignmentCssVarsObject(this.dataObject);this.cssStyle={...this.cssStyle,...t,...e}}logSizeTreeInfo(){}}return n.detectChangesWidthCounter=0,n.detectChangesHeightCounter=0,n.detectChangesReadyCounter=0,n.\u0275fac=function(t){return new(t||n)(i.Y36(E),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(i.Gf(mo,5),i.Gf(fo,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.autoWidthElementRef=r.first),i.iGM(r=i.CRH())&&(e.autoHeightElementRef=r.first)}},hostVars:96,hostBindings:function(t,e){2&t&&i.Udp("--width",e.elementWidth)("--height",e.elementHeight)("--display",e.elementDisplay)("--align-self",e.elementAlignSelf)("--justify-self",e.elementJustifySelf)("--vertical-text-alignment",e.elementVerticalTextAlignment)("--horizontal-text-alignment",e.elementHorizontalTextAlignment)("--grid-template-rows",e.elementTemplateRows)("--grid-template-columns",e.elementTemplateColumns)("--grid-column-start",e.elementColumnStart)("--grid-column-end",e.elementColumnEnd)("--grid-row-start",e.elementRowStart)("--grid-row-end",e.elementRowEnd)("--columns",e.elementColumns)("--rows",e.elementRows)("--background",e.elementBackground)("--background-clip",e.elementBackgroundClip)("--background-image",e.elementBackgroundImage)("--background-position",e.elementBackgroundPosition)("--background-repeat",e.elementBackgroundRepeat)("--background-size",e.elementBackgroundSize)("--opacity",e.elementOpacity)("--border-color",e.elementBorderColor)("--border-radius",e.elementBorderRadius)("--border-bottom-left-radius",e.elementBorderBottomLeftRadius)("--border-bottom-right-radius",e.elementBorderBottomRightRadius)("--border-top-left-radius",e.elementBorderTopLeftRadius)("--border-top-right-radius",e.elementBorderTopRightRadius)("--border-style",e.elementBorderStyle)("--border-width",e.elementBorderWidth)("--margin",e.elementMargin)("--padding",e.elementPadding)("--overflow-x",e.elementOverflowX)("--overflow-y",e.elementOverflowY)("--text-align",e.elementTextAlign)("--visibility",e.elementVisibility)("--font-color",e.elementFontColor)("--font-family",e.elementFontFamily)("--font-size",e.elementFontSize)("--font-style",e.elementFontStyle)("--font-weight",e.elementFontWeight)("--font-decoration",e.elementFontDecoration)("--watermark-font-color",e.watermarkFontColor)("--watermark-font-family",e.watermarkFontFamily)("--watermark-font-size",e.watermarkFontSize)("--watermark-font-style",e.watermarkFontStyle)("--watermark-font-weight",e.watermarkFontWeight)("--watermark-font-decoration",e.watermarkFontDecoration)},inputs:{dataObject:"dataObject",parentId:"parentId",parentType:"parentType"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),n})(),Li=(()=>{class n{constructor(t,e,r,o,a){this.componentService=t,this.eventService=e,this.fontService=r,this.performanceService=o,this.renderStateService=a,this._controlSizeHashTable={},this._calcVersion=0,this._mutationObserverConfig={attributes:!0,attributeFilter:["style"]},this.printLogging=!1,this.printTreeWhenReady=!1,this.cssLoaded=!1,this.isReady=!1,this.handleMutationObserver=()=>{this.eventService.controlVisibilityChanged.emit()},this._containerWindow=new ii("WINDOW",this.scrollbarSize),this._mutationObserver=new MutationObserver(()=>this.handleMutationObserver()),this._mutationObserver.observe(document.body,this._mutationObserverConfig)}calculate(){this._calcVersion++,this._containerWindow.getChildren().length<1?setTimeout(()=>{this.calculate(),this.eventService.controlVisibilityChanged.emit()},100):this._containerWindow.calculate(this._calcVersion)}setRootControlSize(t){this._containerWindow.clearChildren(),this._containerWindow.addChild(t)}hasRoot(){return this._containerWindow.getChildren().length>0}setWindowSize(t,e){this._containerWindow.width=new je(t,y.Pixels),this._containerWindow.height=new je(e,y.Pixels),this.log("Window size set to ",t," x ",e)}initialize(t,e,r){this._controlSizeHashTable={},this._containerWindow.clearChildren(),this._containerWindow.scrollbarSize=r,this.setWindowSize(t,e),this.scrollbarSize=r,this.isReady=!1,this._cssLoadedSubscription||(this._cssLoadedSubscription=this.eventService.cssLoadedEvent.subscribe({next:()=>{this.cssLoaded=!0,this.execute("cssLoaded")}})),this._pageInitializedSubscription||(this._pageInitializedSubscription=this.eventService.pageInitializedEvent.subscribe({next:()=>{this.cssLoaded&&(this.log("Page initialized"),this.execute("pageInitialized"))}})),this._windowResizedSubscription||(this._windowResizedSubscription=this.eventService.windowResizedEvent.subscribe({next:o=>{this.setWindowSize(o.pixelWidth,o.pixelHeight),this.execute("windowResized")}})),this._visibilityChangedSubscription||(this._visibilityChangedSubscription=this.eventService.controlVisibilityChanged.subscribe({next:o=>{o&&this.log("Visibility changed for control ",o.ID),this.execute("visibilityChanged")}}))}createControlSize(t){let e;return t.Kind===v.Panel?e=new ii(t.ID,this.scrollbarSize):t.Kind===v.Grid?e=new ni(t.ID):t.Kind===v.TableControl?e=new Kn(t.ID):t.Kind===v.TableRowControl||(e=new ht(t.ID)),e&&(this._controlSizeHashTable[t.ID]=e),e}connect(t,e){null!=e?e.addChild(t):this._containerWindow.addChild(t),t instanceof he||(this._controlSizeHashTable[t.name]=t)}find(t){return t in this._controlSizeHashTable?this._controlSizeHashTable[t]:this.findRecursive(t,this._containerWindow)}resetAutos(t,e){(t||e)&&this.resetAutosRecursive(this._containerWindow,t,e)}resetAutosRecursive(t,e,r){if(t instanceof ht){const o=t;e&&o.width.unitType===y.Auto&&(o.contentWidth=null),r&&o.height.unitType===y.Auto&&(o.contentHeight=null)}t.pixelWidth=null,t.pixelHeight=null;for(const o of t.getChildren())this.resetAutosRecursive(o,e,r)}printTree(t=0){this.log(" START PRINT \n-------------\n",this.printNode(this._containerWindow,t),"\n------------\n END PRINT ")}execute(t,e=!0,r=!0){this.isReady=!1,et.detectChangesWidthCounter=0,et.detectChangesHeightCounter=0,et.detectChangesReadyCounter=0,this.performanceService.measure(this.constructor.name,this.execute.name,()=>{this.resetAutos(e,r),this.calculate();for(const a in this.componentService.components)if(Object.prototype.hasOwnProperty.call(this.componentService.components,a)){const l=this.componentService.components[a],c=l.controlSize?.height.unitType===y.Auto;l.dataObject.Kind===v.Panel&&c&&l.setContentWidth?l.setContentWidth():l.sizeTreeSetWidth()}this.calculate();for(const a in this.componentService.components)if(Object.prototype.hasOwnProperty.call(this.componentService.components,a)){const l=this.componentService.components[a],c=l.controlSize?.height.unitType===y.Auto;l.dataObject.Kind===v.Panel&&c&&l.setContentHeight?l.setContentHeight():l.sizeTreeSetHeight()}this.calculate();for(const a in this.componentService.components)Object.prototype.hasOwnProperty.call(this.componentService.components,a)&&this.componentService.components[a].sizeTreeReady()}),this.isReady=!0,this.eventService.sizeTreeReadyEvent.emit(t),this.printTreeWhenReady&&this.printTree()}findRecursive(t,e){if(null!=e){if(e.name===t)return e;const r=e.getChildren();for(const o of r){const a=this.findRecursive(t,o);if(null!=a)return a}}}log(...t){this.printLogging&&console.log("[SizeTree] ",...t)}warn(...t){this.printLogging&&console.warn("[SizeTree] ",...t)}printNode(t,e){const r=[],o={};for(let c=0;c<e;c++)r[r.length]="\t";o.name=t.name,r[r.length]=t.name+":\t",t.widthReady()&&(o.width=(t.pixelWidth??0).toString(),r[r.length]=` Width = ${t.pixelWidth??0} `);const a=t instanceof he;r[r.length]=this.getUnitSizeText(t.width.value,t.width.unitType,a),o.width+=` ${this.getUnitSizeText(t.width.value,t.width.unitType,a)}`,t.heightReady()&&(o.height=(t.pixelHeight??0).toString(),r[r.length]=` Height = ${t.pixelHeight??0} `),r[r.length]=this.getUnitSizeText(t.height.value,t.height.unitType,a),o.height+=` ${this.getUnitSizeText(t.height.value,t.height.unitType,a)}`,t.colSpan>1&&(r[r.length]=` ColSpan = ${t.colSpan}`,o.colspan=t.colSpan.toString()),t.rowSpan>1&&(r[r.length]=` RowSpan = ${t.rowSpan}`,o.rowspan=t.rowSpan.toString()),t.exploded||(o.visible=t.exploded,r[r.length]=" [invisible]"),this.log(...r),this.detectAutoStretchCombinations(t),this.detectAutoStarCombinations(t);const l=t.getChildren();if(l.length>0){o.children=[];for(const c of l)o.children.push(this.printNode(c,e+1))}return o}detectAutoStretchCombinations(t){let e=!0,r=!0;const o=t.getChildren();for(const a of o){if(a instanceof he){e=!1,r=!1;break}a.width.unitType!==y.Stretch&&(e=!1),a.height.unitType!==y.Stretch&&(r=!1)}o.length>0&&(t.width.unitType===y.Auto&&e&&this.warn('Cannot determine width correctly: "',t.name,'" has width "auto" but contains only stretch width children'),t.height.unitType===y.Auto&&r&&this.warn('Cannot determine height correctly: "',t.name,'" has height "auto" but contains only stretch height children'))}detectAutoStarCombinations(t){if(t instanceof ni){const e=t;for(const r of e.getChildren())if(r){const o=r;e.width.unitType===y.Auto&&(o.width.unitType===k.Percentage?this.warn('Cannot determine width correctly: "',t.name,'" has width "auto" but ',r.name,' has "percentage" width specified.'):o.width.unitType===k.Star&&this.warn('Cannot determine width correctly: "',t.name,'" has width "auto" but ',r.name,' has "star" width specified.')),e.height.unitType===y.Auto&&(o.height.unitType===k.Percentage?this.warn('Cannot determine height correctly: "',t.name,'" has height "auto" but ',r.name,' has "percentage" height specified.'):o.height.unitType===k.Star&&this.warn('Cannot determine height correctly: "',t.name,'" has height "auto" but ',r.name,' has "star" height specified.'))}}}getUnitSizeText(t,e,r){let o="";return r?e===k.Auto?o="auto":e===k.Pixels?o=t+"px":e===k.Percentage?o=t+"%":e===k.Star&&(o=t+"*"):e===y.Auto?o="auto":e===y.Pixels?o=t+"px":e===y.Stretch&&(o="stretch"),`(${o})`}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(se),i.LFG(q),i.LFG(Ii),i.LFG(Le),i.LFG(ut))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),qn=(()=>{class n{setTextInfo(t){this.textInfo=t}isRightToLeftText(){return!!this.textInfo&&this.textInfo.IsRightToLeft}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),cn=(()=>{class n{constructor(t,e,r){this.http=t,this.eventService=e,this.payloadService=r,this.handleError=o=>Promise.reject(o.message)}set uploadPath(t){this._uploadPath=t}uploadFile(t,e,r){this.eventService.showSplashEvent.emit();const o=new FormData,a=this.payloadService.uploadPayload(e,r);return o.append("uploadMeta",JSON.stringify(a)),o.append("uploadedFile",t,t.name),(0,$i.n)(this.http.post(this._uploadPath,o)).then(()=>this.eventService.hideSplashEvent.emit()).catch(this.handleError)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Nt.eN),i.LFG(q),i.LFG(Pe))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Di=(()=>{class n{constructor(t,e,r,o,a,l,c,d,u,h,m,f,w,D,G,B,j,H,F,ct,gt,St,re,yt,Dt,vn,yn){this.auditTrailService=t,this.auditTrailServerInfoService=e,this.clientSidePropertiesService=r,this.clientSideRouteItemEventsService=o,this.clientSideRulesService=a,this.cultureInfoService=l,this.eventService=c,this.focusService=d,this.http=u,this.lookupService=h,this.measureTimeService=m,this.mediaService=f,this.payloadService=w,this.platformLocation=D,this.renderStateService=G,this.router=B,this.runtimeParametersService=j,this.securityService=H,this.sizeTreeService=F,this.skipLinkService=ct,this.storageService=gt,this.subscriptionService=St,this.textInfoService=re,this.uploadService=yt,this.userAgentService=Dt,this.toastrService=vn,this.loggerService=yn,this.awaitingResponse=!1,this.previewTimer=1e3,this.lastModified="",this.layoutSets=null,this.embeddedFontUrls=null,this.startSurvey=P=>{this.storageService.setSessionStorageItem("queryStringParameters",P),this.runtimeParametersSubscription||(this.runtimeParametersSubscription=this.subscriptionService.runtimeParametersSubject.subscribe({next:Vt=>this.handleRuntimeParameters(Vt,P)})),this.runtimeParametersService.setRuntimeParameters()},this.expandClassification=(P,Vt,Pt)=>{if(this.payloadService.parkId){const Ct=this.payloadService.classificationPayload(P,Vt,Pt,null);return(0,$i.n)(this.http.post(this.expandClassificationItemPath,Ct)).catch(this.handleException)}{const Ct=this.getServerParkInfo(ki.Classification);if(Ct){const Bi=this.payloadService.classificationPayload(P,Vt,Pt,Ct);return(0,$i.n)(this.http.post(this.expandClassificationItemPath,Bi)).catch(this.handleException)}return null}},this.postFailed=P=>{switch(P.status){case Rt.Unauthorized:this.toastrService.error("Something went wrong, unauthorized.");break;case Rt.InternalServerError:this.toastrService.error("Something went wrong, server error.");break;case Rt.RenderStateNull:this.toastrService.error("Something went wrong, render state is null.");break;case Rt.LoginRequired:return this.storageService.setSessionStorageItem("runtimeParameters",this.runtimeParametersService.runtimeParameters),this.router.navigateByUrl("/login"),!1;case Rt.LoginFailed:return!1;case Rt.Redirect:case Rt.TempRedirect:return window.location.href=P.headers.get("location")??"",!1}return this.loggerService.error(`[DataService] postFailed error: '${JSON.stringify(P)}'`),this.loggerService.error(`[DataService] postFailed runtimeParameters: '${JSON.stringify(this.runtimeParametersService.runtimeParameters)}'`),(0,Hn._)(`Something went wrong starting interview: "${P.message}"`)},this.handleException=P=>Promise.reject(P.message),this.setPathConstants=()=>{this.previewXmlPath=`${this.baseHref}AspPreviewPage.xml`;const P=this.baseHref+O.API_BASEPATH;this.previewPath=`${P}preview`,this.startInterviewPath=`${P}start_interview`,this.executeActionsPath=`${P}executeaction`,this.expandClassificationItemPath=`${P}expand_classification`,this.lookupService.fetchLookupResultsPath=`${P}fetch_lookup_results`,this.lookupService.selectExternalRecordPath=`${P}select_external_record`,this.securityService.requestTokenPath=`${P}requesttoken`,this.measureTimeService.measureTimePath=`${P}measure_time`,this.auditTrailService.auditTrailPath=`${P}audit_trail`,this.uploadService.uploadPath=`${P}upload`,this.lookupService.fetchAppointmentListResultsPath=`${P}fetch_appointmentlist_results`,this.lookupService.fetchSurveyListResultsPath=`${P}fetch_surveylist_results`},this.handleRuntimeParameters=(P,Vt)=>{if(!P)return;this.userAgentService.updateClientSize(),this.setPathConstants(),this.initializeMeasureTimeService();const Pt={ServerPark:P.ServerPark,InstrumentId:P.InstrumentId,InstrumentName:P.InstrumentName};if(postRuntimeParameters&&!at.isEqual({},postRuntimeParameters)){const Ct=Object.assign(this.runtimeParametersService.runtimeParameters||{},postRuntimeParameters,Pt);return Ct.KeyValue?.includes('"')&&(Ct.KeyValue=Ct.KeyValue?.split('"').join("")),postRuntimeParameters=null,void(this.runtimeParametersService.runtimeParameters=Ct)}if(!at.isEqual({},Vt)){const Ct=Object.assign(this.runtimeParametersService.runtimeParameters||{},Vt,Pt);if(!at.isEqual(Ct,this.runtimeParametersService.runtimeParameters))return void(this.runtimeParametersService.runtimeParameters=Ct)}if(runtimeParametersFromWebConfig&&runtimeParametersFromWebConfig.IsPreview)this.runtimeParametersService.runtimeParameters.IsPreview=runtimeParametersFromWebConfig.IsPreview,this.initializePreview();else{const Ct=this.payloadService.startInterviewPayload(P);P.AccessToken&&P.RefreshToken&&(Ct.AccessToken=P.AccessToken,Ct.RefreshToken=P.RefreshToken),this.startInterview(Ct)}},this.initializeMeasureTimeService=()=>{runtimeParametersFromWebConfig&&runtimeParametersFromWebConfig.MeasurePageTimes&&(this.runtimeParametersService.runtimeParameters.MeasurePageTimes=runtimeParametersFromWebConfig.MeasurePageTimes,this.measureTimeService.initialize())},this.getServerParkInfo=P=>{const Vt=this.payloadService.serverParkInfo,Pt=Array.isPopulated(Vt)?Vt.filter(Ct=>Ct.Role===P):[];return Pt.isEmpty()?null:Pt[0]},this.startSuccess=P=>{P&&(this.eventService.auditTrailInitializeEvent.emit(),this.eventService.newServerPayloadEvent.emit(P))},this.handleServerPayload=P=>{if(!P.RootControl)if(P.OutputFile)this.handleOutputFile(P.OutputFile);else{if(P.RenderState.LayoutModelState.CustomPageName!==Ye.ReceiptPage)return this.loggerService.info("DataService: Payload doesn't contain a RootControl"),this.awaitingResponse=!1,this.eventService.hideSplashEvent.emit(),!1;P.RootControl={AccessibilityRole:"",ColumnIndex:0,ControlStyleName:"",CanVisibilityChange:!1,ColSpan:1,CustomProperties:[],Enabled:!0,Kind:v.Panel,ID:"empty",LabelledBy:"",PlaceholderKindName:"",RowIndex:0,RowSpan:1,ScreenReaderText:"",StylableProperties:[{Name:"Margin",Value:{Kind:0,ConstantType:14,Value:{Bottom:0,Left:0,Right:0,Top:0}}},{Name:"Height",Value:{ConstantType:15,Kind:0,Value:{Value:0,UnitType:2}}},{Name:"Width",Value:{ConstantType:15,Kind:0,Value:{Value:0,UnitType:2}}}],TemplateTargetName:"",Visibility:K.Visible}}if(this.awaitingResponse=!1,this.runtimeParametersService.runtimeParameters.MeasurePageTimes&&this.measureTimeService.requestReceived(),this.userAgentService.isIOS&&window.scrollTo(0,0),this.clientSideRulesService.unsubscribeFromChanges(),this.subscriptionService.initialize(P))return this.eventService.newAuditTrailServerInfoEvent.emit(P),this.cultureInfoService.cultureInfo=P.CultureSettings,this.clientSidePropertiesService.initialize(P.ClientSideProperties||[]),this.clientSideRulesService.initialize(P.ClientSideRules||[]),this.clientSideRouteItemEventsService.initialize(P.ClientSideRouteItemEvents||[]),this.renderStateService.renderState=P.RenderState,this.renderStateService.useCssGrids?document.getElementsByTagName("html")[0].classList.contains("css-vars")||document.getElementsByTagName("html")[0].classList.add("css-vars"):this.sizeTreeService.initialize(this.userAgentService.client.Width,this.userAgentService.client.Height,this.userAgentService.client.ScrollbarSize),this.renderStateService.useSkipLinks&&this.skipLinkService.clear(),this.renderStateService.enableGPS&&this.userAgentService.setGeolocation(this.renderStateService.highGPSAccuracy),this.payloadService.serverParkInfo=this.payloadService.serverParkInfo||P.ServerParkInfo,this.payloadService.parkId=this.payloadService.parkId||P.ParkId,P.MediaUrls&&(this.mediaService.mediaUrls=P.MediaUrls),P.LayoutSets&&(this.layoutSets=P.LayoutSets),P.LockID&&(this.payloadService.lockId=P.LockID,this.payloadService.lastLockTime=P.LastLockTime),this.textInfoService.setTextInfo(P.TextSettings),this.securityService.accessToken=P.Token,this.eventService.emitHandleActionsEvent(P.OnLoaded),this.renderStateService.useCssGrids&&this.eventService.sizeTreeReadyEvent.emit(),!0},this.initializePreview=()=>{this.startPolling()},this.handlePreviewData=P=>{try{const Pt=(new DOMParser).parseFromString(P,"application/xml");let Ct="";Pt&&Pt.childNodes&&Pt.childNodes.length>=1&&Pt.childNodes[0].childNodes&&Pt.childNodes[0].childNodes.length>=2&&null!=Pt.childNodes[0].childNodes[1].textContent&&(Ct=Pt.childNodes[0].childNodes[1].textContent.toString());const Bi=Ct;Bi!==this.lastModified&&(this.lastModified=Bi,this.startPreview())}catch(Vt){console.error(`Error: ${Vt}`)}},this.setBaseHref(),this.handleServerPayloadSubscription||(this.handleServerPayloadSubscription=this.eventService.newServerPayloadEvent.subscribe({next:P=>this.handleServerPayload(P)})),this.eventService.executeServerActionsEvent.subscribe({next:P=>this.executeActions(P)}),this.loggerService.send=!0}get baseHref(){return this._baseHref}executeActions(t){if(this.renderStateService.applyPageErrors(),this.renderStateService.pageHasRangeErrors||this.awaitingResponse)return;this.awaitingResponse=!0,this.eventService.showSplashEvent.emit();const e=this.payloadService.executeActionPayload(t.actions,t.controlId,t.eventName,t.shouldApplyPageEvent);this.auditTrailService.hasOutStandingEvents&&(e.AuditTrailPayload=this.payloadService.auditTrailPayload(this.auditTrailServerInfoService.serverInfo,this.auditTrailService.outStandingEvents,this.auditTrailService.timeStamp)),this.executeServerActions(e)}handleActionException(t){return t.status===Rt.LoginRequired?(this.toastrService.error("Login is required, restarting the survey in a few seconds."),void setTimeout(()=>{window.location.href=window.location.pathname},2e3)):(this.awaitingResponse=!1,this.eventService.hideSplashEvent.emit(),this.toastrService.error("Something went wrong executing action, please try again."),(0,Hn._)(()=>new Error(`Something went wrong executing actions: "${t.message}"`)))}setBaseHref(){const t=this.platformLocation.getBaseHrefFromDOM();this._baseHref="/"===t[t.length-1]?t:t+"/"}startInterview(t){this.runtimeParametersService.runtimeParameters.MeasurePageTimes&&this.measureTimeService.requestSent(),this.http.post(this.startInterviewPath,t).subscribe({next:e=>this.startSuccess(e),error:e=>this.postFailed(e)})}executeServerActions(t){this.runtimeParametersService.runtimeParameters.MeasurePageTimes&&this.measureTimeService.requestSent(),this.http.post(this.executeActionsPath,t).pipe((0,uo.X)(3),(0,fe.K)(e=>this.handleActionException(e))).subscribe({next:e=>this.eventService.newServerPayloadEvent.emit(e)})}handleOutputFile(t){const e=new Uint8Array(t.StreamData),r=new Blob([e],{type:"application/pdf"}),o=t.OutputFileName,a=window.document.createElement("a");a.href=window.URL.createObjectURL(r),a.download=o,window.document.body.appendChild(a),a.click(),window.document.body.removeChild(a)}startPreview(){this.http.post(this.previewPath,null).subscribe({next:t=>this.startSuccess(t),error:t=>this.postFailed(t)})}startPolling(){(0,Yi.F)(this.previewTimer).pipe((0,ho.w)(()=>this.http.get(this.previewXmlPath,{responseType:"text"}))).subscribe({next:t=>this.handlePreviewData(t)})}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(qe),i.LFG(Qi),i.LFG(xi),i.LFG(Ji),i.LFG(zn),i.LFG(Wt),i.LFG(q),i.LFG(ue),i.LFG(Nt.eN),i.LFG(Oi),i.LFG(Un),i.LFG(ei),i.LFG(Pe),i.LFG(g.lw),i.LFG(ut),i.LFG(Ve.F0),i.LFG(en),i.LFG(Ci),i.LFG(Li),i.LFG(ln),i.LFG(Ti),i.LFG(pt),i.LFG(qn),i.LFG(cn),i.LFG(Yt),i.LFG(We._W),i.LFG(tn))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),dn=(()=>{class n{constructor(){this.modals=[]}add(t){this.modals.push(t)}remove(t){this.modals=this.modals.filter(e=>e.id!==t)}open(t){const e=this.modals.find(r=>r.id===t);e&&e.open()}close(t){const e=this.modals.find(r=>r.id===t);e&&e.close()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N=(()=>{class n{constructor(t,e,r){this.viewRef=t,this.tooltipService=e,this.userAgentService=r}get isDisabled(){return this.userAgentService.isMobile||null==this.tooltip?.Text||null==this.tooltip.Font&&String.isNullOrEmpty(this.tooltip.FontName)}ngOnDestroy(){this.tooltipService.hideTooltip()}onMouseOver(t){this.isDisabled||null==this.tooltip||(t.preventDefault(),t.stopPropagation(),this.tooltipService.showTooltip(this.tooltip,this.viewRef.element.nativeElement))}onMouseLeave(){this.tooltipService.hideTooltip()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.s_b),i.Y36(Fi),i.Y36(Yt))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5Tooltip",""]],hostBindings:function(t,e){1&t&&i.NdJ("mouseover",function(o){return e.onMouseOver(o)})("mouseout",function(){return e.onMouseLeave()})},inputs:{tooltip:["bl5Tooltip","tooltip"]}}),n})(),z=(()=>{class n{constructor(t){this.elementRef=t,this.ariaLabelForSet=!1}get element(){return this.elementRef.nativeElement}get divElement(){return this.elementRef.nativeElement}get shouldHaveAriaRequired(){return"div"!==this.element.tagName.toLowerCase()}ngDoCheck(){this.setAttributes()}setAttributes(){this.ariaObject&&(this.handleAriaLabel(),this.handleAriaLabelledBy(),this.handleAriaLabelFor(),this.handleAriaFlag(this.ariaObject.AriaDisabled,"aria-disabled"),this.handleAriaFlag(this.ariaObject.AriaHidden,"aria-hidden"),this.handleAriaFlag(this.ariaObject.AriaChecked,"aria-checked"),this.handleAriaFlag(this.ariaObject.AriaSelected,"aria-selected"),this.handleAriaProperty(this.ariaObject.AriaLive,"aria-live"),this.handleAriaProperty(this.ariaObject.Role,"role"),this.handleAriaFlag(this.ariaObject.AriaInvalid,"aria-invalid"),this.handleAriaProperty(this.ariaObject.AriaOwns,"aria-owns"),this.handleAriaOptionalFlag(this.ariaObject.AriaExpanded,"aria-expanded"),this.handleAriaProperty(this.ariaObject.AriaDescribedBy,"aria-describedby"),this.handleAriaProperty(this.ariaObject.AriaAutoComplete,"aria-autocomplete"),this.handleAriaProperty(this.ariaObject.AriaActiveDescendant,"aria-activedescendant"),this.shouldHaveAriaRequired&&this.handleAriaFlag(this.ariaObject.AriaRequired,"aria-required"))}handleAriaLabelFor(){if(this.ariaObject.AriaLabelFor&&this.divElement.firstChild&&!this.ariaLabelForSet){const t=document.createElement("label");t.setAttribute("for",this.ariaObject.AriaLabelFor);const e=this.divElement.firstChild;this.divElement.insertBefore(t,e),t.appendChild(e),this.ariaLabelForSet=!0}}handleAriaLabel(){this.ariaObject.AriaLabel?this.element.setAttribute("aria-label",this.ariaObject.AriaLabel):this.element.removeAttribute("aria-label")}handleAriaLabelledBy(){this.ariaObject.AriaLabelledBy?this.element.setAttribute("aria-labelledby",this.ariaObject.AriaLabelledBy):this.element.removeAttribute("aria-labelledby")}handleAriaFlag(t,e){t?this.element.setAttribute(e,"true"):this.element.removeAttribute(e)}handleAriaOptionalFlag(t,e){null==t?this.element.removeAttribute(e):this.element.setAttribute(e,t?"true":"false")}handleAriaProperty(t,e){String.hasValue(t)?this.element.setAttribute(e,t):this.element.removeAttribute(e)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5Aria",""]],inputs:{ariaObject:["bl5Aria","ariaObject"]}}),n})();var It=U(4968);let Vi=(()=>{class n{constructor(t){this.eventService=t,this.mouseEventStates={},this.mouseOverTree=[],this.mouseUp=null,this.eventService.newServerPayloadEvent.subscribe({next:e=>{(e.RootControl||!e.IsVoidResponse)&&(this.mouseEventStates={},this.mouseOverTree=[],this.mouseUp=null)}})}hasMouseEvents(t){return Object.values(this.mouseEventStates[t].actions).filter(e=>null!=e).length>0}registerComponent(t,e){const r=t.ID,o={mouseEnterActions:t.OnMouseEnter,mouseLeaveActions:t.OnMouseLeave,mouseDownActions:t.OnMouseDown,mouseUpActions:t.OnMouseUp},a=t.Enabled&&t.Visibility===K.Visible,l=t.Children,c=t.Child,d=Array.isNullOrEmpty(l)?null!=c?[c.ID]:[]:l.map(u=>u.ID);this.mouseEventStates[r]={actions:o,isActive:a,parentId:e,childIds:d,isMouseOver:!1,isMouseUpPending:!1}}updateComponent(t){const e=t.ID,o=t.Enabled&&t.Visibility===K.Visible;this.mouseEventStates[e]&&(this.mouseEventStates[e].actions={mouseEnterActions:t.OnMouseEnter,mouseLeaveActions:t.OnMouseLeave,mouseDownActions:t.OnMouseDown,mouseUpActions:t.OnMouseUp},this.mouseEventStates[e].isActive=o)}removeComponent(t){delete this.mouseEventStates[t]}handleMouseEnterEvent(t){if(null==this.mouseUp){const e=this.mouseEventStates[t];if(e){if((this.mouseOverTree.isEmpty()||-1===this.mouseOverTree.indexOf(t))&&this.populateMouseOverTree(t),!e.isMouseOver){const r=e.actions.mouseEnterActions;e.isActive&&this.hasMouseEventActions(r)&&this.eventService.emitHandleActionsEvent(r,t),e.isMouseOver=!0}null===e.parentId?this.resolvePendingLeaveEvents():this.handleMouseEnterEvent(e.parentId)}}}handleMouseLeaveEvent(t){const e=this.mouseEventStates[t];if(e?.isMouseOver){const r=e.actions.mouseLeaveActions;if(e.isActive&&this.hasMouseEventActions(r)&&this.eventService.emitHandleActionsEvent(r,t),e.isMouseOver=!1,this.mouseOverTree.length>0){const o=this.mouseOverTree.indexOf(t);-1!==o&&(this.mouseOverTree.splice(o),this.resolvePendingLeaveEvents())}}}handleMouseDownEvent(t){this.handleMouseUpEvent();const e=this.mouseEventStates[t];if(e?.isActive){const r=e.actions.mouseDownActions;this.hasMouseEventActions(r)&&(this.eventService.emitHandleActionsEvent(r,t),this.mouseUp=t)}}handleMouseUpEvent(){if(null!=this.mouseUp){const t=this.mouseUp,e=this.mouseEventStates[t];if(e){e.isMouseUpPending=!1;const r=e.actions.mouseUpActions;e.isActive&&this.hasMouseEventActions(r)&&this.eventService.emitHandleActionsEvent(r,t)}this.mouseUp=null}}resolvePendingLeaveEvents(){Object.keys(this.mouseEventStates).filter(t=>-1===this.mouseOverTree.indexOf(t)&&this.mouseEventStates[t].isMouseOver).forEach(t=>this.handleMouseLeaveEvent(t))}populateMouseOverTree(t){this.mouseOverTree=[t],this.addMouseOverTreeParent(t)}addMouseOverTreeParent(t){const e=this.mouseEventStates[t].parentId;null!=e&&(this.mouseOverTree.unshift(e),this.addMouseOverTreeParent(e))}hasMouseEventActions(t){return!Array.isNullOrEmpty(t?.Actions)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG((0,i.Gpc)(()=>q)))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),R=(()=>{class n{constructor(t,e){this.mouseEventService=t,this.elementRef=e,this.subscriptions=[]}get element(){return this.elementRef.nativeElement}ngOnInit(){this.mouseEventService.hasMouseEvents(this.dataObject.ID)&&this.element.classList.add("mouse-events");const t=(0,It.R)(this.element,"mouseenter");this.subscriptions.push(t.subscribe({next:()=>this.updateComponent()&&this.onMouseEnter()}));const e=(0,It.R)(this.element,"mouseleave");this.subscriptions.push(e.subscribe({next:()=>this.updateComponent()&&this.onMouseLeave()}));const r=(0,It.R)(this.element,"mousedown");this.subscriptions.push(r.subscribe({next:a=>this.updateComponent()&&this.onMouseDown(a)}));const o=(0,It.R)(this.element,"mouseup");this.subscriptions.push(o.subscribe({next:a=>this.updateComponent()&&this.onMouseUp(a)}))}ngOnDestroy(){for(const t of this.subscriptions)t&&!t.closed&&t.unsubscribe();this.subscriptions=[]}onMouseEnter(){this.mouseEventService.handleMouseEnterEvent(this.dataObject.ID)}onMouseLeave(){this.mouseEventService.handleMouseLeaveEvent(this.dataObject.ID)}onMouseDown(t){Object.isWithOwnProperty(this.dataObject,"IsFocusable")&&!this.dataObject.IsFocusable&&t.preventDefault(),this.mouseEventService.handleMouseDownEvent(this.dataObject.ID),t.stopPropagation()}onMouseUp(t){this.mouseEventService.handleMouseUpEvent(),t.stopPropagation()}updateComponent(){return this.mouseEventService.updateComponent(this.dataObject),!0}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(Vi),i.Y36(i.SBq))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5MouseEvent",""]],inputs:{dataObject:["bl5MouseEvent","dataObject"]}}),n})();const vo=["audio"],yo=["audioSource"];let Co=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.mediaUrls=[],this.index=-1}get audioElement(){return this.audioRef.nativeElement}get sourceElement(){return this.audioSourceRef.nativeElement}get audioId(){return`${this.controlId}_audio`}get controls(){return this.isEnabled&&this.dataObject.ShowControls?"controls":void 0}get autoplay(){return this.isEnabled&&this.dataObject.AutoPlay?"autoplay":void 0}ngOnInit(){super.ngOnInit(),this.audioElement.addEventListener("ended",()=>this.nextMediaUrl())}handleControlUpdate(t){super.handleControlUpdate(t),this.setMediaUrls(),this.cssStyle.display="inline-block"}setMediaUrls(){if(this.isEnabled){let t=[];Array.isPopulated(this.dataObject.SourceUrls)?t=this.dataObject.SourceUrls.filter(e=>!String.isNullOrEmpty(e)):Array.isPopulated(this.dataObject.Sources)?t=this.dataObject.Sources.filter(e=>!String.isNullOrEmpty(e)).map(e=>this.sp.mediaService.getMediaUrlForAudio(e)??""):String.hasValue(this.dataObject.SourceUrl)?t[0]=this.dataObject.SourceUrl:String.hasValue(this.dataObject.Source)&&(t[0]=this.sp.mediaService.getMediaUrlForAudio(this.dataObject.Source)??""),this.mediaUrls=t,this.index=0,this.mediaUrls.length>this.index&&(this.mediaUrl=t[0],this.audioElement.load(),this.autoplay&&this.audioElement.play())}else this.audioElement.pause(),this.sourceElement.src="",this.mediaUrls=[]}nextMediaUrl(){this.mediaUrls.length>this.index+1?(this.mediaUrl=this.mediaUrls[++this.index],this.sourceElement.src=this.mediaUrl,this.audioElement.load(),this.audioElement.play()):(this.index=0,this.mediaUrl=this.mediaUrls[this.index],this.sourceElement.src=this.mediaUrl)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-audio"]],viewQuery:function(t,e){if(1&t&&(i.Gf(vo,7),i.Gf(yo,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.audioRef=r.first),i.iGM(r=i.CRH())&&(e.audioSourceRef=r.first)}},features:[i.qOj],decls:8,vars:11,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement",""],["preload","auto"],["audio",""],["audioSource",""]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(3,"audio",2,3),i._UZ(5,"source",null,4),i._uU(7," Your browser does not support the audio tag. "),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.uIk("id",e.controlId),i.xp6(3),i.uIk("id",e.audioId)("autoplay",e.autoplay)("controls",e.controls)("disabled",e.disabled),i.xp6(2),i.uIk("src",e.mediaUrl,i.LSH))},dependencies:[g.mk,g.PC,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})(),tt=(()=>{class n{constructor(t,e){this.eventService=t,this.elementRef=e,this.suppressFocusOnce=!1}get element(){return this.elementRef.nativeElement}ngOnInit(){const t=(0,It.R)(this.element,"focus");this.focusSubscription=t.subscribe({next:r=>this.handleFocusSubscription(r)});const e=(0,It.R)(this.element,"blur");this.blurSubscription=e.subscribe({next:r=>this.handleBlurSubscription(r)})}ngOnDestroy(){this.focusSubscription&&this.focusSubscription.unsubscribe(),this.blurSubscription&&this.blurSubscription.unsubscribe()}handleFocusSubscription(t){const e=this.findSkiplinkElement(t.target.id);e&&e.classList.add("focus"),this.suppressFocusOnce?this.suppressFocusOnce=!1:this.hasFocusEventActions(this.dataObject.OnGotFocus)&&this.eventService.emitHandleActionsEvent(this.dataObject.OnGotFocus,this.dataObject.ID)}handleBlurSubscription(t){const e=this.findSkiplinkElement(t.target.id);if(e&&e.classList.remove("focus"),this.elementContainsTarget(this.element,t.relatedTarget)&&this.element.classList.contains("DropDownListComponent"))return this.suppressFocusOnce=!0,void this.element.focus();this.hasFocusEventActions(this.dataObject.OnLostFocus)&&this.eventService.emitHandleActionsEvent(this.dataObject.OnLostFocus,this.dataObject.ID)}elementContainsTarget(t,e){return!(!t.parentElement||!e)&&t.parentElement.contains(e)}hasFocusEventActions(t){return!Array.isNullOrEmpty(t?.Actions)}findSkiplinkElement(t){const e=document.getElementById(t);return e&&e.closest(".ParentType-SkiplinksContainerComponent")||null}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(q),i.Y36(i.SBq))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5FocusEvent",""]],inputs:{dataObject:["bl5FocusEvent","dataObject"]}}),n})(),ot=(()=>{class n{constructor(t,e){this.elementRef=t,this.styleGeneratorService=e}get element(){return this.elementRef.nativeElement}get elementStyle(){return this.element.style}ngOnInit(){const t=(0,It.R)(this.element,"focus");this.focusSubscription=t.subscribe({next:()=>this.handleFocusSubscription()});const e=(0,It.R)(this.element,"blur");this.blurSubscription=e.subscribe({next:()=>this.handleBlurSubscription()})}ngAfterViewInit(){this._originalStyle=this.elementStyle.outlineStyle,this._originalWidth=this.elementStyle.outlineWidth,this._originalColor=this.elementStyle.outlineColor,this._originalOffset=this.elementStyle.outlineOffset,this.outlineStyle=this.styleGeneratorService.getOutlineStyle(this.dataObject),this.outlineWidth=this.styleGeneratorService.getOutlineWidth(this.dataObject),this.outlineColor=this.styleGeneratorService.getOutlineColor(this.dataObject),this.outlineOffset=this.styleGeneratorService.getOutlineOffset(this.dataObject)}ngOnDestroy(){this.focusSubscription&&this.focusSubscription.unsubscribe(),this.blurSubscription&&this.blurSubscription.unsubscribe()}handleFocusSubscription(){this.isRelevant()&&(this.elementStyle.outlineStyle=this.outlineStyle,this.elementStyle.outlineWidth=this.outlineWidth,this.elementStyle.outlineColor=this.outlineColor,this.elementStyle.outlineOffset=this.outlineOffset)}handleBlurSubscription(){this.elementStyle.outlineColor=this._originalColor,this.elementStyle.outlineOffset=this._originalOffset,this.elementStyle.outlineStyle=this._originalStyle,this.elementStyle.outlineWidth=this._originalWidth}isRelevant(){return!0}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(ye))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5Outline",""]],inputs:{dataObject:["bl5Outline","dataObject"]}}),n})(),ft=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return t||(t=""),this.sanitizer.bypassSecurityTrustHtml(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(jt.H7,16))},n.\u0275pipe=i.Yjl({name:"safeHtml",type:n,pure:!0}),n})();function So(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,11,t.text),i.oJD),i.uIk("id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex)}}function Ao(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,9,t.text),i.oJD),i.uIk("id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex)}}let wo=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}handleControlUpdate(t){super.handleControlUpdate(t),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){t.stopPropagation(),this.isEnabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.isEnabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}executeButton(){this.dataObject.OnClick&&this.executeActions(this.dataObject.OnClick)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,So,4,13,"ng-template",null,0,i.W1O),i.YNc(2,Ao,4,11,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.css-vars[_ngcontent-%COMP%]{justify-content:var(--justify-content);align-content:var(--align-content)}"],changeDetection:0}),n})(),bt=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.handleOwnSubscriptionUpdates=!0}get fieldInfo(){return this.referenceSubject&&!this.referenceSubject.closed?this.referenceSubject.getValue():void 0}set fieldInfo(t){this.referenceSubject&&!this.referenceSubject.closed&&null!=t&&(t.EventSourceId=this.controlId,this.referenceSubject.next(t))}get fieldName(){return this.dataObject.Reference.FieldName}get fieldPropertyName(){return this.dataObject.Reference.FieldPropertyName}ngOnInit(){super.ngOnInit(),this.subscribeToReference()}ngOnDestroy(){this.fieldSubscription&&this.fieldSubscription.unsubscribe(),super.ngOnDestroy()}getNeighbours(){return this.fieldInfo?.InputControls??[]}executeActions(t,e){t&&!Array.isNullOrEmpty(t.Actions)&&(super.executeActions(t),e&&(this.fieldInfo=e))}getCssClasses(){const t=super.getCssClasses();return t.push("default-line-height"),t}getSystemText(t,e=""){return this.isInputControl(this.dataObject)&&this.dataObject.SystemTexts&&Object.prototype.hasOwnProperty.call(this.dataObject.SystemTexts,t)?this.dataObject.SystemTexts[t]:e}determineOffsetWidth(t,e,r,o=0,a=0){let l=0;return this.hasFontProperties(this.dataObject)&&(l=this.sp.fontService.getOffsetWidthSpanElement(this.dataObject)),l>0&&null!=r&&r>0&&(o>0&&o>=r||a>=0&&a>=r)&&(l*=1.1),l}determineOffsetWidth2(t,e,r){let o=0;return this.hasFontProperties(this.dataObject)&&(o=this.sp.fontService.getOffsetWidthSpanElement(this.dataObject),10!==r&&(o*=.1*r)),o}isInputControl(t){return Object.prototype.hasOwnProperty.call(t,_.SystemTexts)&&Object.prototype.hasOwnProperty.call(t,_.OnValueChanged)}hasFieldReference(t){return null!=t.ObjectKind&&null!=t.FieldName}handleFieldUpdate(t){this.applyStylesAndDimensions(),this.ariaObject.setField(t)}applyAutoEnter(t,e,r,o){const a=this.checkAutoEnter(t,e,r,o);return a&&(this.fieldInfo=r,this.doAutoEnter()),a}checkAutoEnter(t,e,r,o){return t&&e.autoEnter(r,o)}activateField(t){this.sp.renderStateService.activeFieldName!==this.fieldName&&this.sp.renderStateService.setActiveFieldName(this.fieldName,this.fieldPropertyName,"component",void 0,t)}doAutoEnter(){setTimeout(()=>{this.sp.eventService.emitHandleActionEvent(new Mn,this.controlId)},0)}subscribeToReference(){if(!this.referenceSubject&&!this.fieldSubscription){const t=this.dataObject.Reference;if(this.hasFieldReference(t)){const e=this.sp.subscriptionService.getFieldSubject(t);e&&(this.referenceSubject=e,this.fieldSubscription=this.referenceSubject.subscribe({next:r=>{(this.handleOwnSubscriptionUpdates||this.controlId!==r.EventSourceId)&&this.handleFieldUpdate(r),this.cd.markForCheck()}}))}}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(E),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ng-component"]],features:[i.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2}),n})();class $n{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Left);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}rightKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Right);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!==t?x.createCommands([C.FocusControl],this.injector,t):[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(s){return s.preventDefault(),x.createCommands([C.FirstInputControl],this.injector)}endKeyPressed(s){return s.preventDefault(),x.createCommands([C.LastInputControl],this.injector)}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"CategoryButton insert"}}class Xn{constructor(s){this.injector=s}f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"Empty"}}let vt=(()=>{class n{constructor(t,e,r,o,a,l){this.elementRef=t,this.eventService=e,this.focusService=r,this.navigationService=o,this.renderStateService=a,this.userAgentService=l,this.attributeName="data-focus-from",this.attributeValue="self"}get element(){return this.elementRef.nativeElement}get allowFocus(){return this.focusService.isFirstInputControlInActiveField(this.dataObject.ID)&&!this.focusService.hasSetFocusEventInClientSideRouteItem()&&this.renderStateService.shouldAutoFocus}ngOnInit(){const t=(0,It.R)(this.elementRef.nativeElement,"focus");this.focusSubscription=t.subscribe({next:e=>this.handleFocusSubscription(e)})}ngAfterViewInit(){this.allowFocus&&setTimeout(()=>{this.element.setAttribute(this.attributeName,this.attributeValue),this.element.focus()},0)}ngOnDestroy(){this.focusSubscription&&this.focusSubscription.unsubscribe(),this.blurSubscription&&this.blurSubscription.unsubscribe()}handleFocusSubscription(t){if(Object.prototype.hasOwnProperty.call(this.dataObject,_.Reference)){const r=this.dataObject.Reference,o=r.FieldName,a=r.FieldPropertyName,c=this.renderStateService.activeFieldPropertyName;(o!==this.renderStateService.activeFieldName||a!=c)&&setTimeout(()=>{this.renderStateService.setActiveFieldName(o,a,"directive",t.target.id)},0),this.renderStateService.autoSelectInputContent&&t.target&&t.target?.select&&t.target.select()}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(q),i.Y36(ue),i.Y36(nt),i.Y36(ut),i.Y36(Yt))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5Focus",""]],inputs:{dataObject:["bl5Focus","dataObject"]}}),n})();function xo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,13,t.text),i.oJD),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex)}}function _o(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("innerHTML",i.lcZ(3,8,t.text),i.oJD),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex)}}let ko=(()=>{class n extends bt{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.setConverter=o,this.enumerationConverter=a,this.containsRichText=!0}handleControlUpdate(t){super.handleControlUpdate(t),this.text=this.sp.richTextConverter.convertToHTML(t.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled?(t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault()):t.preventDefault()}getKeyboardInsertStrategy(){return new $n(this.sp.injector)}getKeyboardEmptyStrategy(){return new Xn(this.sp.injector)}handleSpeedKeyPressed(){this.dataObject.SpeedKey&&this.isEnabled&&this.isVisible&&this.executeButton()}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isSelected=t.DataValue.DataType===I.Enumeration?this.enumerationConverter.isSelected(t,this.dataObject.Reference.Code):this.setConverter.isSelected(t,this.dataObject.Reference.Code)}executeButton(){this.isIOS&&this.element&&document.activeElement!=this.element&&this.element.focus();const t=this.fieldInfo;if(t){const e=t.DataValue.DataType===I.Set;e?this.isSelected?this.setConverter.removeCategory(t,this.dataObject.Reference.Code):this.setConverter.addCategory(t,this.dataObject.Reference.Code):this.isSelected||this.enumerationConverter.setSelected(t,this.dataObject.Reference.Code),this.fieldInfo=t,this.sp.navigationService.setInsertMode(),this.sp.auditTrailService.logCategoryEvent(this.isSelected,this.dataObject.Reference.Code),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,e?this.setConverter:this.enumerationConverter,t)}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(de),i.Y36(ce))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-category-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngStyle","bl5Aria","bl5Focus","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,xo,4,15,"ng-template",null,0,i.W1O),i.YNc(2,_o,4,10,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,vt,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.css-vars[_ngcontent-%COMP%]{justify-content:var(--justify-content);align-content:var(--align-content)}"],changeDetection:0}),n})();class tr{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Left);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}rightKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Right);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!==t?x.createCommands([C.FocusControl],this.injector,t):[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(s){return s.preventDefault(),x.createCommands([C.FirstInputControl],this.injector)}endKeyPressed(s){return s.preventDefault(),x.createCommands([C.LastInputControl],this.injector)}tabKeyPressed(s){s.preventDefault();const t=s.target;if(t){const e=t.getAttribute("tabindex");if(String.hasValue(e)){const r=parseInt(e);if(!isNaN(r)){const o=this.navigationService.nextVisibleControlIdByTabIndex(r);if(String.hasValue(o))return x.createCommands([C.FocusControl],this.injector,o)}}}return[]}shiftTabPressed(s){s.preventDefault();const t=s.target;if(t){const e=t.getAttribute("tabindex");if(String.hasValue(e)){const r=parseInt(e,10);if(!isNaN(r)){const o=this.navigationService.previousVisibleControlIdByTabIndex(r);if(String.hasValue(o))return x.createCommands([C.FocusControl],this.injector,o)}}}return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Checkbox insert"}}class er{f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"RadioButton insert"}}let Oo=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isChecked=this.converter.isSelected(t,this.dataObject.Reference.Code)}getStyleObject(){const t=super.getStyleObject(),e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Background);return this.sp.colorService.hasColor(e)||(delete t.background,delete t.backgroundColor),t}handleClick(t){t.isTrusted||t?.detail?.isBlaise?this.dataObject.Enabled&&this.executeCheckBox(t):t.preventDefault()}getKeyboardInsertStrategy(){return new tr(this.sp.injector)}getKeyboardEmptyStrategy(){return new er}handleSpeedKeyPressed(){this.isEnabled&&this.isVisible&&this.executeCheckBox()}executeCheckBox(t){this.isIOS&&this.element&&document.activeElement!=this.element&&this.element.focus();const e=this.fieldInfo;if(e){const r=this.converter.toggleCategory(e,this.dataObject.Reference.Code);t&&!r&&t.preventDefault(),this.fieldInfo=e,this.sp.navigationService.setInsertMode(),this.sp.auditTrailService.logCategoryEvent(this.isChecked,this.dataObject.Reference.Code),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e)}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(de))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-category-checkbox"]],features:[i.qOj],decls:3,vars:13,consts:[["type","checkbox",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","ngModel","ngModelChange","click"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("ngModelChange",function(o){return e.isChecked=o})("click",function(o){return e.handleClick(o)}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("ngModel",e.isChecked),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,V.Wl,V.JJ,V.On,N,z,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();class un{constructor(s,t){this.injector=s,this.component=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return[x.createCommand(C.ToggleNavigation,this.injector)]}enterKeyPressed(s){return s.preventDefault(),[x.createCommand(C.NextField,this.injector)]}leftKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Left);return String.hasValue(t)?[x.createCommand(C.FocusControl,this.injector,t)]:[]}rightKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Right);return String.hasValue(t)?[x.createCommand(C.FocusControl,this.injector,t)]:[]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return String.hasValue(t)?[x.createCommand(C.FocusControl,this.injector,t)]:[]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return String.hasValue(t)?[x.createCommand(C.FocusControl,this.injector,t)]:[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(s){return s.preventDefault(),[x.createCommand(C.FirstInputControl,this.injector)]}endKeyPressed(s){return s.preventDefault(),[x.createCommand(C.LastInputControl,this.injector)]}tabKeyPressed(s){s.preventDefault();const t=this.navigationService.nextVisibleControlIdByTabIndex(this.component.dataObject.TabIndex);return String.hasValue(t)?[x.createCommand(C.FocusControl,this.injector,t)]:[]}shiftTabPressed(s){s.preventDefault();const t=this.navigationService.previousVisibleControlIdByTabIndex(this.component.dataObject.TabIndex);return String.hasValue(t)?[x.createCommand(C.FocusControl,this.injector,t)]:[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"RadioButton insert"}}class ir{f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"RadioButton insert"}}let To=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.isChecked=!1}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isChecked=this.converter.isSelected(t,this.dataObject.Reference.Code)}getStyleObject(){const t=super.getStyleObject(),e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Background);return this.sp.colorService.hasColor(e)||(delete t.background,delete t.backgroundColor),t}handleClick(){this.dataObject.Enabled&&this.executeRadioButton()}getKeyboardInsertStrategy(){return new un(this.sp.injector,this)}getKeyboardEmptyStrategy(){return new ir}handleSpeedKeyPressed(){this.isEnabled&&this.isVisible&&this.executeRadioButton()}executeRadioButton(){this.isIOS&&this.element&&document.activeElement!=this.element&&this.element.focus();const t=this.fieldInfo;t&&(this.converter.setSelected(t,this.dataObject.Reference.Code),this.sp.navigationService.setInsertMode(),this.fieldInfo=t,this.sp.auditTrailService.logCategoryEvent(this.isChecked,this.dataObject.Reference.Code),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,t))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(ce))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-category-radio-button"]],features:[i.qOj],decls:3,vars:14,consts:[["type","radio",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","checked","click"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("click",function(){return e.handleClick()}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("checked",e.isChecked),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("name",e.fieldName)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,N,z,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}",'[data-horizontal-alignment="0"][_nghost-%COMP%]{text-align:left}','[data-horizontal-alignment="1"][_nghost-%COMP%]{text-align:center}','[data-horizontal-alignment="2"][_nghost-%COMP%]{text-align:right}'],changeDetection:0}),n})();var Ne=U(8372);class Po{constructor(s,t,e){this.dataService=s,this.eventService=t,this.cd=e,this._history=[],this._selectedCode="",this._focusedCode="",this._backIsFocused=!1,this._startIsFocused=!1,this._items=[],this._cachedItems=[],this._libraryName="",this._typeName=""}get isInitialized(){return!(this._libraryName.isEmpty()||this._typeName.isEmpty())}get hasHistory(){return!this._history.isEmpty()}get history(){return this._history}get selectedCode(){return this._selectedCode}set selectedCode(s){this._selectedCode=s,this.addCodeToHistory(s)}get focusedCode(){return this._focusedCode}set focusedCode(s){this._focusedCode=s,this._focusedCode.isEmpty()||(this.startIsFocused=!1,this.backIsFocused=!1)}get backIsFocused(){return this._backIsFocused}set backIsFocused(s){this._backIsFocused=s,s&&(this.startIsFocused=!1,this.focusedCode="")}get startIsFocused(){return this._startIsFocused}set startIsFocused(s){this._startIsFocused=s,s&&(this.backIsFocused=!1,this.focusedCode="")}get Items(){return this._items}get hasItems(){return!Array.isNullOrEmpty(this._items)}set libraryName(s){this._libraryName=s}set typeName(s){this._typeName=s}addCodeToHistory(s){s.isEmpty()||(this._history.push(s),this.update(s))}update(s){this.focusedCode="";const t=this._cachedItems.find(e=>e.Code===s);t?(this._items=t.ClassificationItems,this.eventService.controlVisibilityChanged.emit()):this.dataService.expandClassification(s,this._libraryName,this._typeName)?.then(e=>{this._cachedItems.push(e),this._items=e.ClassificationItems,this.eventService.controlVisibilityChanged.emit()})}reset(){this._history=[],this._items=[],this._selectedCode="",this.focusedCode="",this.eventService.controlVisibilityChanged.emit()}back(){this.hasHistory&&(this._history.pop(),this.update(this.hasHistory?this._history[this._history.length-1]:""))}setHistoryFrom(s){const t=this._history.indexOf(s);this._history.splice(t+1),this.update(s)}search(s){this._selectedCode=s;const t=s.split(".");this._history.push(t.reduce((e,r)=>(this._history.push(e),[e,r].join(".")),t.shift())),this.update(s),this._items.isEmpty()&&this.back()}selectFocusedValue(){const s=this._items.find(t=>t.Code===this.focusedCode);s&&(this.selectedCode=s.Code)}nextValue(){if(this.focusedCode){let s=this._items.findIndex(t=>t.Code==this.focusedCode);s=s+1>=this._items.length?s:s+1,this.focusedCode=this._items[s].Code}else this.startIsFocused&&this.hasHistory?this.backIsFocused=!0:this.startIsFocused&&!this.hasHistory||this.hasHistory&&this.backIsFocused?this.focusedCode=this._items[0].Code:this.startIsFocused=!0;this.cd.markForCheck()}previousValue(){if(this.focusedCode.isEmpty()||this.backIsFocused||this.startIsFocused)this.focusedCode=this.hasItems?this._items[this._items.length-1].Code:"";else{let s=this._items.findIndex(t=>t.Code==this.focusedCode);s--,s<0?(this.focusedCode="",this.hasHistory?this.backIsFocused=!0:this.startIsFocused=!0):this.focusedCode=this._items[s].Code}this.cd.markForCheck()}}class nr{constructor(s,t=!1,e=!1,r=!1){this.injector=s,this.isOpenField=t,this.isMultiLine=e,this.nextFieldOnEnter=r,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return!this.isOpenField||this.nextFieldOnEnter?(s.preventDefault(),x.createCommands([C.NextField],this.injector)):[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(s){if(!this.isOpenField&&!this.isMultiLine){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}return[]}downKeyPressed(s){if(!this.isOpenField&&!this.isMultiLine){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"String textbox insert"}}class Mo{constructor(s,t){this.injector=s,this.component=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return[]}enterKeyPressed(s){return s.preventDefault(),this.component.handleOk(),[]}leftKeyPressed(s){return s.preventDefault(),this.component.classificationObject.back(),[]}rightKeyPressed(s){return s.preventDefault(),this.component.classificationObject.selectFocusedValue(),[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),this.component.classificationObject.reset(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(s){return s.preventDefault(),this.component.classificationObject.focusedCode?this.component.classificationObject.selectFocusedValue():s.target.click(),[]}getName(){return"Empty"}}function Io(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",7,8),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleSearch())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("innerText",t.txtSearch),i.uIk("data-component-id",t.controlId)("tabindex",t.tabIndex)}}function Eo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",7,9),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleOk())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("innerText",t.txtOK),i.uIk("data-component-id",t.controlId)("tabindex",t.tabIndex)}}function Fo(n,s){if(1&n&&(i.TgZ(0,"tr"),i._UZ(1,"td",10),i.qZA()),2&n){const t=i.oxw();i.xp6(1),i.Q6J("innerText",t.selectedValueText)}}function Lo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",15),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.setHistoryFrom(o))}),i._UZ(1,"a",16),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.uIk("data-component-id",e.controlId)("tabindex",e.tabIndex),i.xp6(1),i.Q6J("innerHTML",t,i.oJD)}}function Do(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"ul",11)(1,"li",12),i.NdJ("focus",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleFocus("start"))})("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleSearch())}),i._UZ(2,"a",13),i.qZA(),i.YNc(3,Lo,2,3,"ng-template",14),i.qZA()}if(2&n){const t=i.oxw();i.ekj("focused",t.classificationObject.startIsFocused),i.xp6(1),i.uIk("data-component-id",t.controlId)("tabindex",t.tabIndex),i.xp6(1),i.Q6J("innerText",t.txtStart),i.xp6(1),i.Q6J("ngForOf",t.classificationObject.history)}}function Vo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",19),i.NdJ("focus",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.handleFocus("back"))})("click",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.goBack())}),i._UZ(1,"a",13),i.qZA()}if(2&n){const t=i.oxw(2);i.ekj("focused",t.classificationObject.backIsFocused),i.uIk("data-component-id",t.controlId)("tabindex",t.tabIndex),i.xp6(1),i.Q6J("innerText",t.txtBack)}}function jo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",12),i.NdJ("focus",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.handleFocus(o.Code))})("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.handleClick(o))}),i._UZ(1,"a",16),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.ekj("focused",t.Code===e.classificationObject.focusedCode)("selected",t.Code===e.classificationObject.selectedCode),i.uIk("data-component-id",e.controlId)("data-code",t.Code)("tabindex",e.tabIndex)("aria-label",t.Header)("aria-haspopup",t.HasChildren),i.xp6(1),i.ekj("hasChildren",t.HasChildren),i.Q6J("innerHTML",t.Header,i.oJD)}}function No(n,s){if(1&n&&(i.TgZ(0,"tr")(1,"td",17)(2,"ul",18),i.YNc(3,Vo,2,5,"ng-template",6),i.YNc(4,jo,2,12,"ng-template",14),i.qZA()()()),2&n){const t=i.oxw();i.xp6(3),i.Q6J("ngIf",t.classificationObject.hasHistory),i.xp6(1),i.Q6J("ngForOf",t.classificationObject.Items)}}let Ro=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.textChange=new Qt.x,this.inputClasses=[],this.classificationObject=new Po(t.dataService,t.eventService,this.cd)}get txtSearch(){return this.getSystemText(dt.txtSearch,"search")}get txtOK(){return this.getSystemText(dt.txtOk,"ok")}get txtStart(){return this.getSystemText(dt.txtStart,"start")}get txtBack(){return this.getSystemText(dt.txtBack,"back")}get txtSelectedValue(){return this.getSystemText(dt.txtSelectedValue,"Selected value")}get selectedValueText(){return`${this.txtSelectedValue}: ${this.classificationObject.selectedCode}`}ngOnInit(){super.ngOnInit(),this.textChangeSubscription=this.textChange.pipe((0,Ne.b)(O.KEYSTROKE_DEBOUNCE)).subscribe({next:t=>{this.textValue=t,this.handleChange(),this.cd.detectChanges()}}),this.controlVisibilityChangeSubscription=this.sp.eventService.controlVisibilityChanged.subscribe({next:()=>{if(this.useCssVars&&(this.cd.markForCheck(),this.cd.detectChanges()),this.classificationObject.backIsFocused||this.classificationObject.startIsFocused||this.classificationObject.focusedCode||!this.classificationObject.hasItems)if(this.classificationObject.selectedCode.isEmpty()){const t=document.querySelectorAll(".classification > li[data-code]");t.length>0&&t.item(0).focus()}else{const t=document.querySelectorAll(`.classification > li[data-code='${this.classificationObject.selectedCode}']`);t.length>0&&t.item(0).focus()}else document.querySelectorAll(".classification > li[data-code]").item(0).focus()}})}ngOnDestroy(){this.textChangeSubscription&&this.textChangeSubscription.unsubscribe(),this.controlVisibilityChangeSubscription&&this.controlVisibilityChangeSubscription.unsubscribe(),super.ngOnDestroy()}onChange(t){const e=this.fieldInfo;e&&this.converter.isAllowed(t,e.ValueType)===S.Ok&&this.textChange.next(t)}handleChange(){this.pushChange(this.textValue)}hasSelectedValue(){return this.classificationObject.selectedCode}handleSearch(){this.classificationObject.reset();const t=this.fieldInfo;t&&(String.hasValue(t.DataValue.ValueAsString)?this.classificationObject.search(t.DataValue.ValueAsString):(this.classificationObject.search(""),this.sp.auditTrailService.logClassifyEvent("","Expand")),this.sp.eventService.controlVisibilityChanged.emit(this.dataObject))}handleOk(){const t=this.fieldInfo;t&&(this.converter.convertFromString(this.classificationObject.selectedCode,t),this.converter.isValid(this.classificationObject.selectedCode,t.ValueType)===S.Ok&&this.converter.removeRangeCheckErrors(t),this.sp.auditTrailService.logClassifyEvent(this.classificationObject.selectedCode,"Select"),this.fieldInfo=t,this.classificationObject.reset(),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,t),this.sp.eventService.controlVisibilityChanged.emit(this.dataObject))}goBack(){this.classificationObject.back(),this.sp.eventService.controlVisibilityChanged.emit(this.dataObject)}handleClick(t){this.classificationObject.selectedCode=t.Code,t.HasChildren&&this.sp.auditTrailService.logClassifyEvent(t.Code,"Expand"),this.sp.eventService.controlVisibilityChanged.emit(this.dataObject)}handleFocus(t){switch(t){case"start":this.classificationObject.startIsFocused=!0;break;case"back":this.classificationObject.backIsFocused=!0;break;default:this.classificationObject.focusedCode=t}}setHistoryFrom(t){this.classificationObject.setHistoryFrom(t),this.sp.eventService.controlVisibilityChanged.emit(this.dataObject)}getKeyboardInsertStrategy(){return new nr(this.sp.injector)}getKeyboardEmptyStrategy(){return new Mo(this.sp.injector,this)}handleFieldUpdate(t){if(super.handleFieldUpdate(t),this.textValue=this.converter.convertToString(t),!this.classificationObject.isInitialized){const e=t.ValueType;this.classificationObject.libraryName=e.LibraryFileName??"",this.classificationObject.typeName=e.TypeName??""}}pushChange(t){const e=this.fieldInfo;e&&(this.converter.convertFromString(t,e),this.converter.isValid(t,e.ValueType)===S.Ok&&this.converter.removeRangeCheckErrors(e),this.fieldInfo=e,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(fi))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-classification"]],features:[i.qOj],decls:15,vars:19,consts:[[3,"ngClass","ngStyle"],["autoWidthElement","","autoHeightElement",""],["type","text","autocapitalize","off","autocomplete","off",3,"bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","ngClass","ngModel","ngModelChange","input"],["input",""],["noValueSelected",""],[3,"ngIf","ngIfElse"],[3,"ngIf"],[3,"innerText","click"],["searchBtn",""],["okBtn",""],[1,"classification-selected",3,"innerText"],[1,"classification-history"],[3,"focus","click"],[3,"innerText"],["ngFor","",3,"ngForOf"],[3,"click"],[3,"innerHTML"],[1,"classification-container"],[1,"classification"],["role","treeitem",1,"classification-back",3,"focus","click"]],template:function(t,e){if(1&t&&(i.TgZ(0,"table",0,1)(3,"tr")(4,"td")(5,"input",2,3),i.NdJ("ngModelChange",function(o){return e.onChange(o)})("input",function(){return e.handleChange()}),i.qZA(),i.YNc(7,Io,2,3,"ng-template",null,4,i.W1O),i.YNc(9,Eo,2,3,"ng-template",5),i.qZA()(),i.YNc(10,Fo,2,1,"ng-template",6),i.TgZ(11,"tr")(12,"td"),i.YNc(13,Do,4,6,"ng-template",6),i.qZA()(),i.YNc(14,No,5,2,"ng-template",6),i.qZA()),2&t){const r=i.MAs(8);i.Q6J("ngClass",e.cssClass)("ngStyle",e.style),i.xp6(5),i.Q6J("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("ngClass",e.inputClasses)("ngModel",e.textValue),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("placeholder",e.watermarkText)("tabindex",e.tabIndex),i.xp6(4),i.Q6J("ngIf",e.hasSelectedValue())("ngIfElse",r),i.xp6(1),i.Q6J("ngIf",e.hasSelectedValue()),i.xp6(3),i.Q6J("ngIf",e.classificationObject.hasItems),i.xp6(1),i.Q6J("ngIf",e.classificationObject.hasItems)}},dependencies:[g.mk,g.sg,g.O5,g.PC,V.Fj,V.JJ,V.On,N,z,vt,tt,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();var pe=U(2284),lt=(()=>{return(n=lt||(lt={}))[n.Month=0]="Month",n[n.Year=1]="Year",n[n.Decade=2]="Decade",lt;var n})(),Re=(()=>{return(n=Re||(Re={})).years="years",n.quarters="quarters",n.months="months",n.weeks="weeks",n.days="days",n.hours="hours",n.minutes="minutes",n.seconds="seconds",n.milliseconds="milliseconds",n.year="year",n.quarter="quarter",n.month="month",n.week="week",n.day="day",n.hour="hour",n.minute="minute",n.second="second",n.millisecond="millisecond",Re;var n})();function Bo(n,s){if(1&n&&i._UZ(0,"th",10),2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle)}}function zo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"th",11),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.previousMonth())}),i._UZ(1,"i",12),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle),i.uIk("id",t.prevMonthId)("tabindex",t.tabIndex)("data-component-id",t.parentId)}}function Go(n,s){if(1&n&&i._UZ(0,"th",13),2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle)}}function Ho(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"th",14),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.nextMonth())}),i._UZ(1,"i",15),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle),i.uIk("id",t.nextMonthId)("tabindex",t.tabIndex)("data-component-id",t.parentId)}}function Uo(n,s){if(1&n&&i._UZ(0,"th",16),2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("ngStyle",e.headerCellStyle)("innerText",t),i.uIk("aria-label",t)}}function Wo(n,s){if(1&n&&(i.TgZ(0,"tr"),i.YNc(1,Uo,1,3,"ng-template",9),i.qZA()),2&n){const t=i.oxw();i.xp6(1),i.Q6J("ngForOf",t.dayLabels)}}function Yo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"td",17),i.NdJ("mouseover",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.onMouseOver(a,r))})("mouseout",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.onMouseOut(a,r))})("click",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.selectDate(a.date,a.isDisabled,r))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.Udp("background-color",e.determineBackgroundColor(t)),i.ekj("current-item",t.isCurrent)("selectable",!t.isDisabled&&t.inSelectedWindow)("selected-item",t.isSelected)("in-other-month",!t.inSelectedWindow)("disabled-item",t.isDisabled)("focus",e.isActiveCell(t)),i.Q6J("ngStyle",e.bodyCellStyle)("innerText",t.label)("tabindex",e.isActiveCell(t)?0:-1),i.uIk("id",e.getDayId(t))("aria-current",t.isCurrent)("aria-disabled",t.isDisabled)("aria-label",t.label)("aria-pressed",t.isSelected)("aria-selected",t.isSelected)("disabled",t.isDisabled)}}function Ko(n,s){if(1&n&&(i.TgZ(0,"tr"),i.YNc(1,Yo,1,24,"ng-template",9),i.qZA()),2&n){const t=s.$implicit;i.xp6(1),i.Q6J("ngForOf",t)}}let rr=(()=>{class n{constructor(t,e,r,o,a,l,c,d){this.el=t,this.cd=e,this.renderer=r,this.renderStateService=o,this.cultureInfoService=a,this.colorService=l,this.styleGeneratorService=c,this.ngZone=d,this.dateFormat="yyyyMMdd",this._ariaActiveDescendant="",this._viewIsVisible=!1,this.viewDateChange=new i.vpe,this.selectedDateChange=new i.vpe,this.toggleCalendarView=new i.vpe,this.viewBlur=new i.vpe,this.closeDatePickerEvent=new i.vpe,this.dayLabels=[],this.headerCellStyle={},this.bodyCellStyle={},this._activeCell=""}get ariaActiveDescendant(){return this._ariaActiveDescendant}set ariaActiveDescendant(t){this._ariaActiveDescendant=t}get viewDate(){return this._viewDate}set viewDate(t){this.dateIsOutOfDateRange(t)||(this._viewDate=t,this.activeCell=this.getCellId(t),this.selectCell(this.getCellById(this.activeCell)))}get viewIsVisible(){return this._viewIsVisible}set viewIsVisible(t){this._viewIsVisible=t}get prevMonthId(){return`calendar-month-previous-month-${this.parentId}`}get nextMonthId(){return`calendar-month-next-month-${this.parentId}`}get monthDateId(){return`calendar-month-switchview-${this.parentId}`}get tabIndex(){return this.viewIsVisible?0:-1}get activeCell(){return this._activeCell}set activeCell(t){this.ariaActiveDescendant=t,this._activeCell=t}ngOnInit(){this.dayLabels=Object.assign([],this.cultureInfoService.cultureInfo.ShortestDayNames),this.dayNamesVisible=this.datePickerSettings.Header.IsVisible,Object.assign(this.headerCellStyle,this.styleGeneratorService.generatePaddingStyle(this.datePickerSettings.Header.TextMargin)),Object.assign(this.bodyCellStyle,this.styleGeneratorService.generatePaddingStyle(this.datePickerSettings.Body.TextMargin)),this.firstDayOfWeek=this.datePickerSettings.FirstDayOfWeek??this.cultureInfoService.cultureInfo.FirstDayOfWeek;for(let t=0;t<this.firstDayOfWeek;t++){const e=this.dayLabels.shift();e&&this.dayLabels.push(e)}}getDayId(t){return`cell-${t.date.toFormat(this.dateFormat)}-${this.parentId}`}selectDate(t,e,r){r&&(r.cancelBubble=!0,r.stopPropagation()),e||(this.selectedDate=t,this.selectedDateChange.emit(t),this.viewDate=this.selectedDate,this.viewDateChange.emit(this.viewDate),this.regenerate(this.viewDate))}nextMonth(t){if(this.canNavigateToNextMonth())if(t&&t?.isValid)this.viewDate=t,this.regenerate(t);else{const e=this.viewDate.plus({month:1});this.dateIsOutOfDateRange(e)||(this.viewDate=e,this.regenerate(this.viewDate))}}previousMonth(t){if(this.canNavigateToPreviousMonth())if(t&&t?.isValid)this.viewDate=t,this.regenerate(t);else{const e=this.viewDate.minus({month:1});this.dateIsOutOfDateRange(e)||(this.viewDate=e,this.regenerate(this.viewDate))}}canNavigateToNextMonth(){const t=this.viewDate.plus({month:1});return null==this.dateConstraints.MaxDate||t<=L.ou.fromMillis(this.dateConstraints.MaxDate).endOf(W.month)}canNavigateToPreviousMonth(){const t=this.viewDate.minus({month:1});return null==this.dateConstraints.MinDate||t>=L.ou.fromMillis(this.dateConstraints.MinDate).startOf(W.month)}switchToYearView(){this.viewDateChange.emit(this.viewDate),this.toggleCalendarView.emit(lt.Year)}regenerate(t){this.generateDaysForCurrentMonth(t),this.generateLabel(t),this.cd.detectChanges(),this.selectCell(this.getCellById(this.activeCell))}handleFocus(){this.focusActiveCell()}handleBlur(){}handleKeyDown(t){switch(t.key){case b.Esc:case b.Escape:if(t.shiftKey||t.ctrlKey)return!0;this.closeDatePickerEvent.emit();break;case b.PageUp:if(t.shiftKey||t.ctrlKey)return!0;this.nextMonth();break;case b.PageDown:if(t.shiftKey||t.ctrlKey)return!0;this.previousMonth();break;case b.Spacebar:case b.Space:case b.Enter:{if(t.ctrlKey)return!0;const e=t.target||t.srcElement;if(null!=e&&"th"===e.localName)return e.click(),!0;this.selectDate(this.viewDate,!1);break}case b.Up:case b.ArrowUp:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.minus({week:1});this.viewDate.hasSame(e,W.month)?this.viewDate=e:this.previousMonth(e);break}case b.Down:case b.ArrowDown:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.plus({week:1});this.viewDate.hasSame(e,W.month)?this.viewDate=e:this.nextMonth(e);break}case b.Left:case b.ArrowLeft:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.minus({day:1});this.viewDate.month===e.month?this.viewDate=e:this.previousMonth(e);break}case b.Right:case b.ArrowRight:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.plus({day:1});this.viewDate.month===e.month?this.viewDate=e:this.previousMonth(e);break}}return!1}determineBackgroundColor(t){return this.colorService.generateRGBAColor(t.isCurrent?this.datePickerSettings.Body.CurrentBackgroundColor:t.isSelected?this.datePickerSettings.Body.SelectedBackgroundColor:t.inSelectedWindow?t.isDisabled?this.datePickerSettings.Body.InactiveBackgroundColor:this.datePickerSettings.Body.BackgroundColor:this.datePickerSettings.Body.InactiveBackgroundColor)}onMouseOver(t,e){t.inSelectedWindow&&(e.target.style.backgroundColor=this.colorService.generateRGBAColor(this.datePickerSettings.Body.HoverBackgroundColor))}onMouseOut(t,e){const r=this.determineBackgroundColor(t);e.target.style.backgroundColor=null!==r?r:""}focusActiveCell(){this.ngZone.runOutsideAngular(()=>{this.ngZone.onStable.pipe((0,Ie.q)(1)).subscribe({next:()=>{const t=this.el.nativeElement.querySelector(".focus");t&&this.viewIsVisible&&t.focus()}})})}isActiveCell(t){return this.getDayId(t)===this.activeCell}generateDaysForCurrentMonth(t){this.days=[];const e=t.startOf(W.month),r=t.endOf(W.month),o=this.firstDayOfWeek-1<0?0:this.firstDayOfWeek-1,a=e.minus({day:e.weekday-this.firstDayOfWeek}),c=r.plus({day:r.weekday+o}).diff(a,Re.days).days/7,u=this.dateConstraints.DayFilter.split(",").map(h=>parseInt(h,10));for(let h=0;h<=c;h++){this.days[h]=[];for(let m=0;m<7;m++){const f=a.plus({day:7*h+m});this.days[h][m]={label:""+f.day,date:f,inSelectedWindow:f.month===t.month&&f.year===t.year,isSelected:f.equals(this.selectedDate.startOf(W.day)),isCurrent:f.equals(L.ou.now().startOf(W.day)),isDisabled:this.dateIsDisabledInDatePicker(f,m,u),isHidden:this.dateIsOutOfDateRange(f)}}}}dateIsOutOfDateRange(t){return null!=this.dateConstraints?.MinDate&&t.startOf(W.day)<L.ou.fromMillis(this.dateConstraints.MinDate).startOf(W.day)||null!=this.dateConstraints?.MaxDate&&t.startOf(W.day)>L.ou.fromMillis(this.dateConstraints.MaxDate).startOf(W.day)}dateIsDisabledInDatePicker(t,e,r){return!this.dateListContainsDate(t,this.convertToDateTime(this.dateConstraints?.EnabledDays))&&(!!this.dateIsOutOfDateRange(t)||(r.indexOf((e=e+this.firstDayOfWeek>6?e-7:e)+this.firstDayOfWeek)<0||this.dateListContainsDate(t,this.convertToDateTime(this.dateConstraints?.DisabledDays))))}convertToDateTime(t){return t.map(e=>L.ou.fromMillis(e))}dateListContainsDate(t,e){return-1!==e.findIndex(r=>r.startOf(W.day).equals(t.startOf(W.day)))}generateLabel(t){this.label=`${this.cultureInfoService.cultureInfo.MonthNames[t.month-1]} ${t.year}`}selectCell(t){t&&t?.id&&(this.activeCell=t.id,this.focusActiveCell())}getCellId(t){return`cell-${t.toFormat(this.dateFormat)}-${this.parentId}`}getCellById(t){return t?this.el.nativeElement.children[0].querySelector(`#${t}`):null}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj),i.Y36(ut),i.Y36(Wt),i.Y36(qt),i.Y36(ye),i.Y36(i.R0b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-calendar-month-view"]],inputs:{viewDate:"viewDate",selectedDate:"selectedDate",viewIsVisible:"viewIsVisible",headerStyle:"headerStyle",bodyStyle:"bodyStyle",parentId:"parentId",componentId:"componentId",datePickerSettings:"datePickerSettings",dateConstraints:"dateConstraints"},outputs:{viewDateChange:"viewDateChange",selectedDateChange:"selectedDateChange",toggleCalendarView:"toggleCalendarView",viewBlur:"viewBlur",closeDatePickerEvent:"closeDatePickerEvent"},decls:13,vars:16,consts:[["role","presentation",3,"focus","keydown"],["role","presentation",3,"ngStyle"],["role","row",1,"header"],["prevMonthDisabled",""],[3,"ngIf","ngIfElse"],["role","button","colspan","5","aria-live","assertive","aria-atomic","true","aria-label","Switch to year view",3,"ngStyle","innerText","click"],["nextMonthDisabled",""],[3,"ngIf"],[3,"ngStyle"],["ngFor","",3,"ngForOf"],["role","button","aria-label","Previous",1,"disabled-action",3,"ngStyle"],["role","button","aria-label","Previous Month",1,"action",3,"ngStyle","click"],[1,"icon-caret-left"],["role","button","aria-label","Next",1,"disabled-action",3,"ngStyle"],["role","button","aria-label","Next Month",1,"action",3,"ngStyle","click"],[1,"icon-caret-right"],["role","columnheader","scope","col",3,"ngStyle","innerText"],["role","gridcell",3,"ngStyle","innerText","tabindex","mouseover","mouseout","click"]],template:function(t,e){if(1&t&&(i.TgZ(0,"table",0),i.NdJ("focus",function(){return e.handleFocus()})("keydown",function(o){return e.handleKeyDown(o)}),i.TgZ(1,"thead",1)(2,"tr",2),i.YNc(3,Bo,1,1,"ng-template",null,3,i.W1O),i.YNc(5,zo,2,4,"ng-template",4),i.TgZ(6,"th",5),i.NdJ("click",function(){return e.switchToYearView()}),i.qZA(),i.YNc(7,Go,1,1,"ng-template",null,6,i.W1O),i.YNc(9,Ho,2,4,"ng-template",4),i.qZA(),i.YNc(10,Wo,2,1,"ng-template",7),i.qZA(),i.TgZ(11,"tbody",8),i.YNc(12,Ko,2,1,"ng-template",9),i.qZA()()),2&t){const r=i.MAs(4),o=i.MAs(8);i.uIk("tabindex",e.tabIndex)("aria-labelledby",e.monthDateId)("data-component-id",e.componentId),i.xp6(1),i.Q6J("ngStyle",e.headerStyle),i.xp6(4),i.Q6J("ngIf",e.canNavigateToPreviousMonth())("ngIfElse",r),i.xp6(1),i.Q6J("ngStyle",e.headerCellStyle)("innerText",e.label),i.uIk("id",e.monthDateId)("tabindex",e.tabIndex)("data-component-id",e.parentId),i.xp6(3),i.Q6J("ngIf",e.canNavigateToNextMonth())("ngIfElse",o),i.xp6(1),i.Q6J("ngIf",e.dayNamesVisible),i.xp6(1),i.Q6J("ngStyle",e.bodyStyle),i.xp6(1),i.Q6J("ngForOf",e.days)}},dependencies:[g.sg,g.O5,g.PC],styles:["table[_ngcontent-%COMP%]{border-spacing:0;border-collapse:collapse;table-layout:fixed}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr.header[_ngcontent-%COMP%] > th.action[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr.header[_ngcontent-%COMP%] > th.disabled-action[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{text-align:center;cursor:pointer;position:relative}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{text-decoration:line-through;border:none}table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:default}table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{text-decoration:line-through;border:none}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:1px;border-radius:.25em}"],changeDetection:0}),n})();function Qo(n,s){if(1&n&&i._UZ(0,"th",8),2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle)}}function Jo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"th",9),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.previousYear())}),i._UZ(1,"i",10),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle),i.uIk("id",t.prevYearId)("tabindex",t.tabIndex)("data-component-id",t.componentId)}}function Zo(n,s){if(1&n&&i._UZ(0,"th",8),2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle)}}function qo(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"th",11),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.nextYear())}),i._UZ(1,"i",12),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle),i.uIk("id",t.nextYearId)("tabindex",t.tabIndex)("data-component-id",t.componentId)}}function $o(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"td",13),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.selectMonth(o.date))})("mouseover",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw();return i.KtG(a.onMouseOver(o,r))})("mouseout",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw();return i.KtG(a.onMouseOut(o,r))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.Udp("background-color",e.determineBackgroundColor(t)),i.ekj("current-item",t.isCurrent)("disabled-item",t.isDisabled)("focus",e.isActiveCell(t))("selected-item",t.isSelected),i.Q6J("ngStyle",e.bodyCellStyle)("innerText",t.label)("tabindex",e.isActiveCell(t)?0:-1),i.uIk("id",e.getMonthId(t))("aria-current",t.isCurrent)("aria-disabled",t.isDisabled)("aria-label",t.label)("aria-pressed",t.isSelected)("aria-selected",t.isSelected)("data-month",e.formatMonth(t))}}function Xo(n,s){if(1&n&&(i.TgZ(0,"tr"),i.YNc(1,$o,1,20,"ng-template",7),i.qZA()),2&n){const t=s.$implicit;i.xp6(1),i.Q6J("ngForOf",t)}}let or=(()=>{class n{constructor(t,e,r,o,a,l,c){this.el=t,this.cd=e,this.renderer=r,this.cultureInfoService=o,this.colorService=a,this.styleGeneratorService=l,this.ngZone=c,this.dateFormat="yyyyMM",this._ariaActiveDescendant="",this._activeCell="",this._viewIsVisible=!1,this.viewDateChange=new i.vpe,this.toggleCalendarView=new i.vpe,this.closeDatePickerEvent=new i.vpe,this.monthsInYear=[],this.headerCellStyle={},this.bodyCellStyle={}}get ariaActiveDescendant(){return this._ariaActiveDescendant}set ariaActiveDescendant(t){this._ariaActiveDescendant=t}get viewDate(){return this._viewDate}set viewDate(t){this._viewDate=t,this.activeCell=this.getCellId(t),this.selectCell(this.getCellById(this.activeCell))}get viewIsVisible(){return this._viewIsVisible}set viewIsVisible(t){this._viewIsVisible=t}get prevYearId(){return`calendar-year-previous-year-${this.parentId}`}get nextYearId(){return`calendar-year-next-year-${this.parentId}`}get yearDateId(){return`calendar-year-switchview-${this.parentId}`}get tabIndex(){return this.viewIsVisible?0:-1}get activeCell(){return this._activeCell}set activeCell(t){this.ariaActiveDescendant=t,this._activeCell=t}ngOnInit(){Object.assign(this.headerCellStyle,this.styleGeneratorService.generatePaddingStyle(this.datePickerSettings.Header.TextMargin)),Object.assign(this.bodyCellStyle,this.styleGeneratorService.generatePaddingStyle(this.datePickerSettings.Body.TextMargin))}getMonthId(t){return`cell-${t.date.toFormat(this.dateFormat)}-${this.parentId}`}formatMonth(t){return`${t.date.toFormat(this.dateFormat)}`}regenerate(t){this.generateMonths(t),this.generateLabel(t),this.cd.detectChanges(),this.selectCell(this.getCellById(this.activeCell))}selectMonth(t){this.viewDateChange.emit(t),this.toggleCalendarView.emit(lt.Month)}switchToDecadeView(){this.viewDateChange.emit(this.viewDate),this.toggleCalendarView.emit(lt.Decade)}nextYear(t){this.canNavigateToNextYear()&&(t&&t?.isValid?(this.viewDate=t,this.regenerate(t)):(this.viewDate=this.viewDate.plus({year:1}),this.regenerate(this.viewDate)))}previousYear(t){this.canNavigateToPreviousYear()&&(t&&t?.isValid?(this.viewDate=t,this.regenerate(t)):(this.viewDate=this.viewDate.minus({year:1}),this.regenerate(this.viewDate)))}canNavigateToNextYear(){const t=this.viewDate.plus({year:1});return null==this.dateConstraints.MaxDate||t.year<=L.ou.fromMillis(this.dateConstraints.MaxDate).year}canNavigateToPreviousYear(){const t=this.viewDate.minus({year:1});return null==this.dateConstraints.MinDate||t.year>=L.ou.fromMillis(this.dateConstraints.MinDate).year}handleFocus(){this.focusActiveCell()}handleKeyDown(t){switch(t.key){case b.Esc:case b.Escape:if(t.shiftKey||t.ctrlKey)return!0;this.closeDatePickerEvent.emit();break;case b.Space:case b.Spacebar:case b.Enter:{if(t.ctrlKey)return!0;const e=t.target||t.srcElement;if(null!=e&&"th"===e.localName)return e.click(),!0;this.selectMonth(this.viewDate);break}case b.PageUp:if(t.shiftKey||t.ctrlKey)return!0;this.nextYear();break;case b.PageDown:if(t.shiftKey||t.ctrlKey)return!0;this.previousYear();break;case b.Up:case b.ArrowUp:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.minus({month:4});this.viewDate.year===e.year?this.viewDate=e:this.previousYear(e);break}case b.Down:case b.ArrowDown:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.plus({month:4});this.viewDate.year===e.year?this.viewDate=e:this.previousYear(e);break}case b.Left:case b.ArrowLeft:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.minus({month:1});this.viewDate.year===e.year?this.viewDate=e:this.previousYear(e);break}case b.Right:case b.ArrowRight:{if(t.ctrlKey||t.shiftKey)return!0;const e=this.viewDate.plus({month:1});this.viewDate.year===e.year?this.viewDate=e:this.nextYear(e);break}}return!1}determineBackgroundColor(t){return t.isCurrent?this.colorService.generateRGBAColor(this.datePickerSettings.Body.CurrentBackgroundColor):t.isSelected?this.colorService.generateRGBAColor(this.datePickerSettings.Body.SelectedBackgroundColor):"transparent"}onMouseOver(t,e){e.target.style.backgroundColor=this.colorService.generateRGBAColor(this.datePickerSettings.Body.HoverBackgroundColor)}onMouseOut(t,e){e.target.style.backgroundColor=this.determineBackgroundColor(t)}focusActiveCell(){this.ngZone.runOutsideAngular(()=>{this.ngZone.onStable.pipe((0,Ie.q)(1)).subscribe({next:()=>{const t=this.el.nativeElement.querySelector(".focus");t&&this.viewIsVisible&&t.focus()}})})}isActiveCell(t){return this.getMonthId(t)===this._activeCell}monthIsDisabled(t){return null!=this.dateConstraints.MinDate?t.year>=L.ou.fromMillis(this.dateConstraints.MinDate).year:null!=this.dateConstraints.MaxDate&&t.year<=L.ou.fromMillis(this.dateConstraints.MaxDate).year}generateMonths(t){this.monthsInYear=[];let e=0;const r=this.cultureInfoService.cultureInfo.ShortestMonthNames.indexOf("");r>0&&this.cultureInfoService.cultureInfo.ShortestMonthNames.splice(r,1),this.cultureInfoService.cultureInfo.ShortestMonthNames.forEach((o,a)=>{this.monthsInYear[e]||(this.monthsInYear[e]=[]);const l=t.set({month:a});this.monthsInYear[e].push({label:o,date:l,inSelectedWindow:l.month-t.month==0,isSelected:l.startOf(W.month).equals(this.selectedDate.startOf(W.month)),isCurrent:l.startOf(W.month).equals(L.ou.now().startOf(W.month)),isDisabled:this.monthIsDisabled(l),isHidden:!1}),a>0&&(a+1)%4==0&&e++})}generateLabel(t){this.label=t.year.toString()}getCellId(t){return`cell-${t.toFormat(this.dateFormat)}-${this.parentId}`}getCellById(t){return t?this.el.nativeElement.children[0].querySelector(`#${t}`):null}selectCell(t){t&&(this._activeCell=t.id,this.focusActiveCell())}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj),i.Y36(Wt),i.Y36(qt),i.Y36(ye),i.Y36(i.R0b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-calendar-year-view"]],inputs:{viewDate:"viewDate",selectedDate:"selectedDate",parentId:"parentId",componentId:"componentId",datePickerSettings:"datePickerSettings",dateConstraints:"dateConstraints",viewIsVisible:"viewIsVisible",headerStyle:"headerStyle",bodyStyle:"bodyStyle"},outputs:{viewDateChange:"viewDateChange",toggleCalendarView:"toggleCalendarView",closeDatePickerEvent:"closeDatePickerEvent"},decls:12,vars:15,consts:[["role","grid",1,"kmd-datepicker-month",3,"keydown"],[3,"ngStyle"],[1,"header"],["prevYearDisabled",""],[3,"ngIf","ngIfElse"],["role","button","colspan","2","aria-label","Switch to decade view","aria-live","assertive","aria-atomic","true",3,"ngStyle","innerText","click"],["nextYearDisabled",""],["ngFor","",3,"ngForOf"],[1,"disabled-action",3,"ngStyle"],["role","button","aria-label","Previous Year",1,"action",3,"ngStyle","click"],[1,"icon-caret-left"],["role","button","aria-label","Next Year",1,"action",3,"ngStyle","click"],[1,"icon-caret-right"],["role","gridcell",3,"ngStyle","innerText","tabindex","click","mouseover","mouseout"]],template:function(t,e){if(1&t&&(i.TgZ(0,"table",0),i.NdJ("keydown",function(o){return e.handleKeyDown(o)}),i.TgZ(1,"thead",1)(2,"tr",2),i.YNc(3,Qo,1,1,"ng-template",null,3,i.W1O),i.YNc(5,Jo,2,4,"ng-template",4),i.TgZ(6,"th",5),i.NdJ("click",function(){return e.switchToDecadeView()}),i.qZA(),i.YNc(7,Zo,1,1,"ng-template",null,6,i.W1O),i.YNc(9,qo,2,4,"ng-template",4),i.qZA()(),i.TgZ(10,"tbody",1),i.YNc(11,Xo,2,1,"ng-template",7),i.qZA()()),2&t){const r=i.MAs(4),o=i.MAs(8);i.uIk("aria-labelledby",e.yearDateId)("tabindex",e.tabIndex)("data-component-id",e.componentId),i.xp6(1),i.Q6J("ngStyle",e.headerStyle),i.xp6(4),i.Q6J("ngIf",e.canNavigateToPreviousYear())("ngIfElse",r),i.xp6(1),i.Q6J("ngStyle",e.headerCellStyle)("innerText",e.label),i.uIk("id",e.yearDateId)("tabindex",e.tabIndex)("data-component-id",e.componentId),i.xp6(3),i.Q6J("ngIf",e.canNavigateToNextYear())("ngIfElse",o),i.xp6(1),i.Q6J("ngStyle",e.bodyStyle),i.xp6(1),i.Q6J("ngForOf",e.monthsInYear)}},dependencies:[g.sg,g.O5,g.PC],styles:["table[_ngcontent-%COMP%]{border-spacing:0;border-collapse:collapse;table-layout:fixed}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr.header[_ngcontent-%COMP%] > th.action[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr.header[_ngcontent-%COMP%] > th.disabled-action[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{text-align:center;cursor:pointer;position:relative}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{text-decoration:line-through;border:none}table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:default}table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{text-decoration:line-through;border:none}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:1px;border-radius:.25em}"],changeDetection:0}),n})();function ts(n,s){if(1&n&&i._UZ(0,"th",9),2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle)}}function es(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"th",10),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.previousDecade())}),i._UZ(1,"i",11),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle),i.uIk("id",t.prevDecadeId)("tabindex",t.tabIndex)("data-component-id",t.componentId)}}function is(n,s){if(1&n&&i._UZ(0,"th",9),2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle)}}function ns(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"th",12),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.nextDecade())}),i._UZ(1,"i",13),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.headerCellStyle),i.uIk("id",t.nextDecadeId)("tabindex",t.tabIndex)("data-component-id",t.componentId)}}function rs(n,s){1&n&&i._UZ(0,"td",15)}function os(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"td",16),i.NdJ("mouseover",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw(2);return i.KtG(a.onMouseOver(o,r))})("mouseout",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw(2);return i.KtG(a.onMouseOut(o,r))})("click",function(){i.CHM(t);const r=i.oxw().$implicit,o=i.oxw(2);return i.KtG(o.selectYear(r.date))}),i.qZA()}if(2&n){const t=i.oxw().$implicit,e=i.oxw(2);i.Udp("background-color",e.determineBackgroundColor(t)),i.ekj("current-item",t.isCurrent)("selectable",!t.isDisabled&&t.inSelectedWindow)("selected-item",t.isSelected)("in-other-month",!t.inSelectedWindow)("disabled-item",t.isDisabled)("focus",e.isActiveCell(t)),i.Q6J("ngStyle",e.bodyCellStyle)("innerText",t.label)("tabindex",e.isActiveCell(t)?0:-1),i.uIk("id",e.getDecadeId(t))("aria-current",t.isCurrent)("aria-disabled",t.isDisabled)("aria-label",t.label)("aria-pressed",t.isSelected)("aria-selected",t.isSelected)}}function ss(n,s){if(1&n&&(i.YNc(0,rs,1,0,"ng-template",null,14,i.W1O),i.YNc(2,os,1,23,"ng-template",4)),2&n){const t=s.$implicit,e=i.MAs(1);i.xp6(2),i.Q6J("ngIf",!t.isHidden)("ngIfElse",e)}}function as(n,s){if(1&n&&(i.TgZ(0,"tr"),i.YNc(1,ss,3,2,"ng-template",8),i.qZA()),2&n){const t=s.$implicit;i.xp6(1),i.Q6J("ngForOf",t)}}let sr=(()=>{class n{constructor(t,e,r,o,a,l){this.el=t,this.cd=e,this.renderer=r,this.colorService=o,this.styleGeneratorService=a,this.ngZone=l,this.dateFormat="yyyy",this._ariaActiveDescendant="",this._viewIsVisible=!1,this.viewDateChange=new i.vpe,this.toggleCalendarView=new i.vpe,this.closeDatePickerEvent=new i.vpe,this.headerCellStyle={},this.bodyCellStyle={},this._activeCell="",this.handleKeyDown=c=>{switch(c.key){case b.Esc:case b.Escape:if(c.shiftKey||c.ctrlKey)return!0;this.closeDatePickerEvent.emit();break;case b.PageUp:if(c.shiftKey||c.ctrlKey)return!0;this.nextDecade();break;case b.PageDown:if(c.shiftKey||c.ctrlKey)return!0;this.previousDecade();break;case b.Spacebar:case b.Space:case b.Enter:{const d=c.target||c.srcElement;null!=d&&"th"===d.localName&&d.click(),this.selectYear(this.viewDate);break}case b.Up:case b.ArrowUp:{if(c.ctrlKey||c.shiftKey)return!0;const d=this.viewDate.minus({year:4});this.yearInDecade(d.year)?this.viewDate=d:this.regenerate(d);break}case b.Down:case b.ArrowDown:{if(c.ctrlKey||c.shiftKey)return!0;const d=this.viewDate.plus({year:4});this.yearInDecade(d.year)?this.viewDate=d:this.regenerate(d);break}case b.Left:case b.ArrowLeft:{if(c.ctrlKey||c.shiftKey)return!0;const d=this.viewDate.minus({year:1});this.yearInDecade(d.year)?this.viewDate=d:this.regenerate(d);break}case b.Right:case b.ArrowRight:{if(c.ctrlKey||c.shiftKey)return!0;const d=this.viewDate.plus({year:1});this.yearInDecade(d.year)?this.viewDate=d:this.regenerate(d);break}}return!1},this.onMouseOver=(c,d)=>{d.target.style.backgroundColor=this.colorService.generateRGBAColor(this.datePickerSettings.Body.HoverBackgroundColor)},this.onMouseOut=(c,d)=>{d.target.style.backgroundColor=this.determineBackgroundColor(c)},this.yearInDecade=c=>{let d=!1;return this.yearsInDecade.forEach(u=>{u.forEach(h=>{d||(d=h.date.year===c)})}),d},this.selectCell=c=>{c&&c?.id&&(this.activeCell=c.id,this.focusActiveCell())},this.getCellId=c=>`cell-${c.toFormat(this.dateFormat)}-${this.parentId}`,this.getCellById=c=>c?this.el.nativeElement.children[0].querySelector(`#${c}`):null,this.isActiveCell=c=>this.getDecadeId(c)===this.activeCell}get ariaActiveDescendant(){return this._ariaActiveDescendant}set ariaActiveDescendant(t){this._ariaActiveDescendant=t}get viewDate(){return this._viewDate}set viewDate(t){this._viewDate=t,this.activeCell=this.getCellId(t),this.selectCell(this.getCellById(this.activeCell))}get viewIsVisible(){return this._viewIsVisible}set viewIsVisible(t){this._viewIsVisible=t}get prevDecadeId(){return`calendar-decade-previous-decade-${this.parentId}`}get nextDecadeId(){return`calendar-decade-next-decade-${this.parentId}`}get decadeDateId(){return`calendar-decade-switchview-${this.parentId}`}get tabIndex(){return this.viewIsVisible?0:-1}get activeCell(){return this._activeCell}set activeCell(t){this.ariaActiveDescendant=t,this._activeCell=t}ngOnInit(){Object.assign(this.headerCellStyle,this.styleGeneratorService.generatePaddingStyle(this.datePickerSettings.Header.TextMargin)),Object.assign(this.bodyCellStyle,this.styleGeneratorService.generatePaddingStyle(this.datePickerSettings.Body.TextMargin)),this.regenerate(this.viewDate)}selectYear(t){this.viewDateChange.emit(t),this.toggleCalendarView.emit(lt.Year)}nextDecade(t){this.canNavigateToNextDecade()&&(t&&t?.isValid?(this.viewDate=t,this.regenerate(t)):(this.viewDate=this.viewDate.plus({year:10}),this.regenerate(this.viewDate)))}previousDecade(t){this.canNavigateToPreviousDecade()&&(t&&t?.isValid?(this.viewDate=t,this.regenerate(t)):(this.viewDate=this.viewDate.minus({year:10}),this.regenerate(this.viewDate)))}canNavigateToNextDecade(){const t=this.viewDate.plus({year:10});return null==this.dateConstraints.MaxDate||!(t.year>=L.ou.fromMillis(this.dateConstraints.MaxDate).year)}canNavigateToPreviousDecade(){const t=this.viewDate.minus({year:10});return null==this.dateConstraints.MinDate||!(t.year<=L.ou.fromMillis(this.dateConstraints.MinDate).year)}regenerate(t){const e=10*Math.floor(t.year/10);this.viewDate.equals(t)||(this.viewDate=t),this.generateYearsForDecade(e),this.generateLabel(t),this.cd.detectChanges(),this.selectCell(this.getCellById(this.activeCell))}determineBackgroundColor(t){return t.isCurrent?this.colorService.generateRGBAColor(this.datePickerSettings.Body.SelectedBackgroundColor):"transparent"}generateYearsForDecade(t){this.yearsInDecade=[];let e=0;for(let r=-1,o=11;r<o;r++){this.yearsInDecade[e]||(this.yearsInDecade[e]=[]);const a=L.ou.now().startOf(W.year).set({year:t+r});this.yearsInDecade[e].push({label:(t+r).toString(),date:a,inSelectedWindow:a.hasSame(this.viewDate,W.year),isSelected:a.hasSame(this.selectedDate,W.year),isCurrent:a.hasSame(L.ou.now(),W.year),isDisabled:this.yearIsDisabled(a.year),isHidden:!1}),r+1>0&&(r+2)%4==0&&e++}}yearIsDisabled(t){return null!=this.dateConstraints.MinDate?t<L.ou.fromMillis(this.dateConstraints.MinDate).year:null!=this.dateConstraints.MaxDate&&t>L.ou.fromMillis(this.dateConstraints.MaxDate).year}generateLabel(t){const e=10*Math.floor(t.year/10);this.label=`${e} - ${e+9}`}focusActiveCell(){this.ngZone.runOutsideAngular(()=>{this.ngZone.onStable.pipe((0,Ie.q)(1)).subscribe({next:()=>{const t=this.el.nativeElement.querySelector(".focus");t&&this.viewIsVisible&&t.focus()}})})}getDecadeId(t){return`cell-${t.date.toFormat(this.dateFormat)}-${this.parentId}`}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj),i.Y36(qt),i.Y36(ye),i.Y36(i.R0b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-calendar-decade-view"]],inputs:{viewDate:"viewDate",viewIsVisible:"viewIsVisible",selectedDate:"selectedDate",parentId:"parentId",componentId:"componentId",datePickerSettings:"datePickerSettings",dateConstraints:"dateConstraints",headerStyle:"headerStyle",bodyStyle:"bodyStyle"},outputs:{viewDateChange:"viewDateChange",toggleCalendarView:"toggleCalendarView",closeDatePickerEvent:"closeDatePickerEvent"},decls:12,vars:15,consts:[["role","grid",1,"kmd-datepicker-year",3,"keydown"],["role","presentation",3,"ngStyle"],["role","row",1,"header"],["prevDecadeDisabled",""],[3,"ngIf","ngIfElse"],["role","heading","colspan","2","aria-live","assertive","aria-atomic","true","aria-level","3",3,"ngStyle","innerText"],["nextDecadeDisabled",""],[3,"ngStyle"],["ngFor","",3,"ngForOf"],["role","button",1,"disabled-action",3,"ngStyle"],["role","button","aria-label","Previous decade",1,"action",3,"ngStyle","click"],[1,"icon-caret-left"],["role","button","aria-label","Next decade",1,"action",3,"ngStyle","click"],[1,"icon-caret-right"],["yearHidden",""],[1,"hidden-item"],["role","gridcell",3,"ngStyle","innerText","tabindex","mouseover","mouseout","click"]],template:function(t,e){if(1&t&&(i.TgZ(0,"table",0),i.NdJ("keydown",function(o){return e.handleKeyDown(o)}),i.TgZ(1,"thead",1)(2,"tr",2),i.YNc(3,ts,1,1,"ng-template",null,3,i.W1O),i.YNc(5,es,2,4,"ng-template",4),i._UZ(6,"th",5),i.YNc(7,is,1,1,"ng-template",null,6,i.W1O),i.YNc(9,ns,2,4,"ng-template",4),i.qZA()(),i.TgZ(10,"tbody",7),i.YNc(11,as,2,1,"ng-template",8),i.qZA()()),2&t){const r=i.MAs(4),o=i.MAs(8);i.uIk("tabindex",e.tabIndex)("aria-labelledby",e.decadeDateId)("data-component-id",e.componentId),i.xp6(1),i.Q6J("ngStyle",e.headerStyle),i.xp6(4),i.Q6J("ngIf",e.canNavigateToPreviousDecade())("ngIfElse",r),i.xp6(1),i.Q6J("ngStyle",e.headerCellStyle)("innerText",e.label),i.uIk("id",e.decadeDateId)("tabindex",e.tabIndex)("data-component-id",e.componentId),i.xp6(3),i.Q6J("ngIf",e.canNavigateToNextDecade())("ngIfElse",o),i.xp6(1),i.Q6J("ngStyle",e.bodyStyle),i.xp6(1),i.Q6J("ngForOf",e.yearsInDecade)}},dependencies:[g.sg,g.O5,g.PC],styles:["table[_ngcontent-%COMP%]{border-spacing:0;border-collapse:collapse;table-layout:fixed}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr.header[_ngcontent-%COMP%] > th.action[_ngcontent-%COMP%]{cursor:pointer}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr.header[_ngcontent-%COMP%] > th.disabled-action[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{text-align:center;cursor:pointer;position:relative}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:default}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{text-decoration:line-through;border:none}table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:default}table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], table.hc[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td.disabled-item.current-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover > div[_ngcontent-%COMP%]{text-decoration:line-through;border:none}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:1px;border-radius:.25em}"],changeDetection:0}),n})();class ar{log(s,...t){console.log(`[${this.constructor.name}] ${s}`,t)}}class ls extends ar{constructor(s,t){super(),this.injector=s,this.component=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(s){if(s.target.id.indexOf("cell")>-1)switch(s.preventDefault(),this.component.calendarView){case lt.Decade:this.component.setViewDate(this.component.viewDate.minus({year:1}));break;case lt.Month:this.component.setViewDate(this.component.viewDate.minus({days:1}));break;case lt.Year:this.component.setViewDate(this.component.viewDate.minus({month:1}))}return[]}rightKeyPressed(s){if(s.target.id.indexOf("cell")>-1)switch(s.preventDefault(),this.component.calendarView){case lt.Decade:this.component.setViewDate(this.component.viewDate.plus({year:1}));break;case lt.Month:this.component.setViewDate(this.component.viewDate.plus({days:1}));break;case lt.Year:this.component.setViewDate(this.component.viewDate.plus({month:1}))}return[]}upKeyPressed(s){if(s.target.id.indexOf("cell")>-1)switch(s.preventDefault(),this.component.calendarView){case lt.Decade:this.component.setViewDate(this.component.viewDate.minus({year:4}));break;case lt.Month:this.component.setViewDate(this.component.viewDate.minus({week:1}));break;case lt.Year:this.component.setViewDate(this.component.viewDate.minus({month:4}))}return[]}downKeyPressed(s){if(s.target.id.indexOf("cell")>-1)switch(s.preventDefault(),this.component.calendarView){case lt.Decade:this.component.setViewDate(this.component.viewDate.plus({year:4}));break;case lt.Month:this.component.setViewDate(this.component.viewDate.plus({week:1}));break;case lt.Year:this.component.setViewDate(this.component.viewDate.plus({month:4}))}return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return this.component.closeDatePicker(),[]}spacePressed(){return[]}getName(){return"Empty"}}class lr{constructor(s,t){this.injector=s,this.component=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),this.component.finalizeDate()?[]:x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Date insert"}}var ai=(()=>{return(n=ai||(ai={}))[n.Textboxes=0]="Textboxes",n[n.Datepicker=1]="Datepicker",n[n.Textbox=2]="Textbox",n[n.Dropdownlists=3]="Dropdownlists",ai;var n})(),cs=U(4355);let Be=(()=>{class n{constructor(t){this.elementRef=t,this.clickOutside=new i.vpe}ngOnInit(){const t=[(0,It.R)(document,"click"),(0,It.R)(document,"touchstart"),(0,It.R)(document,"touchmove")];this.subscription=(0,cs.S)(...t).subscribe({next:e=>this.handleSubscription(e)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}handleSubscription(t){switch(t.type){case"click":return this.handleEvent(t,t.target,!0);case"touchstart":case"touchmove":return this.handleEvent(t,t.target,!1)}}handleEvent(t,e,r){e&&(this.hasClickedInside(e,t,r)||this.clickOutside.emit(t))}hasClickedInside(t,e,r){const o=this.elementOrChildContainsTargetElement(this.elementRef.nativeElement,t,e,r);if(this.context){const a=this.elementOrChildContainsTargetElement(this.context,t,e,r);return o||a}return o}elementOrChildContainsTargetElement(t,e,r,o){if(t.contains(e))return!0;for(let a=0,l=t.children.length;a<l;a++){const c=t.children[a].getBoundingClientRect();if(this.isInsideBoundaries(r,c,o))return!0}return!1}isInsideBoundaries(t,e,r){if(r){const a=t;return a.clientX>=e.left&&a.clientX<=e.right&&a.clientY<=e.bottom&&a.clientY>=e.top}return t.targetTouches[0].clientX>=e.left&&t.targetTouches[0].clientX<=e.right&&t.targetTouches[0].clientY<=e.bottom&&t.targetTouches[0].clientY>=e.top}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5ClickOutside",""]],inputs:{context:["bl5ClickOutsideContext","context"]},outputs:{clickOutside:"bl5ClickOutside"}}),n})(),Se=(()=>{class n{constructor(t){this.navigationService=t}onKeyDown(t){this.currentInputValue=t.target.value}onKeyUp(t){null!=this.currentInputValue&&t.target.value!==this.currentInputValue&&this.navigationService.setInsertMode(!1)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(nt))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5NavigationToggle",""]],hostBindings:function(t,e){1&t&&i.NdJ("keydown",function(o){return e.onKeyDown(o)})("keyup",function(o){return e.onKeyUp(o)})},inputs:{dataObject:["bl5NavigationToggle","dataObject"]}}),n})();var li=(()=>{return(n=li||(li={}))[n.Dropdownlists=0]="Dropdownlists",n[n.Textbox=1]="Textbox",n[n.Timepicker=2]="Timepicker",n[n.Textboxes=3]="Textboxes",li;var n})();let cr=(()=>{class n{constructor(t,e){this.el=t,this.sp=e,this.currentStyleObject=null}ngOnInit(){this.controlSubscription=this.sp.subscriptionService.getControlSubjectById(this.dataObject.ID).subscribe({next:t=>{this.handleControlUpdate(t)}})}ngOnDestroy(){this.controlSubscription&&this.controlSubscription.unsubscribe()}handleControlUpdate(t){this.applyStyles()}applyStyles(){const t=this.useFontObject(this.dataObject)?this.sp.styleGeneratorService.generateStyleObjectWithFont(this.dataObject):this.sp.styleGeneratorService.generateStyleObject(this.dataObject);delete t["border-right-width"],delete t["border-left-width"],delete t["border-top-width"],delete t["border-bottom-width"],delete t["border-style"],delete t["border-width"],delete t["border-radius"],delete t.background,delete t["background-image"],delete t["background-size"],delete t["background-position"],delete t["background-repeat"],delete t.padding,(this.dataObject.Kind===v.TimeControl&&this.dataObject.Appearance!==li.Textbox||this.dataObject.Kind===v.DateControl&&this.dataObject.Appearance!==ai.Textbox)&&(delete t["border-bottom-right-radius"],delete t["border-top-right-radius"]),delete t.margin,delete t["border-color"],t.border="none",t!==this.currentStyleObject&&(Object.assign(this.el.nativeElement.style,t),this.currentStyleObject=t)}hasFont(t){return Object.prototype.hasOwnProperty.call(this.dataObject,_.FontName)||Object.prototype.hasOwnProperty.call(this.dataObject,_.Font)}useFontObject(t){return this.hasFont(t)&&String.isNullOrEmpty(t.FontName)&&null!=t.Font}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(E))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5DateInputStyle",""]],inputs:{dataObject:["bl5DateInputStyle","dataObject"]}}),n})(),dr=(()=>{class n{constructor(t,e){this.el=t,this.sp=e,this._currentStyleObject=null}ngOnInit(){this.controlSubscription=this.sp.subscriptionService.getControlSubjectById(this.dataObject.ID).subscribe({next:t=>{this.handleControlUpdate(t)}})}ngOnDestroy(){this.controlSubscription&&this.controlSubscription.unsubscribe()}handleControlUpdate(t){this.applyStyles()}applyStyles(){const t=this.useFontObject(this.dataObject)?this.sp.styleGeneratorService.generateStyleObjectWithFont(this.dataObject):this.sp.styleGeneratorService.generateStyleObject(this.dataObject);delete t["border-right-width"],delete t["border-left-width"],delete t["border-top-width"],delete t["border-bottom-width"],delete t["border-style"],delete t["border-width"],delete t["border-radius"],delete t["border-bottom-left-radius"],delete t["border-top-left-radius"],delete t.margin,delete t["border-color"],delete t["text-align"],delete t.padding,delete t.background,delete t["background-image"],delete t["background-size"],delete t["background-position"],delete t["background-repeat"],t.border="none",t!==this._currentStyleObject&&(Object.assign(this.el.nativeElement.style,t),this._currentStyleObject=t),this.el.nativeElement.children[0].style["line-height"]=window.getComputedStyle(this.el.nativeElement).height}hasFont(t){return Object.prototype.hasOwnProperty.call(this.dataObject,_.FontName)||Object.prototype.hasOwnProperty.call(this.dataObject,_.Font)}useFontObject(t){return this.hasFont(t)&&String.isNullOrEmpty(t.FontName)&&null!=t.Font}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(E))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5PickerButtonStyle",""]],inputs:{dataObject:["bl5PickerButtonStyle","dataObject"]}}),n})();const ds=["datePickerButton"],us=["inputField"];function hs(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",5,6),i.NdJ("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.toggleDatePicker(r))})("mousedown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.toggleDatePicker(r))}),i._UZ(2,"i",7),i.qZA()}if(2&n){const t=i.oxw();i.Gre("kmd-button ",t.dataObject.FontName,""),i.Q6J("bl5PickerButtonStyle",t.dataObject),i.uIk("id",t.buttonId)("aria-haspopup",!0)("aria-expanded",t.isExpanded)("data-component-id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex)}}function gs(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",8),i.NdJ("bl5ClickOutside",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.closeDatePicker())})("mousedown",function(r){return r.preventDefault()}),i.TgZ(1,"bl5-calendar-month-view",9),i.NdJ("viewDateChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setViewDate(r))})("selectedDateChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.pickDate(r))})("toggleCalendarView",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setCalendarView(r))})("closeDatePickerEvent",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.closeDatePicker())}),i.qZA(),i.TgZ(2,"bl5-calendar-year-view",10),i.NdJ("viewDateChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setViewDate(r))})("toggleCalendarView",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setCalendarView(r))})("closeDatePickerEvent",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.closeDatePicker())}),i.qZA(),i.TgZ(3,"bl5-calendar-decade-view",10),i.NdJ("viewDateChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setViewDate(r))})("toggleCalendarView",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setCalendarView(r))})("closeDatePickerEvent",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.closeDatePicker())}),i.qZA()()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.datePickerClasses)("ngStyle",t.calendarStyle)("bl5ClickOutsideContext",t.el.nativeElement.children[0]),i.xp6(1),i.Q6J("hidden",!t.isMonthView)("viewIsVisible",t.isMonthView)("viewDate",t.viewDate)("parentId",t.controlId)("componentId",t.controlId)("dateConstraints",t.dateConstraints)("datePickerSettings",t.datePickerSettings)("selectedDate",t.selectedDate)("headerStyle",t.headerStyle)("bodyStyle",t.bodyStyle),i.xp6(1),i.Q6J("hidden",!t.isYearView)("viewIsVisible",t.isYearView)("viewDate",t.viewDate)("parentId",t.controlId)("componentId",t.controlId)("dateConstraints",t.dateConstraints)("datePickerSettings",t.datePickerSettings)("selectedDate",t.selectedDate)("headerStyle",t.headerStyle)("bodyStyle",t.bodyStyle),i.xp6(1),i.Q6J("hidden",!t.isDecadeView)("viewIsVisible",t.isDecadeView)("viewDate",t.viewDate)("parentId",t.controlId)("componentId",t.controlId)("dateConstraints",t.dateConstraints)("datePickerSettings",t.datePickerSettings)("selectedDate",t.selectedDate)("headerStyle",t.headerStyle)("bodyStyle",t.bodyStyle)}}let ps=(()=>{class n extends bt{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.ngZone=a,this.dateChange=new Qt.x,this.includeTime=!1,this.datePickerClasses=["left"],this.calendarStyle={"font-size":"12px"},this.headerStyle={},this.bodyStyle={},this.calendarView=lt.Month,this.inputClasses=[],this.cssClassesWithoutFonts=[],this.datePickerIsVisible=!1,this.model="",this.isExpanded=!1,this.setMask=()=>{if(this.inputRef.nativeElement&&this.dataObject.ShowEditMask){const l=this.createMask();this.mask=(0,pe.ZP)(this.inputRef.nativeElement,l)}},this.createMask=()=>({mask:Date,pattern:this.maskShortDatePattern,placeholderChar:"_",lazy:!1,format:l=>L.ou.fromJSDate(l).toFormat(this.sanitizedToShortDateFormat),parse:l=>L.ou.fromFormat(l,this.sanitizedFromShortDateFormat)}),this.regenerateCurrentView=()=>{this.isMonthView&&this.monthViewChild.regenerate(this.viewDate),this.isYearView&&this.yearViewChild.regenerate(this.viewDate),this.isDecadeView&&this.decadeViewChild.regenerate(this.viewDate)}}get cultureInfo(){return this.sp.cultureInfoService.cultureInfo}get shortDatePattern(){return this.dataObject.ShowEditMask?this.cultureInfo.ShortDatePattern.replace(/([dD])+/g,"DD").replace(/([mM])+/g,"MM"):this.cultureInfo.ShortDatePattern}get sanitizedFromShortDateFormat(){return this.shortDatePattern.replace(/([dD])+/g,"d").replace(/([mM])+/g,"M").replace(/([yY])+/g,"y")}get sanitizedToShortDateFormat(){return this.shortDatePattern.replace(/([dD])/g,"d").replace(/([mM])/g,"M").replace(/([yY])/g,"y")}get maskShortDatePattern(){let t=this.defaultDateSeparator+this.cultureInfo.ShortDatePattern+this.defaultDateSeparator;return t=t.replace(new RegExp("([dD])+"),"d").replace(new RegExp("([mM])+"),"m").replace(new RegExp("([yY])+"),"Y"),t.substring(1,t.length-1)}get defaultDateSeparator(){return this.cultureInfo.DateSeparator}get datePatternParts(){return this.shortDatePattern.split(this.defaultDateSeparator)}get datePatternPartsCount(){return this.datePatternParts.length}get datePatternKeyArray(){return this.datePatternParts.map(t=>-1!==t.indexOf("D")||-1!==t.indexOf("d")?W.day:-1!==t.indexOf("M")?W.month:-1!==t.indexOf("Y")||-1!==t.indexOf("y")?W.year:void 0)}get fieldInfo(){const t=super.fieldInfo;return t&&(t.ValueType={...t.ValueType,...this.dateConstraints}),t}set fieldInfo(t){super.fieldInfo=t}get dateConstraints(){return this.dataObject.DateConstraints}get datePickerSettings(){return this.dataObject.DatePickerSettings}get selectedDate(){return this._selectedDate}set selectedDate(t){this._selectedDate=t}get isMonthView(){return this.calendarView===lt.Month}get isYearView(){return this.calendarView===lt.Year}get isDecadeView(){return this.calendarView===lt.Decade}get buttonId(){return`${this.controlId}_button`}get sizeAttribute(){return Math.max(this.watermarkTextLength,this.sp.cultureInfoService.cultureInfo.ShortDatePattern.length)}ngOnInit(){super.ngOnInit(),window.addEventListener("scroll",t=>this.onWindowScroll(t),!0),this.dateChangeSubscription=this.dateChange.subscribe({next:t=>{null==t?this.model="":"string"==typeof t?(this.model=t,this.getSeparatedDate(this.model).isComplete?this.onDateChanged(t):this.executeActions(this.dataObject.OnValueChanged)):(this.model=t.toFormat(this.sanitizedToShortDateFormat),this.selectedDate=t,this.onDateChanged(t)),this.cd.detectChanges()}}),!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject)}ngOnDestroy(){window.removeEventListener("scroll",t=>this.onWindowScroll(t),!0),this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.dateChangeSubscription&&this.dateChangeSubscription.unsubscribe(),super.ngOnDestroy()}ngAfterViewInit(){this.setMask()}onKeyUp(t){if(!t.ctrlKey&&!t.altKey&&!t.shiftKey){const e=t.target;if(!this.dataObject.ShowEditMask){const r=e.value.split("");if(r.isEmpty())this.dateChange.next("");else{let o;(m=o||(o={}))[m.Year=0]="Year",m[m.Month=1]="Month",m[m.Day=2]="Day";let a=o.Day;"d"===this.cultureInfo.ShortDatePattern[0].toLocaleLowerCase()&&(a=o.Day),"m"===this.cultureInfo.ShortDatePattern[0].toLocaleLowerCase()&&(a=o.Month),"y"===this.cultureInfo.ShortDatePattern[0].toLocaleLowerCase()&&(a=o.Year);let l="",c="",d="",u="";switch(a){case o.Day:r.forEach(m=>{if("0123456789".includes(m))switch(a){case o.Day:{const f=parseInt(d+m,10);""===d||f>0&&f<32&&d.length<2?(d+=m,u+=m):(u+=this.defaultDateSeparator+m,a=o.Month,c=m);break}case o.Month:{const f=parseInt(c+m,10);""===c||f>0&&f<13&&c.length<2?(u+=m,c+=m):(u+=this.defaultDateSeparator+m,a=o.Year,l=m);break}case o.Year:l.length<4&&(u+=m,l+=m)}else if(m===this.defaultDateSeparator)switch(a){case o.Day:a=o.Month,u+=this.defaultDateSeparator;break;case o.Month:a=o.Year,u+=this.defaultDateSeparator}});break;case o.Month:r.forEach(m=>{if("0123456789".includes(m))switch(a){case o.Month:{const f=parseInt(c+m,10);""===c||f>0&&f<13&&c.length<2?(u+=m,c+=m):(u+=this.defaultDateSeparator+m,a=o.Day,d=m);break}case o.Day:{const f=parseInt(d+m,10);""===d||f>0&&f<32&&d.length<2?(d+=m,u+=m):(u+=this.defaultDateSeparator+m,a=o.Year,l=m);break}case o.Year:l.length<4&&(u+=m,l+=m)}else if(m===this.defaultDateSeparator)switch(a){case o.Day:a=o.Year,u+=this.defaultDateSeparator;break;case o.Month:a=o.Day,u+=this.defaultDateSeparator}});break;case o.Year:r.forEach(m=>{if("0123456789".includes(m))switch(a){case o.Year:4===l.length?(u+=this.defaultDateSeparator+m,a=o.Month,c+=m):(l+=m,u+=m);break;case o.Month:{const f=parseInt(c+m,10);""===c||f>0&&f<13&&c.length<2?(u+=m,c+=m):(u+=this.defaultDateSeparator+m,a=o.Day,d=m);break}case o.Day:{const f=parseInt(d+m,10);(""===d||f>0&&f<32&&d.length<2)&&(u+=m,d+=m);break}}else if(m===this.defaultDateSeparator)switch(a){case o.Year:a=o.Month,u+=m;break;case o.Month:a=o.Day,u+=m}})}const h=this.fieldInfo;if(h&&(""===u||this.converter.isAllowed(u,h.ValueType)===S.Ok)&&(e.value.length!==this.model.length||!this.converter.isSame(u,this.sanitizedToShortDateFormat,h)))return e.value=u,void this.dateChange.next(u.isEmpty()?null:u);e.value=this.model}}}var m}onBlur(){this.datePickerIsVisible||this.finalizeDate()}focusInput(){this.ngZone.runOutsideAngular(()=>{this.ngZone.onStable.pipe((0,Ie.q)(1)).subscribe({next:()=>{this.inputRef.nativeElement.focus()}})})}handleControlUpdate(t){super.handleControlUpdate(t),this.hasDatePickerAppearance=t.Appearance!==ai.Textbox,this.calendarStyle.borderColor=this.sp.colorService.generateRGBAColor(t.DatePickerSettings.Border.Color),Object.assign(this.calendarStyle,this.sp.styleGeneratorService.generateBorderWidthStyle(t.DatePickerSettings.Border.Width)),Object.assign(this.headerStyle,this.sp.styleGeneratorService.generateBorderWidthStyle(t.DatePickerSettings.Header.Border.Width)),this.headerStyle.backgroundColor=this.sp.colorService.generateRGBAColor(t.DatePickerSettings.Header.BackgroundColor),this.headerStyle.borderColor=this.sp.colorService.generateRGBAColor(t.DatePickerSettings.Header.Border.Color),Object.assign(this.bodyStyle,this.sp.styleGeneratorService.generateBorderWidthStyle(t.DatePickerSettings.Body.Border.Width)),this.bodyStyle.backgroundColor=this.sp.colorService.generateRGBAColor(t.DatePickerSettings.Body.BackgroundColor),this.bodyStyle.borderColor=this.sp.colorService.generateRGBAColor(t.DatePickerSettings.Body.Border.Color)}finalizeDate(){const t=this.fieldInfo;if(t){const e=this.dataObject.ShowEditMask?this.mask.value:this.model;if(!e.isEmpty()){const{date:r,isComplete:o,isModified:a}=this.getDateObjectFromValue(e);return this.model=r?.isValid&&o?r.toFormat(this.sanitizedToShortDateFormat):"",o?this.applyDate(t,r||this.model):(this.flagFieldAsVisited(t),this.converter.setRangeCheckError(S.IncompleteDate,e,t),this.fieldInfo=t),a}this.model="",this.applyDate(t,this.model)}return!1}getCssClasses(){const t=super.getCssClasses();t.find(r=>"focus-outline"===r)&&!this.datePickerClasses.find(r=>"focus-outline"===r)&&this.datePickerClasses.push("focus-outline"),this.dataObject.ShowKeyboardFocus||this.inputClasses.push("focus-no-outline");const e=this.inputClasses.find(r=>r.startsWith("Font")&&!r.endsWith("-wm"));return e&&this.datePickerClasses.push(e),t}setCalendarView(t,e=!0){this.calendarView=t,e&&this.regenerateCurrentView()}setViewDate(t){this.viewDate=t,this.monthViewChild&&this.monthViewChild.regenerate(this.viewDate),this.yearViewChild&&this.yearViewChild.regenerate(this.viewDate),this.decadeViewChild&&this.decadeViewChild.regenerate(this.viewDate)}onDateChanged(t){this.pushChange(t)}toggleDatePicker(t){"keydown"===t.type&&-1===[b.Space,b.Spacebar].indexOf(t.key)||(!this.datePickerIsVisible&&this.dataObject.Enabled?(this.el.nativeElement.children[1].getBoundingClientRect().width>window.innerWidth-this.el.nativeElement.children[0].getBoundingClientRect().left&&(this.datePickerClasses[0]="right"),this.calendarStyle=Object.assign(this.calendarStyle,this.calculatePosition()),this.monthViewChild.viewIsVisible=!0,this.monthViewChild.focusActiveCell(),this.inputRef&&(this.calendarStyle["font-size"]=window.getComputedStyle(this.inputRef.nativeElement).fontSize),this.setViewDate(this.selectedDate?this.selectedDate:L.ou.now()),this.datePickerIsVisible=!0,this.isExpanded=!0):this.closeDatePicker(),this.activateField())}closeDatePicker(){this.datePickerIsVisible&&(this.datePickerIsVisible=!1,this.calendarStyle.left="-9000px",this.monthViewChild&&(this.monthViewChild.viewIsVisible=!1),this.yearViewChild&&(this.yearViewChild.viewIsVisible=!1),this.decadeViewChild&&(this.decadeViewChild.viewIsVisible=!1),this.setCalendarView(lt.Month,!1),this.isExpanded=!1,this.selectedDate&&this.setViewDate(this.selectedDate),this.focusInput())}pickDate(t){this.closeDatePicker(),this.dateChange.next(t)}getFontCssClasses(){return this.hasFontName(this.dataObject)&&this.inputClasses.push(this.dataObject.FontName),this.watermark&&(String.hasValue(this.watermark.FontName)?(this.inputClasses.push("watermark"),this.inputClasses.push(this.watermark.FontName+"-wm")):this.watermarkHasFontObject()&&this.inputClasses.push("watermark-font")),[]}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),r=e?e.Left+e.Right:0,o=Math.max(this.watermarkTextLength,this.sp.cultureInfoService.cultureInfo.ShortDatePattern.length);if(!this.sp.renderStateService.optimizeNoStylesheets){const l=this.determineOffsetWidth2(this.dataObject.FontName,"W",o);t.contentWidth=l+r}}}}onWindowResize(){this.closeDatePicker()}getKeyboardInsertStrategy(){return new lr(this.sp.injector,this)}getKeyboardEmptyStrategy(){return this.sp.renderStateService.disableAutoFocus?new ls(this.sp.injector,this):new lr(this.sp.injector,this)}getText(){const t=this.fieldInfo;return t?this.converter.getNormalAnswerAsString(t):""}clearText(){const t=this.fieldInfo;t&&this.dataObject.Enabled&&(this.converter.setEmptyAnswer(t),this.fieldInfo=t,this.executeActions(this.dataObject.OnValueChanged))}handleFieldUpdate(t){super.handleFieldUpdate(t),this.includeTime=t.ValueType.IncludeTime,this.datePickerClasses[0]=this.isDatePickerLeftAligned()?"left":"right",this.applyFonts();const e=this.converter.convertToDateTime(t);if(e&&e.isValid)this.model=e.toFormat(this.sanitizedToShortDateFormat),this.selectedDate=e,this.viewDate=e;else{if(!this.selectedDate){let r;if(this.datePickerSettings.InitialDatePickerValue)r=L.ou.fromMillis(this.datePickerSettings.InitialDatePickerValue);else{const o=L.ou.now(),a=this.dateConstraints.MinDate?L.ou.fromMillis(this.dateConstraints.MinDate):null,l=this.dateConstraints.MaxDate?L.ou.fromMillis(this.dateConstraints.MaxDate):null;r=null!=a&&o.startOf(W.day)<a.startOf(W.day)?a:null!=l&&o.startOf(W.day)>l.startOf(W.day)?l:o}this.viewDate=r,this.converter.dateIsEnabled(r,this.dateConstraints)&&(this.selectedDate=r)}this.model=t.DataValue.ValueAsString??""}}checkAutoEnter(t,e,r){return!!super.checkAutoEnter(t,e,r)&&L.ou.fromFormat(this.model,this.sanitizedFromShortDateFormat).isValid}isDatePickerLeftAligned(){return this.horizontalAlignment===X.Left&&[y.Auto,y.Pixels].indexOf(this.widthUnitType)>-1}applyFonts(){this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)&&this.inputClasses.push(this.sp.styleGeneratorService.getTextAlignmentClass(this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment))),this.cssClassesWithoutFonts=this.cssClass}calculatePosition(){const t=this.el.nativeElement.children[0].getBoundingClientRect(),e=this.el.nativeElement.children[1].getBoundingClientRect(),r="left"===this.datePickerClasses[0]?t.left:t.right,o=window.innerHeight-t.bottom>=e.height,a=window.innerHeight-(t.bottom+e.height),u=o||a>t.top-e.height?t.bottom:t.top-e.height;return delete this.calendarStyle.display,{left:"left"===this.datePickerClasses[0]?`${r}px`:`calc(${r}px - 20em)`,top:`${u}px`}}onWindowScroll(t){t.bubbles||(this.closeDatePicker(),this.cd.markForCheck())}getDateObjectFromValue(t){let e=null,r=!1,o=!0;if(null!=t){let a;const l=L.ou.fromFormat(t,this.cultureInfo.ShortDatePatternLuxon);if(l.isValid)e=l,a=Object.assign({},this.getSeparatedDate(t,this.datePatternPartsCount),{isComplete:!0,date:l}),a.separator!==this.defaultDateSeparator&&(r=!0);else if(t.length>6&&t.length<11&&null!==(a=this.getSeparatedDate(t,this.datePatternPartsCount)).date)e=a.date,a.separator!==this.defaultDateSeparator&&(r=!0);else if(t.length>4&&t.length<9){const c=this.createMask(),d=new HTMLInputElement;d.type="text";const u=(0,pe.ZP)(d,c);d.value=t,null!==(a=this.getSeparatedDate(u.value,this.datePatternPartsCount)).date?(e=a.date,r=!0):o=!1}else a=null,o=!1;if(a&&e&&e.isValid){const c=e.year;if(a.yearStr.length<4&&c>=0&&c<100){const d=c+(0===c?L.ou.now().year:c<50?2e3:1900);e=e.set({year:d}),r=!0}}}return{date:e,isComplete:o,isModified:r}}getSeparatedDate(t,e=3){const r=this.defaultDateSeparator;let a,l,o=!1;(l=t?.split(r)).length===e?a=r:(l=t?.split(" ")).length===e?a=" ":(l=t?.split("-")).length===e?a="-":(l=t?.split(". ")).length===e?a=". ":(l=t?.split(".")).length===e?a=".":(l=t?.split("/")).length===e?a="/":(l=[],a="");const c=this.datePatternKeyArray;let d=null,u="";if(l.length>0){const h=this.datePatternParts;let m=h.findIndex(G=>G.toLowerCase().startsWith("y"));-1===m&&(m=h.length-1),u=l[null!=l[m]?m:l.length-1],o=h[m].length===u.length,d=L.ou.fromObject(Object.assign({},...c.map((G,B)=>({[G]:parseInt(l[B],10)||0}))))}return{isComplete:o,separator:a,keys:c,yearStr:u,date:d}}pushChange(t){const e=this.fieldInfo;if(e){const r=e.DataValue.ValueAsString;this.converter.setDate(t,e),this.converter.isValid(t,e.ValueType)===S.Ok&&(this.converter.removeRangeCheckErrors(e),this.fieldInfo=e,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e)),this.switchToInsertMode(r,e)}}switchToInsertMode(t,e){e.DataValue.AnswerStatus===T.Response&&e.DataValue.ValueAsString!==t&&this.sp.navigationService.setInsertMode()}applyDate(t,e){this.flagFieldAsVisited(t),this.converter.setDate(e,t),this.converter.applyErrors(e,t)&&(this.fieldInfo=t)}flagFieldAsVisited(t){t.IsVisited=!0,this.sp.renderStateService.flagFieldNameAsVisited(t.FieldName)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Hi),i.Y36(i.R0b))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-date"]],viewQuery:function(t,e){if(1&t&&(i.Gf(ds,5),i.Gf(us,5),i.Gf(rr,5),i.Gf(or,5),i.Gf(sr,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.buttonRef=r.first),i.iGM(r=i.CRH())&&(e.inputRef=r.first),i.iGM(r=i.CRH())&&(e.monthViewChild=r.first),i.iGM(r=i.CRH())&&(e.yearViewChild=r.first),i.iGM(r=i.CRH())&&(e.decadeViewChild=r.first)}},hostBindings:function(t,e){1&t&&i.NdJ("resize",function(){return e.onWindowResize()},!1,i.Jf7)},features:[i.qOj],decls:7,vars:22,consts:[[3,"ngClass","ngStyle","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement",""],["type","text","autocapitalize","off","autocomplete","off",3,"bl5DateInputStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5NavigationToggle","bl5Outline","ngClass","ngModel","blur","keyup"],["inputField",""],[3,"ngIf"],["role","button","aria-label","Toggle Datepicker",3,"bl5PickerButtonStyle","keydown","mousedown"],["datePickerButton",""],[1,"icon-calendar-o"],[1,"kmd-datepicker-container",3,"ngClass","ngStyle","bl5ClickOutsideContext","bl5ClickOutside","mousedown"],["cdkTrapFocus","",3,"hidden","viewIsVisible","viewDate","parentId","componentId","dateConstraints","datePickerSettings","selectedDate","headerStyle","bodyStyle","viewDateChange","selectedDateChange","toggleCalendarView","closeDatePickerEvent"],["cdkTrapFocus","",3,"hidden","viewIsVisible","viewDate","parentId","componentId","dateConstraints","datePickerSettings","selectedDate","headerStyle","bodyStyle","viewDateChange","toggleCalendarView","closeDatePickerEvent"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(3,"input",2,3),i.NdJ("blur",function(){return e.onBlur()})("keyup",function(o){return e.onKeyUp(o)}),i.qZA(),i.YNc(5,hs,3,10,"ng-template",4),i.qZA(),i.YNc(6,gs,4,33,"ng-template",4)),2&t&&(i.Q6J("ngClass",e.cssClassesWithoutFonts)("ngStyle",e.style)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.xp6(3),i.ekj("no-picker",!e.hasDatePickerAppearance),i.Q6J("bl5DateInputStyle",e.dataObject)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5NavigationToggle",e.dataObject)("bl5Outline",e.dataObject)("ngClass",e.inputClasses)("ngModel",e.model),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("placeholder",e.watermarkText)("tabindex",e.tabIndex)("size",e.sizeAttribute),i.xp6(2),i.Q6J("ngIf",e.hasDatePickerAppearance),i.xp6(1),i.Q6J("ngIf",e.hasDatePickerAppearance))},dependencies:[Sn.mK,g.mk,g.O5,g.PC,V.Fj,V.JJ,V.On,N,rr,or,sr,z,Be,vt,tt,R,Se,ot,cr,dr],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], [_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%] > input.no-picker[_ngcontent-%COMP%]{background:transparent;border:none}[_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-weight:400!important;margin:auto .2em;text-align:center;text-decoration:none!important}[_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{cursor:default}[_nghost-%COMP%] > div.DateComponent.css-vars[_ngcontent-%COMP%]{box-sizing:content-box;grid-template-columns:minmax(min-content,1fr) min-content}[_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%]:not(.css-vars){display:inline-flex;position:relative}[_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%]:not(.css-vars) > input[_ngcontent-%COMP%], [_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%]:not(.css-vars) > input.no-picker[_ngcontent-%COMP%]{flex:1 0 auto;align-items:center;justify-content:center;width:calc(100% - 1.4em)}[_nghost-%COMP%] > div.DateComponent[_ngcontent-%COMP%]:not(.css-vars) > button[_ngcontent-%COMP%]{flex:0 0 1em;width:1em;align-items:center;justify-content:center}[_nghost-%COMP%]   input[type=date].input-not-visible[_ngcontent-%COMP%]{width:0!important;min-width:0!important;max-width:0!important;height:0!important;min-height:0!important;max-height:0!important;padding:0!important;margin:0!important;border:0!important;-webkit-min-logical-width:0!important;-webkit-min-logical-height:0!important;border-radius:0!important;opacity:0!important}.css-vars[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(var(--width) - 1em - .4em)}div.kmd-datepicker-container[_ngcontent-%COMP%]{display:inline-block;position:absolute;z-index:9999;-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);background-color:#fff;border:1px solid #000;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;box-shadow:5px 5px 10px 1px #00000040;left:-10000px;top:0}div.kmd-datepicker-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:999}"],changeDetection:0}),n})(),ze=(()=>{class n extends bt{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.startValueFieldsEvent=new i.vpe,this.initialize=()=>{const o=this.currentLookupState.lookupInformation?.KeyAssignments;if(Array.isPopulated(o)){const a=o.find(l=>"PRIMARY"===l.KeyName);if(a&&Array.isPopulated(a.StartValueFields)){const l=a.StartValueFields.filter(c=>!String.isNullOrEmpty(c.Value?.ValueAsString)).map(c=>c.Value.ValueAsString);Array.isPopulated(l)&&this.startValueFieldsEvent.emit(l.join(";"))}}}}ngOnInit(){super.ngOnInit(),this.subscribeToLookupStateReference()}ngOnDestroy(){this.lookupStateSubscription&&this.lookupStateSubscription.unsubscribe(),super.ngOnDestroy()}handleLookupStateUpdate(t){this.currentLookupState=t}subscribeToLookupStateReference(){const t=this.sp.subscriptionService.getLookupStateSubjectByFieldName(this.fieldName);t&&(this.lookupStateSubscription=t.subscribe({next:e=>{this.handleLookupStateUpdate(e)}}),this.initialize())}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(E),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ng-component"]],outputs:{startValueFieldsEvent:"startValueFieldsEvent"},features:[i.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2}),n})(),ms=(()=>{class n{constructor(t){this.sanitizer=t}transform(t,e){switch(e){case"html":return this.sanitizer.bypassSecurityTrustHtml(t);case"style":return this.sanitizer.bypassSecurityTrustStyle(t);case"script":return this.sanitizer.bypassSecurityTrustScript(t);case"url":return this.sanitizer.bypassSecurityTrustUrl(t);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(t);default:throw new Error(`Unable to bypass security for invalid type: ${e}`)}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(jt.H7,16))},n.\u0275pipe=i.Yjl({name:"safe",type:n,pure:!0}),n})();function fs(n,s){if(1&n&&i._UZ(0,"col"),2&n){const t=i.oxw().index,e=i.oxw(2);i.Udp("width",e.columnWidths[t],"em")}}function bs(n,s){if(1&n&&i._UZ(0,"col"),2&n){const t=i.oxw().$implicit;i.Udp("width",t,"px")}}function vs(n,s){if(1&n&&(i.YNc(0,fs,1,2,"ng-template",7),i.YNc(1,bs,1,2,"ng-template",null,8,i.W1O)),2&n){const t=s.index,e=i.MAs(2),r=i.oxw(2);i.Q6J("ngIf",r.columnWidths[t]>0)("ngIfElse",e)}}function ys(n,s){if(1&n&&i.YNc(0,vs,3,2,"ng-template",5),2&n){const t=i.oxw();i.Q6J("ngForOf",t.columnSizes)}}function Cs(n,s){if(1&n&&i._UZ(0,"col"),2&n){const t=i.oxw().index,e=i.oxw(2);i.Udp("width",e.columnWidths[t],"px")}}function Ss(n,s){if(1&n&&i._UZ(0,"col"),2&n){const t=i.oxw(3);i.Udp("width",100/t.columns.length,"%")}}function As(n,s){if(1&n&&(i.YNc(0,Cs,1,2,"ng-template",7),i.YNc(1,Ss,1,2,"ng-template",null,9,i.W1O)),2&n){const t=s.index,e=i.MAs(2),r=i.oxw(2);i.Q6J("ngIf",r.columnWidths[t]>0)("ngIfElse",e)}}function ws(n,s){if(1&n&&i.YNc(0,As,3,2,"ng-template",5),2&n){const t=i.oxw();i.Q6J("ngForOf",t.columns)}}function xs(n,s){1&n&&i._UZ(0,"col",10)}function _s(n,s){if(1&n&&i._UZ(0,"th",11),2&n){const t=s.$implicit;i.Q6J("ngClass",t.headerClasses)("ngStyle",t.headerStyle)("innerText",t.name)}}function ks(n,s){1&n&&i._UZ(0,"th",10)}function Os(n,s){if(1&n&&(i.TgZ(0,"td",13),i.ALo(1,"safe"),i.ALo(2,"safe"),i.ALo(3,"safe"),i.qZA()),2&n){const t=s.$implicit,e=s.index,r=i.oxw(),o=r.index,a=r.$implicit,l=i.oxw();i.Udp("border-bottom",i.xi3(1,7,l.getRowHorizontalGridLine(o),"style"))("background-color",i.xi3(2,10,l.getRowBackgroundColor(o),"style")),i.Q6J("ngClass",t.classes)("ngStyle",t.style)("innerHTML",i.xi3(3,13,a[e].Value,"html"),i.oJD)}}function Ts(n,s){1&n&&i._UZ(0,"td",10)}function Ps(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"tr",12),i.NdJ("mouseover",function(){const o=i.CHM(t).index,a=i.oxw();return i.KtG(a.onMouseOver(o))})("mouseout",function(){const o=i.CHM(t).index,a=i.oxw();return i.KtG(a.onMouseOut(o))})("click",function(){const r=i.CHM(t),o=r.$implicit,a=r.index,l=i.oxw();return i.KtG(l.selectRecord(o,a))}),i.YNc(1,Os,4,16,"ng-template",5),i.YNc(2,Ts,1,0,"td",3),i.qZA()}if(2&n){const t=s.index,e=i.oxw();i.ekj("selected",e.isSelected(t)),i.xp6(1),i.Q6J("ngForOf",e.columns),i.xp6(1),i.Q6J("ngIf",!e.useCssVars)}}function Ms(n,s){1&n&&(i.TgZ(0,"td",10),i._uU(1,"\xa0"),i.qZA())}function Is(n,s){if(1&n&&(i.TgZ(0,"tr",10),i.YNc(1,Ms,2,0,"ng-template",5),i._UZ(2,"td",10),i.qZA()),2&n){const t=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",t.columns)}}function Es(n,s){if(1&n&&i.YNc(0,Is,3,1,"tr",3),2&n){const t=i.oxw();i.Q6J("ngIf",!t.useCssVars)}}function Fs(n,s){1&n&&i._UZ(0,"tr",10)}let Ls=(()=>{class n extends ze{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.hoveredRowColorString="",this.selectedRowColorString="",this.evenRowColorString="",this.oddRowColorString="",this.horizontalGridLine="",this.returnField="",this.returnFieldIndex=-1,this.selectedRowIndex=-1,this.hoveredRowIndex=-1,this.columnWidths=[],this.columnSizes=[],this.columns=[],this.results=[],this.setStyles=()=>{this.hoveredRowColorString=this.sp.colorService.generateRGBAColor(this.dataObject.HoverRowColor),this.selectedRowColorString=this.sp.colorService.generateRGBAColor(this.dataObject.SelectedRowColor),this.evenRowColorString=this.sp.colorService.generateRGBAColor(this.dataObject.EvenRowColor),this.oddRowColorString=this.sp.colorService.generateRGBAColor(this.dataObject.OddRowColor);const a=[];String.isNullOrEmpty(this.dataObject.HeaderFontName)||a.push(this.dataObject.HeaderFontName);const l=this.sp.colorService.generateRGBAColor(this.dataObject.HeaderBackgroundColor),c=`solid ${this.dataObject.HeaderGridLineWidth}px ${this.sp.colorService.generateRGBAColor(this.dataObject.HeaderGridLineColor)}`,d=this.sp.styleGeneratorService.generatePaddingStyle(this.dataObject.HeaderTextMargin),u={};null!=this.dataObject.HeaderFont&&(u.fontSize=`${this.dataObject.HeaderFont.Size}px`,u.fontWeight=this.dataObject.HeaderFont.Bold?"bold":null,u.fontStyle=this.dataObject.HeaderFont.Italic?"italic":null,u.textDecoration=this.dataObject.HeaderFont.Underline?"underline":null,this.dataObject.HeaderFont.Color&&(u.color=this.sp.colorService.generateRGBAColor(this.dataObject.HeaderFont.Color)));const h=[];String.hasValue(this.dataObject.FontName)&&h.push(this.dataObject.FontName);const m=`solid ${this.dataObject.GridLineWidth}px ${this.sp.colorService.generateRGBAColor(this.dataObject.GridLineColor)}`,f=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),w=this.sp.styleGeneratorService.generatePaddingStyle(f),D={};null!=this.dataObject.Font&&(D.fontSize=`${this.dataObject.Font.Size}px`,D.fontWeight=this.dataObject.Font.Bold?"bold":null,D.fontStyle=this.dataObject.Font.Italic?"italic":null,D.textDecoration=this.dataObject.Font.Underline?"underline":null,this.dataObject.Font.Color&&(D.color=this.sp.colorService.generateRGBAColor(this.dataObject.Font.Color)));const G=[Z.Horizontal,Z.Both].includes(this.dataObject.HeaderGridLines),B=[Z.Vertical,Z.Both].includes(this.dataObject.HeaderGridLines),j=[Z.Horizontal,Z.Both].includes(this.dataObject.GridLines),H=[Z.Vertical,Z.Both].includes(this.dataObject.GridLines);this.horizontalGridLine=j?m:"",Array.isNullOrEmpty(this.columns)||this.columns.forEach((F,ct)=>{F.headerStyle={backgroundColor:l},B&&ct<this.columns.length-1&&(F.headerStyle.borderRight=c),G&&(F.headerStyle.borderBottom=c),Object.assign(F.headerStyle,d),F.headerClasses=a,Object.assign(F.headerStyle,u),F.style={},H&&ct<this.columns.length-1&&(F.style.borderRight=m),Object.assign(F.style,w),F.classes=h,Object.assign(F.style,D)}),this.useCssVars&&(this.cssStyle.display="table",this.cssStyle.overflowX="hidden")},this.setSelectedRecord=a=>{this.selectedRowIndex=a}}get isAuto(){return!!this.controlSize&&this.controlSize.width.unitType===y.Auto}get showHeaders(){return this.dataObject.ShowHeaders}get fillerRows(){return new Array(this.dataObject.MaximumResultCount-this.results.length)}ngOnInit(){if(super.ngOnInit(),!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&(this.sp.fontService.createFontSpan(this.dataObject),this.sp.fontService.createAltFontSpan(this.dataObject.HeaderFontName,this.dataObject.HeaderFont,this.controlId,"W","header")),this.dataObject.SearchOnCreate){const t=this.sp.subscriptionService.getLookupStateSubjectByFieldName(this.fieldName)?.getValue();t&&this.sp.lookupService.requestSearch(this.fieldName,t)}}ngOnDestroy(){this.sp.renderStateService.optimizeNoStylesheets||(this.sp.fontService.removeFontSpan(this.dataObject),this.sp.fontService.removeAltFontSpan(this.dataObject.HeaderFontName,"W","header")),super.ngOnDestroy()}handleControlUpdate(t){super.handleControlUpdate(t),this.setStyles()}getDimensions(){const t=super.getDimensions();return this.widthUnitType===y.Auto&&(this.characterWidth=this.el.nativeElement.getElementsByClassName("determine-font")[0].offsetWidth/10),this.heightUnitType===y.Auto&&(this.lineHeight=this.el.nativeElement.getElementsByClassName("determine-font")[0].offsetHeight),t}selectRecord(t,e){const r=t[this.returnFieldIndex];Object.prototype.hasOwnProperty.call(r,_.Value)&&(this.setSelectedRecord(e),this.pushChange(r.Value))}onMouseOver(t){this.hoveredRowIndex=t}onMouseOut(t){this.hoveredRowIndex===t&&(this.hoveredRowIndex=-1)}isSelected(t){return this.selectedRowIndex===t}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.height.unitType===y.Auto){const e=this.dataObject.HeaderTextMargin,c=e.Top+e.Bottom+([Z.Horizontal,Z.Both].includes(this.dataObject.HeaderGridLines)?this.dataObject.HeaderGridLineWidth:0)+this.sp.fontService.getAltOffsetHeightSpanElement(this.dataObject.HeaderFontName,this.controlId,"W","header"),d=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),u=d?d.Top+d.Bottom:0,m=[Z.Horizontal,Z.Both].includes(this.dataObject.GridLines)?this.dataObject.GridLineWidth:0;let f=0;this.hasFontName(this.dataObject)&&(f=this.sp.fontService.getOffsetHeightSpanElement(this.dataObject));const w=(u+f)*this.dataObject.MaximumResultCount+m*(this.dataObject.MaximumResultCount-1),D=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth);t.contentHeight=c+w+(D?D.Top+D.Bottom:0)}}}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto){const e=this.dataObject.HeaderTextMargin,r=e.Left+e.Right,a=this.dataObject.HeaderGridLines===Z.Vertical||this.dataObject.HeaderGridLines===Z.Both?this.dataObject.HeaderGridLineWidth:0;let l=0;l=this.sp.fontService.getAltOffsetWidthSpanElement(this.dataObject.HeaderFontName,this.controlId,"W","header")/10;const c=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),d=c.Left+c.Right,h=this.dataObject.GridLines===Z.Vertical||this.dataObject.GridLines===Z.Both?this.dataObject.GridLineWidth*this.columns.length:0;let m=0,f=0;this.columnSizes=[],this.columns.forEach(j=>{const H=l*j.name.length;m+=H;let F=0;switch(j.dataType){case I.Date:case I.Enumeration:case I.Integer:case I.Set:case I.Time:break;case I.Classification:F=10*this.characterWidth,f+=F;break;default:F=this.characterWidth*(j.maxLength>0?j.maxLength:40),f+=F}this.columnSizes.push(H>F?H:F)});const w=(r+a)*this.columns.length+m,D=(d+h)*this.columns.length+f,G=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth);t.contentWidth=(w>D?w:D)+(G.Left+G.Right)}}}getRowBackgroundColor(t){return this.selectedRowIndex===t?this.selectedRowColorString:this.hoveredRowIndex===t?this.hoveredRowColorString:t%2?this.evenRowColorString:this.oddRowColorString}getRowHorizontalGridLine(t){return!Array.isNullOrEmpty(this.results)&&t<this.dataObject.MaximumResultCount-1?this.horizontalGridLine:""}getColumnVerticalGridLine(t){}updateControlSize(){if(!this.useCssVars&&(super.updateControlSize(),this.controlSize instanceof ni)){const t=this.controlSize;t.gridLines=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLines),t.gridLineWidth=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineWidth)}}handleLookupStateUpdate(t){if(super.handleLookupStateUpdate(t),t){this.columns=[];const e=this.fieldInfo;if(e){const r=this.dataObject.ColumnWidths??"",o=r.isEmpty()?[]:r.split(","),a=!o.isEmpty()&&-1!==o.findIndex(F=>!F.isEmpty());this.columnWidths=a?o.map(F=>parseInt(F,10)||0):[];const l=this.dataObject.ColumnNames??"",c=l.isEmpty()?[]:l.split(","),d=!c.isEmpty()&&-1!==c.findIndex(F=>!F.isEmpty()),u=t.lookupInformation,h=t.dataSource,m=t.searchResult,f=null!=m,w=f?m.FieldNames:void 0,D=Array.isPopulated(w),G=f?m.DataRows:void 0,B=Array.isPopulated(G);let j="",H=0;if(null!=u){if(j=u.ReturnField,f){D&&(String.isNullOrEmpty(j)&&(j=w[0]),H=w.findIndex(gt=>gt===j));const F=u.FieldFilter,ct=!Array.isNullOrEmpty(F);this.columns=ct?F.map((gt,St)=>({name:this.getColumnName(gt,St,c,d),dataType:I.String,maxLength:0})):D?w.map((gt,St)=>({name:this.getColumnName(gt,St,c,d),dataType:I.String,maxLength:0})):[]}}else if(null!=h){j=h.ReturnField;const F=h.FieldDefs??[];F.isEmpty()?f&&D&&(String.isNullOrEmpty(j)&&(j=w[0]),w.forEach((yt,Dt)=>{F.push({Name:this.getColumnName(yt,Dt,c,d),ValueType:{DataType:I.String,MaxLength:0},RoleTexts:{}})}),H=w.findIndex(yt=>yt===j)):(String.isNullOrEmpty(j)&&(j=F[0].Name),H=F.findIndex(yt=>yt.Name===j));const ct=h.FieldFilter,St=Array.isPopulated(ct)?F.filter(yt=>ct.includes(yt.Name)):F,re=!Array.isNullOrEmpty(St);this.columns=re?St.map((yt,Dt)=>({name:this.getColumnName(yt.Name,Dt,c,d),dataType:yt.ValueType.DataType,maxLength:yt.ValueType.MaxLength})):[]}if(this.returnField=j,this.returnFieldIndex=H,B){const F=this.dataObject.MaximumResultCount;if(this.results=m&&F>0&&m.ResultCount>F?m.DataRows.slice(0,F):m?.DataRows??[],e.DataValue.AnswerStatus!==T.Empty){const ct=G.findIndex(gt=>gt[this.returnFieldIndex].Value===e.DataValue.ValueAsString);this.setSelectedRecord(ct>=0?ct:0)}else Array.isNullOrEmpty(this.results)||this.selectRecord(this.results[0],0)}else this.results=[],this.setSelectedRecord(-1);this.handleControlUpdate(this.dataObject),this.cd.markForCheck(),this.sp.eventService.controlVisibilityChanged.emit(this.dataObject)}}}applyStylesAndDimensions(){super.applyStylesAndDimensions(),this.useCssVars||(this.widthUnitType===y.Pixels||this.widthUnitType===y.Stretch)&&(this.style.overflow="hidden")}getColumnName(t,e,r,o){return o&&e<r.length&&!r[e].isEmpty()?r[e]:t}pushChange(t){const e=this.fieldInfo;e&&(this.converter.convertFromString(t,e),this.converter.isValid(t,e.ValueType)===S.Ok&&this.converter.removeRangeCheckErrors(e),this.fieldInfo=e,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(fi))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-datagrid"]],features:[i.qOj],decls:17,vars:20,consts:[["role","listbox",3,"ngStyle","ngClass","bl5Aria","bl5Outline","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],[4,"ngIf"],["class","filler",4,"ngIf"],[3,"hidden"],["ngFor","",3,"ngForOf"],[1,"determine-font",3,"id","ngClass"],[3,"ngIf","ngIfElse"],["pixelSize",""],["percentSize",""],[1,"filler"],[3,"ngClass","ngStyle","innerText"],[3,"mouseover","mouseout","click"],["role","option",3,"ngClass","ngStyle","innerHTML"]],template:function(t,e){1&t&&(i.TgZ(0,"table",0,1)(3,"colgroup"),i.YNc(4,ys,1,1,null,2),i.YNc(5,ws,1,1,null,2),i.YNc(6,xs,1,0,"col",3),i.qZA(),i.TgZ(7,"thead",4)(8,"tr"),i.YNc(9,_s,1,3,"ng-template",5),i.YNc(10,ks,1,0,"th",3),i.qZA()(),i.TgZ(11,"tbody"),i.YNc(12,Ps,3,4,"ng-template",5),i.YNc(13,Es,1,1,"ng-template",5),i.YNc(14,Fs,1,0,"tr",3),i.qZA()(),i.TgZ(15,"span",6),i._uU(16,"8888888888"),i.qZA()),2&t&&(i.Q6J("ngStyle",e.style)("ngClass",e.cssClass)("bl5Aria",e.ariaObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId)("tabindex",e.tabIndex),i.xp6(4),i.Q6J("ngIf",e.isAuto),i.xp6(1),i.Q6J("ngIf",!e.isAuto),i.xp6(1),i.Q6J("ngIf",!e.useCssVars),i.xp6(1),i.Q6J("hidden",!e.showHeaders),i.xp6(2),i.Q6J("ngForOf",e.columns),i.xp6(1),i.Q6J("ngIf",!e.useCssVars),i.xp6(2),i.Q6J("ngForOf",e.results),i.xp6(1),i.Q6J("ngForOf",e.fillerRows),i.xp6(1),i.Q6J("ngIf",!e.useCssVars),i.xp6(1),i.MGl("id","determine-font-",e.controlId,""),i.Q6J("ngClass",e.cssClass),i.uIk("aria-hidden",!0))},dependencies:[g.mk,g.sg,g.O5,g.PC,N,z,R,ot,ms],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();function Ds(n,s){1&n&&(i._UZ(0,"div",10),i.ALo(1,"safeHtml")),2&n&&i.Q6J("innerHTML",i.lcZ(1,1,s.$implicit.text),i.oJD)}function Vs(n,s){if(1&n&&(i.YNc(0,Ds,2,3,"ng-template",6),i._UZ(1,"div",7),i.ALo(2,"safeHtml"),i.TgZ(3,"div",8),i._UZ(4,"div",9),i.qZA()),2&n){const t=i.oxw(2);i.Q6J("ngForOf",t.optionList),i.xp6(1),i.Q6J("innerHTML",i.lcZ(2,4,t.displayText),i.oJD),i.uIk("aria-hidden",!t.displayText||void 0),i.xp6(3),i.Q6J("ngClass",t.optionsVisible?"arrow-up":"arrow-down")}}function js(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",11),i.NdJ("mousedown",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.handleMouseDown())})("mouseup",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.handleMouseUp())})("mouseover",function(){const o=i.CHM(t).index,a=i.oxw(2);return i.KtG(a.handleMouseOver(o))}),i.ALo(1,"safeHtml"),i.qZA()}if(2&n){const t=s.$implicit,e=s.index,r=i.oxw(2);i.ekj("selected",e===r.targetIndex),i.Q6J("ngStyle",r.optionItemStyle)("innerHTML",i.lcZ(1,5,t.text),i.oJD),i.uIk("id",r.optionListId+"_"+e)}}function Ns(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",2,3),i.NdJ("blur",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleBlur())})("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.toggleOptionsVisible())})("keypress",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKey(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKey(r))}),i.YNc(3,Vs,5,6,"ng-template",4),i.qZA(),i.TgZ(4,"ul",5),i.YNc(5,js,2,7,"ng-template",6),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("ngClass",t.cssClass)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex),i.xp6(3),i.Q6J("ngIf",t.hasOptions&&t.isExploded),i.xp6(1),i.Q6J("ngClass",t.optionListClass)("ngStyle",t.optionListStyle),i.uIk("id",t.optionListId),i.xp6(1),i.Q6J("ngForOf",t.optionList)}}function Rs(n,s){if(1&n&&(i.TgZ(0,"option",13),i._uU(1),i.qZA()),2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("selected",e.isSelected(t))("value",t),i.xp6(1),i.hij(" ",t," ")}}function Bs(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"select",12,3),i.NdJ("change",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onChange(r))}),i.YNc(3,Rs,2,3,"ng-template",6),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId),i.xp6(3),i.Q6J("ngForOf",t.keyNames)}}let zs=(()=>{class n extends ze{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.activeKey="",this.optionListInitialized=!1,this.keyNames=[],this.optionListClass=[],this.optionListStyle={},this.optionItemStyle={},this.targetIndex=0,this.handleMouseDown=()=>{},this.handleMouseUp=()=>{this.setValue(this.optionList[this.targetIndex])},this.onChange=o=>{const a=o.target;a.value!==this.activeKey&&this.sp.lookupService.setActiveKey(this.fieldName,a.value)},this.isSelected=o=>this.activeKey===o}get hasOptions(){return!Array.isNullOrEmpty(this.optionList)}get optionsVisible(){return this.ariaObject.AriaExpanded??!1}set optionsVisible(t){this.ariaObject.AriaExpanded=t}get isExploded(){return null!=this.dataObject&&this.dataObject.Visibility!==K.Collapsed}ngOnInit(){super.ngOnInit(),this.scrollSubscription=this.sp.eventService.scrollEvent.subscribe({next:t=>{this.onWindowScroll(t)}}),this.hideList()}ngOnDestroy(){this.scrollSubscription&&this.scrollSubscription.unsubscribe(),super.ngOnDestroy()}handleControlUpdate(t){super.handleControlUpdate(t),this.optionListId||(this.optionListId=`${this.controlId}_optionList`),this.setOptionsListClass()}toggleOptionsVisible(){this.initializeList(),this.optionsVisible=!this.optionsVisible,this.optionsVisible?(this.isIOS&&this.element&&document.activeElement!=this.element&&this.element.focus(),this.showList()):this.hideList()}handleBlur(){this.optionsVisible&&(this.hideList(),this.cd.markForCheck())}setValue(t){this.sp.lookupService.setActiveKey(this.fieldName,t.value),this.cd.markForCheck(),this.displayText=t.text,this.hideList()}handleMouseOver(t){this.targetIndex=t}handleKey(t){switch(t.key){case b.Enter:return t.preventDefault(),void this.handleEnterKey();case b.Up:case b.ArrowUp:return t.preventDefault(),void this.handleKeyUp();case b.Down:case b.ArrowDown:return t.preventDefault(),void this.handleKeyDown()}this.handleKeyEvent(t)}getText(){return this.activeKey??""}handleLookupStateUpdate(t){if(super.handleLookupStateUpdate(t),t){const e=t.dataSource?.Keys;if(Array.isPopulated(e))this.keyNames=e.map(r=>r.Name);else{const r=t.lookupInformation?.KeyAssignments;Array.isPopulated(r)&&(this.keyNames=r.map(o=>o.KeyName))}this.setOptions(),this.activeKey=t.activeKey,this.setSelectedOption()}}applyStylesAndDimensions(){if(super.applyStylesAndDimensions(),null!=this.dataObject.OptionSettings?.TextMargin){const t=this.dataObject.OptionSettings.TextMargin,e={Top:3,Right:22,Bottom:3,Left:4.4},o=this.sp.styleGeneratorService.generatePaddingStyle({Top:e.Top+t.Top,Right:e.Right+t.Right,Bottom:e.Bottom+t.Bottom,Left:e.Left+t.Left});Object.assign(this.optionItemStyle,o)}}setOptionsListClass(){if(this.optionListClass=[],this.useCssVars&&this.optionListClass.push("with-css-vars"),this.dataObject.FontName&&this.optionListClass.push(this.dataObject.FontName),this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)){const t=this.sp.styleGeneratorService.getTextAlignmentClass(this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment));t&&this.optionListClass.push(t)}}setOptions(){const t=[];if(this.keyNames)for(const e of this.keyNames)t.push({value:e,text:e,selected:!1});this.optionList=t}setSelectedOption(){if(this.optionList){const t=this.optionList.find(e=>e.value===this.activeKey);t&&(this.targetIndex=this.optionList.indexOf(t),this.optionList.forEach(e=>e.selected=!1),t.selected=!0,this.displayText=t.text)}}onWindowScroll(t){const e=t.target;e&&e.id!==this.controlId&&e.id!==this.optionListId&&(this.hideList(),this.cd.markForCheck())}hideList(){this.optionsVisible=!1,this.resetList()}resetList(){this.optionListStyle.visibility="hidden",delete this.optionListStyle.top,delete this.optionListStyle.bottom,delete this.optionListStyle.maxHeight,this.optionListStyle.left="-9999px"}initializeList(){}handleEnterKey(){this.optionsVisible&&0!==this.optionList.length&&this.setValue(this.optionList[this.targetIndex])}handleKeyUp(){this.targetIndex-=this.targetIndex>0?1:0,this.scrollToTargetIndex()}handleKeyDown(){this.targetIndex+=this.targetIndex<this.optionList.length-1?1:0,this.scrollToTargetIndex()}handleKeyEvent(t){if(t.key)for(let e=0,r=this.optionList.length;e<r;e++)if(0===this.optionList[e].text.toLowerCase().indexOf(t.key.toLowerCase())){this.targetIndex=e,this.scrollToTargetIndex();break}}showList(){this.button=this.el.nativeElement.getElementsByClassName("select-control")[0],this.ulist=this.el.nativeElement.getElementsByClassName("option-list")[0];const t=this.button.getBoundingClientRect(),e=this.ulist.getBoundingClientRect(),r=window.innerHeight,o=r-(t.bottom+e.height),a=t.top-e.height,l=o>=0||o>a;let c=t.width;this.resetList(),l?(this.optionListStyle.top=t.bottom+"px",o<0&&(this.optionListStyle.maxHeight=r-t.bottom+"px",c+=17)):(this.optionListStyle.bottom=r-t.top+"px",a<0&&(this.optionListStyle.maxHeight=t.top+"px",c+=17)),this.optionListStyle.width=c+"px",this.optionListStyle.left=t.right-c+"px",this.optionListStyle.visibility="visible",this.targetIndex>-1&&this.scrollToTargetIndex()}scrollToTargetIndex(){const t=document.getElementById(`${this.optionListId}_${this.targetIndex.toString()}`);t&&(this.ulist=this.el.nativeElement.getElementsByClassName("option-list")[0],this.ulist.scrollTop=t.offsetTop)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-datagrid-key-selector"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","combobox",1,"select-control",3,"ngStyle","ngClass","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","blur","click","keypress","keydown"],["autoWidthElement","","autoHeightElement",""],[3,"ngIf"],["role","listbox",1,"option-list",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],[1,"select-text",3,"innerHTML"],[1,"arrow-container"],[3,"ngClass"],[1,"determine-width",3,"innerHTML"],["role","option",1,"option-item",3,"ngStyle","innerHTML","mousedown","mouseup","mouseover"],[3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","change"],[3,"selected","value"]],template:function(t,e){if(1&t&&(i.YNc(0,Ns,6,15,"ng-template",null,0,i.W1O),i.YNc(2,Bs,4,9,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,g.PC,V.YN,V.Kr,N,z,vt,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{border:1px solid darkgrey;box-sizing:border-box;border-radius:0;padding-left:4px;padding-right:15px;position:relative;display:inline-block}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled){cursor:default}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.determine-width[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{width:100%;text-decoration:inherit}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.determine-width[_ngcontent-%COMP%]{visibility:hidden;height:0;margin:0;padding:0 28px 0 0}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%]{margin:0;padding:1.4px 3px 0 0}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 3px);right:5px}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-left:3px solid transparent;border-right:3px solid transparent}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%]{border-top:6px solid black}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-bottom:6px solid black}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars){background-color:transparent}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]{list-style-type:none;position:absolute;z-index:9999;-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);overflow-y:auto;margin-top:0!important;padding:0;background:inherit;background-color:#fff;border:1px solid lightgrey}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]{z-index:999;cursor:default;width:100%;padding:3px 17px 3px 4.4px;white-space:nowrap;font:inherit;color:inherit}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]:last-child{border-bottom:0}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]:hover{background-color:#90caf9}[_nghost-%COMP%]   ul.option-list.with-css-vars[_ngcontent-%COMP%]{background-color:var(--background)}[_nghost-%COMP%]   ul.option-list.with-css-vars[_ngcontent-%COMP%]   li.option-item.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   ul.option-list.with-css-vars[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]:hover{background-color:#90caf9}"],changeDetection:0}),n})();function Gs(n,s){}function Hs(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",5)(1,"nouislider",6),i.NdJ("ngModelChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleThumbChange(r))})("update",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleThumbUpdate())})("start",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleThumbStart())}),i.qZA()()}if(2&n){const t=i.oxw();i.xp6(1),i.Q6J("config",t.thumb.config)("min",t.thumb.range.min)("max",t.thumb.range.max)("step",t.thumb.step)("ngModel",t.thumb.value),i.uIk("disabled",t.thumb.enabled?void 0:"disabled")}}function Us(n,s){}function Ws(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw();return i.KtG(a.handleClick(r,o.cmd,o.modifier))}),i.O4$(),i.TgZ(1,"svg",8),i._UZ(2,"use",9),i.qZA()()}if(2&n){const t=i.oxw().$implicit;i.Q6J("ngClass",t.class),i.uIk("disabled",t.enabled?void 0:"disabled"),i.xp6(2),i.uIk("href",t.href,null,"xlink")}}function Ys(n,s){1&n&&i.YNc(0,Ws,3,3,"ng-template",3),2&n&&i.Q6J("ngIf",s.$implicit.shown)}let Ks=(()=>{class n extends ze{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.DEFAULT_THUMB={step:0,start:0,value:0,range:{min:0,max:0},enabled:!1,config:{behaviour:"drag-tap",direction:"ltr",orientation:"horizontal"}},this.showFirstAndLastPageButtons=!1,this.showPreviousAndNextPageButtons=!1,this.showPreviousAndNextRecordButtons=!1,this.buttonsEnabled=!1,this.enablePreviousRecordButton=!1,this.enableNextRecordButton=!1,this.enablePreviousPageButton=!1,this.enableNextPageButton=!1,this.enableFirstPageButton=!1,this.enableLastPageButton=!1,this.orientationStr=$[$.Horizontal].toLowerCase(),this.showThumb=!1,this.thumb=this.DEFAULT_THUMB,this.pageSize=0}get prevButtons(){return Array.isNullOrEmpty(this.buttons)?[]:this.buttons.slice(0,3)}get nextButtons(){return Array.isNullOrEmpty(this.buttons)?[]:this.buttons.slice(3)}handleControlUpdate(t){this.showFirstAndLastPageButtons=t.ShowFirstAndLastPageButtons,this.showPreviousAndNextPageButtons=t.ShowPreviousAndNextPageButtons,this.showPreviousAndNextRecordButtons=t.ShowPreviousAndNextRecordButtons,this.orientationStr=$[t.Orientation].toLowerCase(),this.buttons=this.createButtons(),super.handleControlUpdate(t),this.alignContent()}getCssClasses(){const t=super.getCssClasses();return t.push($[this.dataObject.Orientation].toLowerCase()),t.push(this.direction=this.sp.cultureInfoService.cultureInfo.IsRightToLeft?"rtl":"ltr"),t}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto)if(this.dataObject.Orientation===$.Horizontal){const e=24*this.buttons.filter(o=>o.shown).length;t.contentWidth=e+(this.showThumb?50:0)}else t.contentWidth=24}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.height.unitType===y.Auto)if(this.dataObject.Orientation===$.Vertical){const e=24*this.buttons.filter(o=>o.shown).length;t.contentHeight=e+(this.showThumb?50:0)}else t.contentHeight=24}}handleClick(t,e,r=1){const o=this.currentLookupState;if(o){const a=o.searchResult;let l=o.startIndex||a?.StartIndex||1;switch(l<1&&(l=1),e){case"f":case"first":l=1;break;case"l":case"last":l=a?.ResultCount??0-this.pageSize;break;case"p":case"page":l+=this.pageSize*r;break;case"r":case"record":l+=r}this.sp.lookupService.setStartIndex(this.fieldName,l)}}handleThumbChange(t){this.thumb&&(this.thumb.value=t)}handleThumbUpdate(){const t=this.currentLookupState;this.thumb&&this.thumb.value!==(t.startIndex||t.searchResult?.StartIndex||1)&&this.sp.lookupService.setStartIndex(this.fieldName,this.thumb.value)}handleThumbStart(){this.handleThumbUpdate()}handleLookupStateUpdate(t){if(super.handleLookupStateUpdate(t),null!=t){const e=t.searchResult;if(e){const r=e.ResultCount;if(r>0){const o=this.buttonsEnabled=r>e.DataRows.length,a=t.startIndex||e.StartIndex||1,l=this.pageSize=t.maximumResultCount;this.enableFirstPageButton=o&&a>1,this.enablePreviousPageButton=o&&a>1,this.enablePreviousRecordButton=o&&a>1,this.enableNextRecordButton=o&&a<=r,this.enableNextPageButton=o&&a+l<=r,this.enableLastPageButton=o&&a+l<=r,this.showThumb=o&&this.dataObject.ShowThumb,this.thumb=this.showThumb?{step:1,start:1,value:1,range:{min:1,max:r-l+1},enabled:!0,config:{behaviour:"drag-tap",direction:this.direction,orientation:this.orientationStr}}:this.DEFAULT_THUMB,this.buttons=this.createButtons(),this.cd.markForCheck()}}}}createButtons(){const t="btn",e=this.dataObject.Orientation,r=e?"top":"left",o=e?"bottom":"right",a="enabled",l="disabled";return[{shown:this.showFirstAndLastPageButtons,enabled:this.enableFirstPageButton,cmd:"f",href:`#skip-to-first-${this.orientationStr}`,class:[t,r,this.enableFirstPageButton?a:l]},{shown:this.showPreviousAndNextPageButtons,enabled:this.enablePreviousPageButton,cmd:"p",modifier:-1,href:`#previous-page-${this.orientationStr}`,class:[t,r,this.enablePreviousPageButton?a:l]},{shown:this.showPreviousAndNextRecordButtons,enabled:this.enablePreviousRecordButton,cmd:"r",modifier:-1,href:`#previous-record-${this.orientationStr}`,class:[t,r,this.enablePreviousRecordButton?a:l]},{shown:this.showPreviousAndNextRecordButtons,enabled:this.enableNextRecordButton,cmd:"r",modifier:1,href:`#next-record-${this.orientationStr}`,class:[t,o,this.enableNextRecordButton?a:l]},{shown:this.showPreviousAndNextPageButtons,enabled:this.enableNextPageButton,cmd:"p",modifier:1,href:`#next-page-${this.orientationStr}`,class:[t,o,this.enableNextPageButton?a:l]},{shown:this.showFirstAndLastPageButtons,enabled:this.enableLastPageButton,cmd:"l",href:`#skip-to-last-${this.orientationStr}`,class:[t,o,this.enableLastPageButton?a:l]}]}alignContent(){if(this.element){const t=["start","center","end"],e=this.element.style;e.width="inherit",e.height="inherit",e.display="flex",e.justifyContent=t[this.horizontalAlignment],e.alignItems=t[this.verticalAlignment]}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-datagrid-navigator"]],features:[i.qOj],decls:8,vars:11,consts:[[3,"ngStyle","ngClass","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["ngFor","",3,"ngForOf","ngForTemplate"],[3,"ngIf"],["button",""],[1,"navThumb"],[3,"config","min","max","step","ngModel","ngModelChange","update","start"],[3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg"],[0,"xlink","href",""]],template:function(t,e){if(1&t&&(i.TgZ(0,"div",0,1),i.YNc(3,Gs,0,0,"ng-template",2),i.YNc(4,Hs,2,6,"ng-template",3),i.YNc(5,Us,0,0,"ng-template",2),i.qZA(),i.YNc(6,Ys,1,1,"ng-template",null,4,i.W1O)),2&t){const r=i.MAs(7);i.Q6J("ngStyle",e.style)("ngClass",e.cssClass)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(3),i.Q6J("ngForOf",e.prevButtons)("ngForTemplate",r),i.xp6(1),i.Q6J("ngIf",e.showThumb),i.xp6(1),i.Q6J("ngForOf",e.nextButtons)("ngForTemplate",r)}},dependencies:[g.mk,g.sg,g.O5,g.PC,V.JJ,V.On,gi.pH,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();function Qs(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,10,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}function Js(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,9,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}let Zs=(()=>{class n extends ze{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}handleControlUpdate(t){super.handleControlUpdate(t),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.requestSearch():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled?(t.key===b.Space||t.key===b.Spacebar)&&this.requestSearch():t.preventDefault()}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}requestSearch(){this.sp.lookupService.requestSearch(this.fieldName,this.currentLookupState)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-datagrid-search-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,Qs,4,12,"ng-template",null,0,i.W1O),i.YNc(2,Js,4,11,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,vt,tt,R,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})(),qs=(()=>{class n extends ze{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.textChange=new Qt.x}ngOnInit(){super.ngOnInit(),this.textChangeSubscription=this.textChange.pipe((0,Ne.b)(O.KEYSTROKE_DEBOUNCE)).subscribe({next:t=>{null==t&&(t=""),this.textValue=t,this.sp.lookupService.setSearchTerm(this.fieldName,t),this.dataObject.AutoSearch&&this.sp.lookupService.requestSearch(this.fieldName,this.currentLookupState,!0)}})}ngOnDestroy(){this.textChangeSubscription&&this.textChangeSubscription.unsubscribe(),super.ngOnDestroy()}onChange(t){this.textChange.next(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-datagrid-searchbox"]],features:[i.qOj],decls:3,vars:13,consts:[["type","text","autocapitalize","off","autocomplete","off",3,"bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","ngClass","ngStyle","ngModel","ngModelChange"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("ngModelChange",function(o){return e.onChange(o)}),i.qZA()),2&t&&(i.Q6J("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("ngClass",e.cssClass)("ngStyle",e.style)("ngModel",e.textValue),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("placeholder",e.watermarkText)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,V.Fj,V.JJ,V.On,N,z,vt,tt,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();class ur extends ar{constructor(s,t){super(),this.injector=s,this.dropdownList=t,this.navigationService=this.injector.get(nt),this.renderStateService=this.injector.get(ut)}f2KeyPressed(){return[]}enterKeyPressed(s){return this.renderStateService.optimizeNoStylesheets||s.preventDefault(),this.dropdownList.isListOpen?(this.dropdownList.isMultiSelect?(this.dropdownList.closeDropDownList(),this.dropdownList.focusTextbox()):this.dropdownList.selectValue(),[]):(this.dropdownList.openDropDownList(),[])}leftKeyPressed(){return this.dropdownList.isMultiSelect||this.dropdownList.isListOpen||this.dropdownList.previousValue(),[]}rightKeyPressed(){return this.dropdownList.isMultiSelect||this.dropdownList.isListOpen||this.dropdownList.nextValue(),[]}upKeyPressed(){return(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.previousValue(),[]}downKeyPressed(){return(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.nextValue(),[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(s){return this.renderStateService.optimizeNoStylesheets||s.preventDefault(),(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.firstValue(),[]}endKeyPressed(s){return this.renderStateService.optimizeNoStylesheets||s.preventDefault(),(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.lastValue(),[]}tabKeyPressed(){return this.dropdownList.isListOpen&&this.dropdownList.closeDropDownList(),[]}shiftTabPressed(){return[]}escapePressed(s){return this.renderStateService.optimizeNoStylesheets||s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(s){return this.renderStateService.optimizeNoStylesheets||s.preventDefault(),this.dropdownList.isListOpen?this.dropdownList.isListOpen&&this.dropdownList.selectValue():this.dropdownList.openDropDownList(),[]}getName(){return"Dropdownlist insert"}}class hn{constructor(s,t){this.injector=s,this.dropdownList=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),this.dropdownList.isListOpen?(this.dropdownList.isMultiSelect?(this.dropdownList.closeDropDownList(),this.dropdownList.focusTextbox()):this.dropdownList.selectValue(),[]):x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return this.dropdownList.isMultiSelect||this.dropdownList.isListOpen||this.dropdownList.previousValue(),[]}rightKeyPressed(){return this.dropdownList.isMultiSelect||this.dropdownList.isListOpen||this.dropdownList.nextValue(),[]}upKeyPressed(){return(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.previousValue(),[]}downKeyPressed(){return(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.nextValue(),[]}pageUpKeyPressed(){return this.dropdownList.isListOpen&&this.dropdownList.previousPage(),[]}pageDownKeyPressed(){return this.dropdownList.isListOpen&&this.dropdownList.nextPage(),[]}homeKeyPressed(s){return s.preventDefault(),(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.firstValue(),[]}endKeyPressed(s){return s.preventDefault(),(!this.dropdownList.isMultiSelect||this.dropdownList.isListOpen)&&this.dropdownList.lastValue(),[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(s){return s.preventDefault(),this.dropdownList.isListOpen?this.dropdownList.isListOpen&&this.dropdownList.selectValue():this.dropdownList.openDropDownList(),[]}getName(){return"Dropdownlist insert"}}class hr extends hn{enterKeyPressed(s){return s.preventDefault(),this.dropdownList.isListOpen&&this.dropdownList.selectValue(),[]}leftKeyPressed(){return[]}rightKeyPressed(){return[]}getName(){return"Dropdownlist insert accessible"}}class gr extends rn{constructor(s,t){super(s),this.injector=s,this.dropdownList=t}spacePressed(s){return s.preventDefault(),this.dropdownList.openDropDownList(),x.createCommands([C.SetInsertMode],this.injector)}getName(){return"Dropdownlist navigation"}}var ci=(()=>{return(n=ci||(ci={}))[n.Never=0]="Never",n[n.IfTypeHasEmpty=1]="IfTypeHasEmpty",n[n.Always=2]="Always",ci;var n})(),Ae=(()=>{return(n=Ae||(Ae={}))[n.Code=0]="Code",n[n.Name=1]="Name",n[n.Text=2]="Text",Ae;var n})();const $s=["buttonElement"],Xs=["watermarkSizer"],ta=["listElement"],ea=["displayTextElement"];function ia(n,s){if(1&n&&(i._UZ(0,"div",14),i.ALo(1,"safeHtml")),2&n){const t=i.oxw(3);i.Q6J("innerHTML",i.lcZ(1,1,t.listItemSizerText),i.oJD)}}function na(n,s){if(1&n&&(i.TgZ(0,"div",8),i._UZ(1,"div",9),i.qZA(),i.YNc(2,ia,2,3,"ng-template",4),i._UZ(3,"div",10,11),i.ALo(5,"safeHtml"),i._UZ(6,"div",12,13),i.ALo(8,"safeHtml")),2&n){const t=i.oxw(2);i.xp6(1),i.Q6J("ngClass",t.optionsVisible?"arrow-up":"arrow-down"),i.xp6(1),i.Q6J("ngIf",t.listItemSizerText),i.xp6(1),i.Gre("watermark-sizer reset-font ",t.watermarkFont,""),i.Q6J("innerHTML",i.lcZ(5,12,t.watermarkText),i.oJD),i.xp6(3),i.Gre("select-text reset-font ",t.watermarkFont,""),i.Q6J("ngStyle",t.watermarkFontStyleObj)("innerHTML",i.lcZ(8,14,t.displayText||t.watermarkText),i.oJD),i.uIk("aria-hidden",!t.displayText||void 0)}}function ra(n,s){if(1&n&&i._UZ(0,"input",18),2&n){const t=i.oxw(),e=t.$implicit,r=t.index,o=i.oxw(2);i.Q6J("checked",e.selected),i.uIk("id",o.getOptionCheckboxId(r))}}const oa=function(n,s){return{selected:n,targeted:s}},sa=function(){return{}};function aa(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",15,16),i.NdJ("mouseover",function(r){const a=i.CHM(t).index,l=i.oxw(2);return i.KtG(l.handleOptionMouseOver(r,a))})("click",function(r){const a=i.CHM(t).$implicit,l=i.MAs(1),c=i.oxw(2);return i.KtG(c.handleOptionClick(a,r,l))}),i.YNc(2,ra,1,2,"ng-template",4),i._UZ(3,"span",17),i.ALo(4,"safeHtml"),i.qZA()}if(2&n){const t=s.$implicit,e=s.index,r=i.oxw(2);i.Q6J("ngClass",i.WLB(14,oa,t.selected,r.targetIndex===e))("ngStyle",r.optionItemStyle),i.uIk("id",r.getOptionId(e))("tabindex",r.optionTabIndex)("data-component-id",r.controlId),i.xp6(2),i.Q6J("ngIf",r.isMultiSelect),i.xp6(1),i.Gre("option-label ",!t.value&&t.text?r.watermarkFont:"",""),i.Q6J("ngStyle",t.value||t.text!==r.watermarkText?i.DdM(17,sa):r.watermarkFontStyleObj)("innerHTML",i.lcZ(4,12,t.text),i.oJD),i.uIk("id",r.getOptionLabelId(e))}}function la(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleButtonClick(r))})("keypress",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleButtonKeyPress(r))}),i.YNc(4,na,9,16,"ng-template",4),i.qZA(),i.TgZ(5,"ul",5,6),i.NdJ("bl5ClickOutside",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onClickOutside())}),i.YNc(7,aa,5,18,"ng-template",7),i.qZA()}if(2&n){const t=i.MAs(1),e=i.oxw();i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("tabindex",e.tabIndex),i.xp6(4),i.Q6J("ngIf",e.hasOptions),i.xp6(1),i.Q6J("ngClass",e.optionListClass)("ngStyle",e.optionListStyle)("bl5ClickOutsideContext",t),i.uIk("id",e.optionListId),i.xp6(2),i.Q6J("ngForOf",e.optionList)}}function ca(n,s){if(1&n&&(i._UZ(0,"option",21),i.ALo(1,"safeHtml")),2&n){const t=s.$implicit;i.Q6J("ngValue",t.value)("innerHTML",i.lcZ(1,3,t.text),i.oJD)("selected",t.selected)}}function da(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"select",19,20),i.NdJ("ngModelChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleOptionClick(o.getOptionItemByValue(r)))}),i.YNc(3,ca,2,5,"ng-template",7),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("ngModel",t.selectedValue),i.uIk("id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex),i.xp6(3),i.Q6J("ngForOf",t.optionList)}}let ua=(()=>{class n extends bt{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.enumConverter=o,this.setConverter=a,this.onWindowScrollListener=l=>this.onWindowScroll(l),this.onListScrollListener=l=>this.onListScroll(l),this.dataType=I.Enumeration,this.selectedItemHeight=0,this.debouncedHandleKeyEvent=new i.vpe,this.keyEvent="",this.maxLength=null,this.optionListClass=[],this.optionListStyle={},this.optionItemStyle={},this.targetIndex=-1,this.containsRichText=!0}get converter(){return this.isMultiSelect?this.setConverter:this.enumConverter}get buttonElement(){return this.buttonElementRef?.nativeElement||null}get watermarkSizer(){return this.watermarkSizerRef?.nativeElement||null}get listElement(){return this.listElementRef?.nativeElement||null}get selectionSource(){return this.dataObject?.SelectionSource??Ae.Code}get valueDataType(){return this.dataType}get optionListId(){return`${this.controlId}_optionlist`}get hasOptions(){return!Array.isNullOrEmpty(this.optionList)}get selectedValue(){if(this.hasOptions){const t=this.optionList.find(e=>e.selected);if(t&&t.value)return t.value}return""}get optionsVisible(){return this.ariaObject.AriaExpanded??!1}set optionsVisible(t){this.ariaObject.AriaExpanded=t}get optionTabIndex(){return this.optionsVisible?0:-1}get isMultiSelect(){return this.dataType===I.Set}get isListOpen(){return this.optionsVisible}ngOnInit(){super.ngOnInit(),this.debouncedHandleKeyEventSubscription=this.debouncedHandleKeyEvent.pipe((0,Ki.b)(t=>this.keyEvent+=t.key),(0,Ne.b)(300)).subscribe({next:()=>{this.handleKeyEvent(this.keyEvent),this.keyEvent=""}})}ngAfterViewInit(){super.ngAfterViewInit(),window.addEventListener("scroll",this.onWindowScrollListener,!0),this.listElement?.addEventListener("scroll",this.onListScrollListener),this.hideList()}ngOnDestroy(){window.removeEventListener("scroll",this.onWindowScrollListener),this.listElement?.removeEventListener("scroll",this.onListScrollListener),this.debouncedHandleKeyEventSubscription&&this.debouncedHandleKeyEventSubscription.unsubscribe(),super.ngOnDestroy()}handleFieldUpdate(t){super.handleFieldUpdate(t),(t.UpdateUI??!0)&&(this.setOptions(t),this.setDisplayText(t)),delete t.UpdateUI}handleControlUpdate(t){super.handleControlUpdate(t),this.setOptionsListClass(),this.setOptions(this.fieldInfo),this.useCssVars&&(this.cssStyle.borderColor="darkgrey",this.cssStyle.borderStyle="solid",this.cssStyle.borderWidth="1px",this.widthUnitType===y.Auto&&(this.listItemSizerText=this.dataObject.RichTextItems.map(e=>e.Text.SimpleText??"").reduce((e,r)=>e.length<r.length?r:e,"")))}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto&&!this.sp.renderStateService.optimizeNoStylesheets&&this.listElement&&this.watermarkSizer){const e=[].slice.call(this.listElement.children).concat(this.watermarkSizer).map(r=>r.offsetWidth);t.contentWidth=Math.max(...e)}}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.height.unitType===y.Auto&&!this.sp.renderStateService.optimizeNoStylesheets&&this.watermarkSizer){const e=this.dataObject.OptionSettings?.TextMargin,r=(e?.Top||0)+(e?.Bottom||0);if(this.isMultiSelect){const o=this.autoHeightElement?this.autoHeightElement.getBoundingClientRect().height-r:0;t.contentHeight=Math.max(Math.ceil(o),this.watermarkSizer.offsetHeight)}else if(this.listElement){const o=[].slice.call(this.listElement.children).concat(this.watermarkSizer).map(a=>a.offsetHeight-r);t.contentHeight=Math.max(...o,this.selectedItemHeight)}}}}onWindowResize(){this.hideList()}onWindowMousedown(t){this.hideListOnExternalEvent(t)}onWindowTouchMove(t){this.hideListOnExternalEvent(t)}onWindowTouchEnd(t){this.hideListOnExternalEvent(t)}handleButtonClick(t){6!==t.mozInputSource&&(this.isIOS&&this.element&&document.activeElement!=this.element&&this.element.focus(),this.hasOptions&&(this.optionsVisible=!this.optionsVisible,this.optionsVisible?(this.activateField(),this.showList(),this.isIOS&&!this.cd.destroyed&&this.cd.detectChanges()):this.hideList()))}handleButtonKeyPress(t){[b.Enter,b.ArrowUp,b.Up,b.ArrowDown,b.Down].includes(t.key)||this.debouncedHandleKeyEvent.emit(t)}handleOptionMouseOver(t,e){this.targetIndex=e}handleListKeyPress(){}handleOptionClick(t,e,r){if(e&&(e.cancelBubble=!0,e.stopPropagation()),!t)return void this.hideList();if(this.selectedItemHeight=0,r){const a=this.dataObject.OptionSettings?.TextMargin;this.selectedItemHeight=r.offsetHeight-((a?.Top||0)+(a?.Bottom||0))}const o=this.fieldInfo;o&&(""===t.value?this.converter.setEmptyAnswer(o):o.SpecialAnswers&&-1!==o.SpecialAnswers.indexOf(t.value)?this.converter.setSpecialAnswer(t.value,o):this.isMultiSelect?!this.setConverter.toggleCategory(o,+t.value)&&e&&e.preventDefault():this.enumConverter.setSelected(o,+t.value),this.fieldInfo=o,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,o)&&this.hideList())}onClickOutside(){this.hideList()}getOptionId(t){return`${this.optionListId}_${t}`}getOptionCheckboxId(t){return`${this.getOptionId(t)}_checkbox`}getOptionLabelId(t){return`${this.getOptionId(t)}_label`}getOptionItemByValue(t){return this.optionList.find(e=>e.value===t)}getFontCssClasses(){return super.getFontCssClasses(!0)}getKeyboardInsertStrategy(){return this.sp.renderStateService.disableAutoFocus?new hr(this.sp.injector,this):new hn(this.sp.injector,this)}getKeyboardNavigationStrategy(){return new gr(this.sp.injector,this)}getKeyboardEmptyStrategy(){return new ur(this.sp.injector,this)}selectValue(){this.handleOptionClick(this.optionList[this.targetIndex]),this.sp.focusService.focusElementId(this.controlId),this.cd.markForCheck()}previousPage(){const t=this.getPageSize();this.targetIndex=Math.max(this.targetIndex-t,0),this.focusTargetIndex(),this.cd.markForCheck()}nextPage(){const t=this.getPageSize();this.targetIndex=Math.min(this.targetIndex+t,this.optionList.length-1),this.focusTargetIndex(),this.cd.markForCheck()}previousValue(){this.targetIndex-=this.targetIndex>0?1:0,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}nextValue(){this.targetIndex+=this.targetIndex<this.optionList.length-1?1:0,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}firstValue(){this.targetIndex=0,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}lastValue(){this.targetIndex=this.optionList.length-1,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}openDropDownList(){this.showList(),this.cd.markForCheck()}closeDropDownList(){this.hideList(),this.cd.markForCheck()}focusTextbox(){this.sp.focusService.focusElementId(this.controlId)}getText(){return this.displayText||this.watermarkText||""}clearText(){const t=this.fieldInfo;t&&this.dataObject.Enabled&&(this.converter.setEmptyAnswer(t),this.fieldInfo=t,this.executeActions(this.dataObject.OnValueChanged))}resetList(){this.optionListStyle.visibility="hidden",delete this.optionListStyle.maxHeight,delete this.optionListStyle.width,this.optionListStyle.top="-9999px",this.optionListStyle.left="-9999px",this.optionListStyle.overflowY="scroll"}applyStylesAndDimensions(){if(super.applyStylesAndDimensions(),this.applyOptionListStyle(),null!=this.dataObject.OptionSettings?.TextMargin){const t=this.dataObject.OptionSettings.TextMargin,e={Top:3,Right:22,Bottom:3,Left:4.4},o=this.sp.styleGeneratorService.generatePaddingStyle({Top:e.Top+t.Top,Right:e.Right+t.Right,Bottom:e.Bottom+t.Bottom,Left:e.Left+t.Left});Object.assign(this.optionItemStyle,o)}}setOptionsListClass(){if(this.optionListClass=[],String.hasValue(this.dataObject.FontName)&&this.optionListClass.push(this.dataObject.FontName),this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment),e=this.sp.styleGeneratorService.getTextAlignmentClass(t);this.optionListClass.push(e)}this.controlSize&&(this.optionListClass.push(`width-${y[this.controlSize.width.unitType].toLowerCase()}`),this.optionListClass.push(`height-${y[this.controlSize.height.unitType].toLowerCase()}`))}setOptionsListBackgroundStyle(){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Background);if(t){const e=this.sp.styleGeneratorService.generateBackgroundStyle(t);"transparent"===e.background&&(e.background="#fff"),Object.assign(this.optionListStyle,e)}}setOptionsListFontStyle(){this.useFontObject(this.dataObject)&&Object.assign(this.optionListStyle,this.sp.styleGeneratorService.generateFontStyle(this.dataObject.Font))}setOptions(t){if(t){const e=this.dataObject.ExcludeSpecialAnswers,r=this.dataObject.IncludeEmptyItem;this.dataType=t.ValueType.DataType,this.isMultiSelect&&this.setMaxLength(t.ValueType);const o=t.DataValue.AnswerStatus===T.Response&&!String.isNullOrEmpty(t.DataValue.ValueAsString),a=t.DataValue.AnswerStatus===T.SpecialAnswer&&!String.isNullOrEmpty(t.DataValue.SpecialAnswer),l=t.DataValue.AnswerStatus===T.Empty,c=o||a,d=[],u=e?this.dataObject.RichTextItems.filter(f=>t?.ValueType?.Categories?.find(w=>w.Code===parseInt(f.Name,0))):this.dataObject.RichTextItems,h=!Array.isNullOrEmpty(u),m=!!h&&-1!==u.findIndex(f=>f.Name.isEmpty());((!this.isMultiSelect&&t.IsRequired?r===ci.Always:r!==ci.Never)||this.sp.renderStateService.optimizeNoStylesheets&&l||0===this.watermarkTextLength&&!(h&&m))&&d.push({value:"",text:this.watermarkText||this.getSystemText(dt.txtSelect),selected:l}),h&&u.map(f=>{if(t&&null!=f&&null!=f.Name&&null!=f.Text){const w=f.Text.TextElements,D=f.Text.SimpleText,G=!String.isNullOrEmpty(D);if(G||!Array.isNullOrEmpty(w)){const B=f.Name,j=G?D:this.sp.richTextConverter.convertToHTML(f.Text,this.hasAutoWidth);if(null!=j&&null!=B){let H=!1;c?o?H=this.isMultiSelect?-1!==this.setConverter.getSelected(t).indexOf(B):t.DataValue.ValueAsString===B:a&&(H=t.DataValue.SpecialAnswer===B):H=l&&""===B,d.push({value:B,text:j,selected:H})}}}}),this.optionList=d}}setDisplayText(t){let e=!0;if(!Array.isNullOrEmpty(this.optionList)){if(t.DataValue.AnswerStatus===T.Empty&&0===this.watermarkTextLength){const r=this.optionList.findIndex(o=>""===o.value);-1!==r&&(this.displayText=this.optionList[r].text,e=!1)}else if(this.isMultiSelect){const r=this.setConverter.getSpecialAnswerAsString(t);if(String.isNullOrEmpty(r)){const o=this.setConverter.getNormalAnswerAsString(t);if(!String.isNullOrEmpty(o)){const a=this.setConverter.getSelected(t);switch(this.selectionSource){case Ae.Code:this.displayText=o;break;case Ae.Name:{const c=(t.ValueType.Categories??[]).filter(d=>-1!==a.indexOf(d.Code.toString()));c.isEmpty()||(this.displayText=[...c].sort((d,u)=>a.indexOf(d.Code.toString())-a.indexOf(u.Code.toString())).map(d=>d.Name).join("-"));break}case Ae.Text:{const l=this.dataObject.RichTextItems.filter(c=>-1!==a.indexOf(c.Name));this.displayText=[...l].sort((c,d)=>a.indexOf(c.Name)-a.indexOf(d.Name)).map(c=>this.sp.richTextConverter.convertToPlainText(c.Text)).join(O.VALUE_SEPARATOR);break}}String.isNullOrEmpty(this.displayText)||(e=!1)}}else e=!this.setSingleOption(r)}else{const r=this.converter.getAnswerAsString(t);String.isNullOrEmpty(r)||(e=!this.setSingleOption(r))}if(this.clearWatermarkFont(),e?(this.displayText=this.watermarkText,this.setWatermarkFont()):this.watermarkFont=this.dataObject.FontName?this.dataObject.FontName:"",this.displayTextElementRef&&this.displayTextElementRef.nativeElement&&t.DataValue.AnswerStatus!=T.Empty){const r=this.displayTextElementRef.nativeElement;setTimeout(()=>{const o=getComputedStyle(this.buttonElement);Math.abs(this.buttonElement.clientHeight-parseFloat(o.marginTop)-parseFloat(o.marginBottom)-parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-r.offsetHeight)>1&&this.sp.eventService.controlVisibilityChanged.emit()})}}}setSingleOption(t){const e=this.optionList.findIndex(r=>r.value===t);if(e>-1){const r=this.optionList[e];return r&&(this.targetIndex=e,this.optionList.forEach(o=>o.selected=!1),r.selected=!0,this.displayText=r.text),!0}return!1}setMaxLength(t){const e=t.Cardinality??0,r=t.Categories;if(Array.isPopulated(r)){let o;o=0===e?r.map(a=>a.Code).join(O.VALUE_SEPARATOR).length:[...r].sort((l,c)=>c.Code.toString().length-l.Code.toString().length).slice(0,e).map(l=>l.Code).join(O.VALUE_SEPARATOR).length,this.maxLength=o}}setWatermarkFont(){this.watermark&&(String.hasValue(this.watermark.FontName)?this.watermarkFont=this.watermark.FontName:this.watermark.Font&&(this.watermarkFontStyleObj=this.sp.styleGeneratorService.generateFontStyle(this.watermark.Font)))}hideList(){this.optionsVisible=!1,this.resetList()}applyOptionListStyle(){this.style&&(String.isNullOrEmpty(this.style.fontFamily)?delete this.optionListStyle.fontFamily:this.optionListStyle.fontFamily=this.style.fontFamily,String.isNullOrEmpty(this.style.fontSize)?delete this.optionListStyle.fontSize:this.optionListStyle.fontSize=this.style.fontSize,String.isNullOrEmpty(this.style.fontWeight)?delete this.optionListStyle.fontWeight:this.optionListStyle.fontWeight=this.style.fontWeight,String.isNullOrEmpty(this.style.fontStyle)?delete this.optionListStyle.fontStyle:this.optionListStyle.fontStyle=this.style.fontStyle,String.isNullOrEmpty(this.style.color)?delete this.optionListStyle.color:this.optionListStyle.color=this.style.color,String.isNullOrEmpty(this.style.textAlign)?delete this.optionListStyle.textAlign:this.optionListStyle.textAlign=this.style.textAlign),this.setOptionsListBackgroundStyle(),this.setOptionsListFontStyle(),this.isMultiSelect||this.hideList()}showList(){if(this.resetList(),this.isIOS&&!this.cd.destroyed&&this.cd.detectChanges(),!this.buttonElement||!this.listElement)return;const e=document.getElementsByClassName("rootControl")[0].getBoundingClientRect(),r=this.buttonElement.getBoundingClientRect(),o=this.listElement.getBoundingClientRect(),a=o.top+9999,l=o.left+9999,c=window.innerHeight,d=r.top,u=c-r.bottom,h=e.height-r.bottom,m=h<u,f=o.height,w=d>=f,D=(m?h:u)>=f;let j,H,F;D||u>d?(j=r.bottom,F=D?void 0:m?h:u):(j=w?r.top-f:0,F=w?void 0:d),H=r.right-r.width,H=H>0?H:0,this.optionListStyle.overflowY=D||w?"hidden":"scroll",this.optionListStyle.width=this.buttonElement.offsetWidth+13*+this.isMultiSelect+"px",this.optionListStyle.visibility="visible",this.isIOS&&(d>c?j=Math.abs(a):j+=Math.abs(a),H+=Math.abs(l),(!F||F>c)&&(F=c)),this.optionListStyle.top=j+"px",this.optionListStyle.left=H+"px",this.optionListStyle.maxHeight=F?F+"px":void 0;const ct=this.fieldInfo;if(ct&&ct.DataValue.AnswerStatus===T.Response){const gt=this.optionList.findIndex(St=>St.value===ct.DataValue.ValueAsString);this.targetIndex=gt>-1?gt:-1}this.cd.detectChanges(),this.targetIndex>-1&&this.focusTargetIndex(),this.optionsVisible=!0}focusTargetIndex(){this.targetIndex>-1&&this.sp.focusService.focusElementId(`${this.controlId}_optionlist_${this.optionList[this.targetIndex].value.toString()}`)}handleKeyEvent(t){if(t){const e=this.optionList.findIndex(o=>o.text.toLowerCase().startsWith(t.toLowerCase())),r=this.optionList.findIndex(o=>o.text.toLowerCase().startsWith(t.toLowerCase())&&this.optionList.indexOf(o)>this.targetIndex);this.targetIndex=-1===r&&e>-1?e:r,this.focusTargetIndex(),this.cd.detectChanges(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex])}}getPageSize(){return Math.round(this.listElement.clientHeight/Math.max(1,this.buttonElement.clientHeight))}clearWatermarkFont(){this.watermarkFont="",this.watermarkFontStyleObj={}}hideListOnExternalEvent(t){this.el.nativeElement.contains(t.target)||this.hideList()}onWindowScroll(t){this.el.nativeElement.contains(t.target)||(this.optionsVisible&&this.isIOS?this.showList():this.hideList(),this.cd.markForCheck())}onListScroll(t){t&&(t.cancelBubble=!0,t.stopPropagation())}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(ce),i.Y36(de))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-dropdownlist"]],viewQuery:function(t,e){if(1&t&&(i.Gf($s,5),i.Gf(Xs,5),i.Gf(ta,5),i.Gf(ea,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.buttonElementRef=r.first),i.iGM(r=i.CRH())&&(e.watermarkSizerRef=r.first),i.iGM(r=i.CRH())&&(e.listElementRef=r.first),i.iGM(r=i.CRH())&&(e.displayTextElementRef=r.first)}},hostVars:1,hostBindings:function(t,e){1&t&&i.NdJ("resize",function(){return e.onWindowResize()},!1,i.Jf7)("mousedown",function(o){return e.onWindowMousedown(o)},!1,i.Jf7)("touchmove",function(o){return e.onWindowTouchMove(o)},!1,i.Jf7)("touchend",function(o){return e.onWindowTouchEnd(o)},!1,i.Jf7),2&t&&i.uIk("data-type",e.valueDataType)},features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],[1,"select-control",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","click","keypress"],["buttonElement","","autoWidthElement","","autoHeightElement",""],[3,"ngIf"],["role","listbox",1,"option-list",3,"ngClass","ngStyle","bl5ClickOutsideContext","bl5ClickOutside"],["listElement",""],["ngFor","",3,"ngForOf"],["aria-hidden","true",1,"arrow-container"],[3,"ngClass"],["aria-hidden","true",3,"innerHTML"],["watermarkSizer",""],[3,"ngStyle","innerHTML"],["displayTextElement",""],[1,"list-item-sizer","Font13",3,"innerHTML"],["role","option",1,"option-item",3,"ngClass","ngStyle","mouseover","click"],["listItemElement",""],["role","none",3,"ngStyle","innerHTML"],["type","checkbox","role","none",1,"option-checkbox",3,"checked"],[3,"bl5Aria","bl5Focus","bl5FocusEvent","ngModel","ngModelChange"],["autoWidthElement","","autoHeightElement",""],[3,"ngValue","innerHTML","selected"]],template:function(t,e){if(1&t&&(i.YNc(0,la,8,18,"ng-template",null,0,i.W1O),i.YNc(2,da,4,8,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,g.PC,V.YN,V.Kr,V.EJ,V.JJ,V.On,N,z,Be,vt,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}button[_ngcontent-%COMP%]{background-color:transparent;border:1px solid darkgrey;box-sizing:border-box;border-radius:0;padding:1.4px 15px 0 4px;overflow:hidden}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-decoration:none!important}button[_ngcontent-%COMP%]:not(:disabled){cursor:default}button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%]{width:6px;height:6px}button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%], button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-left:3px solid transparent;border-right:3px solid transparent}button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%]{border-top:6px solid black}button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-bottom:6px solid black}button[_ngcontent-%COMP%] > div.list-item-sizer[_ngcontent-%COMP%], button[_ngcontent-%COMP%] > div.watermark-sizer[_ngcontent-%COMP%]{visibility:hidden;margin:0;white-space:nowrap}button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%], button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{white-space:inherit}button[_ngcontent-%COMP%]:not(.css-vars){display:inline-block;position:relative}button[_ngcontent-%COMP%]:not(.css-vars) > div.arrow-container[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 3px);right:5px}button[_ngcontent-%COMP%]:not(.css-vars) > div.watermark-sizer[_ngcontent-%COMP%]{display:inline-block;padding:2.4px 20px 0 4px;position:absolute;top:0;left:0}button[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%]{vertical-align:middle;text-align:inherit;display:inline}button[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{width:100%;height:100%}ul[_ngcontent-%COMP%]{list-style-type:none;position:absolute;z-index:9999;-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);overflow-x:hidden;margin-top:0!important;padding:0;background:inherit;background-color:#fff;border:1px solid lightgrey;text-decoration:none!important}ul.width-auto[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]{white-space:nowrap}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]{z-index:999;cursor:default;width:100%;padding:3px 22px 3px 4.4px;font:inherit;color:inherit}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]:last-child{border-bottom:0}ul[_ngcontent-%COMP%] > li.option-item.selected[_ngcontent-%COMP%], ul[_ngcontent-%COMP%] > li.option-item.targeted[_ngcontent-%COMP%], ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 0 1000px #5cddeb33}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]:hover{cursor:pointer}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%] > span.option-label[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:1px}button.css-vars[_ngcontent-%COMP%]{grid-template-columns:minmax(min-content,1fr) 15px;align-items:center;justify-items:start}button.css-vars[_ngcontent-%COMP%]   .arrow-container[_ngcontent-%COMP%]{color:red;grid-column-start:2;grid-column-end:3}button.css-vars[_ngcontent-%COMP%]   .select-text[_ngcontent-%COMP%], button.css-vars[_ngcontent-%COMP%]   .list-item-sizer[_ngcontent-%COMP%], button.css-vars[_ngcontent-%COMP%]   .watermark-sizer[_ngcontent-%COMP%]{padding:0 .2em;grid-column-start:1;grid-column-end:2;grid-row-start:1;grid-row-end:2}button.css-vars[_ngcontent-%COMP%]   .select-text[_ngcontent-%COMP%]{justify-self:var(--justify-self)}"],changeDetection:0}),n})(),ha=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}handleControlUpdate(t){super.handleControlUpdate(t),this.useCssVars&&(this.cssStyle.borderColor=this.sp.styleGeneratorService.getBorderColor(t),this.cssStyle.borderColor&&(this.cssStyle.borderStyle=this.sp.styleGeneratorService.getBorderStyle(t),this.cssStyle.borderWidth=this.sp.styleGeneratorService.getBorderWidth(t)))}getStyleObject(){let t=super.getStyleObject();return t=Object.assign(t,this.sp.styleGeneratorService.applyStrokeStyles(this.el.nativeElement,this.dataObject)),t}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-ellipse"]],features:[i.qOj],decls:3,vars:5,consts:[["aria-disabled","true","aria-hidden","true",3,"ngClass","ngStyle","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&i._UZ(0,"div",0,1),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId))},dependencies:[g.mk,g.PC,N,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]:not(.css-vars){display:inline-flex}"],changeDetection:0}),n})();class ga{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Enumeration textbox insert"}}let pa=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.textChange=new Qt.x,this.textValue=""}ngOnInit(){super.ngOnInit(),this.handleOwnSubscriptionUpdates=!1,!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.textChangeSubscription=this.textChange.subscribe({next:t=>{this.textValue=t,this.pushChange(t),this.cd.detectChanges()}})}ngOnDestroy(){this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.textChangeSubscription&&this.textChangeSubscription.unsubscribe(),super.ngOnDestroy()}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto&&!this.sp.renderStateService.optimizeNoStylesheets){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),r=e?e.Left+e.Right:0,o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),a=o?o.Left+o.Right:0,l=this.fieldInfo;if(l){const c=l.ValueType,d=c.Categories?c.Categories.reduce((D,G)=>D.Name.length>G.Name.length?D:G):0,u=d?d.Code.toString().length:0,h=Math.max(Math.min(O.STRING_MAX_SIZE,u),this.watermarkTextLength),f=this.determineOffsetWidth(this.dataObject.FontName,"W",u,this.watermarkTextLength),w=Math.ceil(10!==h?f/10*h:f);t.contentWidth=w+r+a}}}}onInput(t){const e=this.fieldInfo;if(e&&e){const o=t.target,a=o.value;this.converter.isAllowed(a,e.ValueType)===S.Ok?this.textChange.next(a):o.value=this.textValue,e.DataValue.AnswerStatus===T.Response&&this.sp.navigationService.setInsertMode()}}onBlur(){const t=this.fieldInfo;t&&t.DataValue.IsDirty&&(t.IsVisited=!0,this.sp.renderStateService.flagFieldNameAsVisited(t.FieldName),this.converter.applyErrors(this.textValue,t)&&(this.fieldInfo=t))}getKeyboardInsertStrategy(){return new ga(this.sp.injector)}getStyleObject(){const t=super.getStyleObject();return this.fontStyle=this.sp.styleGeneratorService.copyFontStyle(t),t}getFontCssClasses(){return super.getFontCssClasses(!0)}getText(){return this.textValue}setText(t){this.fieldInfo&&this.dataObject.Enabled&&this.textChange.next(t)}clearText(){this.setText("")}handleFieldUpdate(t){if(super.handleFieldUpdate(t),this.textValue=this.converter.getNormalAnswerAsString(t),this.setWidthFromStylableProperties(),this.widthUnitType===y.Auto){const e=t.ValueType.Categories;Array.isPopulated(e)?(this.maxLength=e.reduce((r,o)=>Math.max(r,o.Code.toString().length),0),this.size=Math.max(this.maxLength,this.watermarkTextLength)):this.maxLength=this.size=0}}pushChange(t){const e=this.fieldInfo;if(e){const r=e.ValueType,o=parseInt(t,10);!isNaN(o)&&this.converter.categoryExists(e,o)?this.converter.setSelected(e,o):this.converter.setEmptyAnswer(e),this.converter.isValid(t,r)===S.Ok&&this.converter.removeRangeCheckErrors(e),this.fieldInfo=e,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e)}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(ce))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-enumeration-textbox"]],features:[i.qOj],decls:3,vars:17,consts:[["type","text","autocapitalize","off","autocomplete","off",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5NavigationToggle","bl5Outline","bl5Tooltip","value","input","blur"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("input",function(o){return e.onInput(o)})("blur",function(){return e.onBlur()}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5NavigationToggle",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("value",e.textValue),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("maxlength",e.maxLength)("placeholder",e.watermarkText)("size",e.size)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,N,z,vt,tt,R,Se,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const ma=function(n,s,t){return{"text-container":n,"no-auto word-break":s,"auto no-word-break":t}};function fa(n,s){if(1&n&&(i._UZ(0,"div",4),i.ALo(1,"safeHtml")),2&n){const t=i.oxw();i.Q6J("ngClass",i.kEZ(4,ma,t.isSimpleText,t.isSimpleText&&!t.hasAutoWidth,t.isSimpleText&&t.hasAutoWidth))("innerHTML",i.lcZ(1,2,t.errorText),i.oJD)}}let ba=(()=>{class n extends bt{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.isSimpleText=!1,this.errorText="",this.containsRichText=!0}getText(){const t=this.fieldInfo;return t&&!t.Errors.isEmpty()?this.sp.richTextConverter.convertToPlainText(this.dataObject.Text):""}handleFieldUpdate(t){super.handleFieldUpdate(t),this.setErrorText(t)&&this.sp.renderStateService.useSkipLinks?this.sp.skipLinkService.add({description:this.dataObject.Text.SimpleText||this.errorText,id:this.controlId,index:0,kind:this.controlKind,name:this.controlId,isError:!0,fieldName:t.FieldName}):this.sp.skipLinkService.remove(this.controlId)}setErrorText(t){if(this.errorText="",this.isSimpleText=!1,t.Errors.isEmpty())return!1;this.dataObject.Text&&(this.errorText=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth));const e=this.sp.renderStateService.getFirstRelevantError(t.Errors),r=this.dataObject.ErrorKindFilter||null;if(!e||null!==r&&-1===r.indexOf(e.ErrorKind))return!1;let o="";if(e.ErrorKind===st.Route){if(e.RouteErrorCause===Bt.EmptyButRequired){if(t.DataValue.AnswerStatus!==T.Empty)return!1;{const a=this.dataObject.RouteErrorText;a&&(o=a)}}else if(e.RouteErrorCause!==Bt.AnsweredButOffRoute)return!1}else if(e.ErrorKind===st.RangeCheck){const a=this.dataObject.AnswerInfoText;if(String.hasValue(a))o=a;else if(e.Key){const l=this.dataObject.SystemTexts;if(l)if(Object.prototype.hasOwnProperty.call(l,e.Key)){const c=l[e.Key];o=e.InvalidValue?c.replace("{0}",e.InvalidValue):c}else{const c=Object.keys(l);if(!c.isEmpty()){const d=l[c[0]];o=e.InvalidValue?d.replace("{0}",e.InvalidValue):d}}}}if(e.ErrorKind===st.RangeCheck){const a=t.DataValue.ValueAsString??"",l=T[t.DataValue.AnswerStatus],c=this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)||o;this.sp.auditTrailService.logRangeErrorEvent(t.FieldName,a,l,c)}if(!o.isEmpty()){this.isSimpleText=!0;const a=document.createElement("div");a.innerText=o,this.errorText=a.outerHTML,a.remove()}return!0}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-error-text"]],features:[i.qOj],decls:5,vars:10,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["data-text-alignment",""],[3,"ngIf"],[3,"ngClass","innerHTML"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(3,"div",2),i.YNc(4,fa,2,8,"ng-template",3),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId)("data-fieldname",e.fieldName),i.xp6(3),i.uIk("data-horizontal-text-alignment",e.horizontalTextAlignment)("data-vertical-text-alignment",e.verticalTextAlignment),i.xp6(1),i.Q6J("ngIf",!e.errorText.isEmpty()))},dependencies:[g.mk,g.O5,g.PC,N,z,R,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]   .css-vars[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(.text-container){display:inline-grid}"],changeDetection:0}),n})(),we=(()=>{class n{constructor(t,e,r){this.viewContainerRef=t,this.componentService=e,this.mouseEventService=r}ngOnChanges(){if(this.childType){this.viewContainerRef.detach(),this.viewContainerRef.clear(),this.compRef&&this.compRef.destroy(),this.compRef=this.viewContainerRef.createComponent(this.childType);const t=this.compRef.instance;t.dataObject=this.dataObject,t.parentId=this.parentId,t.parentType=this.parentType,this.componentService.registerComponent(this.dataObject.ID,t),this.mouseEventService.registerComponent(this.dataObject,this.parentId),this.dataObject.Kind===v.TableRowControl&&(t.columns=this.columns||[],t.isEvenRow=this.isEvenRow||!1,t.rowColor=this.rowColor||O.DEFAULT_COLOR,t.rowIndex=this.rowIndex||0,t.gridLines=this.gridLines||Z.None,t.gridLineWidth=this.gridLineWidth||0,t.gridLineColor=this.gridLineColor||O.DEFAULT_COLOR)}}ngOnDestroy(){this.dataObject&&(this.viewContainerRef.detach(),this.viewContainerRef.clear(),this.componentService.removeComponent(this.dataObject.ID),this.mouseEventService.removeComponent(this.dataObject.ID),this.compRef&&this.compRef.destroy())}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.s_b),i.Y36(se),i.Y36(Vi))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5Component",""]],inputs:{childType:"childType",dataObject:"dataObject",parentId:"parentId",parentType:"parentType",columns:"columns",isEvenRow:"isEvenRow",rowIndex:"rowIndex",rowColor:"rowColor",gridLines:"gridLines",gridLineWidth:"gridLineWidth",gridLineColor:"gridLineColor"},features:[i.TTD]}),n})(),gn=(()=>{class n{constructor(t){this.elementRef=t}get element(){return this.elementRef.nativeElement}ngOnInit(){if(this.dataObject.IsSkipLinkTarget){const t=(0,It.R)(this.element,"focus");this.focusSubscription=t.subscribe({next:r=>this.handleFocusSubscription(r)});const e=(0,It.R)(this.element,"blur");this.blurSubscription=e.subscribe({next:()=>this.handleBlurSubscription()})}}ngOnDestroy(){this.focusSubscription&&this.focusSubscription.unsubscribe(),this.blurSubscription&&this.blurSubscription.unsubscribe()}handleFocusSubscription(t){const r=document.getElementById(t.target.id);if(r){const o=this.findFirstChildId(r,!0);if(o){const a=document.getElementById(o);if(a){const l=a.tabIndex;this.element.tabIndex=l,l&&a.focus()}}}}handleBlurSubscription(){this.element.tabIndex=-1}findFirstChildId(t,e=!1){if(t&&t.id&&!e)return t.id;{let r;if(t.children.length>0){for(let o=0;o<t.children.length;o++){const a=t.children.item(o);if(r=this.findFirstChildId(a),r&&!a.classList.contains("visibility-hidden"))break}return r}return}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5SkipLinkTarget",""]],inputs:{dataObject:["bl5SkipLinkTarget","dataObject"]}}),n})(),va=(()=>{class n{transform(t){return t.filter(e=>e.Draw)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=i.Yjl({name:"drawColumn",type:n,pure:!0}),n})();function ya(n,s){1&n&&i.GkF(0)}const Ca=function(n){return{children:n}};function Sa(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",5,6),i.NdJ("focus",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.handleFocus())}),i.YNc(3,ya,1,0,"ng-container",7),i.qZA()}if(2&n){i.oxw();const t=i.MAs(2),e=i.oxw();i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5SkipLinkTarget",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(3),i.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",i.VKq(9,Ca,e.viewModels))}}function Aa(n,s){1&n&&i.GkF(0)}const pr=function(n){return{child:n}};function wa(n,s){if(1&n&&i.YNc(0,Aa,1,0,"ng-container",7),2&n){const t=s.$implicit;i.oxw(3);const e=i.MAs(4);i.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",i.VKq(2,pr,t))}}function xa(n,s){1&n&&i.YNc(0,wa,1,4,"ng-template",8),2&n&&i.Q6J("ngForOf",s.children)}function _a(n,s){if(1&n&&(i.YNc(0,Sa,4,11,"ng-template",3),i.YNc(1,xa,1,1,"ng-template",null,4,i.W1O)),2&n){const t=i.oxw();i.Q6J("ngIf",t.tableLayout)}}function ka(n,s){1&n&&i.GkF(0)}function Oa(n,s){1&n&&i.GkF(0)}const Ta=function(n,s){return{columns:n,sizes:s}},Pa=function(n){return{rows:n}};function Ma(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"table",14,6),i.NdJ("focus",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.handleFocus())}),i.YNc(3,ka,1,0,"ng-container",7),i.YNc(4,Oa,1,0,"ng-container",7),i.qZA()}if(2&n){i.oxw();const t=i.MAs(2),e=i.MAs(4),r=i.oxw();i.Q6J("ngClass",r.cssClass)("ngStyle",r.style)("bl5Aria",r.ariaObject)("bl5SkipLinkTarget",r.dataObject)("bl5Tooltip",r.dataObject.Tooltip)("bl5MouseEvent",r.dataObject),i.uIk("id",r.controlId),i.xp6(3),i.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",i.WLB(11,Ta,r.tableLayout.Columns,r.tableLayout.ColSizes)),i.xp6(1),i.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",i.VKq(14,Pa,r.tableLayout.Rows))}}function Ia(n,s){if(1&n&&i._UZ(0,"col",16),2&n){const t=s.$implicit,e=s.index,r=i.oxw(3);i.Q6J("ngClass",r.columnClass(t))("ngStyle",r.columnWidth(e))}}function Ea(n,s){if(1&n&&(i.TgZ(0,"colgroup"),i.YNc(1,Ia,1,2,"ng-template",8),i._UZ(2,"col",15),i.qZA()),2&n){const t=s.columns;i.xp6(1),i.Q6J("ngForOf",t)}}function Fa(n,s){1&n&&i.GkF(0)}const La=function(n,s){return{row:n,index:s}};function Da(n,s){if(1&n&&i.YNc(0,Fa,1,0,"ng-container",7),2&n){const t=s.$implicit,e=s.index;i.oxw(2);const r=i.MAs(6);i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.WLB(2,La,t,e))}}function Va(n,s){1&n&&i.GkF(0)}const ja=function(n){return{columns:n}};function Na(n,s){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,Da,1,5,"ng-template",8),i.YNc(2,Va,1,0,"ng-container",7),i.qZA()),2&n){const t=s.rows;i.oxw();const e=i.MAs(10),r=i.oxw();i.xp6(1),i.Q6J("ngForOf",t),i.xp6(1),i.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",i.VKq(3,ja,r.dataObject.Columns))}}function Ra(n,s){1&n&&i.GkF(0)}const Ba=function(n,s){return{row:n,column:s}};function za(n,s){if(1&n&&i.YNc(0,Ra,1,0,"ng-container",7),2&n){const t=s.$implicit,e=i.oxw(2).row;i.oxw();const r=i.MAs(8);i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.WLB(2,Ba,e,t))}}function Ga(n,s){if(1&n&&(i.YNc(0,za,1,5,"ng-template",8),i.ALo(1,"drawColumn"),i._UZ(2,"td",15)),2&n){const t=i.oxw().row;i.Q6J("ngForOf",i.lcZ(1,1,t.Columns))}}function Ha(n,s){if(1&n&&(i.TgZ(0,"tr",17),i.YNc(1,Ga,3,3,"ng-template",3),i.qZA()),2&n){const t=s.index,e=s.row,r=i.oxw(2);i.Q6J("ngStyle",r.rowHeight(t)),i.uIk("id",e.ID),i.xp6(1),i.Q6J("ngIf",e.Columns)}}function Ua(n,s){1&n&&i.GkF(0)}function Wa(n,s){if(1&n&&(i.TgZ(0,"td",16)(1,"div",17),i.YNc(2,Ua,1,0,"ng-container",7),i.qZA()()),2&n){const t=s.row,e=s.column;i.oxw(2);const r=i.MAs(4);i.Q6J("ngClass",e.CssClasses)("ngStyle",e.Style),i.uIk("data-horizontal-alignment",e.HorizontalAlignment)("data-vertical-alignment",e.VerticalAlignment)("data-height-unit",t.RowDefinition.UnitType)("data-width-unit",e.ColDefinition.UnitType)("colspan",e.ColSpan)("rowspan",e.RowSpan),i.xp6(1),i.Q6J("ngStyle",e.CellStyle),i.xp6(1),i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.VKq(11,pr,e.Child))}}function Ya(n,s){1&n&&i._UZ(0,"td",15)}function Ka(n,s){if(1&n&&(i.TgZ(0,"tr",15),i.YNc(1,Ya,1,0,"ng-template",8),i._UZ(2,"td",15),i.qZA()),2&n){const t=s.columns;i.xp6(1),i.Q6J("ngForOf",t)}}function Qa(n,s){if(1&n&&(i.YNc(0,Ma,5,16,"ng-template",3),i.YNc(1,Ea,3,1,"ng-template",null,9,i.W1O),i.YNc(3,Na,3,5,"ng-template",null,10,i.W1O),i.YNc(5,Ha,2,3,"ng-template",null,11,i.W1O),i.YNc(7,Wa,3,13,"ng-template",null,12,i.W1O),i.YNc(9,Ka,3,1,"ng-template",null,13,i.W1O)),2&n){const t=i.oxw();i.Q6J("ngIf",t.tableLayout)}}function Ja(n,s){if(1&n&&i.GkF(0,18),2&n){const t=i.oxw().child;i.Q6J("childType",t.type)("dataObject",t.dataObject)("parentId",t.parentId)}}function Za(n,s){1&n&&i.YNc(0,Ja,1,3,"ng-template",3),2&n&&i.Q6J("ngIf",s.child)}let qa=(()=>{class n extends et{constructor(t,e,r,o){super(e,r,o),this.modelService=t,this.sp=e,this.el=r,this.cd=o,this.handleFocus=()=>{const a=this.el.nativeElement.querySelectorAll('.visibility-visible[tabindex]:not([tabindex="-1"]):not(table):not(div)');a.length>0&&a.item(0).focus()},this.columnClass=a=>{const l=[];return l.push("cell"),a.UnitType===k.Auto?l.push("auto-width"):(a.UnitType===k.Percentage||a.UnitType===k.Star)&&l.push("table-size-calculator"),l},this.initTableLayout=()=>{const a={Columns:[],Rows:[],TotalStarColumns:0,TotalStarRows:0,RowSizes:[],ColSizes:[]},l=this.dataObject.Columns,c=[];for(let h=0,m=l.length;h<m;h++)l[h][_.UnitType]===k.Star&&(a.TotalStarColumns+=l[h][_.Value]),c.push({Draw:!0,ColDefinition:l[h],ColSpan:1,RowSpan:1,Child:null,Spacer:!1});const d=this.dataObject.Rows,u=[];for(let h=0,m=d.length;h<m;h++){d[h][_.UnitType]===k.Star&&(a.TotalStarRows+=d[h][_.Value]);const f={RowDefinition:d[h],Columns:at.cloneDeep(c),Spacer:!1};u.push(f)}a.Columns=l,a.Rows=u;for(const h of this.dataObject.Children){const m=Math.min(a.Rows.length-h.RowIndex,h.RowSpan),f=Math.min(a.Columns.length-h.ColumnIndex,h.ColSpan);for(let G=0;G<m;G++)for(let B=0;B<f;B++)a.Rows[h.RowIndex+G].Columns[h.ColumnIndex+B].Draw=!1;const w=a.Rows[h.RowIndex].Columns[h.ColumnIndex];let D;this.useCssVars&&h.Kind===v.TableControl&&(D="CssTableControl"),w.Child=this.modelService.createChild(h,this.controlId,D),m>1?w.RowSpan=m:delete w.RowSpan,f>1?w.ColSpan=f:delete w.ColSpan}return a.ColSizes=[],a.RowSizes=[],a},this.findWidth=(a,l=!1)=>{if(l)return this.findWidth(a.children[0])||0;{let c=a.offsetWidth;if(c>0){const d=getComputedStyle(a);return c+=parseInt(d.marginLeft,10)+parseInt(d.marginRight,10),c}return this.findWidth(a.children[0])||0}},this.hasChildWithScrollbar=a=>{let l=!1;return a.Children.forEach(c=>{if(c.Kind===v.Panel){const d=this.sp.stylablePropertyService.getValueForStylableProperty(c,A.HorizontalScrollbar),u=this.sp.stylablePropertyService.getValueForStylableProperty(c,A.VerticalScrollbar);l=d>0||u>0}}),l}}get viewModels(){if(this.tableLayout){const t=this.tableLayout;return this.dataObject.Children.map(e=>t.Rows[e.RowIndex]?.Columns[e.ColumnIndex]?.Child??null)}return[]}getCssClasses(){const t=super.getCssClasses();return this.hasChildWithScrollbar(this.dataObject)&&t.push("layout-fixed"),!this.useCssVars&&(null==this.controlSize||0===this.controlSize.getWidth()||0===this.controlSize.getHeight())&&t.push("visibility-hidden"),t}handleControlUpdate(t){if(super.handleControlUpdate(t),this.tableLayout||(this.tableLayout=this.initTableLayout()),this.updateTableLayout(),this.useCssVars){this.elementColumns=this.tableLayout.Columns.length,this.elementRows=this.tableLayout.Rows.length;let e="";this.tableLayout.Rows.forEach(o=>{switch(o.RowDefinition.UnitType){case k.Auto:e+=" minmax(0, min-content)";break;case k.Pixels:e+=` minmax(0, ${o.RowDefinition.Value}px)`;break;case k.Percentage:e+=` minmax(0, ${o.RowDefinition.Value}%)`;break;case k.Star:e+=` minmax(0, ${o.RowDefinition.Value}fr)`}}),this.elementTemplateRows=""===e?`repeat(${this.elementRows}, min-content)`:e;let r="";this.tableLayout.Columns.forEach(o=>{switch(o.UnitType){case k.Auto:r+=" min-content";break;case k.Pixels:r+=` ${o.Value}px`;break;case k.Percentage:r+=` ${o.Value}%`;break;case k.Star:r+=` minmax(0, ${o.Value}fr)`}}),this.elementTemplateColumns=""===r?`repeat(${this.elementColumns}, ${this.elementWidth})`:r}}columnWidth(t){return{width:this.tableLayout?this.tableLayout.ColSizes[t]+"px":"0"}}rowHeight(t){return{height:this.tableLayout?this.tableLayout.RowSizes[t]+"px":"0"}}applyStylesAndDimensions(){super.applyStylesAndDimensions(),this.applyTableLayout()}createChildControlSizes(){const t=[];for(let e=0,r=this.dataObject.Columns.length;e<r;e++){const o=this.dataObject.Columns[e];for(let a=0,l=this.dataObject.Rows.length;a<l;a++){const c=this.dataObject.Rows[a],f=new he(e,a,o.UnitType,o.Value,c.UnitType,c.Value);t.push(f)}}if(Array.isPopulated(this.dataObject.Children))for(const e of this.dataObject.Children){const r=this.findChild(t,e.ColumnIndex,e.RowIndex);if(r){const o=this.sp.sizeTreeService.createControlSize(e);o&&r.addChild(o)}}return t}updateControlSize(){if(!this.useCssVars&&(super.updateControlSize(),this.controlSize instanceof ni)){const t=this.controlSize;t.gridLines=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLines),t.gridLineWidth=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineWidth)}}updateTableLayout(){if(this.tableLayout){this.sp.styleGeneratorService.addGridLinesStyle(this.dataObject,this.tableLayout);for(let t=0,e=this.dataObject.Children.length;t<e;t++){const r=this.dataObject.Children[t],o=this.sp.stylablePropertyService.getValueForStylableProperty(r,A.HorizontalAlignment),a=this.sp.stylablePropertyService.getValueForStylableProperty(r,A.VerticalAlignment),l=this.tableLayout.Rows[r.RowIndex].Columns[r.ColumnIndex];l.HorizontalAlignment=o,l.VerticalAlignment=a,l.Draw=!0}}}applyTableLayout(){if(!this.controlSize||!this.tableLayout)return;const t=this.controlSize,e=t.colWidths,r=t.rowHeights;if(e?.length>0&&r?.length>0){this.tableLayout.RowSizes=r,this.tableLayout.ColSizes=e;const o=t.getChildren();o&&this.tableLayout.Rows.forEach((a,l)=>{a.Columns.forEach((c,d)=>{const u=c.Style?c.Style:{},h=this.findChild(o,d,l);h&&(c.CellStyle={},!h.containsSpanChild()&&h.hasOverflowingChild()&&this.sp.sizeTreeService.isReady&&(c.CellStyle={overflow:"hidden",height:(h.pixelHeight??0)+"px",width:(h.pixelWidth??0)+"px"}),c.Style=u)})})}}findChild(t,e,r){for(const o of t)if(o.colIndex===e&&o.rowIndex===r)return o;return null}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>me)),i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-grid"]],features:[i.qOj],decls:5,vars:2,consts:[[3,"ngIf","ngIfElse"],["noCssVars",""],["child",""],[3,"ngIf"],["children",""],[1,"grid",3,"ngClass","ngStyle","bl5Aria","bl5SkipLinkTarget","bl5Tooltip","bl5MouseEvent","focus"],["autoWidthElement","","autoHeightElement",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["ngFor","",3,"ngForOf"],["colgroup",""],["tbody",""],["tr",""],["td",""],["filler",""],[3,"ngClass","ngStyle","bl5Aria","bl5SkipLinkTarget","bl5Tooltip","bl5MouseEvent","focus"],[1,"filler"],[3,"ngClass","ngStyle"],[3,"ngStyle"],["bl5Component","",3,"childType","dataObject","parentId"]],template:function(t,e){if(1&t&&(i.YNc(0,_a,3,1,"ng-template",0),i.YNc(1,Qa,11,1,"ng-template",null,1,i.W1O),i.YNc(3,Za,1,1,"ng-template",null,2,i.W1O)),2&t){const r=i.MAs(2);i.Q6J("ngIf",e.useCssVars)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,N,z,we,R,gn,va],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.GridComponent.css-vars[_ngcontent-%COMP%]{float:left}"],changeDetection:0}),n})();var mr=U(655);let ji=class extends et{constructor(s,t,e){super(s,t,e),this.sp=s,this.el=t,this.cd=e}get groupName(){return this.dataObject.Reference.GroupName}};ji=(0,mr.gn)([(0,mr.fM)(0,(0,i.tBr)((0,i.Gpc)(()=>E)))],ji);let $a=(()=>{class n extends ji{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.errorText="",this.containsRichText=!0}ngOnInit(){super.ngOnInit();const t=this.sp.subscriptionService.allFieldsObservable;t&&(this.allFieldsSubscription=t.subscribe({next:()=>{this.setErrorText()&&(this.sp.renderStateService.useSkipLinks&&this.sp.skipLinkService.add({description:`${this.controlId}:${this.errorText}`,id:this.controlId,index:0,kind:this.controlKind,name:this.controlId,isError:!0}),this.cd.detectChanges())}}))}ngOnDestroy(){this.allFieldsSubscription&&this.allFieldsSubscription.unsubscribe(),super.ngOnDestroy()}setErrorText(){const r=this.sp.renderStateService.getGroupError(this.groupName,this.dataObject.IncludeGroupErrors,this.dataObject.ErrorKindFilter||null);if(r){const o=this.hasAutoWidth?"auto no-word-break":"no-auto word-break";let a="";switch(r.ErrorKind){case st.Route:r.RouteErrorCause===Bt.EmptyButRequired?a=this.dataObject.RouteErrorText:this.dataObject.NoAnswerExpectedText&&(a=this.dataObject.NoAnswerExpectedText);break;case st.Signal:case st.Check:return this.errorText=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth),!0;case st.RangeCheck:a=r.InvolvedControl?.SystemTexts[r.Key]??""}if(!a.isEmpty())return this.errorText=`<div class="text-container ${o}"><p>${a}</p></div>`,!0}return this.errorText="",!1}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-group-error-text"]],features:[i.qOj],decls:5,vars:12,consts:[["role","alert","aria-live","assertive",3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["data-text-alignment","",3,"innerHTML"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i._UZ(3,"div",2),i.ALo(4,"safeHtml"),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId)("data-groupname",e.groupName),i.xp6(3),i.Q6J("innerHTML",i.lcZ(4,10,e.errorText),i.oJD),i.uIk("data-horizontal-text-alignment",e.horizontalTextAlignment)("data-vertical-text-alignment",e.verticalTextAlignment))},dependencies:[g.mk,g.PC,N,z,R,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]   .css-vars[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-grid}"],changeDetection:0}),n})(),pn=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}get hasInvolvedFields(){return!Array.isNullOrEmpty(this.involvedFields)}ngOnInit(){super.ngOnInit(),this.setControlVisibility(this.setInvolvedFields())}getStyleObject(){let t=super.getStyleObject();if(this.hasInvolvedFields&&this.heightUnitType!==y.Auto){const e=this.controlSize?.getHeight()??0,r=this.involvedFields?.length??0;e&&r&&(t=Object.assign(t,{lineHeight:e/r+"px"}))}return t}handleClick(t,e){this.dataObject.Enabled?this.sp.eventService.emitHandleActionEvent(new Ze(e),this.controlId):t.preventDefault()}getInvolvedFieldName(t){return this.sp.helperService.getInvolvedFieldName(t,this.dataObject.SelectedName)}setInvolvedFields(){return this.involvedFields=this.getInvolvedFields(),!Array.isNullOrEmpty(this.involvedFields)}setControlVisibility(t){const e=this.controlSubject.getValue();null==e.InitialVisibility&&(e.InitialVisibility=this.dataObject.Visibility),e.Visibility=t?e.InitialVisibility:K.Collapsed,this.controlSubject.next(e)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ng-component"]],features:[i.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2}),n})();function Xa(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",4),i.NdJ("click",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.handleClick(r,a.Name))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.ekj("isVisited",t.IsVisited),i.Q6J("innerHTML",e.getInvolvedFieldName(t),i.oJD)}}function tl(n,s){if(1&n&&(i.TgZ(0,"ul",1,2),i.YNc(3,Xa,1,3,"ng-template",3),i.qZA()),2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId)("data-groupname",t.groupName),i.xp6(3),i.Q6J("ngForOf",t.involvedFields)}}let el=(()=>{class n extends pn{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}get groupName(){return this.dataObject.Reference.GroupName}ngOnInit(){super.ngOnInit();const t=this.sp.subscriptionService.allFieldsObservable;t&&(this.allFieldsSubscription=t.subscribe({next:()=>{const e=this.getInvolvedFields();e&&this.sp.renderStateService.useSkipLinks&&this.sp.skipLinkService.add({description:`Involved Field : ${e[0].Name}`,id:this.controlId,index:0,kind:this.controlKind,name:this.controlId,isError:!0,fieldName:e[0].Name})}}))}ngOnDestroy(){this.allFieldsSubscription&&this.allFieldsSubscription.unsubscribe(),super.ngOnDestroy()}getInvolvedFields(){return this.sp.renderStateService.getGroupInvolvedFields(this.groupName,this.dataObject.IncludeGroupErrors,this.dataObject.ErrorKindFilter||null)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-group-involved-fields"]],features:[i.qOj],decls:1,vars:1,consts:[[3,"ngIf"],[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["ngFor","",3,"ngForOf"],[3,"innerHTML","click"]],template:function(t,e){1&t&&i.YNc(0,tl,4,8,"ng-template",0),2&t&&i.Q6J("ngIf",e.hasInvolvedFields)},dependencies:[g.mk,g.sg,g.O5,g.PC,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}ul.css-vars[_ngcontent-%COMP%]{align-items:center}"],changeDetection:0}),n})();class mn extends Ft{constructor(s){super(p.SuppressSignal),this.CheckName=s}}function il(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,10,t.text),i.oJD),i.uIk("id",t.controlId)("data-groupname",t.groupName)("tabindex",t.tabIndex)}}function nl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,8,t.text),i.oJD),i.uIk("id",t.controlId)("data-groupname",t.dataObject.Reference.GroupName)("tabindex",t.tabIndex)}}let rl=(()=>{class n extends ji{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}ngOnInit(){super.ngOnInit(),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}executeButton(){this.dataObject.CheckName&&this.sp.eventService.emitHandleActionEvent(new mn(this.dataObject.CheckName),this.controlId)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-group-suppress-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,il,4,12,"ng-template",null,0,i.W1O),i.YNc(2,nl,4,10,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const ol=["hidAnchor"];let sl=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.handleKeyDown=o=>{this.isEnabled&&this.isVisible?o&&("enter"===o.code.toLowerCase()||"numpadenter"===o.code.toLowerCase()||"space"===o.code.toLowerCase())&&this.execute():o.preventDefault()},this.execute=()=>{this.dataObject.URI&&(this.sp.auditTrailService.logGoToURIEvent(this.dataObject.URI),this.hidAnchor.nativeElement.click()),this.dataObject.OnClick&&this.executeActions(this.dataObject.OnClick)}}get linkId(){return`link_${this.controlId}`}get target(){return this.dataObject.Target?this.dataObject.Target:void 0}get href(){return this.dataObject.URI?this.dataObject.URI:void 0}get title(){return this.dataObject.ScreenReaderText||this.dataObject.Text}get showKeyboardFocus(){return this.dataObject.ShowKeyboardFocus}get tabIndex(){return this.showKeyboardFocus?super.tabIndex:-1}handleClick(t){this.isEnabled&&this.isVisible?this.execute():t.preventDefault()}getText(){return this.dataObject.Text}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-hyperlink"]],viewQuery:function(t,e){if(1&t&&i.Gf(ol,7),2&t){let r;i.iGM(r=i.CRH())&&(e.hidAnchor=r.first)}},features:[i.qOj],decls:6,vars:16,consts:[[3,"ngClass","ngStyle","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","keydown","mousedown"],["autoWidthElement","","autoHeightElement",""],["rel","noopener noreferrer",1,"text-container",3,"bl5Outline","target","innerHTML","keydown","click"],["hidAnchor",""]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i.NdJ("keydown",function(o){return e.handleKeyDown(o)})("mousedown",function(o){return e.handleClick(o)}),i.TgZ(3,"a",2,3),i.NdJ("keydown",function(o){return e.handleKeyDown(o)})("click",function(o){return e.handleClick(o)}),i.ALo(5,"safeHtml"),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.uIk("id",e.controlId)("disabled",e.disabled),i.xp6(3),i.Q6J("bl5Outline",e.dataObject)("target",e.target)("innerHTML",i.lcZ(5,14,e.dataObject.Text),i.oJD),i.uIk("id",e.linkId)("href",e.href,i.LSH)("tabindex",e.tabIndex)("title",e.title))},dependencies:[g.mk,g.PC,N,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.css-vars[_ngcontent-%COMP%]{justify-content:var(--justify-content);align-content:var(--align-content)}"],changeDetection:0}),n})();const al=["hidAnchor"];function ll(n,s){if(1&n&&i._UZ(0,"a",6,7),2&n){const t=i.oxw(2);i.Q6J("hidden",!0)("href",t.uri,i.LSH)("target",t.target)("innerHTML",t.ariaLabel,i.oJD),i.uIk("id",t.imageAnchorId)}}function cl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i._UZ(3,"img",4),i.qZA(),i.YNc(4,ll,2,5,"ng-template",5)}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex)("aria-label",t.ariaObject.AriaLabel),i.xp6(3),i.Q6J("alt",t.ariaObject.AriaLabel)("src",t.src,i.LSH)("hidden",!0),i.uIk("id",t.imageId),i.xp6(1),i.Q6J("ngIf",t.isClickable)}}function dl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"img",8,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("alt",t.ariaObject.AriaLabel)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId)("disabled",t.disabled)("src",t.src,i.LSH)("tabindex",t.tabIndex)}}let ul=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}get imageUrl(){const t=this.sp.helperService.getBaseHref(!0),e=this.dataObject.SourceUrl,r=this.dataObject.Source;return e?e.startsWith("http")||e.startsWith("www")||e.startsWith(t)?e:t+e:r?this.sp.mediaService.getMediaUrlForImage(r):O.PIXEL_TRANSPARENT}get isClickable(){const t=!String.isNullOrEmpty(this.dataObject.URI),e=!Array.isNullOrEmpty(this.dataObject.OnClick?.Actions);return this.dataObject.Enabled&&(t||e)}get imageId(){return`img_${this.controlId}`}get imageAnchorId(){return`imageAnchor_${this.controlId}`}get target(){return this.dataObject.Target||"_blank"}get ariaLabel(){return this.ariaObject?.AriaLabel||"&nbsp;"}get tabIndex(){return this.dataObject.TabIndex}get uri(){return this.dataObject.URI||"#"}ngOnInit(){super.ngOnInit(),this.src=this.ariaObject.UseOptimizedNoStylesheetVersion?this.imageUrl:O.PIXEL_TRANSPARENT}handleControlUpdate(t){if(super.handleControlUpdate(t),this.pixelWidth=0,this.pixelHeight=0,this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Width).UnitType===y.Auto&&!isNaN(this.dataObject.PixelWidth)&&(this.pixelWidth=this.dataObject.PixelWidth>0?this.dataObject.PixelWidth:null),this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Height).UnitType===y.Auto&&!isNaN(this.dataObject.PixelHeight)&&(this.pixelHeight=this.dataObject.PixelHeight>0?this.dataObject.PixelHeight:null),this.useCssVars){this.widthUnitType===y.Auto&&(this.cssStyle.width=`${this.pixelWidth}px`),this.heightUnitType===y.Auto&&(this.cssStyle.height=`${this.pixelHeight}px`);const o=this.sp.styleGeneratorService.generateImageBackgroundStyle(this.imageUrl,this.dataObject.Stretch);this.cssStyle.backgroundClip=o.backgroundClip,this.cssStyle.backgroundSize=o.backgroundSize,this.cssStyle.backgroundImage=o.backgroundImage,this.cssStyle.backgroundPosition=o.backgroundPosition,this.cssStyle.backgroundRepeat=o.backgroundRepeat,this.cssStyle.opacity=""+this.dataObject.Opacity}}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;t.width.unitType===y.Auto&&(t.contentWidth=this.pixelWidth)}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;t.height.unitType===y.Auto&&(t.contentHeight=this.pixelHeight)}}getCssClasses(){const t=super.getCssClasses();return this.isClickable&&t.push("clickable"),t}getStyleObject(){let t=super.getStyleObject();return t=Object.assign(t,this.sp.styleGeneratorService.generateImageBackgroundStyle(this.imageUrl,this.dataObject.Stretch)),t}handleClick(t){this.dataObject.Enabled?this.executeAction():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeAction(),t.preventDefault())}executeAction(){this.dataObject.URI&&(this.sp.auditTrailService.logGoToURIEvent(this.dataObject.URI),this.hidAnchor.nativeElement.click()),this.executeActions(this.dataObject.OnClick)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-image"]],viewQuery:function(t,e){if(1&t&&i.Gf(al,5),2&t){let r;i.iGM(r=i.CRH())&&(e.hidAnchor=r.first)}},features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","img","draggable","false",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","click","keydown"],["autoWidthElement","","autoHeightElement",""],["aria-disabled","true","aria-hidden","true",3,"alt","src","hidden"],[3,"ngIf"],["aria-disabled","true","aria-hidden","true","rel","noopener noreferrer",1,"imageAnchor",3,"hidden","href","target","innerHTML"],["hidAnchor",""],["role","img","draggable","false",3,"alt","bl5Aria","bl5FocusEvent","bl5MouseEvent","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,cl,5,16,"ng-template",null,0,i.W1O),i.YNc(2,dl,3,8,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();class hl extends Ft{constructor(s){super(p.GoToGroup),this.GroupName=s}}class gl extends Ze{constructor(s){super(s,p.GoToBlockField)}}function pl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,10,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}function ml(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,6,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}let fl=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}handleControlUpdate(t){super.handleControlUpdate(t),this.init()}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}init(){this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth),this.sectionName=this.dataObject.Reference.SectionName;const t=this.sp.renderStateService.getSectionByName(this.sectionName);t&&(this.action=t.ObjectStructure?new gl(this.sectionName):new hl(this.sectionName),t.IsActive&&this.element&&!this.sp.focusService.isInViewport(this.element)&&setTimeout(()=>{this.sp.focusService.focusElementId(this.dataObject.ID)}))}executeButton(){this.sp.eventService.emitHandleActionEvent(this.action,this.controlId)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-index-item-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,pl,4,12,"ng-template",null,0,i.W1O),i.YNc(2,ml,4,8,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();function bl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",4),i.NdJ("click",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.handleClick(r,a.Name))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.ekj("isVisited",t.IsVisited),i.Q6J("innerHTML",e.getInvolvedFieldName(t),i.oJD)}}function vl(n,s){if(1&n&&(i.TgZ(0,"ul",1,2),i.YNc(3,bl,1,3,"ng-template",3),i.qZA()),2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId),i.xp6(3),i.Q6J("ngForOf",t.involvedFields)}}let yl=(()=>{class n extends pn{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}getInvolvedFields(){return this.sp.renderStateService.getInvolvedFields(this.dataObject.Reference.FieldName,this.dataObject.ErrorKindFilter)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-involved-fields"]],features:[i.qOj],decls:1,vars:1,consts:[[3,"ngIf"],[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["ngFor","",3,"ngForOf"],[3,"innerHTML","click"]],template:function(t,e){1&t&&i.YNc(0,vl,4,7,"ng-template",0),2&t&&i.Q6J("ngIf",e.hasInvolvedFields)},dependencies:[g.mk,g.sg,g.O5,g.PC,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.css-vars[_ngcontent-%COMP%]{align-items:center}"],changeDetection:0}),n})();class fr extends Ft{constructor(s){super(p.SetLanguage),this.Language=s}}function Cl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,10,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}function Sl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,7,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}let Al=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}ngOnInit(){super.ngOnInit(),this.languageName=this.dataObject.Reference.LanguageName,this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}executeButton(){this.sp.eventService.emitHandleActionEvent(new fr(this.languageName),this.controlId)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-language-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,Cl,4,12,"ng-template",null,0,i.W1O),i.YNc(2,Sl,4,9,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.css-vars[_ngcontent-%COMP%]{justify-content:var(--justify-content);align-content:var(--align-content)}"],changeDetection:0}),n})();function wl(n,s){1&n&&(i._UZ(0,"div",10),i.ALo(1,"safeHtml")),2&n&&i.Q6J("innerHTML",i.lcZ(1,1,s.$implicit.text),i.oJD)}function xl(n,s){if(1&n&&(i.YNc(0,wl,2,3,"ng-template",6),i._UZ(1,"div",7),i.ALo(2,"safeHtml"),i.TgZ(3,"div",8),i._UZ(4,"div",9),i.qZA()),2&n){const t=i.oxw(2);i.Q6J("ngForOf",t.optionList),i.xp6(1),i.Q6J("innerHTML",i.lcZ(2,4,t.displayText),i.oJD),i.uIk("aria-hidden",!t.displayText||void 0),i.xp6(3),i.Q6J("ngClass",t.optionsVisible?"arrow-up":"arrow-down")}}function _l(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",11),i.NdJ("mousedown",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.setValue(o))})("mouseover",function(){const o=i.CHM(t).index,a=i.oxw(2);return i.KtG(a.handleMouseOver(o))}),i.ALo(1,"safeHtml"),i.qZA()}if(2&n){const t=s.$implicit,e=s.index,r=i.oxw(2);i.ekj("selected",e===r.targetIndex),i.Q6J("ngStyle",r.optionItemStyle)("innerHTML",i.lcZ(1,5,t.text),i.oJD),i.uIk("id",r.optionListId+"_"+e)}}function kl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",2,3),i.NdJ("click",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.toggleOptionsVisible())})("blur",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.blurField())})("keypress",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKey(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKey(r))}),i.YNc(3,xl,5,6,"ng-template",4),i.qZA(),i.TgZ(4,"ul",5),i.YNc(5,_l,2,7,"ng-template",6),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("ngClass",t.cssClass)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("aria-expanded",t.optionsVisible)("id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex),i.xp6(3),i.Q6J("ngIf",t.hasOptions&&t.isExploded),i.xp6(1),i.Q6J("ngClass",t.optionListClass)("ngStyle",t.optionListStyle),i.uIk("id",t.optionListId),i.xp6(1),i.Q6J("ngForOf",t.optionList)}}function Ol(n,s){if(1&n&&(i._UZ(0,"option",13),i.ALo(1,"safeHtml")),2&n){const t=s.$implicit;i.Q6J("ngValue",t.value)("innerHTML",i.lcZ(1,3,t.text),i.oJD)("selected",t.selected)}}function Tl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"select",12,3),i.NdJ("ngModelChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.setValue(o.getOptionItemByValue(r)))}),i.YNc(3,Ol,2,5,"ng-template",6),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("ngModel",t.selectedValue),i.uIk("id",t.controlId)("disabled",t.disabled),i.xp6(3),i.Q6J("ngForOf",t.optionList)}}let Pl=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.languageOptions=[],this.optionListInitialized=!1,this.optionList=[],this.optionListClass=[],this.optionListStyle={},this.optionItemStyle={},this.targetIndex=0}get hasOptions(){return!Array.isNullOrEmpty(this.optionList)}get optionsVisible(){return this.ariaObject.AriaExpanded??!1}set optionsVisible(t){this.ariaObject.AriaExpanded=t}get isExploded(){return null!=this.dataObject&&this.dataObject.Visibility!==K.Collapsed}get selectedValue(){return this.hasOptions?this.optionList.find(t=>t.selected)?.value??"":""}ngOnInit(){super.ngOnInit(),this.scrollSubscription=this.sp.eventService.scrollEvent.subscribe({next:t=>{this.onWindowScroll(t)}}),this.hideList()}ngOnDestroy(){this.scrollSubscription&&this.scrollSubscription.unsubscribe(),super.ngOnDestroy()}handleControlUpdate(t){super.handleControlUpdate(t),this.optionListId||(this.optionListId=`${this.controlId}_optionList`),this.setOptionsListClass(),this.setOptions(),this.setSelectedOption()}toggleOptionsVisible(){this.initializeList(),this.optionsVisible=!this.optionsVisible,this.optionsVisible?this.showList():this.hideList()}blurField(){this.optionsVisible&&(this.optionsVisible=!1,this.cd.markForCheck())}setValue(t){t&&(this.sp.eventService.emitHandleActionEvent(new fr(t.value),this.controlId),this.cd.markForCheck(),this.displayText=t.text),this.hideList()}getOptionItemByValue(t){return this.optionList.find(e=>e.value===t)}handleMouseOver(t){this.targetIndex=t}handleKey(t){switch(t.key){case b.Enter:return t.preventDefault(),void this.handleEnterKey();case b.Up:case b.ArrowUp:return t.preventDefault(),void this.handleKeyUp();case b.Down:case b.ArrowDown:return t.preventDefault(),void this.handleKeyDown()}this.handleKeyEvent(t)}onWindowResize(){this.hideList()}onWindowMousedown(t){this.el.nativeElement.contains(t.target)||this.hideList()}onWindowTouchMove(t){this.el.nativeElement.contains(t.target)||this.hideList()}onWindowTouchEnd(t){this.el.nativeElement.contains(t.target)||this.hideList()}getText(){return this.sp.renderStateService.languageName.toLowerCase()}applyStylesAndDimensions(){if(super.applyStylesAndDimensions(),null!=this.dataObject.OptionSettings?.TextMargin){const t=this.dataObject.OptionSettings.TextMargin,e={Top:3,Right:22,Bottom:3,Left:4.4};this.sp.cultureInfoService.cultureInfo.IsRightToLeft&&(e.Left=22,e.Right=4.4);const o=this.sp.styleGeneratorService.generatePaddingStyle({Top:e.Top+t.Top,Right:e.Right+t.Right,Bottom:e.Bottom+t.Bottom,Left:e.Left+t.Left});Object.assign(this.optionItemStyle,o)}}setOptionsListClass(){if(this.optionListClass=[],this.dataObject.FontName&&this.optionListClass.push(this.dataObject.FontName),this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)){const t=this.sp.styleGeneratorService.getTextAlignmentClass(this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment));t&&this.optionListClass.push(t)}}setOptions(){this.languageOptions=this.sp.renderStateService.languageInfo??[];const t=[];if(!this.languageOptions.isEmpty())for(const e of this.languageOptions)t.push({value:e.Name,text:e.Description?e.Description:e.Name,selected:!1});this.optionList=t}setSelectedOption(){if(this.optionList){const t=this.optionList.find(e=>e.value.toLowerCase()===this.sp.renderStateService.languageName.toLowerCase());t&&(this.targetIndex=this.optionList.indexOf(t),this.optionList.forEach(e=>e.selected=!1),t.selected=!0,this.displayText=t.text)}}onWindowScroll(t){const e=t.target;e&&e.id!==this.controlId&&e.id!==this.optionListId&&(this.hideList(),this.cd.markForCheck())}hideList(){this.optionsVisible=!1,this.resetList()}resetList(){this.useCssVars?(this.optionListLeft="-9999px",this.optionListVisibility="hidden"):(this.optionListStyle.visibility="hidden",delete this.optionListStyle.top,delete this.optionListStyle.bottom,delete this.optionListStyle.maxHeight,this.optionListStyle.left="-9999px")}initializeList(){if(this.optionListInitialized)return;this.button=this.el.nativeElement.getElementsByClassName("select-control")[0],this.optionListStyle={fontFamily:getComputedStyle(this.button).fontFamily,fontSize:getComputedStyle(this.button).fontSize,fontWeight:getComputedStyle(this.button).fontWeight,fontStyle:getComputedStyle(this.button).fontStyle,color:getComputedStyle(this.button).color,textAlign:getComputedStyle(this.button).textAlign};const t=this.getBackgroundStyle();this.optionListStyle=Object.assign(this.optionListStyle,t),this.optionListInitialized=!0}getBackgroundStyle(){const t=this.dataObject.StylableProperties.find(e=>e.Name===A.Background);if(t){const e=this.sp.styleGeneratorService.generateBackgroundStyle(t.Value.Value);return"transparent"===e.background&&(e.background="#fff"),e}return{}}showList(){this.button=this.el.nativeElement.getElementsByClassName("select-control")[0],this.ulist=this.el.nativeElement.getElementsByClassName("option-list")[0];const t=this.button.getBoundingClientRect(),e=this.ulist.getBoundingClientRect(),r=window.innerHeight,o=r-(t.bottom+e.height),a=t.top-e.height,l=o>=0||o>a;let c=t.width;this.resetList(),l?(this.optionListStyle.top=t.bottom+"px",o<0&&(this.optionListStyle.maxHeight=r-t.bottom+"px",c+=17)):(this.optionListStyle.bottom=r-t.top+"px",a<0&&(this.optionListStyle.maxHeight=t.top+"px",c+=17)),this.useCssVars?(this.optionListLeft=t.right-c+"px",this.optionListWidth=`${c}px`,this.optionListVisibility="visible"):(this.optionListStyle.width=c+"px",this.optionListStyle.left=t.right-c+"px",this.optionListStyle.visibility="visible"),this.targetIndex>-1&&this.scrollToTargetIndex()}scrollToTargetIndex(){const t=document.getElementById(`${this.optionListId}_${this.targetIndex.toString()}`);t&&(this.ulist=this.el.nativeElement.getElementsByClassName("option-list")[0],this.ulist.scrollTop=t.offsetTop)}handleEnterKey(){this.optionsVisible&&0!==this.optionList.length&&this.setValue(this.optionList[this.targetIndex])}handleKeyUp(){this.targetIndex-=this.targetIndex>0?1:0,this.scrollToTargetIndex()}handleKeyDown(){this.targetIndex+=this.targetIndex<this.optionList.length-1?1:0,this.scrollToTargetIndex()}handleKeyEvent(t){if(t.key)for(let e=0,r=this.optionList.length;e<r;e++)if(0===this.optionList[e].text.toLowerCase().indexOf(t.key.toLowerCase())){this.targetIndex=e,this.scrollToTargetIndex();break}}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-language-selector"]],hostVars:8,hostBindings:function(t,e){1&t&&i.NdJ("resize",function(){return e.onWindowResize()},!1,i.Jf7)("mousedown",function(o){return e.onWindowMousedown(o)},!1,i.Jf7)("touchmove",function(o){return e.onWindowTouchMove(o)},!1,i.Jf7)("touchend",function(o){return e.onWindowTouchEnd(o)},!1,i.Jf7),2&t&&i.Udp("--option-list-width",e.optionListWidth)("--option-list-left",e.optionListLeft)("--option-list-top",e.optionListTop)("--option-list-visibility",e.optionListVisibility)},features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","combobox",1,"select-control",3,"ngStyle","ngClass","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","click","blur","keypress","keydown"],["autoWidthElement","","autoHeightElement",""],[3,"ngIf"],["role","listbox",1,"option-list",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],[1,"select-text",3,"innerHTML"],[1,"arrow-container"],[3,"ngClass"],[1,"determine-width",3,"innerHTML"],["role","option",1,"option-item",3,"ngStyle","innerHTML","mousedown","mouseover"],[3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","ngModel","ngModelChange"],[3,"ngValue","innerHTML","selected"]],template:function(t,e){if(1&t&&(i.YNc(0,kl,6,16,"ng-template",null,0,i.W1O),i.YNc(2,Tl,4,9,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,g.PC,V.YN,V.Kr,V.EJ,V.JJ,V.On,N,z,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]{--option-list-top: -9999px;--option-list-left: -9999px;--option-list-width: 100%;--option-list-visibility: hidden}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{border:1px solid darkgrey;box-sizing:border-box;border-radius:0}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(:disabled){cursor:default}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.determine-width[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{text-decoration:inherit}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.determine-width[_ngcontent-%COMP%]{visibility:hidden;height:0;margin:0}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%]{margin:0;padding:1.4px 3px 0 0}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-left:3px solid transparent;border-right:3px solid transparent}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%]{border-top:6px solid black}[_nghost-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-bottom:6px solid black}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]{list-style-type:none;position:absolute;z-index:9999;-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);overflow-y:auto;margin-top:0!important;padding:0;background:inherit;background-color:#fff;border:1px solid lightgrey}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]{z-index:999;cursor:default;width:100%;padding:3px 17px 3px 4.4px;white-space:nowrap;font:inherit;color:inherit}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]:last-child{border-bottom:0}[_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   ul.option-list[_ngcontent-%COMP%]   li.option-item[_ngcontent-%COMP%]:hover{background-color:#90caf9}[_nghost-%COMP%] > button.css-vars[_ngcontent-%COMP%]{grid-template-columns:minmax(min-content,1fr) 15px;align-items:center;justify-items:start}[_nghost-%COMP%] > button.css-vars[_ngcontent-%COMP%] > div.determine-width[_ngcontent-%COMP%], [_nghost-%COMP%] > button.css-vars[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;grid-row-start:1;grid-row-end:2}[_nghost-%COMP%] > button.css-vars[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%]{padding:.1em .3em;justify-self:var(--justify-self)}[_nghost-%COMP%] > button.css-vars[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;grid-row-start:1;grid-row-end:2}[_nghost-%COMP%] > button.css-vars[_ngcontent-%COMP%] + .option-list[_ngcontent-%COMP%]{width:var(--option-list-width);left:var(--option-list-left);visibility:var(--option-list-visibility)}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars){position:relative;display:inline-block;padding-left:4px;padding-right:15px;background-color:transparent}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars) > div.determine-width[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%], [_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars) > div.determine-width[_ngcontent-%COMP%]{padding:0 28px 0 0}[_nghost-%COMP%] > button[_ngcontent-%COMP%]:not(.css-vars) > div.arrow-container[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 3px);right:5px}"],changeDetection:0}),n})();function Ml(n,s){if(1&n&&i._UZ(0,"div",2,3),2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId)}}function Il(n,s){if(1&n&&i._UZ(0,"div",2,3),2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId)}}let El=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}handleControlUpdate(t){if(super.handleControlUpdate(t),this.useCssVars){const e=this.getBorderWidth(),r=this.getBorderColor(),o=this.getBorderStyle();this.dataObject.Orientation===$.Vertical?(this.cssStyle.width=e,this.cssStyle.borderWidth=`0 0 0 ${e}`):(this.cssStyle.height=e,this.cssStyle.borderWidth=`${e} 0 0 0`),this.cssStyle.borderStyle=o,this.cssStyle.borderColor=r}}getStyleObject(){const t=super.getStyleObject();return this.applyStrokeStyles(t),t}applyStrokeStyles(t){this.dataObject.Orientation===$.Vertical?(t.width="0",t.height=this.calculateSize(!0),t.borderLeft=this.getBorder()):(t.height="0",t.width=this.calculateSize(),t.borderTop=this.getBorder())}calculateSize(t=!1){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,t?A.Height:A.Width);let r="0";switch(e[_.UnitType]){case y.Auto:break;case y.Pixels:r=e[_.Value]+"px";break;case y.Stretch:r="100%"}return r}getBorder(){return this.sp.styleGeneratorService.getBorder(this.dataObject)}getBorderWidth(){return this.sp.styleGeneratorService.getBorderWidth(this.dataObject)}getBorderStyle(){return this.sp.styleGeneratorService.getBorderStyle(this.dataObject)}getBorderColor(){return this.sp.styleGeneratorService.getBorderColor(this.dataObject)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-line"]],features:[i.qOj],decls:3,vars:2,consts:[[3,"ngIf","ngIfElse"],["noCssVars",""],["aria-disabled","true","aria-hidden","true",3,"ngClass","ngStyle","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){if(1&t&&(i.YNc(0,Ml,3,5,"ng-template",0),i.YNc(1,Il,3,5,"ng-template",null,1,i.W1O)),2&t){const r=i.MAs(2);i.Q6J("ngIf",e.useCssVars)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();class Fl{constructor(s,t,e,r,o=[]){this.inputEl=s,this.resultContainerEl=t,this.resultTableEl=e,this.isIOS=r,this.cssClass=o,this.drawPreferenceBeneath=!0,this.style={},this.rootControlEl=document.getElementsByClassName("rootControl")[0]}resetStyle(s){s&&(this.drawPreferenceBeneath=!0),this.style.top="-9999px",this.style.left="-9999px",this.style.width="100px",this.style.height="100px",delete this.style["max-width"],delete this.style["max-height"],this.style.overflowY="scroll",this.style.overflowX="scroll",this._rootControlRect=null,this._inputRect=null,this._tableContainerRect=null,this._tableRect=null}setStyle(){const s=this.calcStyle();this.style.left=s.left+"px",this.style.top=s.top+"px",this.style.width=Math.floor(s.width)+"px",this.style.height=Math.floor(s.height)+"px",s.maxWidth&&(this.style.maxWidth=Math.floor(s.maxWidth)+"px"),s.maxHeight&&(this.style.maxHeight=Math.floor(s.maxHeight)+"px"),this.style.overflowY=s.overflowY?"scroll":"hidden",this.style.overflowX=s.overflowX?"scroll":"hidden"}get rootControlRect(){return this._rootControlRect||(this._rootControlRect=this.rootControlEl.getBoundingClientRect()),this._rootControlRect}get inputRect(){return this._inputRect||(this._inputRect=this.inputEl.getBoundingClientRect()),this._inputRect}get tableContainerRect(){return this._tableContainerRect||(this._tableContainerRect=this.resultContainerEl.getBoundingClientRect()),this._tableContainerRect}get tableRect(){return this._tableRect||(this._tableRect=this.resultTableEl.getBoundingClientRect()),this._tableRect}get pageTopPos(){return this.tableContainerRect.top+9999}get pageLeftPos(){return this.tableContainerRect.left+9999}get spaceAbove(){return this.inputRect.top}get spaceBeneath(){return window.innerHeight-this.inputRect.bottom}get spaceBeneathRoot(){return this.rootControlRect.height?this.rootControlRect.height-Math.abs(this.pageTopPos)-this.inputRect.bottom:0}get useSpaceBeneathRoot(){return!!this.rootControlRect.height&&this.spaceBeneathRoot<this.spaceBeneath}get fitsAbove(){return this.spaceAbove>=this.tableRect.height}get fitsBeneath(){return(this.useSpaceBeneathRoot?this.spaceBeneathRoot:this.spaceBeneath)>=this.tableRect.height}get scrollbarHeight(){return this.resultContainerEl.offsetHeight-this.resultContainerEl.clientHeight-2}get fitsAboveWithScroll(){return this.spaceAbove>=this.tableRect.height+this.scrollbarHeight}get fitsBeneathWithScroll(){return(this.useSpaceBeneathRoot?this.spaceBeneathRoot:this.spaceBeneath)>=this.tableRect.height+this.scrollbarHeight}get spaceFromLeft(){return window.innerWidth-this.inputRect.left}get fitsFromLeft(){return this.spaceFromLeft>=this.tableRect.width}get fitsOnScreen(){return window.innerWidth>=this.tableRect.width}get scrollbarWidth(){return this.resultContainerEl.offsetWidth-this.resultContainerEl.clientWidth-2}get fitsFromInputLeftWithScroll(){return this.spaceFromLeft>=this.tableRect.width+this.scrollbarWidth}get fitsFromScreenLeftWithScroll(){return window.innerWidth>=this.tableRect.width+this.scrollbarWidth}get reqVertScroll(){return!this.fitsAbove&&!this.fitsBeneath||this.isIOS&&this.fitsBeneath&&!this.fitsAbove||this.isIOS&&this.fitsAbove&&this.fitsBeneath&&this.drawPreferenceBeneath}get reqVertScrollWithHorScroll(){return!this.fitsAboveWithScroll&&!this.fitsBeneathWithScroll||this.isIOS&&this.fitsBeneathWithScroll&&!this.fitsAboveWithScroll||this.isIOS&&this.fitsAboveWithScroll&&this.fitsBeneathWithScroll&&this.drawPreferenceBeneath}get reqHorScroll(){return!this.fitsOnScreen}get reqHorScrollWithVertScroll(){return!this.fitsFromScreenLeftWithScroll}calcStyle(){const s={width:0,height:0,top:0,left:0,maxWidth:0,maxHeight:0,overflowX:!1,overflowY:!1};return!this.fitsAbove&&!this.fitsBeneath||(this.reqHorScroll||this.reqHorScrollWithVertScroll)&&!this.fitsAboveWithScroll&&!this.fitsBeneathWithScroll?(s.overflowY=!0,this.spaceBeneath<this.spaceAbove?(s.top=0,s.height=this.spaceAbove,s.maxHeight=this.spaceAbove,this.drawPreferenceBeneath=!1):(s.top=this.inputRect.bottom,s.height=this.useSpaceBeneathRoot?this.spaceBeneathRoot:this.spaceBeneath,this.drawPreferenceBeneath=!0)):(s.height=this.tableRect.height,this.fitsAbove&&!this.fitsBeneath||(this.reqHorScroll||this.reqVertScroll&&this.reqHorScrollWithVertScroll)&&this.fitsAboveWithScroll&&!this.fitsBeneathWithScroll?(s.top=this.inputRect.top-this.tableRect.height,s.maxHeight=this.spaceAbove,this.drawPreferenceBeneath=!1,this.reqHorScroll&&(s.top-=this.scrollbarHeight)):this.fitsBeneath&&!this.fitsAbove||(this.reqHorScroll||this.reqVertScroll&&this.reqHorScrollWithVertScroll)&&this.fitsBeneathWithScroll&&!this.fitsAboveWithScroll?(s.top=this.inputRect.bottom,this.drawPreferenceBeneath=!0):(this.fitsAbove&&this.fitsBeneath||(this.reqHorScroll||this.reqVertScroll&&this.reqHorScrollWithVertScroll)&&this.fitsAboveWithScroll&&this.fitsBeneathWithScroll)&&(this.drawPreferenceBeneath?s.top=this.inputRect.bottom:(s.top=this.inputRect.top-this.tableRect.height,s.maxHeight=this.spaceAbove,this.reqHorScroll&&(s.top-=this.scrollbarHeight))),(this.reqHorScroll||this.reqVertScroll&&this.reqHorScrollWithVertScroll)&&(s.height+=this.scrollbarHeight)),!this.fitsOnScreen||(this.reqVertScroll||this.reqHorScroll&&this.reqVertScrollWithHorScroll)&&!this.fitsFromScreenLeftWithScroll?(s.left=0,s.width=window.innerWidth,s.overflowX=!0):(this.fitsFromLeft||(this.reqVertScroll||this.reqHorScroll&&this.reqVertScrollWithHorScroll)&&this.fitsFromInputLeftWithScroll?(s.width=this.tableRect.width,s.left=this.inputRect.left):(this.fitsOnScreen||(this.reqVertScroll||this.reqHorScroll&&this.reqVertScrollWithHorScroll)&&this.fitsFromScreenLeftWithScroll)&&(s.width=this.tableRect.width,s.left=window.innerWidth-this.tableRect.width,this.reqVertScroll&&(s.left-=this.scrollbarWidth)),(this.reqVertScroll||this.reqHorScroll&&this.reqHorScrollWithVertScroll)&&(s.width+=this.scrollbarWidth)),this.isIOS&&(s.top+=Math.abs(this.pageTopPos),s.left+=Math.abs(this.pageLeftPos),s.maxHeight||(s.maxHeight=185,s.overflowY=!0)),s}}class Ll{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(){return[]}downKeyPressed(){return[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Lookup textbox insert"}}var xe=(()=>{return(n=xe||(xe={}))[n.Name=0]="Name",n[n.Text=1]="Text",n[n.TextOrName=2]="TextOrName",xe;var n})();const Dl=["lookupInput"],Vl=["lookupResultsContainer"],jl=["lookupResultsTable"];function Nl(n,s){if(1&n&&i._UZ(0,"th",8),2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("innerText",e.headers[t])}}function Rl(n,s){if(1&n&&(i.TgZ(0,"thead")(1,"tr"),i.YNc(2,Nl,1,1,"ng-template",7),i.qZA()()),2&n){const t=i.oxw();i.xp6(2),i.Q6J("ngForOf",t.fieldNames)}}function Bl(n,s){if(1&n&&i._UZ(0,"td",10),2&n){const t=s.index,e=i.oxw().$implicit,r=i.oxw();i.Q6J("ngStyle",r.optionItemStyle)("innerText",e[t].Value)}}function zl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"tr",9),i.NdJ("mousedown",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleMouseDown())})("mouseup",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleMouseUp(r))})("mouseover",function(r){const a=i.CHM(t).index,l=i.oxw();return i.KtG(l.handleItemMouseOver(r,a))}),i.YNc(1,Bl,1,2,"ng-template",7),i.qZA()}if(2&n){const t=s.index,e=i.oxw();i.ekj("selected",t===e.selectedItem),i.xp6(1),i.Q6J("ngForOf",e.fieldNames)}}let Gl=(()=>{class n extends ze{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.lookupService=a,this.updatedFromResults=!1,this.returnField="",this.returnFieldIndex=-1,this.debouncedHandleChange=new i.vpe,this.results=[],this.selectedItem=0,this.fieldNames=[],this.headers={},this.optionItemStyle={},this.parseFieldFilter=l=>l.includes(",")?l.split(","):[l],this.parseResults=(l,c,d)=>{const u=l.map(h=>c.findIndex(m=>m===h));return d.map(h=>h.filter(m=>u.includes(h.indexOf(m))))},this.startValueFieldsEvent.subscribe({next:l=>{this.lookup=l,this.lookupService.performLookup(this.fieldName,this.lookup,this.dataObject.MaximumResultCount),this.startValueFieldsEvent.unsubscribe()}}),this.debouncedHandleChangeSubscription=this.debouncedHandleChange.pipe((0,Ne.b)(300)).subscribe({next:l=>{this.lookupService.performLookup(this.fieldName,l,this.dataObject.MaximumResultCount)}}),this.selectExternalRecordStartSubscription=this.sp.eventService.selectExternalRecordStart.subscribe({next:()=>{this.dataObject.Enabled=!1}}),this.selectExternalRecordCompletedSubscription=this.sp.eventService.selectExternalRecordCompleted.subscribe({next:()=>{this.dataObject.Enabled=!0}}),this.activeFieldChangeSubscription=this.sp.eventService.activeFieldChangedEvent.subscribe({next:l=>{this.fieldInfo&&this.fieldInfo.FieldName!=l.nextField.FieldName&&this.hideResults()}})}get resultsTableId(){return`results-${this.controlId}`}ngOnInit(){super.ngOnInit(),!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.isIOS||window.addEventListener("scroll",e=>this.onWindowScroll(e),!0),this.resultContainerObj=new Fl(this.lookupInput.nativeElement,this.lookupResultsContainer.nativeElement,this.lookupResultsTable.nativeElement,this.isIOS,this.getFontCssClasses());const t=this.getResultContainerBackgroundStyle();t&&(this.resultContainerObj.style.background=t)}ngOnDestroy(){this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.isIOS||window.removeEventListener("scroll",t=>this.onWindowScroll(t)),this.debouncedHandleChangeSubscription&&this.debouncedHandleChangeSubscription.unsubscribe(),this.startValueFieldsEvent&&this.startValueFieldsEvent.unsubscribe(),this.selectExternalRecordStartSubscription&&this.selectExternalRecordStartSubscription.unsubscribe(),this.selectExternalRecordCompletedSubscription&&this.selectExternalRecordCompletedSubscription.unsubscribe(),this.activeFieldChangeSubscription&&this.activeFieldChangeSubscription.unsubscribe(),super.ngOnDestroy()}handleFieldUpdate(t){super.handleFieldUpdate(t);const e=t.ValueType;e.MaxLength&&e.MaxLength>0&&(this.maxLength=e.MaxLength),this.lookup=this.converter.convertToString(t),t.DataValue.IsDirty&&t.EventSourceId!==this.controlId&&this.selectExternalRecord(String.isNullOrEmpty(this.lookup)),this.useCssVars&&this.widthUnitType===y.Auto&&(this.size=Math.max(Math.min(O.STRING_MAX_SIZE,this.maxLength??0),this.watermarkTextLength),this.setElementWidth(this.size))}handleControlUpdate(t){super.handleControlUpdate(t),t&&(this.ariaObject.AriaOwns=`results-${t.ID}`),this.useCssVars&&this.widthUnitType===y.Auto&&(this.size=Math.max(Math.min(O.STRING_MAX_SIZE,this.maxLength??0),this.watermarkTextLength),this.setElementWidth(this.size))}handleLookupStateUpdate(t){super.handleLookupStateUpdate(t);const e=t.dataSource||t.lookupInformation;if(t.searchResult){if(Array.isPopulated(t.searchResult.DataRows)&&Array.isPopulated(t.searchResult.FieldNames)&&""===this.returnField&&-1===this.returnFieldIndex&&e){const r=t.searchResult.FieldNames;this.returnField=e?.ReturnField||"",this.returnFieldIndex=r.findIndex(o=>o===this.returnField)}if(t.searchResult.ResultCount>0){if(this.fieldNames=t.searchResult.FieldNames,this.fieldNames=e&&Array.isPopulated(e.FieldFilter)?e.FieldFilter:this.fieldNames,this.fieldNames=null!=this.dataObject.FieldFilter?this.parseFieldFilter(this.dataObject.FieldFilter):this.fieldNames,this.dataObject.Headers.Show){const r=!Array.isNullOrEmpty(t.dataSource?.FieldDefs)||!Array.isNullOrEmpty(t.lookupInformation?.FieldDefs),o=[...t.dataSource?.FieldDefs||[],...t.lookupInformation?.FieldDefs||[]];this.fieldNames.forEach(a=>{if(r){const l=o.find(c=>c.Name.toLowerCase()===a.toLowerCase());if(null!=l){if(-1!==[xe.Text,xe.TextOrName].indexOf(this.dataObject.Headers.TextSource)&&null!=l.RoleTexts[this.dataObject.Headers.RoleName])return void(this.headers[a]=l.RoleTexts[this.dataObject.Headers.RoleName]);if(-1!==[xe.Name,xe.TextOrName].indexOf(this.dataObject.Headers.TextSource))return void(this.headers[a]=l.Name)}}this.headers[a]=a})}this.results=t.searchResult.ResultCount>this.dataObject.MaximumResultCount?t.searchResult.DataRows.slice(0,this.dataObject.MaximumResultCount):t.searchResult.DataRows,this.results=this.parseResults(this.fieldNames,t.searchResult.FieldNames,this.results),this.cd.destroyed||this.cd.detectChanges(),this.showResults()}else this.clearResults()}else this.clearResults()}setContentWidth(){if(this.sp.renderStateService.optimizeNoStylesheets)super.setContentWidth();else if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto){const r=this.fieldInfo,o=r?r.ValueType.MaxLength??0:0,a=this.determineOffsetWidth(this.dataObject.FontName,"W",o,this.watermarkTextLength),l=Math.max(Math.min(O.STRING_MAX_SIZE,o),this.watermarkTextLength),c=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),d=c?c.Left+c.Right:0,u=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),h=u?u.Left+u.Right:0,m=Math.ceil(a/10)*l;t.contentWidth=m+d+h}}}handleChange(){if(String.isNullOrEmpty(this.lookup)){const t=this.fieldInfo;null==t?.LookupInformation?t&&this.converter.setEmptyAnswer(t):null!=t?.LookupInformation&&t?.LookupInformation.AllowClearRecord?this.selectExternalRecord(!0):this.clearResults()}else this.updatedFromResults?this.updatedFromResults=!1:(this.sp.navigationService.setInsertMode(),this.debouncedHandleChange.emit(this.lookup))}handleKey(t){switch(t.key){case b.Enter:this.cancelKeyboardEvent(t),Array.isNullOrEmpty(this.results)||this.setSelectedOption();break;case b.Up:case b.ArrowUp:this.cancelKeyboardEvent(t),this.selectedItem-=this.selectedItem>0?1:0,Array.isNullOrEmpty(this.results)||(this.ariaObject.AriaActiveDescendant=this.results[this.selectedItem][0].Value);break;case b.Down:case b.ArrowDown:this.cancelKeyboardEvent(t),this.selectedItem+=this.selectedItem<this.results.length-1?1:0,Array.isNullOrEmpty(this.results)||(this.ariaObject.AriaActiveDescendant=this.results[this.selectedItem][0].Value)}}handleMouseDown(){}handleMouseUp(t){this.selectOption(t)}handleItemMouseOver(t,e){this.selectedItem=e}onClickOutside(){this.hideResults()}onWindowResize(){this.hideResults()}getStyleObject(){const t=super.getStyleObject();return this.fontStyle=this.sp.styleGeneratorService.copyFontStyle(t),t}getKeyboardInsertStrategy(){return new Ll(this.sp.injector)}getFontCssClasses(){return super.getFontCssClasses(!0)}getText(){return this.lookup}setText(t){this.lookup=t,this.handleChange()}clearText(){this.setText("")}applyStylesAndDimensions(){if(super.applyStylesAndDimensions(),null!=this.dataObject.OptionSettings?.TextMargin){const t=this.dataObject.OptionSettings.TextMargin,e={Top:5,Right:5,Bottom:5,Left:5},o=this.sp.styleGeneratorService.generatePaddingStyle({Top:e.Top+t.Top,Right:e.Right+t.Right,Bottom:e.Bottom+t.Bottom,Left:e.Left+t.Left});Object.assign(this.optionItemStyle,o)}}setElementWidth(t){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin);let r=0;e&&(r=e.Left+e.Right),this.cssStyle.width=`calc(${t}em + ${r}px)`}selectOption(t){t.preventDefault(),this.setSelectedOption()}getResultContainerBackgroundStyle(){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Background);return t?this.sp.styleGeneratorService.generateBackgroundStyle(t,"#fff").background:null}hideResults(){this.ariaObject.AriaExpanded=!1,this.reset(!0)}showResults(){this.ariaObject.AriaExpanded=!0,this.reset(),this.redraw()}cancelKeyboardEvent(t){Array.isNullOrEmpty(this.results)||(t.preventDefault(),t.cancelBubble=!0)}setSelectedOption(){this.updatedFromResults=!0,this.lookup=this.results[this.selectedItem][this.returnFieldIndex].Value,this.hideResults();const t=this.fieldInfo;t&&(this.converter.convertFromString(this.lookup,t),this.fieldInfo=t),this.executeActions(this.dataObject.OnValueChanged),null!=this.fieldInfo?.LookupInformation&&this.selectExternalRecord()}selectExternalRecord(t=!1){if(t)this.lookupService.selectExternalRecord(this.fieldName,[],[],this.dataObject.AutoEnter);else{const e=this.currentLookupState.searchResult?.FieldNames??[];let r=[];Array.isNullOrEmpty(this.results)||(r=e.map((o,a)=>this.results[this.selectedItem][a])),this.lookupService.selectExternalRecord(this.fieldName,e,r,this.dataObject.AutoEnter)}}clearResults(){this.results=[],this.hideResults()}reset(t=!1){this.resultContainerObj&&(this.resultContainerObj.resetStyle(t),this.cd.destroyed||this.cd.detectChanges())}redraw(){this.resultContainerObj&&(this.resultContainerObj.setStyle(),this.cd.destroyed||this.cd.detectChanges())}onWindowScroll(t){this.el.nativeElement.contains(t.target)||this.hideResults()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Te),i.Y36(Oi))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-lookup-textbox"]],viewQuery:function(t,e){if(1&t&&(i.Gf(Dl,7),i.Gf(Vl,7),i.Gf(jl,7)),2&t){let r;i.iGM(r=i.CRH())&&(e.lookupInput=r.first),i.iGM(r=i.CRH())&&(e.lookupResultsContainer=r.first),i.iGM(r=i.CRH())&&(e.lookupResultsTable=r.first)}},hostBindings:function(t,e){1&t&&i.NdJ("resize",function(){return e.onWindowResize()},!1,i.Jf7)},features:[i.qOj],decls:11,vars:22,consts:[["type","text","autocapitalize","off","autocomplete","off",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","ngModel","ngModelChange","input","keydown"],["autoWidthElement","","autoHeightElement","","lookupInput",""],[1,"lookup-results-container",3,"ngClass","ngStyle","bl5ClickOutsideContext","bl5ClickOutside"],["lookupResultsContainer",""],["role","listbox",1,"lookup-results-table"],["lookupResultsTable",""],[3,"ngIf"],["ngFor","",3,"ngForOf"],[3,"innerText"],[3,"mousedown","mouseup","mouseover"],["role","option",3,"ngStyle","innerText"]],template:function(t,e){if(1&t&&(i.TgZ(0,"input",0,1),i.NdJ("ngModelChange",function(o){return e.lookup=o})("input",function(){return e.handleChange()})("keydown",function(o){return e.handleKey(o)}),i.qZA(),i.TgZ(4,"div",2,3),i.NdJ("bl5ClickOutside",function(){return e.onClickOutside()}),i.TgZ(6,"table",4,5),i.YNc(8,Rl,3,1,"ng-template",6),i.TgZ(9,"tbody"),i.YNc(10,zl,2,3,"ng-template",7),i.qZA()()()),2&t){const r=i.MAs(3);i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("ngModel",e.lookup),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("maxlength",e.maxLength)("placeholder",e.watermarkText)("size",e.size)("tabindex",e.tabIndex),i.xp6(4),i.Q6J("ngClass",e.resultContainerObj.cssClass)("ngStyle",e.resultContainerObj.style)("bl5ClickOutsideContext",r),i.xp6(2),i.uIk("id",e.resultsTableId),i.xp6(2),i.Q6J("ngIf",e.dataObject.Headers.Show),i.xp6(2),i.Q6J("ngForOf",e.results)}},dependencies:[g.mk,g.sg,g.O5,g.PC,V.Fj,V.JJ,V.nD,V.On,N,z,Be,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const Hl=["bl5-menu-list",""];function Ul(n,s){if(1&n&&(i.TgZ(0,"li",3),i._UZ(1,"a"),i.qZA()),2&n){const t=i.oxw().$implicit;i.ekj("hidden",t.Visibility>0),i.Q6J("ngClass",t.Enabled?"enabled":"disabled")}}function Wl(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",4),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw();return i.KtG(a.onItemClick(r,o))})("keypress",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw();return i.KtG(a.onItemClick(r,o))})("mouseenter",function(r){i.CHM(t);const o=i.oxw().$implicit,a=i.oxw();return i.KtG(a.onItemMouseEnter(r,o))})("itemChanged",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.cd.detectChanges())})("itemClicked",function(r){i.CHM(t);const o=i.oxw(2);return i.KtG(o.handleItemClick(r))}),i.qZA()}if(2&n){const t=i.oxw().$implicit,e=i.oxw();i.Udp("background-color",e.getColor(t.BackgroundColor)),i.ekj("active",-1!==e.aet.indexOf(t.ID)),i.Q6J("menuItemId",t.ID)("level",e.level)("submenuBackground",e.submenuBackground)("aetSubject",e.aetSubject)}}function Yl(n,s){if(1&n&&(i.YNc(0,Ul,2,3,"ng-template",null,1,i.W1O),i.YNc(2,Wl,1,8,"ng-template",2)),2&n){const t=s.$implicit,e=i.MAs(1);i.xp6(2),i.Q6J("ngIf",!t.Separator)("ngIfElse",e)}}let fn=(()=>{class n{constructor(t,e,r){this.subscriptionService=t,this.colorService=e,this.cd=r,this.aet=[],this.itemClicked=new i.vpe,this.onListClick=o=>{this.isRoot||o.stopPropagation()},this.onItemClick=(o,a)=>{if(o instanceof KeyboardEvent&&!["Enter","Space"].includes(o.code))return!1;if(this.isRoot||o.stopPropagation(),a.Enabled){const l=this.aetSubject.getValue();this.isRoot?this.aetSubject.next(l.isEmpty()?[a.ID]:[]):Array.isNullOrEmpty(a.MenuItems)?this.aetSubject.next([]):(l[this.level]=a.ID,this.aetSubject.next(l.slice(0,this.level+1))),this.handleItemClick(a)}return!0},this.onItemMouseEnter=(o,a)=>{if(o.stopPropagation(),a.Enabled){const l=this.aetSubject.getValue();if(this.isRoot)this.aetSubject.next(Array.isNullOrEmpty(l)||Array.isNullOrEmpty(a.MenuItems)?[]:[a.ID]);else{let c=this.level;Array.isNullOrEmpty(a.MenuItems)||(l[this.level]=a.ID,c++),this.aetSubject.next(l.slice(0,c))}}}}get isRoot(){return 0===this.level}ngOnInit(){if(!this.parentSubscription)if(this.isRoot){const t=this.subscriptionService.getControlSubjectById(this.parentId);t&&(this.parentSubscription=t.subscribe({next:e=>{this.menuItems=e.MenuItems}}))}else{const t=this.subscriptionService.getMenuItemSubjectById(this.parentId);t&&(this.parentSubscription=t.subscribe({next:e=>{this.menuItems=e.MenuItems}}))}this.aetSubscription||(this.aetSubscription=this.aetSubject.subscribe({next:t=>this.aet=t}))}ngOnDestroy(){this.parentSubscription&&this.parentSubscription.unsubscribe(),this.aetSubscription&&this.aetSubscription.unsubscribe()}handleItemClick(t){this.itemClicked.emit(t)}getColor(t){return this.colorService.hasColor(t)?this.colorService.generateRGBAColorForProperty(t):"transparent"}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(pt),i.Y36(qt),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ul","bl5-menu-list",""]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(o){return e.onListClick(o)})},inputs:{aetSubject:"aetSubject",level:"level",enabled:"enabled",menuItems:"menuItems",submenuBackground:"submenuBackground",parentId:"parentId"},outputs:{itemClicked:"itemClicked"},attrs:Hl,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["separator",""],[3,"ngIf","ngIfElse"],[1,"menu-item","separator",3,"ngClass"],["bl5-menu-item","",1,"menu-item",3,"menuItemId","level","submenuBackground","aetSubject","click","keypress","mouseenter","itemChanged","itemClicked"]],template:function(t,e){1&t&&i.YNc(0,Yl,3,2,"ng-template",0),2&t&&i.Q6J("ngForOf",e.menuItems)},changeDetection:0}),n})();const Kl=["menuList"];function Ql(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"ul",3,4),i.NdJ("keyup",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onKeyup(r))})("itemClicked",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleItemClick(r))}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("level",0)("enabled",t.isEnabled)("menuItems",t.children)("parentId",t.controlId)("submenuBackground",t.submenuBackground)("aetSubject",t.aetSubject)}}let Jl=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.aetSubject=new Et.X([])}get hasChildren(){return!Array.isNullOrEmpty(this.dataObject.MenuItems)}get isEnabled(){return this.dataObject.Enabled}get children(){return this.dataObject.MenuItems}get submenuBackground(){return this.sp.styleGeneratorService.generateBackgroundStyle(this.dataObject.SubmenuBackground)}onKeyup(t){t.target.click()}handleControlUpdate(t){super.handleControlUpdate(t),this.elementTemplateColumns=`repeat(${this.dataObject.MenuItems.length}, min-content)`}handleItemClick(t){this.executeActions(t.OnClick)}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;t.width.unitType===y.Auto&&this.menuList?.nativeElement?.children?.length>0&&(t.contentWidth=[].slice.call(this.menuList.nativeElement.children).map(e=>e?e.offsetWidth:0).reduce((e,r)=>e+r,this.menuList.nativeElement.children.length))}}onClickOutside(){this.aetSubject.next([])}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-menu"]],viewQuery:function(t,e){if(1&t&&i.Gf(Kl,5,i.SBq),2&t){let r;i.iGM(r=i.CRH())&&(e.menuList=r.first)}},features:[i.qOj],decls:4,vars:7,consts:[["role","menu",3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent","bl5ClickOutside"],["autoWidthElement","","autoHeightElement",""],[3,"ngIf"],["bl5-menu-list","",1,"menu-list","root-list",3,"level","enabled","menuItems","parentId","submenuBackground","aetSubject","keyup","itemClicked"],["menuList",""]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i.NdJ("bl5ClickOutside",function(){return e.onClickOutside()}),i.YNc(3,Ql,2,6,"ng-template",2),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(3),i.Q6J("ngIf",e.hasChildren))},dependencies:[g.mk,g.O5,g.PC,N,fn,z,Be,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.MenuComponent.css-vars[_ngcontent-%COMP%]   ul.root-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:var(--grid-template-columns)}"],changeDetection:0}),n})();class Zl{constructor(s,t){this.injector=s,this.numberSlider=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return[]}enterKeyPressed(){return[]}leftKeyPressed(s){return s.preventDefault(),this.numberSlider.dataObject.Orientation===$.Horizontal&&this.numberSlider.previousValue(),[]}rightKeyPressed(s){return s.preventDefault(),this.numberSlider.dataObject.Orientation===$.Horizontal&&this.numberSlider.nextValue(),[]}upKeyPressed(s){return s.preventDefault(),this.numberSlider.dataObject.Orientation===$.Vertical&&this.numberSlider.previousValue(),[]}downKeyPressed(s){return s.preventDefault(),this.numberSlider.dataObject.Orientation===$.Vertical&&this.numberSlider.nextValue(),[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(s){return s.preventDefault(),this.numberSlider.firstValue(),[]}endKeyPressed(s){return s.preventDefault(),this.numberSlider.lastValue(),[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(){return[]}spacePressed(){return[]}getName(){return"Number slider empty"}}class ql{constructor(s,t){this.injector=s,this.numberSlider=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(s){if(this.numberSlider.dataObject.Orientation!==$.Horizontal){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Left);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}return this.numberSlider.previousValue(),[]}rightKeyPressed(s){if(this.numberSlider.dataObject.Orientation!==$.Horizontal){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Right);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}return this.numberSlider.nextValue(),[]}upKeyPressed(s){if(this.numberSlider.dataObject.Orientation!==$.Vertical){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}return s.preventDefault(),this.numberSlider.previousValue(),[]}downKeyPressed(s){if(this.numberSlider.dataObject.Orientation!==$.Vertical){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}return s.preventDefault(),this.numberSlider.nextValue(),[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Number slider insert"}}var Lt=(()=>{return(n=Lt||(Lt={}))[n.TopLeft=0]="TopLeft",n[n.BottomRight=1]="BottomRight",n[n.Both=2]="Both",n[n.None=3]="None",Lt;var n})();class $l{constructor(s,t,e,r,o={},a=0){this.percentage=s,this.value=t,this.valueAsString=e,this.showValue=r,this.style=o,this.order=a}}let br=(()=>{class n{getTicks(t){const e=this.getNumberOfTicks(t),r=this.getStep(t),o=[];for(let a=0;a<=e;a++)o[o.length]=this.getTick(t,e,r,a);return o}getTick(t,e,r,o){const a=(0,Ot.Z)(t.minimumValue),l=(0,Ot.Z)(t.maximumValue),c=t.precision,d=t.showTicks;let u,h,m;if(0===o)u=0,h=a,m=d;else if(o===e)u=100,h=l,m=d;else{u=this.getPercentage(o,e,4);const D=(0,Ot.Z)(t.labelInterval),G=this.getTickValue(a,o,r);h=Number(G.round(c)),m=d&&G.minus(a).mod(D).eq(0)}const f=this.getOrder(o,e,t.reverseOrder),w=this.getTickStyle(t.orientation,t.rtl,t.reverseOrder,u);return new $l(u,h,h.toFixed(c),m,w,f)}getNumberOfTicks(t){return Number((0,Ot.Z)(t.maximumValue).minus((0,Ot.Z)(t.minimumValue)).div((0,Ot.Z)(t.labelInterval).div((0,Ot.Z)(t.ticksPerInterval))).round(0))}getStep(t){return(0,Ot.Z)(t.labelInterval).div((0,Ot.Z)(t.ticksPerInterval))}getTickValue(t,e,r){return t.plus((0,Ot.Z)(e).times(r))}getPercentage(t,e,r){return Number((0,Ot.Z)(t).div((0,Ot.Z)(e)).times((0,Ot.Z)(100)).round(r))}getOrder(t,e,r){return Number(r?e-t:t)}getTickStyle(t,e,r,o){const a={};return a[this.getTickOrientation(t,e,r)]=null!=o?o+"%":"0",a}getTickOrientation(t,e,r){return t?e!==r?"bottom":"top":e!==r?"right":"left"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var vr=U(1281);function Xl(n,s){1&n&&i.GkF(0)}function tc(n,s){if(1&n&&i._UZ(0,"span",8),2&n){const t=i.oxw().$implicit;i.Q6J("innerText",t.valueAsString)}}const ec=function(n,s){return{enabled:n,disabled:s}},yr=function(n,s){return{"marker-large":n,"marker-normal":s}};function ic(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",5),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.handleClick(o.value))}),i.YNc(1,tc,1,1,"ng-template",6),i._UZ(2,"span",7),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("ngClass",i.WLB(4,ec,e.enabled,!e.enabled))("ngStyle",t.style),i.xp6(1),i.Q6J("ngIf",t.showValue),i.xp6(1),i.Q6J("ngClass",i.WLB(7,yr,t.showValue,!t.showValue))}}function nc(n,s){if(1&n&&(i.TgZ(0,"ul",3),i.YNc(1,ic,3,10,"ng-template",4),i.qZA()),2&n){const t=i.oxw();i.xp6(1),i.Q6J("ngForOf",t.ticks)}}function rc(n,s){if(1&n&&i._UZ(0,"div",8),2&n){const t=i.oxw().$implicit;i.Q6J("innerText",t.valueAsString)}}const oc=function(n){return{order:n}},sc=function(n,s,t){return{enabled:n,disabled:s,mirrored:t}};function ac(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",10),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.handleClick(o.value))}),i.YNc(1,rc,1,1,"ng-template",6),i._UZ(2,"div",7),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("ngStyle",i.VKq(4,oc,t.order))("ngClass",i.kEZ(6,sc,e.enabled,!e.enabled,e.mirrored)),i.xp6(1),i.Q6J("ngIf",t.showValue),i.xp6(1),i.Q6J("ngClass",i.WLB(10,yr,t.showValue,!t.showValue))}}const lc=function(n,s){return{horizontal:n,vertical:s}};function cc(n,s){if(1&n&&(i.TgZ(0,"div",9),i.YNc(1,ac,3,13,"ng-template",4),i.qZA()),2&n){const t=i.oxw();i.Q6J("ngClass",i.WLB(2,lc,0===t.orientation,1===t.orientation)),i.xp6(1),i.Q6J("ngForOf",t.ticks)}}let dc=(()=>{class n{constructor(){this._useCssVars=!1,this._mirrored=!1,this.tickClicked=new i.vpe}get useCssVars(){return this._useCssVars}set useCssVars(t){this._useCssVars=(0,vr.Ig)(t)}get mirrored(){return this._mirrored}set mirrored(t){this._mirrored=(0,vr.Ig)(t)}handleClick(t){this.enabled&&this.tickClicked.emit(t)}ngOnChanges(t){this.useCssVars&&t?.orientation&&(t.orientation.currentValue===$.Horizontal?(this.ticksRows="min-content",this.ticksColumns=`repeat(${t.ticks.currentValue.length},minmax(min-content, 1fr))`):(this.ticksColumns="min-content",this.ticksRows=`repeat(${t.ticks.currentValue.length},minmax(min-content, 1fr))`))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-number-slider-ticks"]],hostVars:4,hostBindings:function(t,e){2&t&&i.Udp("--ticks-rows",e.ticksRows)("--ticks-columns",e.ticksColumns)},inputs:{useCssVars:"useCssVars",mirrored:"mirrored",orientation:"orientation",enabled:"enabled",ticks:"ticks"},outputs:{tickClicked:"tickClicked"},features:[i.TTD],decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["noCssVars",""],["cssVars",""],[1,"ticks"],["ngFor","",3,"ngForOf"],[1,"tick",3,"ngClass","ngStyle","click"],[3,"ngIf"],[1,"marker",3,"ngClass"],[1,"tick-value",3,"innerText"],[1,"css-vars","ticks",3,"ngClass"],[1,"tick",3,"ngStyle","ngClass","click"]],template:function(t,e){if(1&t&&(i.YNc(0,Xl,1,0,"ng-container",0),i.YNc(1,nc,2,1,"ng-template",null,1,i.W1O),i.YNc(3,cc,2,5,"ng-template",null,2,i.W1O)),2&t){const r=i.MAs(2),o=i.MAs(4);i.Q6J("ngIf",e.useCssVars)("ngIfThen",o)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,g.PC],styles:["[_nghost-%COMP%]{--ticks-columns: 0;--ticks-rows: 0}[_nghost-%COMP%]   .ticks.css-vars[_ngcontent-%COMP%]{display:var(--display);grid-template-columns:var(--ticks-columns);grid-template-rows:var(--ticks-rows)}[_nghost-%COMP%]   .ticks.css-vars[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{display:grid;justify-items:center;align-items:center}[_nghost-%COMP%]   .ticks.css-vars[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{background:black;margin:0;padding:0}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{grid-auto-flow:row}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .tick-value[_ngcontent-%COMP%]{grid-row-start:1;grid-row-end:2}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{grid-row-start:2;grid-row-end:3}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .marker-normal[_ngcontent-%COMP%]{height:8px;width:1pt}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .marker-large[_ngcontent-%COMP%]{height:12px;width:1pt}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick.mirrored[_ngcontent-%COMP%]   .tick-value[_ngcontent-%COMP%]{grid-row-start:2;grid-row-end:3}[_nghost-%COMP%]   .ticks.css-vars.horizontal[_ngcontent-%COMP%]   .tick.mirrored[_ngcontent-%COMP%]   .marker-large[_ngcontent-%COMP%]{grid-row-start:1;grid-row-end:2}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{grid-auto-flow:column}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .marker-normal[_ngcontent-%COMP%]{width:8px;height:1pt}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   .marker-large[_ngcontent-%COMP%]{width:12px;height:1pt}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]   .tick.mirrored[_ngcontent-%COMP%]   .tick-value[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3}[_nghost-%COMP%]   .ticks.css-vars.vertical[_ngcontent-%COMP%]   .tick.mirrored[_ngcontent-%COMP%]   .marker-large[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2}"],changeDetection:0}),n})();function uc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"bl5-number-slider-ticks",4),i.NdJ("tickClicked",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleTickClick(r))}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("useCssVars",t.useCssVars)("enabled",t.enabled)("ticks",t.ticks)("orientation",t.orientation)}}function hc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"bl5-number-slider-ticks",5),i.NdJ("tickClicked",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleTickClick(r))}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("enabled",t.enabled)("orientation",t.orientation)("ticks",t.ticks)("useCssVars",t.useCssVars)}}const gc=function(n,s,t,e){return{"use-css-vars":n,"no-ticks":s,horizontal:t,vertical:e}},pc=function(n,s,t,e,r,o,a){return{"--grid-column-start":n,"--grid-column-end":s,"--grid-row-start":t,"--grid-row-end":e,"--grid-template-columns":r,"--grid-template-rows":o,"--numberslider-track-size":a}};let mc=(()=>{class n extends bt{constructor(t,e,r,o,a,l){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.numberConverter=o,this.realConverter=a,this.ticksService=l,this.orientationStr=$[$.Horizontal].toLowerCase(),this.tickPlacementStr=Lt[Lt.TopLeft].toLowerCase(),this.precision=0,this.trackStyle={},this.isDefaultValue=!0,this._minValue=null,this._maxValue=null,this._selectedValue=null,this.step=1,this.showTicks=!0,this.showTopLeftTickValues=!1,this.showBottomRightTickValues=!1,this.sliderConfig={}}get rtl(){return this.sp.cultureInfoService.cultureInfo.IsRightToLeft}get directionStr(){return this.rtl!==this.reverseOrder?"rtl":"ltr"}get minValue(){return this._minValue??0}get maxValue(){return this._maxValue??0}get selectedValue(){return this._selectedValue??0}get enabled(){return this.dataObject.Enabled}get noUiSliderGridColumnStart(){return this.orientation===$.Horizontal?2:1}get noUiSliderGridColumnEnd(){const t=Math.round(this.maxValue-this.minValue)/this.step*2;return this.orientation===$.Horizontal?t:1}get noUiSliderGridRowStart(){return this.orientation===$.Vertical?2:1}get noUiSliderGridRowEnd(){const t=Math.round(this.maxValue-this.minValue)/this.step*2;return this.orientation===$.Vertical?t:1}get noUiSliderGridTemplateColumn(){const t=Math.round(this.maxValue-this.minValue)/this.step*2;return this.orientation===$.Horizontal?`repeat(${t},1fr)`:"min-content"}get noUiSliderGridTemplateRows(){const t=Math.round(this.maxValue-this.minValue)/this.step*2;return this.orientation===$.Horizontal?"min-content":`repeat(${t},1fr)`}get noUiSliderTrackSize(){return`${this.trackSize}px`}ngOnInit(){super.ngOnInit(),this.init()}ngAfterViewInit(){super.ngAfterViewInit(),this.setThumbStyle(),this.setTrackStyle()}handleControlUpdate(t){super.handleControlUpdate(t),this.labelInterval=t.LabelInterval,this.orientation=t.Orientation,this.orientationStr=$[this.orientation].toLowerCase(),this.thumbSize=t.ThumbSize,this.thumbColor=t.ThumbColor,this.tickPlacement=t.TickPlacement,this.tickPlacementStr=Lt[this.tickPlacement].toLowerCase(),this.ticksPerInterval=t.TicksPerInterval,this.trackSize=t.TrackSize,this.trackColor=t.TrackColor,this.reverseOrder=t.ReverseOrder,this.useCssVars&&(this.orientation===$.Horizontal?(this.elementTemplateColumns="20px minmax(min-content, 1fr) 20px",this.elementTemplateRows="min-content minmax(24px, 1fr) min-content"):(this.elementTemplateColumns="min-content minmax(24px, 1fr) min-content",this.elementTemplateRows="20px minmax(min-content, 1fr) 20px"))}handleFieldUpdate(t){super.handleFieldUpdate(t);const r=this.getConverter(t.DataValue.DataType).getAnswerAsString(t);this._selectedValue=r?parseFloat(r):null,this.isDefaultValue=null===this._selectedValue,this.isDefaultValue&&(this.init(),this.handleUpdate())}getCssClasses(){const t=super.getCssClasses();return t.push("number-slider"),t.push(`orientation-${$[this.dataObject.Orientation].toLowerCase()}`),t.push(`horizontal-alignment-${X[this.horizontalAlignment].toLowerCase()}`),t.push(`vertical-alignment-${mt[this.verticalAlignment].toLowerCase()}`),t.push(`ticks-${Lt[this.dataObject.TickPlacement].toLowerCase()}`),t.push(this.rtl?"rtl":"ltr"),t}handleChange(t){null!=t&&this._selectedValue!=t&&(this._selectedValue=t),this.el.nativeElement.getElementsByClassName("number-slider")[0].focus(),setTimeout(()=>{const e=this.fieldInfo;if(e){const r=this.getConverter(e.DataValue.DataType);r.convertFromString(null!=this._selectedValue?this._selectedValue.toString():"",e),this.isDefaultValue=!1,this.handleUpdate(),this.fieldInfo=e,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,r,e)}},0)}handleTickClick(t){this.enabled&&(this._selectedValue=t,this.isDefaultValue&&this.handleChange())}isSelected(t){return!this.isDefaultValue&&t===this._selectedValue}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto){let e;if(this.dataObject.Orientation===$.Vertical)e=this.el.nativeElement.getBoundingClientRect().width+Math.max(this.dataObject.ThumbSize,this.dataObject.TrackSize);else{e=5*this.ticks.filter(o=>!o.showValue).length;const r=this.el.nativeElement.querySelectorAll(".tick-value")||[];r&&(e+=(Array.from(r).map(o=>o.getBoundingClientRect().width).reduce((o,a)=>o>a?o:a)+2)*r.length)}t.contentWidth=e+4}}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.height.unitType===y.Auto){let e;if(this.dataObject.Orientation===$.Horizontal)e=this.el.nativeElement.getBoundingClientRect().height+Math.max(this.dataObject.ThumbSize,this.dataObject.TrackSize);else{e=5*this.ticks.filter(o=>!o.showValue).length;const r=this.el.nativeElement.querySelectorAll(".tick-value")||[];r&&(e+=(Array.from(r).map(o=>o.getBoundingClientRect().height).reduce((o,a)=>o>a?o:a)+4)*r.length)}t.contentHeight=e+4}}}handleUpdate(){const t=this.el.nativeElement.querySelectorAll(".noUi-handle")[0];t&&(this.isDefaultValue?(this.sp.helperService.removeClass(t,"value-selected"),this.sp.helperService.addClass(t,"default-value")):(this.sp.helperService.removeClass(t,"default-value"),this.sp.helperService.addClass(t,"value-selected")))}handleStart(t){this.activateField(),this._selectedValue=t,this.isDefaultValue=!1,this.handleUpdate(),this.handleChange()}previousValue(){this._selectedValue=this.reverseOrder?Math.min(this.selectedValue+this.step,this.maxValue):Math.max(this.selectedValue-this.step,this.minValue),this.handleChange()}nextValue(){this._selectedValue=this.reverseOrder?Math.max(this.selectedValue-this.step,this.minValue):Math.min(this.selectedValue+this.step,this.maxValue),this.handleChange()}firstValue(){this._selectedValue=this.reverseOrder?this._maxValue:this._minValue,this.handleChange()}lastValue(){this._selectedValue=this.reverseOrder?this._minValue:this._maxValue,this.handleChange()}getKeyboardInsertStrategy(){return new ql(this.sp.injector,this)}getKeyboardEmptyStrategy(){return new Zl(this.sp.injector,this)}checkAutoEnter(t,e,r){return t&&r.DataValue.AnswerStatus===T.Response}init(){const t=this.fieldInfo;if(t){const e=this.getConverter(t.DataValue.DataType),r=t.ValueType,o=r.Ranges;Array.isPopulated(o)?(o[0].MinValue.Kind===wt.Number&&(this._minValue=o[0].MinValue.Value),o[0].MaxValue.Kind===wt.Number&&(this._maxValue=o[0].MaxValue.Value)):r.MaxLength&&r.MaxLength>0&&(this._minValue=parseInt(`-${"9".repeat(r.MaxLength)}`,10),this._maxValue=parseInt("9".repeat(r.MaxLength+1),10)),ae.isRealType(r)&&r.Decimals&&(this.precision=r.Decimals<O.FLOATING_POINT_PRECISION?r.Decimals:O.FLOATING_POINT_PRECISION,this.precision>0&&(this.step/=Math.pow(10,this.precision)));const a=e.getAnswerAsString(t);this._selectedValue=a?parseFloat(a):null}null!==this._selectedValue?(this.isDefaultValue=!1,null===this._minValue&&null===this._maxValue&&(this._selectedValue>0?this._minValue=0:this._selectedValue<0&&(this._maxValue=0)),null===this._minValue&&(this._minValue=this._selectedValue),null===this._maxValue&&(this._maxValue=this._selectedValue)):null!==this._minValue?(this._selectedValue=this._minValue,null===this._maxValue&&this._selectedValue<0&&(this._maxValue=0)):null!==this._maxValue&&(this._selectedValue=this._maxValue,this._selectedValue>0&&(this._minValue=0)),this.showTicks=this.tickPlacement!==Lt.None,this.showTopLeftTickValues=[Lt.TopLeft,Lt.Both].includes(this.tickPlacement),this.showBottomRightTickValues=[Lt.BottomRight,Lt.Both].includes(this.tickPlacement),this.showTicks&&this.setTicks(),this.sliderConfig={direction:this.directionStr,orientation:this.orientationStr,format:new gi.k3}}getConverter(t){return t===I.Integer?this.numberConverter:this.realConverter}setTrackStyle(){this.trackStyle[this.orientation?"width":"height"]=this.trackSize+"px",this.trackStyle.background=this.sp.colorService.generateRGBAColor(this.trackColor);const e=this.el.nativeElement.querySelectorAll(".noUi-base")[0];e&&(e.style.background=this.sp.colorService.generateRGBAColor(this.trackColor))}setThumbStyle(){const t=this.el.nativeElement.querySelectorAll(".noUi-handle")[0];t&&(t.style.background=this.sp.colorService.generateRGBAColor(this.thumbColor))}setTicks(){this.ticks=this.ticksService.getTicks({showTicks:this.tickPlacement!==Lt.None,orientation:this.orientation,labelInterval:this.labelInterval,ticksPerInterval:this.ticksPerInterval,minimumValue:this.minValue,maximumValue:this.maxValue,rtl:this.rtl,precision:this.precision,reverseOrder:this.reverseOrder})}applyStylesAndDimensions(){super.applyStylesAndDimensions(),this.useCssVars?this.cssStyle.textAlign="start":(this.style.textAlign="start",this.style.justifyContent="start")}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Je),i.Y36(bi),i.Y36(br))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-number-slider"]],features:[i.qOj],decls:6,vars:34,consts:[["role","slider",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5Outline","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement",""],[3,"ngIf"],[3,"ngClass","ngStyle","config","max","min","step","ngModel","ngModelChange","update","start"],[1,"ticks-host","topleft",3,"useCssVars","enabled","ticks","orientation","tickClicked"],["mirrored","",1,"ticks-host","bottomright",3,"enabled","orientation","ticks","useCssVars","tickClicked"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i.YNc(3,uc,1,4,"ng-template",2),i.TgZ(4,"nouislider",3),i.NdJ("ngModelChange",function(o){return e.handleChange(o)})("update",function(){return e.handleUpdate()})("start",function(o){return e.handleStart(o)}),i.qZA(),i.YNc(5,hc,1,4,"ng-template",2),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("tabindex",e.tabIndex),i.xp6(3),i.Q6J("ngIf",e.showTicks&&e.showTopLeftTickValues),i.xp6(1),i.Q6J("ngClass",i.l5B(21,gc,e.useCssVars,!e.showTicks,0===e.orientation,1===e.orientation))("ngStyle",i.Hh0(26,pc,e.noUiSliderGridColumnStart,e.noUiSliderGridColumnEnd,e.noUiSliderGridRowStart,e.noUiSliderGridRowEnd,e.noUiSliderGridTemplateColumn,e.noUiSliderGridTemplateRows,e.noUiSliderTrackSize))("config",e.sliderConfig)("max",e.maxValue)("min",e.minValue)("step",e.step)("ngModel",e.selectedValue),i.uIk("disabled",e.disabled),i.xp6(1),i.Q6J("ngIf",e.showTicks&&e.showBottomRightTickValues))},dependencies:[g.mk,g.O5,g.PC,V.JJ,V.On,gi.pH,N,dc,z,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]   .number-slider.css-vars[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}[_nghost-%COMP%]   .number-slider.css-vars[_ngcontent-%COMP%]   .ng2-nouislider[_ngcontent-%COMP%]{margin:0;padding:0;display:grid;grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}[_nghost-%COMP%]   .number-slider.css-vars.orientation-horizontal.ticks-none[_ngcontent-%COMP%]{padding:1em 0}[_nghost-%COMP%]   .number-slider.css-vars.orientation-horizontal.ticks-topleft[_ngcontent-%COMP%]{padding-bottom:1em}[_nghost-%COMP%]   .number-slider.css-vars.orientation-horizontal.ticks-bottomright[_ngcontent-%COMP%]{padding-top:1em}[_nghost-%COMP%]   .number-slider.css-vars.orientation-horizontal[_ngcontent-%COMP%]   .ticks-host.topleft[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;grid-row-start:1;grid-row-end:2}[_nghost-%COMP%]   .number-slider.css-vars.orientation-horizontal[_ngcontent-%COMP%]   .ticks-host.bottomright[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;grid-row-start:3;grid-row-end:4}[_nghost-%COMP%]   .number-slider.css-vars.orientation-horizontal[_ngcontent-%COMP%]   .ng2-nouislider[_ngcontent-%COMP%]{margin:0;grid-column-start:2;grid-column-end:3;grid-row-start:2;grid-row-end:3}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical.ticks-none[_ngcontent-%COMP%]{padding:0 1em}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical.ticks-topleft[_ngcontent-%COMP%]{padding-right:1em}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical.ticks-bottomright[_ngcontent-%COMP%]{padding-left:1em}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical[_ngcontent-%COMP%]   .ticks-host.topleft[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;grid-row-start:2;grid-row-end:3}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical[_ngcontent-%COMP%]   .ticks-host.bottomright[_ngcontent-%COMP%]{grid-column-start:3;grid-column-end:4;grid-row-start:2;grid-row-end:3}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical[_ngcontent-%COMP%]   .ng2-nouislider[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;grid-row-start:2;grid-row-end:3}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical[_ngcontent-%COMP%]   .ng2-nouislider.no-ticks.vertical[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .number-slider.css-vars.orientation-vertical[_ngcontent-%COMP%]   .ng2-nouislider.no-ticks.horizontal[_ngcontent-%COMP%]{min-width:150px}"],changeDetection:0}),n})();class fc{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Number textbox insert"}}let bc=(()=>{class n extends bt{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.numberConverter=o,this.realConverter=a,this.textChange=new Qt.x,this.isBeingEdited=!1,this.hasDecimals=!1}get pattern(){return this.displayNumericKeyboard()?"[0-9]*":void 0}ngOnInit(){super.ngOnInit(),this.handleOwnSubscriptionUpdates=!1,!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.textChangeSubscription=this.textChange.subscribe({next:t=>{this.hasDecimals=this.numberStringContainsDecimals(t),this.pushChange(t)}})}ngOnDestroy(){this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.textChangeSubscription&&this.textChangeSubscription.unsubscribe(),this.activeControlChangeSubscription&&this.activeControlChangeSubscription.unsubscribe(),super.ngOnDestroy()}setContentWidth(){const t=this.fieldInfo,e=t?t.ValueType:null;if(e&&(this.fieldMaxLength=this.sp.styleGeneratorService.getFieldMaxLength(this.watermarkText??"",e,O.NUMBER_MAX_LENGTH,this.dataObject.ShowThousandSeparator)),this.sp.renderStateService.optimizeNoStylesheets)super.setContentWidth();else if(this.controlSize instanceof ht){const r=this.controlSize;if(r.width.unitType===y.Auto){const o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),a=o?o.Left+o.Right:0,l=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),c=l?l.Left+l.Right:0,d=e?.MaxLength,h=this.determineOffsetWidth(this.dataObject.FontName,"8",d,this.watermarkTextLength);let m=Math.ceil(h/10)*this.fieldMaxLength;this.dataObject.ShowThousandSeparator&&(m+=Math.ceil(h/10)*(Math.ceil(this.fieldMaxLength/3)-1)),r.contentWidth=m+a+c}}}handleFieldUpdate(t){super.handleFieldUpdate(t);const e=this.getConverter(t.DataValue.DataType);this.hasDecimals=this.numberStringContainsDecimals(t.DataValue.ValueAsString||""),this.setTextValue(e.convertToString(t)),this.useCssVars&&this.widthUnitType===y.Auto&&(this.fieldMaxLength=this.sp.styleGeneratorService.getFieldMaxLength(this.watermarkText??"",t.ValueType,O.NUMBER_MAX_LENGTH,this.dataObject.ShowThousandSeparator),this.setElementWidth(this.fieldMaxLength))}handleControlUpdate(t){super.handleControlUpdate(t),this.realConverter.setDecimalSeparator(this.getDecimalSeparator()),this.useCssVars&&this.widthUnitType===y.Auto&&this.setElementWidth(this.fieldMaxLength)}onInput(t){this.isBeingEdited=!0,!1===this.trySetText(t.target.value)&&(t.target.value=this.textValue)}onFocus(){this.isBeingEdited=!0}onBlur(){const t=this.fieldInfo;if(t){this.isBeingEdited=!1;const e=this.getConverter(t.DataValue.DataType),r=this.dataObject.ShowThousandSeparator?e.removeThousandSeparators(this.textValue,this.sp.cultureInfoService.cultureInfo.ThousandSeparator,this.sp.cultureInfoService.cultureInfo.DecimalSeparator,this.hasDecimals):this.textValue,o=this.realConverter.fixedDecimals(t.ValueType),a=t.DataValue.ValueAsString,l=String.hasValue(a)?e.sanitize(a,t.ValueType):"";this.setTextValue(l,o),e.applyErrors(r,t)&&(this.fieldInfo=t),this.sp.renderStateService.flagFieldNameAsVisited(t.FieldName)}}getKeyboardInsertStrategy(){return new fc(this.sp.injector)}getFontCssClasses(){return super.getFontCssClasses(!0)}getText(){return this.textValue}setText(t){this.dataObject.Enabled&&(this.setTextValue(t),this.textChange.next(t))}clearText(){this.setText("")}pushChange(t){const e=this.fieldInfo;if(e){const r=this.getConverter(e.DataValue.DataType),o=this.dataObject.ShowThousandSeparator?r.removeThousandSeparators(t,this.sp.cultureInfoService.cultureInfo.ThousandSeparator,this.sp.cultureInfoService.cultureInfo.DecimalSeparator,this.hasDecimals):t;r.convertFromString(o,e),r.isValid(o,e.ValueType)===S.Ok&&(r.removeRangeCheckErrors(e),this.fieldInfo=e),this.executeActions(this.dataObject.OnValueChanged,e),this.applyAutoEnter(this.dataObject.AutoEnter,r,e)}}displayNumericKeyboard(){return this.sp.userAgentService.isMobile&&this.acceptsOnlySimpleNumbers()}acceptsOnlySimpleNumbers(){const t=this.fieldInfo;if(t){const e=t.ValueType,r=this.getConverter(t.DataValue.DataType),o=!Array.isNullOrEmpty(e.Ranges);return e.DataType===I.Integer&&o&&!r.hasNegativeRange(e)}return!1}getConverter(t){return t===I.Integer?this.numberConverter:this.realConverter}setTextValue(t,e=0){this.textValue=this.dataObject.ShowThousandSeparator&&t?this.numberConverter.addThousandSeparators(t,this.sp.renderStateService.activeCultureId,this.sp.cultureInfoService.cultureInfo.DecimalSeparator,e):t,this.cd.markForCheck()}getDecimalSeparator(){return this.sp.cultureInfoService.cultureInfo.DecimalSeparator}numberStringContainsDecimals(t){const e=(t.match(/[\D]/g)||[]).length;return e>0&&!(1===e&&t.startsWith("-"))}trySetText(t){const e=this.fieldInfo;if(e){const r=this.getConverter(e.DataValue.DataType);if(t.isEmpty()&&null===e.DataValue.ValueAsString||t===e.DataValue.ValueAsString)return;if((this.dataObject.TreatThousandSeparatorAsDecimalSymbol??1)&&this.dataObject.ShowThousandSeparator&&!this.textValue.isEmpty()){const a=this.sp.helperService.compare(this.textValue.split(""),t.split(""));if(a.lineCountInserted>0){const l=a.lines.find(c=>-1===c.aIndex);l&&l.line===this.sp.cultureInfoService.cultureInfo.ThousandSeparator&&(t=t.substring(0,l.bIndex)+this.sp.cultureInfoService.cultureInfo.DecimalSeparator+t.substring(l.bIndex+1))}}const o=this.dataObject.ShowThousandSeparator?r.removeThousandSeparators(t,this.sp.cultureInfoService.cultureInfo.ThousandSeparator,this.sp.cultureInfoService.cultureInfo.DecimalSeparator,this.hasDecimals):t;return!(!(this.dataObject.TreatThousandSeparatorAsDecimalSymbol??1)&&-1!==o.indexOf(this.sp.cultureInfoService.cultureInfo.ThousandSeparator)||r.isAllowed(o,e.ValueType)!==S.Ok||(this.setTextValue(o),this.textChange.next(o),0))}}setElementWidth(t){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin);let r=0;e&&(r=e.Left+e.Right),this.cssStyle.width=`calc(${t}em + ${r}px)`}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Je),i.Y36(bi))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-number-textbox"]],inputs:{fieldMaxLength:"fieldMaxLength",textValue:"textValue"},features:[i.qOj],decls:4,vars:19,consts:[["type","text","autocapitalize","off","autocomplete","off","title","",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5NavigationToggle","bl5Outline","bl5Tooltip","value","input","focus","blur"],["autoWidthElement","","autoHeightElement","","inputField",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("input",function(o){return e.onInput(o)})("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5NavigationToggle",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("value",e.textValue),i.uIk("data-fieldname",e.fieldName)("disabled",e.disabled)("id",e.controlId)("maxlength",e.fieldMaxLength)("name",e.controlId)("pattern",e.pattern)("placeholder",e.watermarkText)("size",e.fieldMaxLength)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,N,z,vt,tt,R,Se,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const vc=function(n,s){return{"word-break no-auto":n,auto:s}};let yc=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.errorText="",this.setErrorText=()=>{const l=this.sp.renderStateService.getPageError(this.dataObject.IncludeGroupErrors,this.dataObject.ErrorKindFilter||null);if(l){switch(l.ErrorKind){case st.Route:l.RouteErrorCause===Bt.EmptyButRequired?this.errorText=`<p>${this.dataObject.RouteErrorText}</p>`:this.dataObject.NoAnswerExpectedText&&(this.errorText=`<p>${this.dataObject.NoAnswerExpectedText}</p>`);break;case st.Signal:case st.Check:this.errorText=`<p>${l.RoleTexts?.Message??""}</p>`;break;case st.RangeCheck:this.errorText=`<p>${l.InvolvedControl?.SystemTexts[l.Key]??""}</p>`}return!0}return this.errorText="",!1},this.containsRichText=!0}get autoWidth(){return this.widthUnitType===y.Auto}ngOnInit(){super.ngOnInit();const t=this.sp.subscriptionService.allFieldsObservable;t&&(this.subscription=t.subscribe({next:()=>{this.setErrorText()&&this.sp.renderStateService.useSkipLinks&&this.sp.skipLinkService.add({description:`${this.controlId}:${this.errorText}`,id:this.controlId,index:0,kind:this.controlKind,name:this.controlId,isError:!0})}}))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-page-error-text"]],features:[i.qOj],decls:6,vars:15,consts:[["role","alert","aria-live","assertive",3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["data-text-alignment",""],[1,"text-container",3,"ngClass","innerHTML"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(3,"div",2),i._UZ(4,"div",3),i.ALo(5,"safeHtml"),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(3),i.uIk("data-horizontal-text-alignment",e.horizontalTextAlignment)("data-vertical-text-alignment",e.verticalTextAlignment),i.xp6(1),i.Q6J("ngClass",i.WLB(12,vc,!e.autoWidth,e.autoWidth))("innerHTML",i.lcZ(5,10,e.errorText),i.oJD))},dependencies:[g.mk,g.PC,N,z,R,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]   .css-vars[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-grid}"],changeDetection:0}),n})();function Cc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",4),i.NdJ("click",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.handleClick(r,a.Name))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.ekj("isVisited",t.IsVisited),i.Q6J("innerHTML",e.getInvolvedFieldName(t),i.oJD),i.uIk("disabled",e.disabled)}}function Sc(n,s){if(1&n&&(i.TgZ(0,"ul",1,2),i.YNc(3,Cc,1,4,"ng-template",3),i.qZA()),2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId),i.xp6(3),i.Q6J("ngForOf",t.involvedFields)}}let Ac=(()=>{class n extends pn{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}ngOnInit(){super.ngOnInit();const t=this.sp.subscriptionService.allFieldsObservable;t&&(this.subscription=t.subscribe({next:()=>{const e=this.getInvolvedFields();e&&this.sp.renderStateService.useSkipLinks&&this.sp.skipLinkService.add({description:`Involved Field : ${e[0].Name}`,id:this.controlId,index:0,kind:this.controlKind,name:this.controlId,isError:!0,fieldName:e[0].Name})}}))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}getInvolvedFields(){return this.sp.renderStateService.getPageInvolvedFields(this.dataObject.IncludeGroupErrors,this.dataObject.ErrorKindFilter||null)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-page-involved-fields"]],features:[i.qOj],decls:1,vars:1,consts:[[3,"ngIf"],[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],["ngFor","",3,"ngForOf"],[3,"innerHTML","click"]],template:function(t,e){1&t&&i.YNc(0,Sc,4,7,"ng-template",0),2&t&&i.Q6J("ngIf",e.hasInvolvedFields)},dependencies:[g.mk,g.sg,g.O5,g.PC,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}ul.css-vars[_ngcontent-%COMP%]{align-items:center}"],changeDetection:0}),n})();function wc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,9,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}function xc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,7,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}let _c=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}ngOnInit(){super.ngOnInit(),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}executeButton(){this.dataObject.CheckName&&this.sp.eventService.emitHandleActionEvent(new mn(this.dataObject.CheckName),this.controlId)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-page-suppress-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,wc,4,11,"ng-template",null,0,i.W1O),i.YNc(2,xc,4,9,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const kc=["fieldSetElement"],Oc=["legendElement"];function Tc(n,s){}function Pc(n,s){if(1&n&&(i.TgZ(0,"div",5),i.YNc(1,Tc,0,0,"ng-template",6),i.qZA()),2&n){const t=i.oxw(2),e=i.MAs(4);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5MouseEvent",t.dataObject)("bl5SkipLinkTarget",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId),i.xp6(1),i.Q6J("ngIf",t.child)("ngIfThen",e)}}function Mc(n,s){}function Ic(n,s){}function Ec(n,s){if(1&n&&(i.TgZ(0,"fieldset",7,8),i.YNc(2,Mc,0,0,"ng-template",6),i.YNc(3,Ic,0,0,"ng-template",6),i.qZA()),2&n){const t=i.oxw(2),e=i.MAs(4),r=i.MAs(6);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId),i.xp6(2),i.Q6J("ngIf",t.child)("ngIfThen",e),i.xp6(1),i.Q6J("ngIf",t.hasLegendText)("ngIfThen",r)}}function Fc(n,s){if(1&n&&(i.YNc(0,Pc,2,9,"ng-template",null,4,i.W1O),i.YNc(2,Ec,4,10,"ng-template",0)),2&n){const t=i.MAs(1),e=i.oxw();i.xp6(2),i.Q6J("ngIf",e.isGroupBox)("ngIfElse",t)}}function Lc(n,s){}function Dc(n,s){if(1&n&&(i.TgZ(0,"div",5,9),i.YNc(3,Lc,0,0,"ng-template",6),i.qZA()),2&n){const t=i.oxw(2),e=i.MAs(4);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5MouseEvent",t.dataObject)("bl5SkipLinkTarget",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("data-horizontal-alignment",t.horizontalAlignment)("data-vertical-alignment",t.verticalAlignment)("data-horizontal-scrollbar",t.horizontalScrollbar)("data-vertical-scrollbar",t.verticalScrollbar),i.xp6(3),i.Q6J("ngIf",t.child)("ngIfThen",e)}}function Vc(n,s){}function jc(n,s){}function Nc(n,s){if(1&n&&(i.TgZ(0,"fieldset",7,10),i.YNc(4,Vc,0,0,"ng-template",6),i.YNc(5,jc,0,0,"ng-template",6),i.qZA()),2&n){const t=i.oxw(2),e=i.MAs(4),r=i.MAs(6);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("data-horizontal-alignment",t.horizontalAlignment)("data-vertical-alignment",t.verticalAlignment)("data-horizontal-scrollbar",t.horizontalScrollbar)("data-vertical-scrollbar",t.verticalScrollbar),i.xp6(4),i.Q6J("ngIf",t.child)("ngIfThen",e),i.xp6(1),i.Q6J("ngIf",t.hasLegendText)("ngIfThen",r)}}function Rc(n,s){if(1&n&&(i.YNc(0,Dc,4,13,"ng-template",null,4,i.W1O),i.YNc(2,Nc,6,14,"ng-template",0)),2&n){const t=i.MAs(1),e=i.oxw();i.xp6(2),i.Q6J("ngIf",e.isGroupBox)("ngIfElse",t)}}function Bc(n,s){if(1&n&&i.GkF(0,11),2&n){const t=i.oxw();i.Q6J("childType",t.child.type)("dataObject",t.child.dataObject)("parentId",t.child.parentId)}}function zc(n,s){if(1&n&&i._UZ(0,"legend",12,13),2&n){const t=i.oxw();i.Q6J("ngStyle",t.legendStyle)("innerText",t.legendText)}}let Gc=(()=>{class n extends et{constructor(t,e,r,o){super(e,r,o),this.modelService=t,this.sp=e,this.el=r,this.cd=o,this.DEFAULT_AUTO_HEIGHT=500,this.legendStyle={}}get fieldSetElement(){return this.fieldSetElementRef?this.fieldSetElementRef.nativeElement:null}get legendElement(){return this.legendElementRef?this.legendElementRef.nativeElement:null}get isGroupBox(){return this.dataObject.GroupBox}get hasLegendText(){return this.isGroupBox&&!String.isNullOrEmpty(this.legendText)}ngOnInit(){super.ngOnInit();const t=this.dataObject?.Child;t&&(this.child=this.useCssVars&&t.Kind===v.TableControl?this.modelService.createChild(t,this.controlId,"CssTableControl"):this.modelService.createChild(t,this.controlId))}ngAfterViewInit(){super.ngAfterViewInit(),this.addScrollEventListener()}ngOnDestroy(){this.removeScrollEventListener(),super.ngOnDestroy()}getCssClasses(){const t=super.getCssClasses();return this.controlSize.hasOverflowingChild()&&t.push("no-overflow"),t}handleControlUpdate(t){if(super.handleControlUpdate(t),this.horizontalScrollbar=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalScrollbar),this.verticalScrollbar=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.VerticalScrollbar),this.dataObject.Child&&(this.horizontalAlignment=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject.Child,A.HorizontalAlignment),this.verticalAlignment=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject.Child,A.VerticalAlignment)),this.isGroupBox&&(this.legendText=t.Text),this.useCssVars){switch(this.widthUnitType){case y.Auto:this.elementTemplateColumns="min-content";break;case y.Pixels:case y.Stretch:this.elementTemplateColumns="minmax(0, 1fr)"}switch(this.heightUnitType){case y.Auto:this.elementTemplateRows="min-content";break;case y.Pixels:case y.Stretch:this.elementTemplateRows="minmax(0, 1fr)"}}}setContentWidth(){if(this.controlSize instanceof ii){const t=this.controlSize;if(t.width.unitType===y.Auto&&this.autoHeightElement&&this.autoWidthElement){this.autoHeightElement.style.width="auto";let e=0;this.autoWidthElement&&(e=Math.ceil(this.autoWidthElement.getBoundingClientRect().width));let r=0;this.isGroupBox&&this.legendElement&&String.hasValue(this.legendText)&&(r=this.legendElement.offsetWidth),t.contentWidth=Math.max(e,r)}}}setContentHeight(){if(this.controlSize instanceof ii){const t=this.controlSize;if(t.height.unitType===y.Auto&&this.autoHeightElement){this.autoHeightElement.style.height="auto";let e=0;if(this.autoHeightElement){const r=this.autoHeightElement.getBoundingClientRect().height;e=Math.ceil(r)}if(this.child){const r=this.sp.stylablePropertyService.getValueForStylableProperty(this.child.dataObject,A.Height);-1!==[v.Grid,v.TableControl,v.Panel,v.DataGrid].indexOf(this.child.dataObject.Kind)&&r.UnitType===y.Auto&&(e=Math.max(e,this.DEFAULT_AUTO_HEIGHT))}t.contentHeight=e}}}getStyleObject(){const t=super.getStyleObject();if(Object.assign(t,this.sp.styleGeneratorService.generateAlignmentObject(this.dataObject)),this.child&&this.child.dataObject){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.child.dataObject,A.Width),r=this.sp.stylablePropertyService.getValueForStylableProperty(this.child.dataObject,A.Height),o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalScrollbar),a=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.VerticalScrollbar);(e.UnitType===y.Stretch&&o===Ht.Auto||"hidden"==t.overflowX)&&delete t.overflowX,(r.UnitType===y.Stretch&&a===Ht.Auto||"hidden"==t.overflowY)&&delete t.overflowY}return this.dataObject.GroupBox&&this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin)&&(this.legendStyle.padding=t.padding||{},delete t.padding),t}getText(){return this.isGroupBox&&this.legendText?this.legendText:""}createChildControlSizes(){const t=[];if(this.dataObject.Child){const e=this.sp.sizeTreeService.createControlSize(this.dataObject.Child);e&&t.push(e)}return t}updateControlSize(){this.useCssVars||(this.controlSize instanceof ii&&(this.controlSize.isGroupBox=this.isGroupBox),super.updateControlSize())}addScrollEventListener(){const t=this.el.nativeElement.children[0];t&&t.addEventListener("scroll",e=>{this.handleScroll(e)})}removeScrollEventListener(){const t=this.el.nativeElement.children[0];t&&t.removeEventListener("scroll",e=>{this.handleScroll(e)})}handleScroll(t){this.sp.eventService.scrollEvent.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>me)),i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-panel"]],viewQuery:function(t,e){if(1&t&&(i.Gf(kc,5),i.Gf(Oc,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.fieldSetElementRef=r.first),i.iGM(r=i.CRH())&&(e.legendElementRef=r.first)}},hostVars:2,hostBindings:function(t,e){2&t&&i.Udp("--legend-padding",e.elementLegendPadding)},features:[i.qOj],decls:7,vars:2,consts:[[3,"ngIf","ngIfElse"],["noCssVars",""],["component",""],["legend",""],["noGroupBox",""],[3,"ngClass","ngStyle","bl5Aria","bl5MouseEvent","bl5SkipLinkTarget","bl5Tooltip"],[3,"ngIf","ngIfThen"],[3,"ngClass","ngStyle","bl5Aria","bl5MouseEvent","bl5Tooltip"],["fieldSetElement",""],["autoWidthElement","","autoHeightElement",""],["autoWidthElement","","autoHeightElement","","fieldSetElement",""],["bl5Component","",3,"childType","dataObject","parentId"],[3,"ngStyle","innerText"],["legendElement",""]],template:function(t,e){if(1&t&&(i.YNc(0,Fc,3,2,"ng-template",0),i.YNc(1,Rc,3,2,"ng-template",null,1,i.W1O),i.YNc(3,Bc,1,3,"ng-template",null,2,i.W1O),i.YNc(5,zc,2,2,"ng-template",null,3,i.W1O)),2&t){const r=i.MAs(2);i.Q6J("ngIf",e.useCssVars)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,we,R,gn],styles:['[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]{--legend-padding: 0;font-size:0}[_nghost-%COMP%] > fieldset[_ngcontent-%COMP%]{width:0;height:auto}[_nghost-%COMP%] > [data-horizontal-scrollbar="2"][_ngcontent-%COMP%]{touch-action:pan-x pinch-zoom}[_nghost-%COMP%] > [data-vertical-scrollbar="2"][_ngcontent-%COMP%]{touch-action:pan-y pinch-zoom}[_nghost-%COMP%]   .PanelComponent[_ngcontent-%COMP%]:not(.css-vars){display:inline-block;vertical-align:top}[_nghost-%COMP%]   .PanelComponent[_ngcontent-%COMP%]:not(.css-vars)   legend[_ngcontent-%COMP%]{margin:0 20px}[_nghost-%COMP%]   .PanelComponent.css-vars[_ngcontent-%COMP%]:not(.height-auto){overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .PanelComponent.css-vars[_ngcontent-%COMP%]:not(.width-auto):not(.height-stretch){overflow-x:auto}[_nghost-%COMP%]   .PanelComponent.css-vars[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{--legend-padding: .2em .5em;padding:var(--legend-padding)}'],changeDetection:0}),n})();class Hc extends Ft{constructor(s){super(p.SetParallel),this.Parallel=s}}function Uc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,10,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}function Wc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,6,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}let Yc=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}ngOnInit(){super.ngOnInit(),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}executeButton(){this.sp.eventService.emitHandleActionEvent(new Hc(this.dataObject.Reference.ParallelName),this.controlId)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-parallel-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,Uc,4,12,"ng-template",null,0,i.W1O),i.YNc(2,Wc,4,8,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const Kc=["listItem"];function Qc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",4),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.handleClick(o))})("mouseover",function(){const o=i.CHM(t).index,a=i.oxw();return i.KtG(a.onMouseOver(o))})("mouseout",function(){const o=i.CHM(t).index,a=i.oxw();return i.KtG(a.onMouseOut(o))}),i._UZ(1,"span",5,6),i.qZA()}if(2&n){const t=s.$implicit;i.xp6(1),i.Q6J("innerText",t)}}let Jc=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.involvedFieldNames=[],this.onMouseOver=o=>{const a=this.listItems.find((l,c)=>c===o);a&&a.nativeElement&&this.setSetHoverColors(a.nativeElement)},this.onMouseOut=o=>{const a=this.listItems.find((l,c)=>c===o);a&&a.nativeElement&&this.removeColors(a.nativeElement)},this.setSetHoverColors=o=>{o.style.backgroundColor=this.sp.colorService.generateRGBAColor(this.dataObject.HoverBackgroundColor),o.style.color=this.sp.colorService.generateRGBAColor(this.dataObject.HoverFontColor)},this.removeColors=o=>{o.style.removeProperty("background-color"),o.style.removeProperty("color")},this.isEqual=(o,a)=>JSON.stringify(o)===JSON.stringify(a)}ngOnInit(){super.ngOnInit(),this.getInvolvedFieldNames()}ngOnDestroy(){this.involvedFieldNamesSubscription&&this.involvedFieldNamesSubscription.unsubscribe(),super.ngOnDestroy()}handleClick(t){this.sp.eventService.emitHandleActionEvent(new Ze(t),this.controlId)}getInvolvedFieldNames(){this.involvedFieldNamesSubscription=this.sp.subscriptionService.recordErrorsSubject.subscribe({next:t=>{let e=!1,r=[...this.involvedFieldNames];if(Array.isNullOrEmpty(t))Array.isNullOrEmpty(r)||(e=!0);else{const o=t.filter(a=>a.Selected);if(Array.isNullOrEmpty(o))Array.isNullOrEmpty(r)||(e=!0);else{const a=[];o.forEach(l=>{Array.isPopulated(l.InvolvedFields)&&a.push(l.InvolvedFields.map(c=>this.getInvolvedFieldName(c)))}),Array.isPopulated(a)&&null!=a[0]&&(this.isEqual(r,a[0])||(r=a[0],e=!0))}}e&&(this.involvedFieldNames=r,this.sp.eventService.controlVisibilityChanged.emit())}})}getInvolvedFieldName(t){return this.sp.helperService.getInvolvedFieldName(t,this.dataObject.SelectedName)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-record-errors-involved-fields"]],viewQuery:function(t,e){if(1&t&&i.Gf(Kc,5),2&t){let r;i.iGM(r=i.CRH())&&(e.listItems=r)}},features:[i.qOj],decls:5,vars:7,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["controlContainer",""],["autoHeightElement",""],["ngFor","",3,"ngForOf"],[3,"click","mouseover","mouseout"],[3,"innerText"],["autoWidthElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(2,"ul",null,2),i.YNc(4,Qc,3,1,"ng-template",3),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(4),i.Q6J("ngForOf",e.involvedFieldNames))},dependencies:[g.mk,g.sg,g.PC,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const Zc=["listItem"];function qc(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",4,5),i.NdJ("click",function(){const r=i.CHM(t),o=r.$implicit,a=r.index,l=i.oxw();return i.KtG(l.handleClick(o,a))})("mouseover",function(){const o=i.CHM(t).index,a=i.oxw();return i.KtG(a.onMouseOver(o))})("mouseout",function(){const o=i.CHM(t).index,a=i.oxw();return i.KtG(a.onMouseOut(o))}),i._UZ(2,"span",6),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw();i.xp6(2),i.Q6J("innerText",e.getErrorText(t))}}let $c=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.getErrorText=o=>{let a="";if(this.dataObject.AnswerRequiredText)switch(o.ErrorKind){case st.Route:{const l=o.RouteErrorCause===Bt.AnsweredButOffRoute?this.dataObject.NoAnswerExpectedText:this.dataObject.AnswerRequiredText;!String.isNullOrEmpty(l)&&l.indexOf("{0}")>0&&(a=l.replace("{0}",this.getInvolvedFieldName(o)));break}case st.RangeCheck:a=`Field ${this.getInvolvedFieldName(o)} has an invalid value`;break;case st.Signal:case st.Check:a=`${o.RoleTexts?.Message??""} (${st[o.ErrorKind]})`}return a},this.onMouseOver=o=>{const l=this.listItems.find((c,d)=>d===o)?.nativeElement;null!=l&&this.setSetHoverColors(l)},this.onMouseOut=o=>{const l=this.listItems.find((c,d)=>d===o)?.nativeElement;null!=l&&(this.recordErrorSelected(o)?this.setSelectedColors(l):this.removeColors(l))},this.setSelectedColors=o=>{o.style.backgroundColor=this.sp.colorService.generateRGBAColor(this.dataObject.SelectedBackgroundColor),o.style.color=this.sp.colorService.generateRGBAColor(this.dataObject.SelectedFontColor)},this.setSetHoverColors=o=>{o.style.backgroundColor=this.sp.colorService.generateRGBAColor(this.dataObject.HoverBackgroundColor),o.style.color=this.sp.colorService.generateRGBAColor(this.dataObject.HoverFontColor)},this.removeColors=o=>{o.style.removeProperty("background-color"),o.style.removeProperty("color")},this.isEqual=(o,a)=>JSON.stringify(o)===JSON.stringify(a)}ngOnInit(){super.ngOnInit(),this.getRecordErrorsSubscription()}ngAfterViewInit(){this.setSelectedRecordColor()}handleControlUpdate(t){super.handleControlUpdate(t),this.updateRecordErrors(),this.setSelectedRecordColor()}ngOnDestroy(){this.recordErrorsSubscription&&this.recordErrorsSubscription.unsubscribe(),super.ngOnDestroy()}handleClick(t,e){this.setSelectedRecord(e)&&this.sp.subscriptionService.recordErrorsSubject.next(this.recordErrors)}getInvolvedFieldName(t){return Array.isPopulated(t.InvolvedFields)?t.InvolvedFields[0].Name:""}getRecordErrorsSubscription(){this.recordErrorsSubscription||(this.recordErrorsSubscription=this.sp.subscriptionService.recordErrorsSubject.subscribe({next:t=>{this.updateRecordErrors(t)}}))}updateRecordErrors(t=this.sp.renderStateService.recordErrors){const e=this.dataObject.ErrorKindFilter,r=Array.isPopulated(t)?Array.isPopulated(e)?t.filter(o=>e.indexOf(o.ErrorKind)>-1):t:[];this.isEqual(r,this.recordErrors)||(this.recordErrors=r,this.setSelectedRecord(0),this.sp.subscriptionService.recordErrorsSubject.next(this.recordErrors),this.sp.eventService.controlVisibilityChanged.emit())}setSelectedRecord(t){let e=!1;return Array.isNullOrEmpty(this.recordErrors)||(this.recordErrors.forEach((r,o)=>{t===o?(r.Selected||(e=!0),r.Selected=!0):(r.Selected&&(e=!0),delete r.Selected)}),this.setColors(t)),e}setSelectedRecordColor(){if(Array.isNullOrEmpty(this.recordErrors))this.removeAllColors();else{const t=this.recordErrors.findIndex(e=>e.Selected);this.setColors(t)}}setColors(t){this.listItems&&this.listItems.forEach((e,r)=>{if(null!=e?.nativeElement){const o=e.nativeElement;r===t?this.setSelectedColors(o):this.removeColors(o)}})}removeAllColors(){this.listItems&&this.listItems.forEach(t=>this.removeColors(t.nativeElement))}recordErrorSelected(t){return this.recordErrors.findIndex(e=>e.Selected)===t}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-record-errors-listbox"]],viewQuery:function(t,e){if(1&t&&i.Gf(Zc,5),2&t){let r;i.iGM(r=i.CRH())&&(e.listItems=r)}},features:[i.qOj],decls:6,vars:7,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["controlContainer",""],["autoHeightElement","","autoWidthElement",""],["ngFor","",3,"ngForOf"],[3,"click","mouseover","mouseout"],["listItem",""],[3,"innerText"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(2,"ul",null,2),i.YNc(5,qc,3,1,"ng-template",3),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(5),i.Q6J("ngForOf",e.recordErrors))},dependencies:[g.mk,g.sg,g.PC,N,z,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})(),Xc=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}handleControlUpdate(t){super.handleControlUpdate(t),this.useCssVars&&(this.cssStyle.borderColor=this.sp.styleGeneratorService.getBorderColor(t),this.cssStyle.borderColor&&(this.cssStyle.borderStyle=this.sp.styleGeneratorService.getBorderStyle(t),this.cssStyle.borderWidth=this.sp.styleGeneratorService.getBorderWidth(t)))}getStyleObject(){let t=super.getStyleObject();return t=Object.assign(t,this.sp.styleGeneratorService.applyStrokeStyles(this.el.nativeElement,this.dataObject)),t}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-rectangle"]],features:[i.qOj],decls:3,vars:5,consts:[["aria-disabled","true","aria-hidden","true",3,"ngClass","ngStyle","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&i._UZ(0,"div",0,1),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId))},dependencies:[g.mk,g.PC,N,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{vertical-align:top}[_nghost-%COMP%] > div[_ngcontent-%COMP%]:not(.css-vars){display:inline-flex}"],changeDetection:0}),n})(),td=(()=>{class n extends bt{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isChecked=!this.getConverter(t).getSpecialAnswerAsString(t)}getStyleObject(){const t=super.getStyleObject(),e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Background);return this.sp.colorService.hasColor(e)||(delete t.background,delete t.backgroundColor),t}handleClick(t){if(!this.dataObject.Enabled)return void t.preventDefault();const e=this.fieldInfo;e&&null!==e.DataValue.SpecialAnswer&&(this.getConverter(e).setEmptyAnswer(e),this.fieldInfo=e)}getKeyboardInsertStrategy(){return new un(this.sp.injector,this)}getConverter(t){return this.converterService||(this.converterService=this.sp.converterFactoryService.createConverter(t.DataValue.DataType)),this.converterService}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-response"]],features:[i.qOj],decls:3,vars:14,consts:[["type","radio",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","checked","click"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("click",function(o){return e.handleClick(o)}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("checked",e.isChecked),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("name",e.fieldName)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,N,z,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();class ed{constructor(s){this.injector=s,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){return s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Up);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}downKeyPressed(s){s.preventDefault();const t=this.navigationService.findAdjacentControl(s,J.Down);return null!=t?x.createCommands([C.FocusControl],this.injector,t):[]}pageUpKeyPressed(){return[]}pageDownKeyPressed(){return[]}homeKeyPressed(){return[]}endKeyPressed(){return[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Set textbox insert"}}let id=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.textChange=new Qt.x,this.textBoxWidth=O.NUMBER_MAX_LENGTH,this.textValue="",this.maxLength=null,this.targetIndex=0}ngOnInit(){super.ngOnInit(),this.handleOwnSubscriptionUpdates=!1,!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.textChangeSubscription=this.textChange.subscribe({next:t=>{this.textValue=t,this.handleChange(),this.cd.detectChanges()}})}ngOnDestroy(){this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.textChangeSubscription&&this.textChangeSubscription.unsubscribe(),super.ngOnDestroy()}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto&&!this.sp.renderStateService.optimizeNoStylesheets){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),r=e?e.Left+e.Right:0,o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),a=o?o.Left+o.Right:0,c=this.determineOffsetWidth(this.dataObject.FontName,"W",this.maxLength??0,this.watermarkTextLength),d=this.maxLength?Math.min(O.STRING_MAX_SIZE,this.maxLength):O.STRING_MAX_SIZE,u=Math.max(d,this.watermarkTextLength),h=Math.ceil(c/10*u);t.contentWidth=h+r+a}}}handleControlUpdate(t){super.handleControlUpdate(t),this.setPlaceholder()}handleChange(){this.pushChange(this.textValue)}onInput(t){const e=t.target,r=e.value,o=this.fieldInfo,a=o?o.ValueType:null;a&&this.converter.isAllowed(r,a)===S.Ok?this.textChange.next(r):e.value=this.textValue}onBlur(){const t=this.fieldInfo;t&&(t.IsVisited=!0,this.sp.renderStateService.flagFieldNameAsVisited(t.FieldName),this.converter.applyErrors(this.textValue,t)&&(this.fieldInfo=t))}handleKeyDown(t){t.key===b.Enter&&this.onBlur()}getKeyboardInsertStrategy(){return new ed(this.sp.injector)}getFontCssClasses(){return super.getFontCssClasses(!0)}getStyleObject(){const t=super.getStyleObject();return this.fontStyle=this.sp.styleGeneratorService.copyFontStyle(t),t}getText(){return this.textValue}setText(t){this.dataObject.Enabled&&this.textChange.next(t)}clearText(){this.setText("")}handleFieldUpdate(t){super.handleFieldUpdate(t);const e=t.ValueType;let r;this.textValue=this.converter.getNormalAnswerAsString(t);const o=e.Cardinality,a=e.Categories??[];r=0===o?a.map(l=>l.Code).join(O.VALUE_SEPARATOR).length:[...a].sort((c,d)=>d.Code.toString().length-c.Code.toString().length).slice(0,o).map(c=>c.Code).join(O.VALUE_SEPARATOR).length,this.setWidthFromStylableProperties(),this.setHeightFromStylableProperties(),this.maxLength=r,this.size=Math.max(Math.min(O.STRING_MAX_SIZE,r),this.watermarkTextLength),this.textBoxWidth=this.size}setPlaceholder(){this.placeholder=this.watermarkText||this.getSystemText(dt.txtSelect)}pushChange(t){const e=this.fieldInfo;e&&(this.converter.setAnswerFromString(t,e),this.converter.isValid(t,e.ValueType)===S.Ok&&this.converter.removeRangeCheckErrors(e),this.fieldInfo=e,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(de))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-set-textbox"]],features:[i.qOj],decls:3,vars:17,consts:[["type","text","autocapitalize","off","autocomplete","off",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5NavigationToggle","bl5Outline","bl5Tooltip","value","keydown","input","blur"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("keydown",function(o){return e.handleKeyDown(o)})("input",function(o){return e.onInput(o)})("blur",function(){return e.onBlur()}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5NavigationToggle",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("value",e.textValue),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("maxlength",e.maxLength)("placeholder",e.placeholder)("size",e.size)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,N,z,vt,tt,R,Se,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]   .determine-font[_ngcontent-%COMP%]{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   input.watermark[_ngcontent-%COMP%]{text-decoration:none!important}[_nghost-%COMP%]   input.watermark[_ngcontent-%COMP%]::placeholder{text-decoration:none!important;opacity:1}"],changeDetection:0}),n})();function nd(n,s){if(1&n&&i.GkF(0,4),2&n){const t=i.oxw().$implicit,e=i.oxw();i.Q6J("childType",t.type)("dataObject",t.dataObject)("parentId",t.parentId)("parentType",e.getComponentName())}}function rd(n,s){1&n&&i.YNc(0,nd,1,4,"ng-template",3),2&n&&i.Q6J("ngIf",s.$implicit)}let od=(()=>{class n extends et{constructor(t,e,r,o){super(e,r,o),this.modelService=t,this.sp=e,this.el=r,this.cd=o,this.children=[],this.onFocus=()=>{}}ngOnInit(){super.ngOnInit(),this.dataObject.Children.forEach(t=>{this.children.push(this.modelService.createChild(t,this.controlId))})}ngOnDestroy(){super.ngOnDestroy(),this.children=[]}setContentHeight(){this.controlSize.contentHeight=0}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>me)),i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-skiplinks-container"]],features:[i.qOj],decls:4,vars:5,consts:[[3,"ngClass","ngStyle","focus"],["autoWidthElement","","autoHeightElement",""],["ngFor","",3,"ngIf","ngForOf"],[3,"ngIf"],["bl5Component","",3,"childType","dataObject","parentId","parentType"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i.NdJ("focus",function(){return e.onFocus()}),i.YNc(3,rd,1,1,"ng-template",2),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style),i.uIk("id",e.controlId),i.xp6(3),i.Q6J("ngIf",e.children)("ngForOf",e.children))},dependencies:[g.mk,g.sg,g.O5,g.PC,we],changeDetection:0}),n})();function sd(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,13,t.text),i.oJD),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex)}}function ad(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("innerHTML",i.lcZ(3,8,t.text),i.oJD),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex)}}let ld=(()=>{class n extends bt{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.setConverter=o,this.enumerationConverter=a,this.containsRichText=!0}handleMouseDown(){}handleMouseUp(){}handleClick(t){t.stopPropagation(),this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getKeyboardInsertStrategy(){return new $n(this.sp.injector)}getKeyboardEmptyStrategy(){return new Xn(this.sp.injector)}handleSpeedKeyPressed(){this.isEnabled&&this.isVisible&&this.executeButton()}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isSelected=t.DataValue.DataType===I.Enumeration?this.enumerationConverter.isSelectedSpecial(t,this.dataObject.Reference.SpecialAnswer):this.setConverter.isSelectedSpecial(t,this.dataObject.Reference.SpecialAnswer),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}executeButton(){const t=this.fieldInfo;t&&(this.isSelected?t.DataValue.DataType===I.Set&&this.setConverter.setSpecialAnswer("",t):t.DataValue.DataType===I.Set?this.setConverter.setSpecialAnswer(this.dataObject.Reference.SpecialAnswer,t):this.enumerationConverter.setSpecialAnswer(this.dataObject.Reference.SpecialAnswer,t),this.fieldInfo=t,this.sp.navigationService.setInsertMode(),this.sp.auditTrailService.logSpecialAnswerEvent(this.isSelected,this.dataObject.Reference.SpecialAnswer),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,t.DataValue.DataType===I.Set?this.setConverter:this.enumerationConverter,t))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(de),i.Y36(ce))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-special-answer-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngStyle","bl5Aria","bl5Focus","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,sd,4,15,"ng-template",null,0,i.W1O),i.YNc(2,ad,4,10,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,vt,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}.css-vars[_ngcontent-%COMP%]{justify-content:var(--justify-content);align-content:var(--align-content)}"],changeDetection:0}),n})(),cd=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isChecked=this.converter.isSelectedSpecial(t,this.dataObject.Reference.SpecialAnswer)}getStyleObject(){const t=super.getStyleObject(),e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Background);return this.sp.colorService.hasColor(e)||(delete t.background,delete t.backgroundColor),t}handleClick(){this.dataObject.Enabled&&this.executeCheckBox()}getKeyboardInsertStrategy(){return new tr(this.sp.injector)}getKeyboardEmptyStrategy(){return new er}handleSpeedKeyPressed(){this.isEnabled&&this.isVisible&&this.executeCheckBox()}executeCheckBox(){const t=this.fieldInfo;t&&(this.converter.isSelectedSpecial(t,this.dataObject.Reference.SpecialAnswer)?this.converter.setSpecialAnswer("",t):this.converter.setSpecialAnswer(this.dataObject.Reference.SpecialAnswer,t),this.fieldInfo=t,this.sp.navigationService.setInsertMode(),this.sp.auditTrailService.logSpecialAnswerEvent(this.isChecked,this.dataObject.Reference.SpecialAnswer),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,t))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(de))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-special-answer-checkbox"]],features:[i.qOj],decls:3,vars:13,consts:[["type","checkbox",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","ngModel","ngModelChange","click"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("ngModelChange",function(o){return e.isChecked=o})("click",function(){return e.handleClick()}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("ngModel",e.isChecked),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,V.Wl,V.JJ,V.On,N,z,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})(),dd=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.isChecked=!1}handleFieldUpdate(t){super.handleFieldUpdate(t),this.isChecked=this.converter.isSelectedSpecial(t,this.dataObject.Reference.SpecialAnswer)}getStyleObject(){const t=super.getStyleObject(),e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.Background);return this.sp.colorService.hasColor(e)||(delete t.background,delete t.backgroundColor),t}handleChange(){this.dataObject.Enabled&&this.executeRadioButton()}getKeyboardInsertStrategy(){return new un(this.sp.injector,this)}getKeyboardEmptyStrategy(){return new ir}handleSpeedKeyPressed(){this.isEnabled&&this.isVisible&&this.executeRadioButton()}executeRadioButton(){const t=this.fieldInfo;t&&(this.converter.setSpecialAnswer(this.dataObject.Reference.SpecialAnswer,t),this.fieldInfo=t,this.sp.navigationService.setInsertMode(),this.sp.auditTrailService.logSpecialAnswerEvent(this.isChecked,this.dataObject.Reference.SpecialAnswer),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,t))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(ce))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-special-answer-radio-button"]],features:[i.qOj],decls:3,vars:14,consts:[["type","radio",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","checked","change"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("change",function(){return e.handleChange()}),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Outline",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("checked",e.isChecked),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("name",e.fieldName)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,N,z,vt,tt,R,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const ud=["controlElement"],hd=["buttonElement"],gd=["watermarkSizer"],pd=["listElement"],md=["displayTextElement"];function fd(n,s){if(1&n&&(i._UZ(0,"div",14),i.ALo(1,"safeHtml")),2&n){const t=i.oxw(4);i.Q6J("ngClass",t.listItemClass)("innerHTML",i.lcZ(1,2,t.listItemSizerText),i.oJD)}}function bd(n,s){if(1&n&&(i.TgZ(0,"div",8),i._UZ(1,"div",9),i.qZA(),i.YNc(2,fd,2,4,"ng-template",6),i._UZ(3,"div",10,11),i.ALo(5,"safeHtml"),i._UZ(6,"div",12,13),i.ALo(8,"safeHtml")),2&n){const t=i.oxw(3);i.xp6(1),i.Q6J("ngClass",t.optionsVisible?"arrow-up":"arrow-down"),i.xp6(1),i.Q6J("ngIf",t.listItemSizerText),i.xp6(1),i.Gre("watermark-sizer reset-font ",t.watermarkFont,""),i.Q6J("innerHTML",i.lcZ(5,12,t.watermarkText),i.oJD),i.xp6(3),i.Gre("select-text reset-font ",t.watermarkFont,""),i.Q6J("ngStyle",t.watermarkFontStyleObj)("innerHTML",i.lcZ(8,14,t.displayText||t.watermarkText),i.oJD),i.uIk("aria-hidden",!t.displayText||void 0)}}function vd(n,s){1&n&&i.GkF(0)}function yd(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,5),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw(2);return i.KtG(o.handleButtonClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw(2);return i.KtG(o.handleButtonKeyPress(r))}),i.YNc(5,bd,9,16,"ng-template",6),i.qZA(),i.YNc(6,vd,1,0,"ng-container",7)}if(2&n){const t=i.oxw(2),e=i.MAs(4);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex),i.xp6(5),i.Q6J("ngIf",t.hasOptions),i.xp6(1),i.Q6J("ngTemplateOutlet",e)}}function Cd(n,s){if(1&n&&(i._UZ(0,"option",18),i.ALo(1,"safeHtml")),2&n){const t=s.$implicit;i.Q6J("ngValue",t.value)("innerHTML",i.lcZ(1,3,t.text),i.oJD)("selected",t.selected)}}function Sd(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"select",15,16),i.NdJ("ngModelChange",function(r){i.CHM(t);const o=i.oxw(2);return i.KtG(o.handleOptionClick(o.getOptionItemByValue(r)))}),i.YNc(3,Cd,2,5,"ng-template",17),i.qZA()}if(2&n){const t=i.oxw(2);i.Q6J("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("ngModel",t.selectedValue),i.uIk("id",t.controlId)("disabled",t.disabled),i.xp6(3),i.Q6J("ngForOf",t.optionList)}}function Ad(n,s){if(1&n&&(i.YNc(0,yd,7,14,"ng-template",null,3,i.W1O),i.YNc(2,Sd,4,7,"ng-template",1)),2&n){const t=i.MAs(1),e=i.oxw();i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",t)}}function wd(n,s){1&n&&i.GkF(0)}function xd(n,s){if(1&n&&i._UZ(0,"option",26),2&n){const t=s.$implicit;i.Q6J("value",t.value)("innerText",t.text)}}function _d(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",19,20)(4,"input",21,22),i.NdJ("ngModelChange",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.model=r)})("keyup",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onKeyUp())})("mousedown",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.closeDropDownList())}),i.qZA(),i.TgZ(6,"button",23,24),i.NdJ("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleButtonKeyPress(r))})("mousedown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.toggleList(r))}),i.TgZ(8,"div",8),i._UZ(9,"div",9),i.qZA()()(),i.YNc(10,wd,1,0,"ng-container",7),i.TgZ(11,"datalist",25),i.YNc(12,xd,1,2,"ng-template",17),i.qZA()}if(2&n){const t=i.oxw(),e=i.MAs(4);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.xp6(4),i.Q6J("ngClass",t.inputClasses)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5NavigationToggle",t.dataObject)("bl5Outline",t.dataObject)("ngModel",t.model),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("placeholder",t.watermarkText)("tabindex",t.tabIndex)("size",t.sizeAttribute),i.xp6(2),i.Gre("toggle ",t.dataObject.FontName,""),i.uIk("id",t.buttonId)("aria-haspopup",!0)("aria-expanded",t.isExpanded)("data-component-id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex),i.xp6(3),i.Q6J("ngClass",t.optionsVisible?"arrow-up":"arrow-down"),i.xp6(1),i.Q6J("ngTemplateOutlet",e),i.xp6(2),i.Q6J("ngForOf",t.optionList)}}const kd=function(n,s){return{selected:n,targeted:s}};function Od(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",29,30),i.NdJ("mouseover",function(r){const a=i.CHM(t).index,l=i.oxw(2);return i.KtG(l.handleOptionMouseOver(r,a))})("click",function(r){const a=i.CHM(t).$implicit,l=i.MAs(1),c=i.oxw(2);return i.KtG(c.handleOptionClick(a,l,r))}),i._UZ(2,"span",31),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=s.$implicit,e=s.index,r=i.oxw(2);i.Q6J("ngClass",i.WLB(9,kd,t.selected,r.targetIndex===e))("ngStyle",r.optionItemStyle),i.uIk("id",r.getOptionId(e))("tabindex",r.optionTabIndex)("data-component-id",r.controlId),i.xp6(2),i.Q6J("innerHTML",i.lcZ(3,7,t.text),i.oJD),i.uIk("id",r.getOptionLabelId(t.value))}}function Td(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"ul",27,28),i.NdJ("bl5ClickOutside",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onClickOutside())}),i.YNc(2,Od,4,12,"ng-template",17),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.optionListClass)("ngStyle",t.optionListStyle)("bl5ClickOutsideContext",t.buttonElement),i.uIk("id",t.optionListId),i.xp6(2),i.Q6J("ngForOf",t.optionList)}}let Pd=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.selectedItemHeight=0,this.debouncedHandleKeyEvent=new i.vpe,this.keyEvent="",this.inputClasses=[],this.isExpanded=!1,this.maxLength=null,this.optionListClass=[],this.optionListStyle={},this.optionItemStyle={},this.targetIndex=-1,this.containsRichText=!0}get controlElement(){return this.controlElementRef?.nativeElement||null}get watermarkSizer(){return this.watermarkSizerRef?.nativeElement||null}get listElement(){return this.listElementRef?.nativeElement||null}get displayTextElement(){return this.displayTextElementRef?.nativeElement||null}get buttonId(){return`${this.controlId}_button`}get optionListId(){return`${this.controlId}_optionlist`}get buttonElement(){return this.buttonElementRef?.nativeElement||null}get listItemClass(){return["Font13"]}get hasOptions(){return!Array.isNullOrEmpty(this.optionList)}get selectedValue(){return this.hasOptions?this.optionList.find(t=>t.selected)?.value??"":""}get isListOpen(){return this.optionsVisible}get optionsVisible(){return this.ariaObject.AriaExpanded??!1}set optionsVisible(t){this.ariaObject.AriaExpanded=t}get optionTabIndex(){return this.optionsVisible?0:-1}get sizeAttribute(){return Math.max(this.watermarkTextLength||0,...this.dataObject.Items.map(t=>t.length),this.fieldInfo?.ValueType.MaxLength||0)}ngOnInit(){super.ngOnInit(),!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.debouncedHandleKeyEventSubscription=this.debouncedHandleKeyEvent.pipe((0,Ki.b)(t=>this.keyEvent+=t.key),(0,Ne.b)(300)).subscribe({next:()=>{this.handleKeyEvent(this.keyEvent),this.keyEvent=""}})}ngAfterViewInit(){super.ngAfterViewInit(),window.addEventListener("scroll",t=>this.onWindowScroll(t),!0),this.listElement?.addEventListener("scroll",t=>this.onListScroll(t)),this.hideList()}ngOnDestroy(){window.removeEventListener("scroll",t=>this.onWindowScroll(t)),this.listElement?.removeEventListener("scroll",t=>this.onListScroll(t)),this.debouncedHandleKeyEventSubscription&&this.debouncedHandleKeyEventSubscription.unsubscribe(),super.ngOnDestroy()}onKeyUp(){if(this.dataObject.Enabled&&this.dataObject.AllowTextInput){const t=this.fieldInfo;if(t){const e=this.model.replace("\r","").replace("\n","");this.converter.convertFromString(e,t),this.converter.isValid(e,t.ValueType)===S.Ok&&this.converter.removeRangeCheckErrors(t),this.fieldInfo=t,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,t)&&this.hideList()}}}handleFieldUpdate(t){super.handleFieldUpdate(t),(t.UpdateUI??!0)&&(this.setOptions(t),this.setDisplayText(t)),this.applyFonts(),delete t.UpdateUI}handleControlUpdate(t){super.handleControlUpdate(t),this.setOptionsListClass(),this.setOptions(),this.useCssVars&&(this.cssStyle.borderColor="darkgrey",this.cssStyle.borderStyle="solid",this.cssStyle.borderWidth="1px",this.widthUnitType===y.Auto&&(this.listItemSizerText=this.dataObject.Items.reduce((e,r)=>e.length<r.length?r:e,"")))}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto)if(this.dataObject.AllowTextInput){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),r=e?e.Left+e.Right:0,o=Math.max(this.watermarkTextLength,this.sp.cultureInfoService.cultureInfo.ShortDatePattern.length);if(!this.sp.renderStateService.optimizeNoStylesheets){const l=this.determineOffsetWidth2(this.dataObject.FontName,"W",o);t.contentWidth=l+r}}else if(!this.sp.renderStateService.optimizeNoStylesheets&&this.listElement&&this.watermarkSizer){const e=Array.from(this.listElement.children).concat(this.watermarkSizer).map(r=>r?r.offsetWidth:0);t.contentWidth=Math.max(...e)}}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.height.unitType===y.Auto)if(this.dataObject.AllowTextInput)super.setContentHeight();else if(!this.sp.renderStateService.optimizeNoStylesheets&&this.watermarkSizer){const e=this.dataObject.OptionSettings?.TextMargin,r=(e?.Top||0)+(e?.Bottom||0);if(this.listElement){const o=Array.from(this.listElement.children).concat(this.watermarkSizer).map(a=>a?a.offsetHeight-r:0);t.contentHeight=Math.max(...o,this.selectedItemHeight)}}}}getCssClasses(){const t=super.getCssClasses();return this.dataObject.ShowKeyboardFocus||this.inputClasses.push("focus-no-outline"),t}getFontCssClasses(){const t=[];return this.hasFontName(this.dataObject)&&this.inputClasses.push(this.dataObject.FontName),this.watermark&&String.hasValue(this.watermark.FontName)&&(t.push("watermark"),t.push(this.watermark.FontName+"-wm"),this.inputClasses.push("watermark"),this.inputClasses.push(this.watermark.FontName+"-wm")),t}onWindowResize(){this.hideList()}onWindowMousedown(t){this.hideListOnExternalEvent(t)}onWindowTouchMove(t){this.hideListOnExternalEvent(t)}onWindowTouchEnd(t){this.hideListOnExternalEvent(t)}handleButtonClick(t){6!==t.mozInputSource&&this.hasOptions&&(this.optionsVisible?this.hideList():(this.activateField(),this.showList(),this.isIOS&&!this.cd.destroyed&&this.cd.detectChanges()))}handleButtonKeyPress(t){[b.Enter,b.ArrowUp,b.Up,b.ArrowDown,b.Down].includes(t.key)||this.debouncedHandleKeyEvent.emit(t)}handleOptionMouseOver(t,e){this.targetIndex=e}handleOptionClick(t,e,r){if(r&&(r.cancelBubble=!0,r.stopPropagation()),!t)return void this.hideList();if(this.selectedItemHeight=0,e){const a=this.dataObject.OptionSettings?.TextMargin;this.selectedItemHeight=e.offsetHeight-((a?.Top||0)+(a?.Bottom||0))}const o=this.fieldInfo;o&&(""===t.value?this.converter.setEmptyAnswer(o):this.converter.setNormalAnswer(t.value,o),this.model=t.value,this.fieldInfo=o,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,o)&&this.hideList())}onClickOutside(){this.hideList()}toggleList(t){if(this.dataObject.Enabled){if(this.activateField(!1),"keydown"===t.type&&-1===[b.Space,b.Spacebar].indexOf(t.key))return;this.hasOptions&&(this.optionsVisible?this.closeDropDownList():this.openDropDownList())}else this.closeDropDownList()}getOptionId(t){return`${this.optionListId}_${t+1}`}getOptionLabelId(t){return`${this.optionListId}_${t}_label`}getOptionItemByValue(t){return this.optionList.find(e=>e.value===t)}getKeyboardInsertStrategy(){return this.sp.renderStateService.disableAutoFocus?new hr(this.sp.injector,this):new hn(this.sp.injector,this)}getKeyboardNavigationStrategy(){return new gr(this.sp.injector,this)}getKeyboardEmptyStrategy(){return new ur(this.sp.injector,this)}selectValue(){this.handleOptionClick(this.optionList[this.targetIndex]),this.sp.focusService.focusElementId(this.controlId),this.cd.markForCheck()}previousPage(){const t=this.getPageSize();this.targetIndex=Math.max(this.targetIndex-t,0),this.focusTargetIndex(),this.cd.markForCheck()}nextPage(){const t=this.getPageSize();this.targetIndex=Math.min(this.targetIndex+t,this.optionList.length-1),this.focusTargetIndex(),this.cd.markForCheck()}previousValue(){this.targetIndex-=this.targetIndex>0?1:0,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}nextValue(){this.targetIndex+=this.targetIndex<this.optionList.length-1?1:0,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}firstValue(){this.targetIndex=0,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}lastValue(){this.targetIndex=this.optionList.length-1,this.focusTargetIndex(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex]),this.cd.markForCheck()}openDropDownList(){this.showList(),this.cd.markForCheck()}closeDropDownList(){this.hideList(),this.cd.markForCheck()}focusTextbox(){this.sp.focusService.focusElementId(this.controlId)}setText(t){this.dataObject.Enabled&&(this.model=t)}getText(){return this.displayText||this.watermarkText||""}clearText(){const t=this.fieldInfo;t&&this.dataObject.Enabled&&(this.converter.setEmptyAnswer(t),this.fieldInfo=t,this.executeActions(this.dataObject.OnValueChanged))}resetList(){this.optionListStyle.visibility="hidden",delete this.optionListStyle.maxHeight,delete this.optionListStyle.width,this.optionListStyle.top="-9999px",this.optionListStyle.left="-9999px",this.optionListStyle.overflowY="scroll"}applyStylesAndDimensions(){if(super.applyStylesAndDimensions(),this.applyOptionListStyle(),null!=this.dataObject.OptionSettings?.TextMargin){const t=this.dataObject.OptionSettings.TextMargin,e={Top:3,Right:22,Bottom:3,Left:4.4},o=this.sp.styleGeneratorService.generatePaddingStyle({Top:e.Top+t.Top,Right:e.Right+t.Right,Bottom:e.Bottom+t.Bottom,Left:e.Left+t.Left});Object.assign(this.optionItemStyle,o)}}setOptionsListClass(){if(this.optionListClass=[],String.hasValue(this.dataObject.FontName)&&this.optionListClass.push(this.dataObject.FontName),this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment),e=this.sp.styleGeneratorService.getTextAlignmentClass(t);this.optionListClass.push(e)}this.controlSize&&(this.optionListClass.push(`width-${y[this.controlSize.width.unitType].toLowerCase()}`),this.optionListClass.push(`height-${y[this.controlSize.height.unitType].toLowerCase()}`))}setOptionsListBackgroundStyle(){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Background);if(t){const e=this.sp.styleGeneratorService.generateBackgroundStyle(t);"transparent"===e.background&&(e.background="#fff"),Object.assign(this.optionListStyle,e)}}setOptionsListFontStyle(){this.useFontObject(this.dataObject)&&Object.assign(this.optionListStyle,this.sp.styleGeneratorService.generateFontStyle(this.dataObject.Font))}setOptions(t=this.fieldInfo){if(null!=t){const e=[],r=this.dataObject.Items,o=t.DataValue.AnswerStatus===T.Empty,l=t.DataValue.AnswerStatus===T.Response&&String.hasValue(t.DataValue.ValueAsString)&&r.indexOf(t.DataValue.ValueAsString)>0,c=!Array.isNullOrEmpty(r);r.findIndex(u=>String.isNullOrEmpty(u)),this.sp.renderStateService.optimizeNoStylesheets&&o&&e.push({value:"",text:this.watermarkText||this.getSystemText(dt.txtSelect),selected:o}),this.model=t.DataValue.ValueAsString??"",c&&r.map(u=>{null!=u&&e.push({value:u,text:u,selected:!!l&&t.DataValue.ValueAsString===u})}),this.optionList=e}}setDisplayText(t){let e=!0;if(!Array.isNullOrEmpty(this.optionList)){if(t.DataValue.AnswerStatus===T.Empty)if(0===this.watermarkTextLength){const r=this.optionList.findIndex(o=>""===o.value);-1!==r&&(this.displayText=this.optionList[r].text,this.model=this.displayText,e=!1)}else this.displayText=this.watermarkText;else{const r=this.converter.getAnswerAsString(t);String.hasValue(r)&&(e=!this.setSingleOption(r))}this.clearWatermarkFont(),e?this.setWatermarkFont():this.watermarkFont=this.dataObject.FontName?this.dataObject.FontName:"",this.displayTextElement&&t.DataValue.AnswerStatus!=T.Empty&&setTimeout(()=>{const r=getComputedStyle(this.controlElement);Math.abs(this.controlElement.clientHeight-parseInt(r.paddingTop)-parseInt(r.paddingBottom)-this.displayTextElement.offsetHeight)>1&&this.sp.eventService.controlVisibilityChanged.emit()})}}setSingleOption(t){const e=this.optionList.findIndex(r=>r.value===t);if(e>-1){const r=this.optionList[e];return r&&(this.targetIndex=e,this.optionList.forEach((o,a)=>o.selected=a===e),this.displayText=r.text,this.model=this.displayText),!0}return!1}setWatermarkFont(){this.watermark&&(String.hasValue(this.watermark.FontName)?this.watermarkFont=this.watermark.FontName:this.watermark.Font&&(this.watermarkFontStyleObj=this.sp.styleGeneratorService.generateFontStyle(this.watermark.Font)))}hideList(){this.optionsVisible=!1,this.resetList()}applyOptionListStyle(){const t=this.useCssVars?this.cssStyle:this.style;t&&(String.hasValue(t.fontFamily)?this.optionListStyle.fontFamily=t.fontFamily:delete this.optionListStyle.fontFamily,String.hasValue(t.fontSize)?this.optionListStyle.fontSize=t.fontSize:delete this.optionListStyle.fontSize,String.hasValue(t.fontWeight)?this.optionListStyle.fontWeight=t.fontWeight:delete this.optionListStyle.fontWeight,String.hasValue(t.fontStyle)?this.optionListStyle.fontStyle=t.fontStyle:delete this.optionListStyle.fontStyle,String.hasValue(t.color)?this.optionListStyle.color=t.color:delete this.optionListStyle.color,String.hasValue(t.textAlign)?this.optionListStyle.textAlign=t.textAlign:delete this.optionListStyle.textAlign),this.setOptionsListBackgroundStyle(),this.setOptionsListFontStyle(),this.hideList()}applyFonts(){this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)&&this.inputClasses.push(this.sp.styleGeneratorService.getTextAlignmentClass(this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment)))}showList(){if(this.resetList(),this.isIOS&&!this.cd.destroyed&&this.cd.detectChanges(),!this.controlElement||!this.listElement)return;const e=document.getElementsByClassName("rootControl")[0].getBoundingClientRect(),r=this.controlElement.getBoundingClientRect(),o=this.listElement.getBoundingClientRect(),a=o.top+9999,l=o.left+9999,c=window.innerHeight,d=r.top,u=c-r.bottom,h=e.height-r.bottom,m=h<u,f=d>=o.height,w=(m?h:u)>=o.height;let B,j,H;w||u>d?(B=r.bottom,w||(H=m?h:u)):(B=f?r.top-o.height:0,f||(H=d)),j=r.right-r.width,j=j>0?j:0,this.optionListStyle.overflowY=w||f?"hidden":"scroll",this.optionListStyle.width=this.controlElement.offsetWidth+"px",this.optionListStyle.visibility="visible",this.isIOS&&(d>c?B=Math.abs(a):B+=Math.abs(a),j+=Math.abs(l),(!H||H>c)&&(H=c)),this.optionListStyle.top=B+"px",this.optionListStyle.left=j+"px",this.optionListStyle.maxHeight=H+"px";const F=this.fieldInfo;if(F&&F.DataValue.AnswerStatus===T.Response){const ct=this.optionList.findIndex(gt=>gt.value===F.DataValue.ValueAsString);this.targetIndex=ct>-1?ct:-1}this.cd.detectChanges(),this.targetIndex>-1&&this.focusTargetIndex(),this.optionsVisible=!0}focusTargetIndex(){this.targetIndex>-1&&this.sp.focusService.focusElementId(`${this.controlId}_optionlist_${this.optionList[this.targetIndex].value.toString()}`)}handleKeyEvent(t){if(t){const e=this.optionList.findIndex(o=>o.text.toLowerCase().startsWith(t.toLowerCase())),r=this.optionList.findIndex(o=>o.text.toLowerCase().startsWith(t.toLowerCase())&&this.optionList.indexOf(o)>this.targetIndex);this.targetIndex=-1===r&&e>-1?e:r,this.focusTargetIndex(),this.cd.detectChanges(),this.optionsVisible||this.handleOptionClick(this.optionList[this.targetIndex])}}onWindowScroll(t){this.el.nativeElement.contains(t.target)||(this.optionsVisible&&this.isIOS?this.showList():this.hideList(),this.cd.markForCheck())}onListScroll(t){t&&(t.cancelBubble=!0,t.stopPropagation())}getPageSize(){return Math.round(this.listElement.clientHeight/Math.max(1,this.controlElement.clientHeight))}clearWatermarkFont(){this.watermarkFont="",this.watermarkFontStyleObj={}}hideListOnExternalEvent(t){this.el.nativeElement.contains(t.target)||this.hideList()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Te))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-string-dropdownlist"]],viewQuery:function(t,e){if(1&t&&(i.Gf(ud,5),i.Gf(hd,5),i.Gf(gd,5),i.Gf(pd,5),i.Gf(md,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.controlElementRef=r.first),i.iGM(r=i.CRH())&&(e.buttonElementRef=r.first),i.iGM(r=i.CRH())&&(e.watermarkSizerRef=r.first),i.iGM(r=i.CRH())&&(e.listElementRef=r.first),i.iGM(r=i.CRH())&&(e.displayTextElementRef=r.first)}},hostBindings:function(t,e){1&t&&i.NdJ("resize",function(){return e.onWindowResize()},!1,i.Jf7)("mousedown",function(o){return e.onWindowMousedown(o)},!1,i.Jf7)("touchmove",function(o){return e.onWindowTouchMove(o)},!1,i.Jf7)("touchend",function(o){return e.onWindowTouchEnd(o)},!1,i.Jf7)},features:[i.qOj],decls:5,vars:2,consts:[["notextinput",""],[3,"ngIf","ngIfElse"],["list",""],["richElement",""],[1,"no-text-input","select-control",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","click","keydown"],["buttonElement","","controlElement","","autoWidthElement","","autoHeightElement",""],[3,"ngIf"],[4,"ngTemplateOutlet"],["aria-hidden","true",1,"arrow-container"],[3,"ngClass"],["aria-hidden","true",3,"innerHTML"],["watermarkSizer",""],[3,"ngStyle","innerHTML"],["displayTextElement",""],[1,"list-item-sizer",3,"ngClass","innerHTML"],[3,"bl5Aria","bl5Focus","bl5FocusEvent","ngModel","ngModelChange"],["autoWidthElement","","autoHeightElement",""],["ngFor","",3,"ngForOf"],[3,"ngValue","innerHTML","selected"],[1,"allow-text-input",3,"ngClass","ngStyle","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement","","controlElement",""],["type","text","autocapitalize","off","autocomplete","off",3,"ngClass","bl5Aria","bl5Focus","bl5FocusEvent","bl5NavigationToggle","bl5Outline","ngModel","ngModelChange","keyup","mousedown"],["inputField",""],["role","button","aria-label","Toggle Drop Down List",3,"keydown","mousedown"],["buttonElement",""],["id","options"],[3,"value","innerText"],["role","listbox",1,"option-list",3,"ngClass","ngStyle","bl5ClickOutsideContext","bl5ClickOutside"],["listElement",""],["role","option",1,"option-item",3,"ngClass","ngStyle","mouseover","click"],["listItemElement",""],["role","none",1,"option-label",3,"innerHTML"]],template:function(t,e){if(1&t&&(i.YNc(0,Ad,3,2,"ng-template",null,0,i.W1O),i.YNc(2,_d,13,29,"ng-template",1),i.YNc(3,Td,3,5,"ng-template",null,2,i.W1O)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.dataObject.AllowTextInput)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,V.YN,V.Kr,V.Fj,V.EJ,V.JJ,V.On,N,z,Be,vt,tt,R,Se,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}button.no-text-input[_ngcontent-%COMP%]{background-color:transparent;border:1px solid darkgrey;box-sizing:border-box;border-radius:0;padding:1.4px 15px 0 4px;overflow:hidden}button.no-text-input[_ngcontent-%COMP%], button.no-text-input[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-decoration:none!important}button.no-text-input[_ngcontent-%COMP%]:not(:disabled){cursor:pointer}button.no-text-input[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%]{width:6px;height:6px}button.no-text-input[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%], button.no-text-input[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-left:3px solid transparent;border-right:3px solid transparent}button.no-text-input[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%]{border-top:6px solid black}button.no-text-input[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-bottom:6px solid black}button.no-text-input[_ngcontent-%COMP%] > div.list-item-sizer[_ngcontent-%COMP%], button.no-text-input[_ngcontent-%COMP%] > div.watermark-sizer[_ngcontent-%COMP%]{visibility:hidden;margin:0;white-space:nowrap}button.no-text-input[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%]{margin:0}button.no-text-input[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%], button.no-text-input[_ngcontent-%COMP%] > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{white-space:inherit}button.no-text-input[_ngcontent-%COMP%]:not(.css-vars){display:inline-block;position:relative}button.no-text-input[_ngcontent-%COMP%]:not(.css-vars) > div.arrow-container[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 3px);right:5px}button.no-text-input[_ngcontent-%COMP%]:not(.css-vars) > div.watermark-sizer[_ngcontent-%COMP%]{display:inline-block;padding:2.4px 20px 0 4px;position:absolute;top:0;left:0}button.no-text-input[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%]{vertical-align:middle;text-align:inherit;display:inline}button.no-text-input[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%], button.no-text-input[_ngcontent-%COMP%]:not(.css-vars) > div.select-text[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{width:100%;height:100%}button.no-text-input.css-vars[_ngcontent-%COMP%]{grid-template-columns:minmax(min-content,1fr) 15px;align-items:center;justify-items:start}button.no-text-input.css-vars[_ngcontent-%COMP%]   .arrow-container[_ngcontent-%COMP%]{color:red;grid-column-start:2;grid-column-end:3}button.no-text-input.css-vars[_ngcontent-%COMP%]   .select-text[_ngcontent-%COMP%], button.no-text-input.css-vars[_ngcontent-%COMP%]   .list-item-sizer[_ngcontent-%COMP%], button.no-text-input.css-vars[_ngcontent-%COMP%]   .watermark-sizer[_ngcontent-%COMP%]{padding:0 .2em;grid-column-start:1;grid-column-end:2;grid-row-start:1;grid-row-end:2}button.no-text-input.css-vars[_ngcontent-%COMP%]   .select-text[_ngcontent-%COMP%]{justify-self:var(--justify-self)}div.allow-text-input[_ngcontent-%COMP%]{border:1px solid black}div.allow-text-input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;background:transparent}div.allow-text-input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{display:none!important;opacity:0!important}div.allow-text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.allow-text-input[_ngcontent-%COMP%]   input.watermark[_ngcontent-%COMP%]{text-decoration:none!important}div.allow-text-input[_ngcontent-%COMP%]   input.watermark[_ngcontent-%COMP%]::placeholder{text-decoration:none!important;opacity:1}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-weight:400!important;margin-left:.2em;text-align:center;text-decoration:none!important}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{cursor:default}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%]{width:6px;height:6px}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%], div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-left:3px solid transparent;border-right:3px solid transparent}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-down[_ngcontent-%COMP%]{border-top:6px solid black}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%] > div.arrow-up[_ngcontent-%COMP%]{border-bottom:6px solid black}div.allow-text-input[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > div.arrow-container[_ngcontent-%COMP%]{width:5px}div.allow-text-input.css-vars[_ngcontent-%COMP%]{grid-template-columns:minmax(min-content,1fr) min-content}div.allow-text-input.css-vars[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:1em;margin-right:.2em}div.allow-text-input[_ngcontent-%COMP%]:not(.css-vars){display:inline-flex;position:relative;padding:3px 15px 3px 3px}div.allow-text-input[_ngcontent-%COMP%]:not(.css-vars) > input[_ngcontent-%COMP%]{flex:1 0 auto;align-items:center;justify-content:center;width:calc(100% - 1em - 3px)}div.allow-text-input[_ngcontent-%COMP%]:not(.css-vars) > button[_ngcontent-%COMP%]{flex:0 0 12px;width:12px;height:12px;align-items:center;justify-content:center;position:absolute;top:calc(50% - 6px);right:-2px}ul[_ngcontent-%COMP%]{list-style-type:none;position:absolute;z-index:9999;-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);overflow-x:hidden;margin-top:0!important;padding:0;background:inherit;background-color:#fff;border:1px solid lightgrey;text-decoration:none!important}ul.width-auto[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]{white-space:nowrap}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]{z-index:999;cursor:default;width:100%;padding:3px 22px 3px 4.4px;font:inherit;color:inherit}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]:last-child{border-bottom:0}ul[_ngcontent-%COMP%] > li.option-item.selected[_ngcontent-%COMP%], ul[_ngcontent-%COMP%] > li.option-item.targeted[_ngcontent-%COMP%], ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 0 1000px #5cddeb33}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%]:hover{cursor:pointer}ul[_ngcontent-%COMP%] > li.option-item[_ngcontent-%COMP%] > span.option-label[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:1px}.css-vars[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(var(--width) - 30px)}"],changeDetection:0}),n})(),Md=(()=>{class n{onCut(){this.changeSubject.next("")}onCopy(){}onPaste(t){setTimeout(()=>this.changeSubject.next(t.target.value),0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5Clipboard",""]],hostBindings:function(t,e){1&t&&i.NdJ("cut",function(){return e.onCut()})("copy",function(){return e.onCopy()})("paste",function(o){return e.onPaste(o)})},inputs:{changeSubject:["bl5Clipboard","changeSubject"]}}),n})();const Id=["inputcontrol"];function Ed(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"input",2,3),i.NdJ("input",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onInput(r))})("blur",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onBlur())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Clipboard",t.textChange)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5NavigationToggle",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("maxlength",t.maxLength)("placeholder",t.watermarkText)("size",t.size)("tabindex",t.tabIndex)("type",t.inputType)}}function Fd(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"textarea",2,3),i.NdJ("input",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onInput(r))})("blur",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onBlur())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Clipboard",t.textChange)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5NavigationToggle",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("cols",t.cols)("data-fieldname",t.fieldName)("disabled",t.disabled)("placeholder",t.watermarkText)("rows",t.rows)("tabindex",t.tabIndex)}}let Ld=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.textBoxWidth=O.NUMBER_MAX_LENGTH,this.isInputInvalid=!1,this.maskModifiers=[],this.cols=O.OPEN_DEFAULT_COLS,this.rows=O.OPEN_MAX_ROWS,this.textChange=new Qt.x,this.setTextValue=a=>{a=a??"",this.mask?(a.length>0?a.split("").forEach(l=>{this.mask.unmaskedValue+=l,this.mask.updateValue()}):(this.mask.unmaskedValue="",this.mask.updateValue()),this.textValue=this.mask.unmaskedValue):(this.textValue=a,this.inputControl&&(this.inputControl.value=a))}}get maxFieldLength(){return this.fieldInfo?.ValueType?.MaxLength??0}get isOpenField(){return 0===this.maxFieldLength}get editMaskLength(){return this.dataObject.EditMask?.length??0}get hasEditMask(){return!this.isTextArea&&this.editMaskLength>0}get escapedEditMask(){return this.hasEditMask?this.dataObject.EditMask.split("").map(t=>this.getEscapedCharacter(t)).join(""):""}get inputControl(){return this.inputControlRef?.nativeElement??null}get isTextArea(){return this.isOpenField||this.dataObject.MultiLine}get maxLength(){return this.isTextArea||this.hasEditMask?void 0:this.maxFieldLength}get inputType(){return this.dataObject.PasswordChar?"password":"text"}ngOnInit(){super.ngOnInit(),this.handleOwnSubscriptionUpdates=!1,!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.textChangeSubscription=this.textChange.subscribe({next:e=>{this.dataObject.Enabled&&(this.textValue=e,this.pushChange(e),this.cd.detectChanges())}});const t=this.fieldInfo;t&&(this.isInputInvalid=this.hasErrors(t.Errors))}ngAfterViewInit(){super.ngAfterViewInit(),this.setMask()||this.setTextValue(this.textValue),this.determineEditMaskModifiers()}ngOnDestroy(){this.mask&&this.mask.destroy(),this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.textChangeSubscription&&this.textChangeSubscription.unsubscribe(),super.ngOnDestroy()}onBlur(){const t=this.fieldInfo;t&&t.DataValue.IsDirty&&(this.sp.renderStateService.flagFieldNameAsVisited(t.FieldName),t.IsVisited=!0,this.converter.applyErrors(t.DataValue.ValueAsString??"",t)&&(this.fieldInfo=t))}onInput(t){if(!this.mask){const e=t.target,r=this.maxLength?e.value.replace("\r","").replace("\n",""):e.value,o=this.fieldInfo;o&&this.converter.isAllowed(r,o.ValueType)===S.Ok?this.textValue!==r&&this.setText(r):e.value=this.textValue}}handleFieldUpdate(t){super.handleFieldUpdate(t);const e=this.converter.convertToString(t);this.setTextValue(e),this.isInputInvalid=this.hasErrors(t.Errors),!this.isTextArea&&this.useCssVars&&this.widthUnitType===y.Auto&&(this.size=Math.max(Math.min(O.STRING_MAX_SIZE,this.maxFieldLength??0),this.watermarkTextLength,this.editMaskLength),this.setElementWidth(this.size))}handleControlUpdate(t){super.handleControlUpdate(t),!this.isTextArea&&this.useCssVars&&this.widthUnitType===y.Auto&&(this.size=Math.max(Math.min(O.STRING_MAX_SIZE,this.maxFieldLength??0),this.watermarkTextLength,this.editMaskLength),this.setElementWidth(this.size)),this.determineEditMaskModifiers()}setContentWidth(){if(this.sp.renderStateService.optimizeNoStylesheets)super.setContentWidth();else if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto){const r=this.determineOffsetWidth(this.dataObject.FontName,"W",this.maxFieldLength,this.watermarkTextLength,this.editMaskLength);if(this.isTextArea)this.cols=Math.max(this.watermarkTextLength,O.OPEN_MAX_COLS),this.textBoxWidth=this.cols+1,this.controlSize.contentWidth=Math.ceil(r/10)*this.cols;else{this.size=Math.max(Math.min(O.STRING_MAX_SIZE,this.maxFieldLength),this.watermarkTextLength,this.editMaskLength);const o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),a=o?o.Left+o.Right:0,l=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),c=l?l.Left+l.Right:0,d=Math.ceil(r/10)*this.size;t.contentWidth=d+a+c}}}}setContentHeight(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.height.unitType===y.Auto){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),r=e?e.Top+e.Bottom:0,o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),a=o?o.Top+o.Bottom:0;let l=0;this.isTextArea&&!this.sp.renderStateService.optimizeNoStylesheets&&this.hasFontName(this.dataObject)?l=this.sp.fontService.getOffsetHeightSpanElement(this.dataObject):super.setContentHeight(),this.isTextArea&&!this.sp.renderStateService.optimizeNoStylesheets&&(this.rows=O.OPEN_MAX_ROWS,t.contentHeight=l*this.rows+r+a)}}}getKeyboardInsertStrategy(){return new nr(this.sp.injector,this.isOpenField,this.dataObject.MultiLine,this.dataObject.NextFieldOnEnter)}getFontCssClasses(){return super.getFontCssClasses(!0)}getPosition(){return this.inputControl?.getBoundingClientRect()??null}getText(){return this.textValue||this.watermarkText||""}setText(t){this.dataObject.Enabled&&(this.setTextValue(t),this.textChange.next(t))}clearText(){this.setText("")}checkAutoEnter(t,e,r){return!this.isTextArea&&super.checkAutoEnter(t,e,r)}hasErrors(t){return!(!t.isEmpty()||!this.sp.renderStateService.getFirstRelevantError(t))}setMask(){if(this.inputControl&&this.hasEditMask){const t=this.getMaskOptions();return this.mask=new pe.vy(this.inputControl,t),this.textValue&&(this.setTextValue(this.textValue),this.mask.updateOptions(t.mask)),this.mask.on("accept",e=>this.onAccept(e)),this.mask.on("complete",()=>this.onComplete()),!0}return!1}getMaskOptions(){return{mask:this.escapedEditMask,lazy:!1,placeholderChar:this.dataObject.BlankChar,definitions:{0:/[\d]/,9:/[\d\s]/,"#":/[\d\s+-]/,L:/[a-zA-Z]/,l:/[a-zA-Z\s]/,"?":/[a-zA-Z\s]/,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9\s]/,C:/./,c:/./,"&":/./}}}onAccept(t){if(!this.maskModifiers.filter(r=>0!==r).isEmpty()){let r="";this.mask.unmaskedValue.split("").forEach((o,a)=>{switch(this.maskModifiers[a]){case-1:o=o.toLowerCase();break;case 1:o=o.toUpperCase()}r+=o}),this.mask.value=r}const e=this.fieldInfo;e&&this.converter.isAllowed(this.mask.unmaskedValue,e.ValueType)===S.Ok?this.textValue!==this.mask.unmaskedValue&&t&&this.textChange.next(this.mask.unmaskedValue):this.mask.unmaskedValue=this.textValue}onComplete(){}determineEditMaskModifiers(){if(!this.isTextArea&&this.hasEditMask){let t=0,e=!1;this.dataObject.EditMask.split("").forEach(r=>{if(e)e=!1;else{if(this.isModifier(r))switch(e=!0,r){case"<":t=-1;break;case"|":t=0;break;case">":t=1}this.maskModifiers.push(t)}})}}isModifier(t){return[60,62,124].indexOf(t.charCodeAt(0))>-1}isDefaultDefinition(t){return["*","[","]","{","}","`"].indexOf(t)>-1}setElementWidth(t){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin);let r=0;e&&(r=e.Left+e.Right),this.cssStyle.width=`calc(${t}em + ${r}px)`}getEscapedCharacter(t){if(!this.isModifier(t))return this.isDefaultDefinition(t)?`\\${t}`:t}pushChange(t){const e=this.fieldInfo;e&&(this.converter.convertFromString(t,e),this.converter.isValid(t,e.ValueType)===S.Ok&&(this.converter.removeRangeCheckErrors(e),this.fieldInfo=e),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e))}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Te))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-string-textbox"]],viewQuery:function(t,e){if(1&t&&i.Gf(Id,5),2&t){let r;i.iGM(r=i.CRH())&&(e.inputControlRef=r.first)}},features:[i.qOj],decls:3,vars:2,consts:[["input",""],[3,"ngIf","ngIfElse"],["autocapitalize","off","autocomplete","off","title","",3,"ngClass","ngStyle","bl5Aria","bl5Clipboard","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5NavigationToggle","bl5Outline","bl5Tooltip","input","blur"],["inputcontrol","","autoWidthElement","","autoHeightElement",""]],template:function(t,e){if(1&t&&(i.YNc(0,Ed,4,18,"ng-template",null,0,i.W1O),i.YNc(2,Fd,4,17,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.isTextArea)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,Md,vt,tt,R,Se,ot],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();function Dd(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(3,10,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}function Vd(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",4,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(3,"safeHtml"),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,7,t.text),i.oJD),i.uIk("id",t.controlId)("tabindex",t.tabIndex)}}let jd=(()=>{class n extends bt{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}ngOnInit(){super.ngOnInit(),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleClick(t){this.dataObject.Enabled?this.executeButton():t.preventDefault()}handleKeyDown(t){this.dataObject.Enabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.executeButton(),t.preventDefault())}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}executeButton(){this.dataObject.CheckName&&this.sp.eventService.emitHandleActionEvent(new mn(this.dataObject.CheckName),this.controlId)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-suppress-button"]],features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button",3,"ngClass","ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement",""],["role","button",3,"ngStyle","bl5Aria","bl5FocusEvent","bl5MouseEvent","innerHTML","click","keydown"]],template:function(t,e){if(1&t&&(i.YNc(0,Dd,4,12,"ng-template",null,0,i.W1O),i.YNc(2,Vd,4,9,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();function Nd(n,s){1&n&&i.GkF(0)}function Rd(n,s){1&n&&i.GkF(0)}const Bd=function(n){return{widths:n}},zd=function(n,s){return{rows:n,columns:s}};function Gd(n,s){if(1&n&&(i.TgZ(0,"table",5,6),i.YNc(3,Nd,1,0,"ng-container",7),i.YNc(4,Rd,1,0,"ng-container",7),i.qZA()),2&n){const t=i.oxw(),e=i.MAs(2),r=i.MAs(4);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject),i.uIk("id",t.controlId),i.xp6(3),i.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",i.VKq(10,Bd,t.tableLayout.ColSizes)),i.xp6(1),i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.WLB(12,zd,t.children,t.dataObject.Columns))}}function Hd(n,s){1&n&&i._UZ(0,"col"),2&n&&i.Udp("width",s.$implicit,"px")}function Ud(n,s){if(1&n&&(i.TgZ(0,"colgroup"),i.YNc(1,Hd,1,2,"ng-template",8),i._UZ(2,"col",9),i.qZA()),2&n){const t=s.widths;i.xp6(1),i.Q6J("ngForOf",t)}}function Wd(n,s){1&n&&i.GkF(0)}const Yd=function(n,s){return{row:n,columns:s}};function Kd(n,s){if(1&n&&i.YNc(0,Wd,1,0,"ng-container",7),2&n){const t=s.$implicit,e=i.oxw().columns;i.oxw();const r=i.MAs(6);i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.WLB(2,Yd,t,e))}}function Qd(n,s){1&n&&i.GkF(0)}const Jd=function(n){return{columns:n}};function Zd(n,s){if(1&n&&(i.TgZ(0,"tbody"),i.YNc(1,Kd,1,5,"ng-template",8),i.YNc(2,Qd,1,0,"ng-container",7),i.qZA()),2&n){const t=s.rows,e=s.columns;i.oxw();const r=i.MAs(8);i.xp6(1),i.Q6J("ngForOf",t),i.xp6(1),i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.VKq(3,Jd,e))}}function qd(n,s){if(1&n&&i.GkF(0,10),2&n){const t=i.oxw(),e=t.row,r=t.columns;i.Q6J("childType",e.type)("dataObject",e.dataObject)("parentId",e.parentId)("columns",r)("gridLines",e.gridLines)("gridLineColor",e.gridLineColor)("gridLineWidth",e.gridLineWidth)("isEvenRow",e.isEvenRow)("rowColor",e.rowColor)("rowIndex",e.rowIndex)}}function $d(n,s){1&n&&i.YNc(0,qd,1,10,"ng-template",0),2&n&&i.Q6J("ngIf",s.row)}function Xd(n,s){1&n&&i._UZ(0,"td",9)}function tu(n,s){if(1&n&&(i.TgZ(0,"tr",9),i.YNc(1,Xd,1,0,"ng-template",8),i._UZ(2,"td",9),i.qZA()),2&n){const t=s.columns;i.xp6(1),i.Q6J("ngForOf",t)}}let eu=(()=>{class n extends et{constructor(t,e,r,o){super(e,r,o),this.modelService=t,this.sp=e,this.el=r,this.cd=o,this.tableLayout=null,this.children=[],this.initialize=()=>{const a=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLines),l=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineColor),c=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineWidth);this.children=[];let d=!0,u=!1;this.evenRowColor=this.dataObject.EvenRowColor,this.oddRowColor=this.dataObject.OddRowColor,this.dataObject.Children.forEach((h,m)=>{const f=this.modelService.createChild(h,this.controlId);at.assign(f,{gridLines:a}),at.assign(f,{gridLineColor:l}),at.assign(f,{gridLineWidth:c}),at.assign(f,{rowIndex:m}),u||(d=!d),u=h.CombineStriping,at.assign(f,{isEvenRow:d}),at.assign(f,{rowColor:d?this.evenRowColor:this.oddRowColor}),this.children.push(f)}),this.tableLayout=this.initiateTableLayout()},this.initiateTableLayout=()=>{const a={Columns:[],Rows:[],TotalStarColumns:0,TotalStarRows:0,RowSizes:[],ColSizes:[]},l=this.dataObject.Columns,c=[];this.dataObject.Columns.forEach(u=>{u.UnitType===k.Star&&(a.TotalStarColumns+=u.Value);const h={Draw:!0,ColDefinition:at.cloneDeep(u),ColSpan:1,RowSpan:1,Child:null,Spacer:!1};c.push(h)});const d=[];return this.dataObject.Children.forEach(u=>{u.RowHeight.UnitType===k.Star&&(a.TotalStarRows+=u.RowHeight.Value);const h={RowDefinition:u.RowHeight,Columns:at.cloneDeep(c),Spacer:!1};d.push(h)}),a.Columns=l,a.Rows=d,a.ColSizes=this.controlSize.colWidths,a}}handleControlUpdate(t){super.handleControlUpdate(t),this.initialize()}getCssClasses(){const t=super.getCssClasses();return(!this.controlSize||0===this.controlSize.getWidth()||0===this.controlSize.getHeight())&&t.push("visibility-hidden"),this.controlSize.hasOverflow()&&t.push("no-overflow"),t}applyStylesAndDimensions(){super.applyStylesAndDimensions(),this.tableLayout&&(this.tableLayout.ColSizes=this.controlSize.colWidths)}createChildControlSizes(){const t=[];for(let e=0,r=this.dataObject.Children.length;e<r;e++){const o=this.dataObject.Children[e];for(let a=0,l=this.dataObject.Columns.length;a<l;a++){const c=this.dataObject.Columns[a],f=new he(a,e,c.UnitType,c.Value,o.RowHeight.UnitType,o.RowHeight.Value);t.push(f),f.exploded=o.Visibility!==K.Collapsed&&this.dataObject.Visibility!==K.Collapsed}}for(let e=0,r=this.dataObject.Children.length;e<r;e++){const o=this.dataObject.Children[e];for(let a=0,l=o.Children.length;a<l;a++){const c=o.Children[a],d=this.findChild(t,c.ColumnIndex,e);if(d){const u=this.sp.sizeTreeService.createControlSize(c);u&&d.addChild(u)}}}return t}updateControlSize(){if(!this.useCssVars&&(super.updateControlSize(),this.controlSize instanceof Kn)){const t=this.controlSize;t.gridLines=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLines),t.gridLineWidth=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineWidth);const e=this.controlSize.getChildren();for(let r=0,o=this.dataObject.Children.length;r<o;r++){const a=this.dataObject.Children[r];for(const l of e)if(l){const c=l;c.rowIndex===r&&(c.exploded=a.Visibility!==K.Collapsed&&this.dataObject.Visibility!==K.Collapsed)}}}}findChild(t,e,r){return t.find(o=>o.colIndex===e&&o.rowIndex===r)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>me)),i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-table"]],features:[i.qOj],decls:9,vars:1,consts:[[3,"ngIf"],["colgroup",""],["tbody",""],["tr",""],["filler",""],[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],["autoWidthElement","","autoHeightElement",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["ngFor","",3,"ngForOf"],[1,"filler"],["bl5Component","",3,"childType","dataObject","parentId","columns","gridLines","gridLineColor","gridLineWidth","isEvenRow","rowColor","rowIndex"]],template:function(t,e){1&t&&(i.YNc(0,Gd,5,15,"ng-template",0),i.YNc(1,Ud,3,1,"ng-template",null,1,i.W1O),i.YNc(3,Zd,3,5,"ng-template",null,2,i.W1O),i.YNc(5,$d,1,1,"ng-template",null,3,i.W1O),i.YNc(7,tu,3,1,"ng-template",null,4,i.W1O)),2&t&&i.Q6J("ngIf",e.tableLayout)},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,N,z,we,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();const iu=["data-bl5-table-row",""];function nu(n,s){if(1&n&&i.GkF(0,5),2&n){const t=i.oxw(2).index,e=i.oxw();i.Q6J("childType",e.children[t].type)("dataObject",e.children[t].dataObject)("parentId",e.children[t].parentId)}}function ru(n,s){if(1&n&&(i.TgZ(0,"td",3)(1,"div",4),i.YNc(2,nu,1,3,"ng-template",2),i.qZA()()),2&n){const t=i.oxw().index,e=i.oxw();i.Q6J("bl5SkipLinkTarget",e.dataObject)("ngStyle",e.columnStyles[t]),i.uIk("role",e.cellRole(e.children[t]))("colspan",e.getColumnSpan(t)),i.xp6(1),i.Q6J("ngStyle",e.cellStyles[t]),i.xp6(1),i.Q6J("ngIf",e.children[t])}}function ou(n,s){if(1&n&&i.YNc(0,ru,3,6,"ng-template",2),2&n){const t=s.index,e=i.oxw();i.Q6J("ngIf",!e.hiddenBecauseOfColumnSpans[t])}}let su=(()=>{class n extends et{constructor(t,e,r,o,a,l){super(e,o,a),this.modelService=t,this.sp=e,this.componentService=r,this.el=o,this.cd=a,this.sanitizer=l,this.children=[],this.columnStyles=[],this.cellStyles=[],this.hiddenBecauseOfColumnSpans=[],this.onMouseOver=c=>{!this.isTooltipDisabled&&this.tooltip&&(c.preventDefault(),c.stopPropagation(),this.sp.tooltipService.showTooltip(this.tooltip,this.el.nativeElement))},this.onMouseLeave=()=>{this.sp.tooltipService.hideTooltip()}}get tooltip(){return this.dataObject.Tooltip}get isTooltipDisabled(){return this.sp.userAgentService.isMobile||null==this.tooltip||null==this.tooltip.Text||null==this.tooltip.Font&&String.isNullOrEmpty(this.tooltip.FontName)}get role(){return""===this.dataObject.AccessibilityRole?"presentation":this.dataObject.AccessibilityRole}cellRole(t){return t?.dataObject?.AccessibilityRole?t?.dataObject?.AccessibilityRole:null}get cellScope(){return this.dataObject.AccessibilityRole===Mt.Row?"col":""}get id(){return this.controlId}ngOnInit(){super.ngOnInit(),this.useCssVars||this.sizeTreeReadySubscription||(this.sizeTreeReadySubscription=this.sp.eventService.sizeTreeReadyEvent.subscribe({next:()=>{this.applyStylesAndDimensions(),this.cd.markForCheck()}}))}ngOnDestroy(){this.sizeTreeReadySubscription&&this.sizeTreeReadySubscription.unsubscribe()}handleControlUpdate(t){super.handleControlUpdate(t);const e=this.componentService.getComponent(this.parentId);if(this.parentId&&e){const r=e.dataObject;r.Visibility!==K.Visible&&(t.Visibility=r.Visibility)}this.children=new Array(this.columns.length),this.columnStyles=new Array(this.columns.length),this.cellStyles=new Array(this.columns.length),this.dataObject.Children.forEach(r=>{if(this.children[r.ColumnIndex]=this.modelService.createChild(r,this.controlId),this.children[r.ColumnIndex].dataObject.ColSpan>1){const a=r.ColumnIndex+this.children[r.ColumnIndex].dataObject.ColSpan;for(let l=r.ColumnIndex+1;l<a;l++)this.hiddenBecauseOfColumnSpans[l]=!0}})}getColumnSpan(t){return this.children?.length>0&&this.children[t]?.dataObject?.ColSpan>1?this.children[t].dataObject.ColSpan:void 0}getCssClasses(){const t=super.getCssClasses();return t.push(this.isEvenRow?"even":"odd"),this.useCssVars&&(this.rowClass=t.join(" ")),t}getStyleObject(){let t=super.getStyleObject();if(!this.useCssVars){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Background);e.SolidColor&&0===e.SolidColor.A&&Object.prototype.hasOwnProperty.call(t,"background")&&delete t.background,this.rowColor&&this.rowColor.A>0&&!Object.prototype.hasOwnProperty.call(t,"background")&&(t=Object.assign(t,{"background-color":this.sp.colorService.generateRGBAColor(this.rowColor)})),this.applyColumnGridLines(),this.applyColumnTextAlignmentStyles()}return t}sizeTreeSetWidth(){}sizeTreeSetHeight(){}sizeTreeReady(){}applyStylesAndDimensions(){if(super.applyStylesAndDimensions(),!this.useCssVars){const t=this.sp.sizeTreeService.find(this.parentId);if(t&&t.isReady()){const e=t.rowHeights;null!=e&&this.rowIndex in e&&(this.style.height=e[this.rowIndex]+"px")}if(t){const e=t.getColumnSiblings(this.rowIndex);this.columnStyles=this.columnStyles.length===this.columns.length?this.columnStyles:new Array(this.columns.length),this.cellStyles=this.cellStyles.length===this.columns.length?this.cellStyles:new Array(this.columns.length),this.columns.forEach((r,o)=>{const a=this.columnStyles[o]?this.columnStyles[o]:{},l=this.findChild(e,o,this.rowIndex);l&&(this.cellStyles[o]={},!l.containsSpanChild()&&l.hasOverflowingChild()&&(this.cellStyles[o]={overflow:"hidden",width:(l.pixelWidth??0)+"px",height:(l.pixelHeight??0)+"px"}),this.columnStyles[o]=a)})}this.rowStyle=this.sanitizer.bypassSecurityTrustStyle(this.sp.helperService.convertStyleObjectToString(this.style)),this.rowClass=this.cssClass.join(" ")}}updateControlSize(){if(!this.useCssVars){super.updateControlSize();const t=this.sp.sizeTreeService.find(this.parentId);if(t){const e=t.getChildren();for(const r of e)if(r instanceof he){const o=r;o.rowIndex===this.dataObject.RowIndex&&(o.exploded=this.dataObject.Visibility!==K.Collapsed)}}}}configureControlSize(){super.configureControlSize(!1)}findChild(t,e,r){return t.find(o=>o.colIndex===e&&o.rowIndex===r)}applyColumnGridLines(){if(this.gridLines&&this.gridLines!==Z.None){const t=`solid ${this.gridLineWidth}px ${this.sp.colorService.generateRGBAColor(this.gridLineColor)}`;if(this.gridLineWidth&&this.gridLineWidth>0){const e={};(this.gridLines===Z.Horizontal||this.gridLines===Z.Both)&&this.rowIndex>0&&(e.borderTop=t),this.columns.forEach((r,o)=>{(this.gridLines===Z.Vertical||this.gridLines===Z.Both)&&o>0&&(e.borderLeft=t),this.columnStyles[o]=Object.assign({},e)})}}}applyColumnTextAlignmentStyles(){this.dataObject.Children.forEach(t=>{const e=this.sp.stylablePropertyService.getValueForStylableProperty(t,A.HorizontalAlignment),r=this.sp.stylablePropertyService.getValueForStylableProperty(t,A.VerticalAlignment),o={};switch(e){case X.Left:o.textAlign="left";break;case X.Center:o.textAlign="center";break;case X.Right:o.textAlign="right"}switch(r){case mt.Top:o.verticalAlign="top";break;case mt.Middle:o.verticalAlign="middle";break;case mt.Bottom:o.verticalAlign="bottom"}this.columnStyles[t.ColumnIndex]=Object.assign(this.columnStyles[t.ColumnIndex]||{},o)})}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>me)),i.Y36((0,i.Gpc)(()=>E)),i.Y36(se),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(jt.H7))},n.\u0275cmp=i.Xpm({type:n,selectors:[["tr","data-bl5-table-row",""]],hostVars:4,hostBindings:function(t,e){1&t&&i.NdJ("mouseover",function(o){return e.onMouseOver(o)})("mouseout",function(){return e.onMouseLeave()}),2&t&&(i.Ikx("id",e.id),i.uIk("role",e.role)("class",e.rowClass)("style",e.rowStyle,i.Ckj))},inputs:{rowIndex:"rowIndex",rowColor:"rowColor",columns:"columns",isEvenRow:"isEvenRow",gridLines:"gridLines",gridLineWidth:"gridLineWidth",gridLineColor:"gridLineColor"},features:[i.qOj],attrs:iu,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],[1,"filler"],[3,"ngIf"],[3,"bl5SkipLinkTarget","ngStyle"],[3,"ngStyle"],["bl5Component","",3,"childType","dataObject","parentId"]],template:function(t,e){1&t&&(i.YNc(0,ou,1,1,"ng-template",0),i._UZ(1,"td",1)),2&t&&i.Q6J("ngForOf",e.columns)},dependencies:[g.sg,g.O5,g.PC,we,gn],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})(),au=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r}onInput(t){const e=t.target;this.text!==e.value&&this.setText(e.value)}handleControlUpdate(t){if(super.handleControlUpdate(t),String.hasValue(t.Text))this.text=t.Text,this.sp.renderStateService.setTextBox(this.controlId,t.Text);else{const r=this.sp.renderStateService.getTextBox(this.controlId)?.Text;String.hasValue(r)&&(this.text=r)}}getText(){return this.text}setText(t){this.dataObject.Enabled&&(this.text=t,this.dataObject.Text=t,this.sp.renderStateService.setTextBox(this.controlId,t),this.cd.detectChanges(),this.executeActions(this.dataObject.OnTextChanged))}clearText(){this.setText("")}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-textbox"]],features:[i.qOj],decls:4,vars:12,consts:[["type","text","autocapitalize","off","autocomplete","off",3,"bl5Aria","bl5FocusEvent","bl5MouseEvent","bl5Tooltip","ngClass","ngStyle","ngModel","input"],["inputcontrol","","autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&(i.TgZ(0,"input",0,1),i.NdJ("input",function(o){return e.onInput(o)}),i.qZA()),2&t&&(i.Q6J("bl5Aria",e.ariaObject)("bl5FocusEvent",e.dataObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip)("ngClass",e.cssClass)("ngStyle",e.style)("ngModel",e.text),i.uIk("id",e.controlId)("disabled",e.disabled)("maxlength",e.maxLength)("size",e.size)("tabindex",e.tabIndex))},dependencies:[g.mk,g.PC,V.Fj,V.JJ,V.nD,V.On,N,z,tt,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();function lu(n,s){if(1&n&&(i._UZ(0,"div",1,2),i.ALo(3,"safeHtml")),2&n){const t=i.oxw();i.Q6J("bl5Aria",t.ariaObject)("ngClass",t.cssClass)("ngStyle",t.style)("bl5Tooltip",t.dataObject.Tooltip)("bl5MouseEvent",t.dataObject)("innerHTML",i.lcZ(3,8,t.text),i.oJD),i.uIk("id",t.controlId)("for",t.labelFor)}}let cu=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.containsRichText=!0}get labelFor(){return String.hasValue(this.dataObject.LabelFor)?this.dataObject.LabelFor:void 0}ngOnInit(){super.ngOnInit(),this.subscription=this.sp.eventService.sizeTreeReadyEvent.subscribe({next:()=>{this.onSizeTreeReady()}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}handleControlUpdate(t){super.handleControlUpdate(t),this.text=this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}getText(){return this.sp.richTextConverter.convertToPlainText(this.dataObject.Text)}onSizeTreeReady(){this.verticalTextAlignment!==mt.Top&&this.heightUnitType!==y.Auto&&this.sp.styleGeneratorService.applyTopPaddingForVerticalTextAlignment(this.el.nativeElement,window,this.verticalTextAlignment)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-text"]],features:[i.qOj],decls:1,vars:1,consts:[[3,"ngIf"],[3,"bl5Aria","ngClass","ngStyle","bl5Tooltip","bl5MouseEvent","innerHTML"],["autoWidthElement","","autoHeightElement",""]],template:function(t,e){1&t&&i.YNc(0,lu,4,10,"ng-template",0),2&t&&i.Q6J("ngIf",e.text)},dependencies:[g.mk,g.O5,g.PC,N,z,R,ft],styles:['[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]{font-size:0}[data-horizontal-alignment="1"][_nghost-%COMP%]{text-align:center}[data-horizontal-alignment="2"][_nghost-%COMP%]{text-align:right}[_nghost-%COMP%] > .TextComponent[_ngcontent-%COMP%]{vertical-align:top;display:inline-block}[_nghost-%COMP%] > .TextComponent[_ngcontent-%COMP%] > .text-container.auto[_ngcontent-%COMP%]{display:inline-block;text-decoration:inherit}[_nghost-%COMP%] > .TextComponent[_ngcontent-%COMP%] > .text-container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], [_nghost-%COMP%] > .TextComponent[_ngcontent-%COMP%] > .text-container[_ngcontent-%COMP%] > div[data-alignment="1"][_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%] > .TextComponent[_ngcontent-%COMP%] > .text-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%] > .TextComponent[_ngcontent-%COMP%] > .text-container[_ngcontent-%COMP%] > div[data-alignment="2"][_ngcontent-%COMP%]{text-align:right}.css-vars[_ngcontent-%COMP%]{align-content:var(--align-content);justify-content:var(--justify-content)}'],changeDetection:0}),n})();class Cr{constructor(s,t){this.injector=s,this.timeComponent=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.ToggleNavigation],this.injector)}enterKeyPressed(s){let t;try{t=new KeyboardEvent("keyup",{key:"Enter"})}catch{}return s.target&&t&&s.target.dispatchEvent(t),s.preventDefault(),x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(s){return this.timeComponent.isListOpen||(s.preventDefault(),this.timeComponent.previousValue()),[]}downKeyPressed(s){return this.timeComponent.isListOpen||(s.preventDefault(),this.timeComponent.nextValue()),[]}pageUpKeyPressed(){return this.timeComponent.isListOpen&&this.timeComponent.previousPage(),[]}pageDownKeyPressed(){return this.timeComponent.isListOpen&&this.timeComponent.nextPage(),[]}homeKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.firstValue()),[]}endKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.lastValue()),[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),this.timeComponent.closeDropDownList(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(){return[]}getName(){return"Time insert"}}class du extends Cr{enterKeyPressed(s){return s.preventDefault(),[]}getName(){return"Time insert accessible"}}class Sr{constructor(s,t){this.injector=s,this.timeComponent=t,this.navigationService=this.injector.get(nt)}f2KeyPressed(){return x.createCommands([C.SetNavigationMode],this.injector)}enterKeyPressed(s){return s.preventDefault(),this.timeComponent.isListOpen?(this.timeComponent.selectValue(),[]):x.createCommands([C.NextField],this.injector)}leftKeyPressed(){return[]}rightKeyPressed(){return[]}upKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.previousValue()),[]}downKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.nextValue()),[]}pageUpKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.previousPage()),[]}pageDownKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.nextPage()),[]}homeKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.firstValue()),[]}endKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.lastValue()),[]}tabKeyPressed(){return[]}shiftTabPressed(){return[]}escapePressed(s){return s.preventDefault(),this.timeComponent.closeDropDownList(),this.timeComponent.focusTextbox(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}spacePressed(s){return s.preventDefault(),this.timeComponent.isListOpen?this.timeComponent.closeDropDownList():this.timeComponent.openDropDownList(),[]}getName(){return"Time picker button insert"}}class uu extends Sr{enterKeyPressed(s){return s.preventDefault(),this.timeComponent.isListOpen&&this.timeComponent.selectValue(),[]}getName(){return"Time picker button insert accessible"}}class hu extends rn{constructor(s){super(s),this.injector=s}spacePressed(){return x.createCommands([C.SetInsertMode],this.injector)}getName(){return"Time navigation"}}class gu extends on{constructor(s,t){super(),this.injector=s,this.timeComponent=t,this.navigationService=this.injector.get(nt)}enterKeyPressed(s){return s.preventDefault(),this.timeComponent.isListOpen&&this.timeComponent.selectValue(),[]}spacePressed(s){return s.preventDefault(),this.timeComponent.isListOpen?this.timeComponent.closeDropDownList():this.timeComponent.openDropDownList(),[]}upKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.previousValue()),[]}downKeyPressed(s){return this.timeComponent.isListOpen&&(s.preventDefault(),this.timeComponent.nextValue()),[]}escapePressed(s){return s.preventDefault(),this.timeComponent.closeDropDownList(),this.timeComponent.focusTextbox(),x.createCommands([C.RestorePreviousValue,C.RestoreMode],this.injector)}}var Ut=(()=>{return(n=Ut||(Ut={})).InsertText="insertText",n.InsertReplacementText="insertReplacementText",n.InsertFromPaste="insertFromPaste",n.DeleteWordBackward="deleteWordBackward",n.DeleteWordForward="deleteWordForward",n.DeleteContent="deleteContent",n.DeleteContentBackward="deleteContentBackward",n.DeleteContentForward="deleteContentForward",n.HistoryUndo="historyUndo",n.HistoryRedo="historyRedo",Ut;var n})();const pu=["inputContainer"],mu=["inputElement"],fu=["timePickerButton"],bu=["timePicker"];function vu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"button",9,10),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.toggleTimePicker(r))}),i._UZ(2,"i",11),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.dataObject.FontName)("bl5PickerButtonStyle",t.dataObject),i.uIk("id",t.buttonId)("aria-expanded",t.isExpanded)("aria-haspopup",!0)("data-component-id",t.controlId)("disabled",t.disabled)("tabindex",t.tabIndex)}}function yu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",function(r){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.selectTime(a.time,r))}),i.qZA()}if(2&n){const t=s.$implicit,e=s.index,r=i.oxw();i.ekj("active",t.index===r.targetIndex),i.Q6J("ngClass",r.inputClasses)("innerText",t.label),i.uIk("id",r.getTimeListItemId(e))("data-component-id",r.controlId)("tabindex",r.optionTabIndex)}}let Cu=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.timeChange=new Qt.x,this.includeTime=!1,this.timePickerClasses=["left"],this.inputClasses=[],this.inputStyle={},this.dropdownStyle={},this.hasTimePickerAppearance=!1,this.isExpanded=!1,this.targetIndex=0,this.onFocus=()=>{this.closeTimePicker()},this.applyFont=()=>{if(this.dataObject&&Object.prototype.hasOwnProperty.call(this.dataObject,_.Font)){const a=this.dataObject[_.Font];a&&(this.dropdownStyle.fontSize=`${a.Size}px`,this.dropdownStyle.fontWeight=a.Bold?"bold":null,this.dropdownStyle.fontStyle=a.Italic?"italic":null,this.dropdownStyle.textDecoration=a.Underline?"underline":null,this.sp.colorService.hasColor(a.Color)&&(this.dropdownStyle.color=this.sp.colorService.generateRGBAColor(a.Color)))}},this.formatShortTimePattern=()=>{let a=this.cultureInfo.TimeSeparator+this.cultureInfo.ShortTimePattern+this.cultureInfo.TimeSeparator;return this.dataObject.ShowEditMask&&(a=a.replace(new RegExp("([hH])+"),"h").replace(new RegExp("([kK])+"),"k").replace(new RegExp("([mM])+"),"m").replace(new RegExp("([aA])+"),"a")),a=a.substring(1,a.length-1),this.cultureInfo.ShortTimePattern=this.cultureInfo.ShortTimePattern.replace(new RegExp("(h)+"),"hh").replace(new RegExp("(H)+"),"HH").replace(new RegExp("(m)+"),"mm").replace(new RegExp("(M)+"),"MM"),a},this.setMask=()=>{if(this.inputElement&&this.dataObject.ShowEditMask){const a=this.createMask();this.mask=(0,pe.ZP)(this.inputElement,a),this.mask.on("accept",()=>{}),this.mask.on("complete",this.onComplete)}else this.fieldMaxLength=8},this.createMask=()=>{const a={},l=this.dataObject;return a.mask=this.formatShortTimePattern(),a.placeholderChar=this.dataObject.BlankChar?l.BlankChar:"",a.lazy=!this.dataObject.ShowEditMask,a.blocks={h:{mask:pe.ZP.MaskedRange,from:1,to:12},k:{mask:pe.ZP.MaskedRange,from:0,to:23},m:{mask:pe.ZP.MaskedRange,from:0,to:59},a:{mask:pe.ZP.MaskedEnum,enum:["AM","PM","am","pm"]}},a}}get inputContainer(){return this.inputContainerRef.nativeElement}get inputElement(){return this.inputElRef.nativeElement}get timePickerButton(){return this.buttonRef.nativeElement}get timePicker(){return this.timePickerRef.nativeElement}get cultureInfo(){return this.sp.cultureInfoService.cultureInfo}get step(){return this.dataObject.TimePickerInterval>0?this.dataObject.TimePickerInterval:30}get buttonId(){return this.controlId+"_button"}get listId(){return this.controlId+"_timelist"}get optionTabIndex(){return this.timePickerIsVisible?0:-1}get sizeAttribute(){return Math.max(this.watermarkTextLength,this.sp.cultureInfoService.cultureInfo.ShortTimePattern.length)}ngOnInit(){super.ngOnInit(),this.timePickerIsVisible=!1,!this.sp.renderStateService.optimizeNoStylesheets&&!this.useCssVars&&this.sp.fontService.createFontSpan(this.dataObject),this.scrollSubscription=this.sp.eventService.scrollEvent.subscribe(t=>{this.onWindowScroll(t)}),this.cultureInfo.ShortTimePattern=this.cultureInfo.ShortTimePattern.replace(new RegExp("(h)+"),"hh").replace(new RegExp("(H)+"),"HH").replace(new RegExp("(m)+"),"mm").replace(new RegExp("(M)+"),"MM"),this.activeFieldChangedSubscription=this.sp.eventService.activeFieldChangedEvent.subscribe({next:t=>{if(t.previousField&&t.nextField){const e=this.fieldInfo;e&&t.previousField.FieldName===e.FieldName&&t.nextField.FieldName!==e.FieldName&&this.closeTimePicker()}}}),this.generateTimes(),this.timeChangeSubscription=this.timeChange.subscribe({next:t=>{null!==t&&(this.model="string"!=typeof t?t.toFormat(this.cultureInfo.ShortTimePattern):t),this.handleChange(),this.cd.markForCheck()}})}ngOnDestroy(){this.sp.renderStateService.optimizeNoStylesheets||this.sp.fontService.removeFontSpan(this.dataObject),this.timeChangeSubscription&&this.timeChangeSubscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe(),this.activeFieldChangedSubscription&&this.activeFieldChangedSubscription.unsubscribe(),super.ngOnDestroy()}ngAfterViewInit(){this.setMask(),this.closeTimePicker()}onInput(t){const e=t.target,r=this.fieldInfo;let o="";if(this.dataObject.ShowEditMask)return;const a=t;if(a){const l=a.inputType;if(l===Ut.InsertText){let c;(f=c||(c={}))[f.Hour=0]="Hour",f[f.Minute=1]="Minute",f[f.Second=2]="Second",f[f.AmPm=3]="AmPm";let d=c.Hour,u="",h="";const m=a.data;if("enter"===m?.toLocaleLowerCase())return void this.setTextValue(this.model);if(m&&"0123456789 apm".includes(m.toLowerCase())){const f=this.cultureInfo.ShortTimePattern.indexOf("h")>-1,w=this.cultureInfo.ShortTimePattern.indexOf("H")>-1,D=this.cultureInfo.ShortTimePattern.indexOf("A")>-1||this.cultureInfo.ShortTimePattern.indexOf("a")>-1;e.value.split("").forEach(B=>{if("0123456789 ".includes(B))switch(d){case c.Hour:{const j=parseInt(u+B,10),H=f&&j>0&&j<13,F=w&&j>0&&j<24;""===u||H||F?(u+=B,o+=B,2===u.length&&(d=c.Minute,o+=this.cultureInfo.TimeSeparator)):(this.cultureInfo.ShortTimePattern.toLowerCase().split("h").length-1>1&&(o=`00${o}`.slice(o.length,o.length+2)),o+=this.cultureInfo.TimeSeparator,"0"!==B&&(o+=B),d=c.Minute,h=B);break}case c.Minute:{const j=parseInt(h+B,10);this.cultureInfo.ShortTimePattern.toLowerCase().split("h").length-1>o.split(this.cultureInfo.TimeSeparator)[0].length&&(u=`0${u}`,o=`0${o}`),""===h||j<60?(o+=B,h+=B):d=c.AmPm;break}}else this.cultureInfo.TimeSeparator.includes(B)?d===c.Hour&&(o+=this.cultureInfo.TimeSeparator,d=c.Minute):"aApP".includes(B)&&(o.endsWith(this.cultureInfo.TimeSeparator)&&(o+="00"),D&&d!==c.Hour&&("aA".includes(B)?o+=` ${this.cultureInfo.AMDesignator}`:o+=` ${this.cultureInfo.PMDesignator}`,d=c.Hour))}),o=String.isNullOrEmpty(o)?"":o.replace(/ +(?= )/g,""),o=o.replace(/ +(?= )/g,""),e.value=o,r&&this.converter.isAllowed(o,r.ValueType)===S.Ok?this.timeChange.next(o):e.value=this.model??""}else o=e.value}else([Ut.InsertFromPaste,Ut.InsertReplacementText].indexOf(l)>-1||[Ut.DeleteContent,Ut.DeleteContentBackward,Ut.DeleteContentForward,Ut.DeleteWordBackward,Ut.DeleteWordForward].indexOf(l)>-1)&&(this.model=e.value)}var f}onBlur(){this.setTextValue(this.dataObject.ShowEditMask?this.mask.value:this.model);const t=this.fieldInfo;t&&(void 0===t.DataValue.IsDirty||t.DataValue.IsDirty)&&(this.sp.renderStateService.flagFieldNameAsVisited(t.FieldName),t.IsVisited=!0,this.converter.convertFromString(this.model,t),String.hasValue(t.DataValue.ValueAsString)&&this.converter.applyErrors(t.DataValue.ValueAsString,t)&&(this.fieldInfo=t))}onComplete(t){const e=this.fieldInfo;e&&this.converter.isAllowed(t.target.value,e.ValueType)===S.Ok&&this.timeChange.next(t.target.value)}onWindowResize(){this.closeTimePicker()}handleFieldUpdate(t){super.handleFieldUpdate(t),this.includeTime=t.ValueType.IncludeTime,this.timePickerClasses=this.timePickerClasses.filter(e=>"left"!==e&&"right"!==e),this.timePickerClasses.push(this.isTimePickerLeftAligned()?"left":"right"),this.setTextValue(this.converter.convertToString(t),!0),this.getFontCssClasses()}handleControlUpdate(t){if(super.handleControlUpdate(t),this.timePickerClasses=this.timePickerClasses.filter(e=>"focus-outline"!==e&&"focus-no-outline"!==e),this.timePickerClasses.push(t.ShowKeyboardFocus?"focus-outline":"focus-no-outline"),this.isHighContrast()&&this.timePickerClasses.indexOf("hc")<0)this.timePickerClasses.push("hc");else{const e=this.timePickerClasses.indexOf("hc",0);e>-1&&this.timePickerClasses.splice(e,1)}this.hasTimePickerAppearance=t.Appearance!==li.Textbox,this.applyBackground(),this.applyFont()}handleChange(){const t=this.fieldInfo;t&&this.converter.matchesTimePattern(this.model)===S.Ok&&(this.converter.convertFromString(this.model,t),this.converter.removeRangeCheckErrors(t),this.fieldInfo=t,this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,t)),this.closeTimePicker()}toggleTimePicker(t){this.dataObject.Enabled&&(this.timePickerIsVisible?this.closeTimePicker():this.showTimePicker(t))}closeTimePicker(){this.timePickerIsVisible=!1,this.isExpanded=!1,this.resetTimePicker()}selectTime(t,e){null!==e&&(e.cancelBubble=!0,e.preventDefault()),this.closeTimePicker(),this.timeChange.next(t)}getFontCssClasses(){if(this.inputClasses.push(...super.getFontCssClasses(!0)),this.sp.stylablePropertyService.hasStylableProperty(this.dataObject,A.HorizontalTextAlignment)){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.HorizontalTextAlignment),e=this.sp.styleGeneratorService.getTextAlignmentClass(t);this.inputClasses.push(e)}return[]}setContentWidth(){if(this.controlSize instanceof ht){const t=this.controlSize;if(t.width.unitType===y.Auto){const e=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.TextMargin),r=e?e.Left+e.Right:0,o=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.BorderWidth),a=o?o.Left+o.Right:0;let l=Math.max(this.watermarkTextLength,this.sp.cultureInfoService.cultureInfo.ShortTimePattern.length);if(this.timeViews.forEach(c=>{c.label.length>l&&(l=c.label.length)}),!this.sp.renderStateService.optimizeNoStylesheets){const d=this.determineOffsetWidth2(this.dataObject.FontName,"W",l);t.contentWidth=d+r+a}}}}getKeyboardInsertStrategy(){return this.sp.renderStateService.disableAutoFocus?document.activeElement?.id!==this.controlId?new uu(this.sp.injector,this):new du(this.sp.injector,this):document.activeElement?.id!==this.controlId?new Sr(this.sp.injector,this):new Cr(this.sp.injector,this)}getKeyboardNavigationStrategy(){return new hu(this.sp.injector)}getKeyboardEmptyStrategy(){return this.sp.renderStateService.disableAutoFocus?new gu(this.sp.injector,this):new on}get isListOpen(){return this.timePickerIsVisible}selectValue(){null!==this.timeViews&&(this.timeChange.next(this.timeViews[this.targetIndex].time),this.closeTimePicker(),this.sp.focusService.focusElementId(this.controlId),this.cd.markForCheck())}previousPage(){const t=this.getPageSize();this.targetIndex=Math.max(this.targetIndex-t,0),this.focusTargetIndex(),this.cd.markForCheck()}nextPage(){const t=this.getPageSize();this.targetIndex=Math.min(this.targetIndex+t,this.timeViews.length-1),this.focusTargetIndex(),this.cd.markForCheck()}previousValue(){this.targetIndex-=this.targetIndex>0?1:0,this.timePickerIsVisible?this.focusTargetIndex():this.timeChange.next(this.timeViews[this.targetIndex].time),this.cd.markForCheck()}nextValue(){this.targetIndex+=this.targetIndex<this.timeViews.length-1?1:0,this.timePickerIsVisible?this.focusTargetIndex():this.timeChange.next(this.timeViews[this.targetIndex].time),this.cd.markForCheck()}firstValue(){this.targetIndex=0,this.focusTargetIndex(),this.cd.markForCheck()}lastValue(){this.targetIndex=this.timeViews.length-1,this.focusTargetIndex(),this.cd.markForCheck()}openDropDownList(){this.showTimePicker(),this.cd.markForCheck()}closeDropDownList(){this.closeTimePicker(),this.cd.markForCheck()}focusTextbox(){this.sp.focusService.focusElementId(this.controlId)}getTimeListItemId(t){return`${this.listId}_${t}`}getText(){const t=this.fieldInfo;return t?this.converter.getNormalAnswerAsString(t):""}clearText(){const t=this.fieldInfo;this.dataObject.Enabled&&t&&(this.converter.setEmptyAnswer(t),this.fieldInfo=t,this.executeActions(this.dataObject.OnValueChanged))}checkAutoEnter(t,e,r){return!!super.checkAutoEnter(t,e,r)&&this.converter.matchesTimePattern(this.model)===S.Ok}setTextValue(t,e=!1){if(String.hasValue(t)){const r=this.converter.parseTime(this.model??"",e),o=r.isValid?r.toFormat(this.formatShortTimePattern()):t;this.model!==o&&(this.model=o,this.handleChange())}else this.model=null}isTimePickerLeftAligned(){return this.horizontalAlignment===X.Left&&(this.widthUnitType===y.Auto||this.widthUnitType===y.Pixels)}showTimePicker(t){const e=!(t&&"click"===t.type);this.timePickerIsVisible=!0,this.isExpanded=!0,this.activateField(e);const r=this.calculatePosition();this.useCssVars?(this.timePickerLeft=r.left,this.timePickerTop=r.top,this.timePickerWidth=`${this.autoWidthElement?.clientWidth??0}px`):(this.dropdownStyle=Object.assign(this.dropdownStyle,r),this.dropdownStyle.width=this.controlSize?.getWidth()??"0px"),this.configureTargetIndex(),(String.isNullOrEmpty(this.model)||this.model===this.timeViews[this.targetIndex].label)&&(this.cd.detectChanges(),this.focusTargetIndex())}resetTimePicker(){this.useCssVars?(this.timePickerLeft="-9999px",this.timePickerTop="-9999px"):(this.dropdownStyle.left="-9999px",this.dropdownStyle.top="-9999px")}generateTimes(){let t,e;if(this.timeViews=[],this.dataObject.TimePickerStartTime){const c=L.ou.fromMillis(this.dataObject.TimePickerStartTime);t=L.ou.fromObject({hour:c.hour,minute:c.minute,second:c.second,millisecond:c.millisecond})}else t=L.ou.fromObject({hour:0,minute:0,second:0});if(this.dataObject.TimePickerEndTime){const c=L.ou.fromMillis(this.dataObject.TimePickerEndTime);e=L.ou.fromObject({hour:c.hour,minute:c.minute,second:c.second,millisecond:c.millisecond})}else e=t.plus({days:1});let r=t;const o=L.ou.fromFormat(this.model||"",this.cultureInfo.ShortTimePattern);let a,l=0;for(;t.day===r.day&&r<=e;)this.timeViews.push({label:r.toFormat(this.cultureInfo.ShortTimePattern),time:r,index:l}),a=Math.abs(r.diff(o,Re.minutes).minutes)<=this.step>>1,a&&(this.targetIndex=l),l++,r=r.plus({minutes:this.step})}configureTargetIndex(){const t=L.ou.fromFormat(this.model||"",this.cultureInfo.ShortTimePattern);let e;for(const r of this.timeViews)e=Math.abs(r.time.diff(t,Re.minutes).minutes)<=this.step>>1,e&&(this.targetIndex=r.index)}applyBackground(){const t=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,A.Background);if(t){const e=this.sp.styleGeneratorService.generateBackgroundStyle(t,"#fff");this.useCssVars?this.timePickerBackground=e.background:this.dropdownStyle.background=e.background}}calculatePosition(){const t=this.inputContainer.getBoundingClientRect(),e=t.left,r=this.timePicker.getBoundingClientRect(),o=window.innerHeight-t.bottom>=r.height,l=window.innerHeight-(t.bottom+r.height)>t.top-r.height;return{left:`${e}px`,top:`${o||l?t.bottom:t.top-r.height}px`}}focusTargetIndex(){this.sp.focusService.focusElementId(this.getTimeListItemId(this.targetIndex)),this.cd.markForCheck()}getPageSize(){return Math.round(document.getElementById(this.listId)?.offsetHeight??0/Math.max(1,this.inputElement.offsetHeight))}isHighContrast(){return this.sp.renderStateService.disableAutoFocus}onWindowScroll(t){const e=t.target;e&&e.id!==this.controlId&&e.id!==this.listId&&(this.closeTimePicker(),this.cd.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Ui))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-time"]],viewQuery:function(t,e){if(1&t&&(i.Gf(pu,7),i.Gf(mu,7),i.Gf(fu,5),i.Gf(bu,7)),2&t){let r;i.iGM(r=i.CRH())&&(e.inputContainerRef=r.first),i.iGM(r=i.CRH())&&(e.inputElRef=r.first),i.iGM(r=i.CRH())&&(e.buttonRef=r.first),i.iGM(r=i.CRH())&&(e.timePickerRef=r.first)}},hostVars:8,hostBindings:function(t,e){1&t&&i.NdJ("resize",function(){return e.onWindowResize()},!1,i.Jf7),2&t&&i.Udp("--time-picker-width",e.timePickerWidth)("--time-picker-left",e.timePickerLeft)("--time-picker-top",e.timePickerTop)("--time-picker-background",e.timePickerBackground)},features:[i.qOj],decls:11,vars:28,consts:[[3,"ngClass","ngStyle","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement","","inputContainer",""],["type","text","autocapitalize","off","autocomplete","off",3,"bl5Aria","bl5DateInputStyle","bl5Focus","bl5FocusEvent","bl5NavigationToggle","bl5Outline","ngClass","ngStyle","ngModel","focus","blur","input"],["inputElement",""],[3,"ngIf"],[1,"kmd-timepicker-container",3,"ngClass","ngStyle","bl5ClickOutsideContext","bl5ClickOutside"],["timePicker",""],["role","listbox"],["ngFor","",3,"ngForOf"],["role","button","aria-label","Toggle Timepicker",1,"kmd-button",3,"ngClass","bl5PickerButtonStyle","click"],["timePickerButton",""],[1,"icon-clock-o"],["role","option",3,"ngClass","innerText","click"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1)(4,"input",2,3),i.NdJ("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()})("input",function(o){return e.onInput(o)}),i.qZA(),i.YNc(6,vu,3,8,"ng-template",4),i.qZA(),i.TgZ(7,"div",5,6),i.NdJ("bl5ClickOutside",function(){return e.closeTimePicker()}),i.TgZ(9,"ul",7),i.YNc(10,yu,1,7,"ng-template",8),i.qZA()()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.xp6(4),i.ekj("no-picker",!e.hasTimePickerAppearance),i.Q6J("bl5Aria",e.ariaObject)("bl5DateInputStyle",e.dataObject)("bl5Focus",e.dataObject)("bl5FocusEvent",e.dataObject)("bl5NavigationToggle",e.dataObject)("bl5Outline",e.dataObject)("ngClass",e.inputClasses)("ngStyle",e.inputStyle)("ngModel",e.model),i.uIk("id",e.controlId)("data-fieldname",e.fieldName)("disabled",e.disabled)("maxlength",e.fieldMaxLength)("placeholder",e.watermarkText)("size",e.sizeAttribute)("tabindex",e.tabIndex),i.xp6(2),i.Q6J("ngIf",e.hasTimePickerAppearance),i.xp6(1),i.Q6J("ngClass",e.timePickerClasses)("ngStyle",e.dropdownStyle)("bl5ClickOutsideContext",e.el.nativeElement.children[0]),i.uIk("id",e.listId),i.xp6(3),i.Q6J("ngForOf",e.timeViews))},dependencies:[g.mk,g.sg,g.O5,g.PC,V.Fj,V.JJ,V.nD,V.On,N,z,Be,vt,tt,R,Se,ot,cr,dr],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]{--time-picker-width: 9rem;--time-picker-background: #fff;--time-picker-left: -9999px;--time-picker-top: -9999px}[_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], [_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%] > input.no-picker[_ngcontent-%COMP%]{background:transparent;border:none}[_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;font-weight:400!important;margin:auto .2em;text-align:center;text-decoration:none!important}[_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:disabled{cursor:default}[_nghost-%COMP%] > div.TimeComponent.css-vars[_ngcontent-%COMP%]{box-sizing:content-box;grid-template-columns:minmax(min-content,1fr) min-content}[_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%]:not(.css-vars){display:inline-flex;position:relative}[_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%]:not(.css-vars) > input[_ngcontent-%COMP%], [_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%]:not(.css-vars) > input.no-picker[_ngcontent-%COMP%]{flex:1 0 auto;align-items:center;justify-content:center;width:calc(100% - 1.4em)}[_nghost-%COMP%] > div.TimeComponent[_ngcontent-%COMP%]:not(.css-vars) > button[_ngcontent-%COMP%]{flex:0 0 1em;width:1em;align-items:center;justify-content:center}[_nghost-%COMP%]   input[type=time].input-not-visible[_ngcontent-%COMP%]{width:0!important;min-width:0!important;max-width:0!important;height:0!important;min-height:0!important;max-height:0!important;padding:0!important;margin:0!important;border:0!important;-webkit-min-logical-width:0!important;-webkit-min-logical-height:0!important;border-radius:0!important;opacity:0!important}[_nghost-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   input.watermark[_ngcontent-%COMP%]{text-decoration:none!important}[_nghost-%COMP%]   input.watermark[_ngcontent-%COMP%]::placeholder{text-decoration:none!important;opacity:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%], [_nghost-%COMP%]   li.watermark[_ngcontent-%COMP%]{text-decoration:none!important}[_nghost-%COMP%]   li.watermark[_ngcontent-%COMP%]::placeholder{text-decoration:none!important;opacity:1}.css-vars[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(var(--width) - 1em - .4em)}div.kmd-timepicker-container[_ngcontent-%COMP%]{position:absolute;z-index:9999;left:var(--time-picker-left);top:var(--time-picker-top);-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);width:var(--time-picker-width);height:200px;overflow-y:auto;background-color:var(--time-picker-background);border:1px solid #000;font-family:Arial;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.kmd-timepicker-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;z-index:999}div.kmd-timepicker-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:5px;cursor:pointer;text-align:left;width:100%}div.kmd-timepicker-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%], div.kmd-timepicker-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:#1e88e5;color:#fff}div.kmd-timepicker-container.hc[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;z-index:999}div.kmd-timepicker-container.hc[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:5px;cursor:pointer;text-align:left;width:100%}div.kmd-timepicker-container.hc[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%], div.kmd-timepicker-container.hc[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:#635366;color:#fff}"],changeDetection:0}),n})(),Su=(()=>{class n extends et{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.timerService=o}ngOnInit(){super.ngOnInit(),this.timerService.createTimer(this.dataObject)}ngOnDestroy(){this.timerService.deleteTimer(this.controlId),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(_i))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-timer"]],features:[i.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),n})();var Au=U(5861),Ge=(()=>{return(n=Ge||(Ge={}))[n.Any=0]="Any",n[n.Image=1]="Image",n[n.Audio=2]="Audio",n[n.Video=4]="Video",Ge;var n})(),di=(()=>{return(n=di||(di={}))[n.KiloByte=0]="KiloByte",n[n.MegaByte=1]="MegaByte",n[n.Byte=9]="Byte",di;var n})();let Ar=(()=>{class n extends le{constructor(){super(...arguments),this.kiloByte=Math.pow(2,10),this.megaByte=Math.pow(2,20)}convertToString(t){return t?.DataValue.FileName??""}setBlobAnswer(t,e,r){r.DataValue.FileName=t,r.DataValue.MimeType=e,r.DataValue.AnswerStatus=t.isEmpty()?T.Empty:T.Response}isValid(t,e){return S.Ok}isAllowed(t,e){return S.Ok}getMaxFileSizeText(t){return t.MaxSize?`${t.MaxSize.Value}${t.MaxSize.Unit===di.MegaByte?"MB":"KB"}`:"0"}isBlobValid(t,e){if(!e.MaxSize)return S.AnswerBlobAnswerMaxSizeExceeded;{const a=e.MaxSize.Unit===di.MegaByte?this.megaByte*e.MaxSize.Value:this.kiloByte*e.MaxSize.Value;if(a>0&&t.size>a)return S.AnswerBlobAnswerMaxSizeExceeded}const r=`.${t.name.split(".").pop()}`;let o=!1;if(Array.isPopulated(e.ExtensionFilter)){for(const a of e.ExtensionFilter)if(r.toLowerCase()===a.toLowerCase()){o=!0;break}}else o=!0;return o?S.Ok:S.AnswerBlobAnswerInvalidFileType}autoEnter(t){return!(t.DataValue.AnswerStatus===T.Empty||String.isNullOrEmpty(t.DataValue.FileName))}}return n.\u0275fac=function(){let s;return function(e){return(s||(s=i.n5z(n)))(e||n)}}(),n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=["file"];function xu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",2,3),i.NdJ("click",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleClick(r))})("keydown",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleKeyDown(r))}),i.ALo(4,"safeHtml"),i.qZA(),i.TgZ(5,"input",4,5),i.NdJ("change",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleChange())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip)("innerHTML",i.lcZ(4,16,t.text),i.oJD),i.uIk("id",t.controlId)("name",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex),i.xp6(5),i.Q6J("hidden",!0)("accept",t.fileFilter)}}function _u(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"input",6,7),i.NdJ("change",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.handleChange())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("accept",t.fileFilter)("bl5Aria",t.ariaObject)("bl5Focus",t.dataObject)("bl5FocusEvent",t.dataObject)("bl5MouseEvent",t.dataObject)("bl5Outline",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("name",t.controlId)("data-fieldname",t.fieldName)("disabled",t.disabled)("tabindex",t.tabIndex)}}let ku=(()=>{class n extends bt{constructor(t,e,r,o,a){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.uploadService=o,this.converter=a,this.fileFilter="",this.handleChange=()=>{const l=this.file.files;if(null!=l&&l.length>0){const c=l[0],d=this.fieldInfo;if(d){const u=d.ValueType,h=this.converter.isBlobValid(c,u);if(h===S.Ok)this.uploadFile(c,d).then();else{let m="";h===S.AnswerBlobAnswerMaxSizeExceeded&&(m=this.converter.getMaxFileSizeText(u)),this.converter.setRangeCheckError(h,m,d),this.fieldInfo=d}}}}}get file(){return this.fileRef.nativeElement}get files(){return this.file.files||new FileList}get text(){return this.sp.richTextConverter.convertToHTML(this.dataObject.Text,this.hasAutoWidth)}handleControlUpdate(t){super.handleControlUpdate(t)}handleFieldUpdate(t){super.handleFieldUpdate(t);const e=t.ValueType,r=Array.isPopulated(e.ExtensionFilter)?[...e.ExtensionFilter]:[];e.FileTypeFilter&Ge.Audio&&r.push("audio/*"),e.FileTypeFilter&Ge.Video&&r.push("video/*"),e.FileTypeFilter&Ge.Image&&r.push("image/*"),this.fileFilter=r.isEmpty()?"":r.join(",")}handleClick(t){this.isEnabled?this.selectFile():t.preventDefault()}handleKeyDown(t){this.isEnabled&&(t.key===b.Enter||t.key===b.Space||t.key===b.Spacebar)&&(this.selectFile(),t.preventDefault())}getText(){return this.files.length>0?this.files[0].name:""}selectFile(){this.file.click()}uploadFile(t,e){var r=this;return(0,Au.Z)(function*(){const{FieldName:o,FieldPropertyName:a}=e;yield r.uploadService.uploadFile(t,o,a),r.converter.setBlobAnswer(t.name,t.type,e),r.converter.removeRangeCheckErrors(e),r.fieldInfo=e,r.executeActions(r.dataObject.OnValueChanged),r.applyAutoEnter(r.dataObject.AutoEnter,r.converter,e)})()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(cn),i.Y36(Ar))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-upload"]],viewQuery:function(t,e){if(1&t&&i.Gf(wu,5),2&t){let r;i.iGM(r=i.CRH())&&(e.fileRef=r.first)}},features:[i.qOj],decls:3,vars:2,consts:[["richElement",""],[3,"ngIf","ngIfElse"],["role","button","autocapitalize","off",1,"button",3,"ngClass","ngStyle","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","innerHTML","click","keydown"],["autoWidthElement","","autoHeightElement","","button",""],["type","file","formnovalidate","formnovalidate","aria-disabled","true","aria-hidden","true","autocapitalize","off","autocomplete","off","rel","noopener noreferrer",1,"file",3,"hidden","accept","change"],["file",""],["type","file","formnovalidate","formnovalidate","autocapitalize","off","autocomplete","off",3,"ngClass","ngStyle","accept","bl5Aria","bl5Focus","bl5FocusEvent","bl5MouseEvent","bl5Outline","bl5Tooltip","change"],["autoWidthElement","","autoHeightElement","","file",""]],template:function(t,e){if(1&t&&(i.YNc(0,xu,7,18,"ng-template",null,0,i.W1O),i.YNc(2,_u,4,14,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.ariaObject.UseOptimizedNoStylesheetVersion)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,vt,tt,R,ot,ft],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]{--background-color: transparent;--border-color: #757575;--border-style: solid;--border-width: 1px;--padding: 2px}"],changeDetection:0}),n})(),Ou=(()=>{class n{constructor(t){this.sanitized=t}transform(t){return this.sanitized.bypassSecurityTrustResourceUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(jt.H7,16))},n.\u0275pipe=i.Yjl({name:"safeResource",type:n,pure:!0}),n})();const Tu=["video"],Pu=["videoSource"];function Mu(n,s){if(1&n&&(i.TgZ(0,"div",2,3)(3,"video",4,5),i._UZ(5,"source"),i._uU(6," Your browser does not support the video tag. "),i.qZA()()),2&n){const t=i.oxw();i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId),i.xp6(3),i.Q6J("ngStyle",t.videoStyle),i.uIk("id",t.videoId)("autoplay",t.autoPlay)("controls",t.showControls)("disabled",t.disabled),i.xp6(2),i.uIk("src",t.mediaUrl,i.LSH)}}function Iu(n,s){if(1&n&&(i._UZ(0,"iframe",7,3),i.ALo(3,"safeResource")),2&n){const t=i.oxw(2);i.Q6J("ngClass",t.cssClass)("ngStyle",t.style)("bl5Aria",t.ariaObject)("bl5MouseEvent",t.dataObject)("bl5Tooltip",t.dataObject.Tooltip),i.uIk("id",t.controlId)("src",i.lcZ(3,7,t.mediaUrl),i.uOi)}}function Eu(n,s){if(1&n&&i.YNc(0,Iu,4,9,"ng-template",6),2&n){const t=i.oxw();i.Q6J("ngIf",t.dataObject.Enabled)}}let Fu=(()=>{class n extends et{constructor(t,e,r){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.mediaUrl="",this.displayExternalVideo=!1,this.videoStyle={width:"",height:""}}get videoElement(){return this.videoRef.nativeElement}get videoId(){return this.controlId+"_video"}get autoPlay(){return this.isEnabled&&this.dataObject.AutoPlay?"autoplay":void 0}get showControls(){return this.isEnabled&&this.dataObject.ShowControls?"controls":void 0}handleControlUpdate(t){super.handleControlUpdate(t),this.isEnabled?(String.hasValue(this.dataObject.SourceUrl)?this.mediaUrl=this.dataObject.SourceUrl:String.hasValue(this.dataObject.Source)&&(this.mediaUrl=this.sp.mediaService.getMediaUrlForVideo(this.dataObject.Source)??""),this.displayExternalVideo=null!=this.mediaUrl&&(this.mediaUrl.startsWith("http")||this.mediaUrl.startsWith("www"))):(this.videoElement.pause(),this.mediaUrl="",this.displayExternalVideo=!1)}getDimensions(){const t=super.getDimensions();return this.videoStyle.width=t.width,this.videoStyle.height=t.height,t}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-video"]],viewQuery:function(t,e){if(1&t&&(i.Gf(Tu,5),i.Gf(Pu,5)),2&t){let r;i.iGM(r=i.CRH())&&(e.videoRef=r.first),i.iGM(r=i.CRH())&&(e.videoSource=r.first)}},features:[i.qOj],decls:3,vars:2,consts:[["displayLocal",""],[3,"ngIf","ngIfElse"],[3,"ngClass","ngStyle","bl5Aria","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement",""],["playsinline","","preload","auto",3,"ngStyle"],["video",""],[3,"ngIf"],["allowfullscreen","",3,"ngClass","ngStyle","bl5Aria","bl5MouseEvent","bl5Tooltip"]],template:function(t,e){if(1&t&&(i.YNc(0,Mu,7,12,"ng-template",null,0,i.W1O),i.YNc(2,Eu,1,1,"ng-template",1)),2&t){const r=i.MAs(1);i.xp6(2),i.Q6J("ngIf",e.displayExternalVideo)("ngIfElse",r)}},dependencies:[g.mk,g.O5,g.PC,N,z,R,Ou],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"],changeDetection:0}),n})();var te=(()=>{return(n=te||(te={}))[n.None=0]="None",n[n.Single=1]="Single",n[n.Multiple=2]="Multiple",te;var n})();let Ni=(()=>{class n extends Te{autoEnter(t,[e,r]){const o=t.DataValue.ValueAsString,a=t.ValueType.MaxLength;let l=!1;return String.hasValue(o)&&((a??0)>0&&(l=o.length===a),!l&&(e??0)>0&&(l=o.split(r).length===e)),l}}return n.\u0275fac=function(){let s;return function(e){return(s||(s=i.n5z(n)))(e||n)}}(),n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),bn=(()=>{class n extends bt{constructor(t,e,r,o){super(t,e,r),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.LOCATION_SEPARATOR=";"}get provider(){return this.dataObject.Provider}get selectionMode(){return this.dataObject.SelectionMode}get mapStyle(){return this.dataObject.Style}get initialLocation(){return this.fieldInfo?.DataValue.ValueAsString??this.dataObject?.InitialLocation??"0,0"}get zoomLevel(){return this.dataObject.ZoomLevel}get minZoomLevel(){return this.dataObject.MinZoomLevel}get maxZoomLevel(){return this.dataObject.MaxZoomLevel}get maxLocations(){return this.dataObject.MaxLocations??1}get isLocationCountBelowThreshold(){return 0===this.maxLocations||this.selectedLocations.length<this.maxLocations}get allowAddLocations(){return this.dataObject.AllowAddLocations}get shapeFiles(){return this.dataObject.ShapeFiles}get mapsPath(){return this.dataObject.MapsPath}get mobilePackage(){return this.dataObject.MobilePackage}get apiKey(){return this.dataObject.ApiKey}get hasMarkerImages(){return!String.isNullOrEmpty(this.unselectedImageName)&&!String.isNullOrEmpty(this.selectedImageName)}get selectedImageName(){return this.dataObject.SelectedImage}get selectedImageUrl(){return this.sp.mediaService.getMediaUrlForImage(this.dataObject.SelectedImage)}get unselectedImageName(){return this.dataObject.UnselectedImage}get unselectedImageUrl(){return this.sp.mediaService.getMediaUrlForImage(this.dataObject.UnselectedImage)}get selectedLocations(){const t=this.fieldInfo;if(t){const e=this.converter.getNormalAnswerAsString(t);return String.isNullOrEmpty(e)?[]:e.split(this.LOCATION_SEPARATOR)}return[]}set selectedLocations(t){const e=this.fieldInfo;if(e){const r=t.isEmpty()?"":t.join(this.LOCATION_SEPARATOR);this.converter.convertFromString(r,e),this.fieldInfo=e,this.sp.navigationService.setInsertMode(),this.executeActions(this.dataObject.OnValueChanged),this.applyAutoEnter(this.dataObject.AutoEnter,this.converter,e,[this.maxLocations,";"])}}get selectedUserLocations(){const t=this.markers.map(e=>e.Location);return this.selectedLocations.filter(e=>-1===t.indexOf(e))}get markers(){return this.dataObject.Markers}onZoomLevelChanged(){this.activateField(),this.executeActions(this.dataObject.OnZoomLevelChanged,this.fieldInfo)}onMapsClick(t){this.activateField();let e=!1;return t&&this.allowAddLocations&&(this.selectionMode===te.Single?(this.selectedLocations=[t],e=!0):this.selectionMode===te.Multiple&&this.isLocationCountBelowThreshold&&(this.selectedLocations=[...this.selectedLocations,t],e=!0)),e}onMarkerClick(t){if(this.activateField(),!t||this.selectionMode===te.None)return!1;const e=this.markers.find(r=>r.Location===t);return e?this.onStaticMarkerClick(e):this.onUserLocationClick(t)}onStaticMarkerClick(t){let e=!1;return this.selectionMode===te.Single?t.Selected?(t.Selected=!1,this.selectedLocations=[],e=!0):(this.markers.forEach(r=>r.Selected=r.Location===t.Location),this.selectedLocations=[t.Location],e=!0):this.selectionMode===te.Multiple&&(t.Selected?(t.Selected=!1,e=this.spliceLocation(t.Location)):this.isLocationCountBelowThreshold&&(t.Selected=!0,this.selectedLocations=[...this.selectedLocations,t.Location],e=!0)),e}onUserLocationClick(t){return this.selectionMode!==te.None&&this.spliceLocation(t)}toLatLng(t){if(-1!==t?.indexOf(",")){const e=t.split(",");return{lat:parseFloat(e[0]),lng:parseFloat(e[1])}}}isMarkerSelected(t){return t.Selected=this.selectedLocations.includes(t.Location)}spliceLocation(t){let e=!1;const r=this.selectedLocations;if(!r.isEmpty()){const o=r.indexOf(t);-1!==o&&(r.splice(o,1),this.selectedLocations=r,e=!0)}return e}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(E),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Ni))},n.\u0275cmp=i.Xpm({type:n,selectors:[["ng-component"]],features:[i.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2}),n})(),Lu=(()=>{class n extends bn{}return n.\u0275fac=function(){let s;return function(e){return(s||(s=i.n5z(n)))(e||n)}}(),n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-arc-gis-maps"]],features:[i.qOj],decls:0,vars:0,template:function(t,e){},changeDetection:0}),n})();var ui=U(2208),Ri=(()=>{return(n=Ri||(Ri={}))[n.Road=0]="Road",n[n.Aerial=1]="Aerial",n[n.AerialWithLabels=2]="AerialWithLabels",Ri;var n})();const Du=["maps"];function Vu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"ejs-maps",3,4),i.NdJ("onclick",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onBingMapsClick(r))})("markerClick",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onBingMarkerClick(r))})("zoom",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onZoomLevelChanged())}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("layers",t.layers)("centerPosition",t.centerPosition)("zoomSettings",t.zoomSettings)}}ui.oeP.Inject(ui.LGL,ui.JxD,ui.xQz,ui.DeQ);let ju=(()=>{class n extends bn{constructor(t,e,r,o,a){super(t,e,r,o),this.sp=t,this.el=e,this.cd=r,this.converter=o,this.toastr=a,this.ready=!1}ngAfterViewInit(){super.ngAfterViewInit(),this.apiKey?(this.layers=[{type:"Layer",bingMapType:Ri[this.mapStyle],key:this.apiKey,layerType:"Bing",markerSettings:this.getMarkerSettings()}],this.zoomSettings={enable:+this.maxZoomLevel!=+this.minZoomLevel,zoomFactor:this.zoomLevel,minZoom:this.minZoomLevel,maxZoom:this.maxZoomLevel},this.centerPosition=this.toCenterPositionModel(this.initialLocation),this.ready=!0):this.toastr.error("No Api Key found for Maps control.")}onBingMapsClick(t){if(t.latitude&&t.longitude){const e=this.toCoords(t.latitude,t.longitude);this.onMapsClick(e)&&this.refreshMap(t)}}onBingMarkerClick(t){if(t.latitude&&t.longitude){const e=this.toCoords(t.latitude,t.longitude);this.onMarkerClick(e)&&this.refreshMap(t)}}refreshMap(t){this.layers[0].markerSettings=this.getMarkerSettings(),this.maps.layers=this.layers,this.maps.refresh(),t.cancel=!0}toCenterPositionModel(t){const e=this.toLatLng(t);return e?{latitude:e.lat,longitude:e.lng}:{}}toCoords(...t){return t.join(",")}getMarkerSettings(){const t=this.markers.map(e=>({width:20,height:20,shape:this.hasMarkerImages?"Image":"Balloon",imageUrl:this.hasMarkerImages?this.isMarkerSelected(e)?this.selectedImageUrl:this.unselectedImageUrl:void 0,fill:this.hasMarkerImages?void 0:this.isMarkerSelected(e)?"red":"grey",dataSource:[Object.assign({name:e.Description},this.toCenterPositionModel(e.Location))],legendText:"name",tooltipSettings:{visible:!String.isNullOrEmpty(e.Description),valuePath:"name"},animationDuration:0,visible:!0}));return t.push({width:20,height:20,shape:this.hasMarkerImages?"Image":"Balloon",imageUrl:this.hasMarkerImages?this.selectedImageUrl:void 0,fill:this.hasMarkerImages?void 0:"red",dataSource:this.selectedUserLocations.map(e=>this.toCenterPositionModel(e)),animationDuration:0,visible:!0}),t}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Ni),i.Y36(We._W))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-bing-maps"]],viewQuery:function(t,e){if(1&t&&i.Gf(Du,5),2&t){let r;i.iGM(r=i.CRH())&&(e.maps=r.first)}},features:[i.qOj],decls:4,vars:6,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip"],["autoWidthElement","","autoHeightElement",""],[3,"ngIf"],["id","rn-container",3,"layers","centerPosition","zoomSettings","onclick","markerClick","zoom"],["maps",""]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i.YNc(3,Vu,2,3,"ng-template",2),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip),i.uIk("id",e.controlId),i.xp6(3),i.Q6J("ngIf",e.ready))},dependencies:[g.mk,g.O5,g.PC,zi.Eqy,N,z],changeDetection:0}),n})();var Nu=U(9646);function Ru(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"map-marker",5),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.onGoogleMarkerClick(o))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("options",e.getMarkerOptions(t))}}function Bu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"map-marker",5),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw(2);return i.KtG(a.onGoogleUserLocationClick(o))}),i.qZA()}if(2&n){const t=s.$implicit,e=i.oxw(2);i.Q6J("options",e.getBaseMarkerOptions(t))}}const zu=function(){return{width:"100%",minWidth:"300px",height:"100%",minHeight:"300px"}};function Gu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"google-map",3),i.NdJ("mapClick",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.onGoogleMapsClick(r))})("zoomChanged",function(){i.CHM(t);const r=i.oxw();return i.KtG(r.onZoomLevelChanged())}),i.YNc(1,Ru,1,1,"ng-template",4),i.YNc(2,Bu,1,1,"ng-template",4),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",i.DdM(4,zu))("options",t.mapOptions),i.xp6(1),i.Q6J("ngForOf",t.markers),i.xp6(1),i.Q6J("ngForOf",t.selectedUserLocations)}}let Hu=(()=>{class n extends bn{constructor(t,e,r,o,a,l){super(e,r,o,a),this.httpClient=t,this.sp=e,this.el=r,this.cd=o,this.converter=a,this.toastr=l}get markerOptions(){return{clickable:!0,cursor:"pointer",draggable:!1,visible:!0}}get mapOptions(){return{center:this.toLatLngLiteral(this.initialLocation),maxZoom:this.maxZoomLevel,minZoom:this.minZoomLevel,zoom:this.zoomLevel}}ngOnInit(){super.ngOnInit(),this.apiKey?this.apiLoaded=this.httpClient.jsonp(`https://maps.googleapis.com/maps/api/js?key=${this.apiKey}`,"callback").pipe((0,Xi.U)(()=>!0),(0,fe.K)(t=>(console.error("[MapsComponent]: "+t),(0,Nu.of)(!1)))):this.toastr.error("No Api Key found for Maps control.")}onGoogleMapsClick(t){t.latLng&&this.onMapsClick(this.toCoords(t.latLng))}onGoogleMarkerClick(t){this.onStaticMarkerClick(t)}onGoogleUserLocationClick(t){this.onUserLocationClick(t)}getBaseMarkerOptions(t){const e=this.toLatLngLiteral(t);return Object.assign({},this.markerOptions,{position:e,visible:null!=e})}getMarkerOptions({Location:t,Description:e,Selected:r}){const o=this.getMarkerIcon(r);return Object.assign({},this.getBaseMarkerOptions(t),{label:e,icon:o})}getMarkerIcon(t=!1){return t?this.selectedImageUrl:this.unselectedImageUrl}toLatLngLiteral(t){return this.toLatLng(t)}toCoords(t){return`${t.lat},${t.lng}`}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(Nt.eN),i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Ni),i.Y36(We._W))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-google-maps"]],features:[i.qOj],decls:5,vars:9,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5MouseEvent","bl5Tooltip"],["autoWidthElement","","autoHeightElement",""],[3,"ngIf"],[3,"ngStyle","options","mapClick","zoomChanged"],["ngFor","",3,"ngForOf"],[3,"options","click"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0,1),i.YNc(3,Gu,3,5,"ng-template",2),i.ALo(4,"async"),i.qZA()),2&t&&(i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5MouseEvent",e.dataObject)("bl5Tooltip",e.dataObject.Tooltip),i.uIk("id",e.controlId),i.xp6(3),i.Q6J("ngIf",i.lcZ(4,7,e.apiLoaded)))},dependencies:[g.mk,g.sg,g.O5,g.PC,hi.b6,hi.O_,N,z,R,g.Ov],changeDetection:0}),n})();function Uu(n,s){1&n&&i.GkF(0)}function Wu(n,s){if(1&n&&i.GkF(0,5),2&n){const t=i.oxw().component;i.Q6J("childType",t.type)("dataObject",t.dataObject)("parentId",t.parentId)}}function Yu(n,s){1&n&&i.YNc(0,Wu,1,3,"ng-template",4),2&n&&i.Q6J("ngIf",s.component)}function Ku(n,s){1&n&&i.GkF(0)}const Qu=function(n){return{component:n}};function Ju(n,s){if(1&n&&i.YNc(0,Ku,1,0,"ng-container",1),2&n){const t=i.oxw().$implicit;i.oxw(2);const e=i.MAs(3);i.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",i.VKq(2,Qu,t.Child))}}function Zu(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"div",7),i.NdJ("mouseover",function(r){const a=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.handleMouseOver(r,a))})("mouseout",function(){i.CHM(t);const r=i.oxw(2);return i.KtG(r.handleMouseOut())}),i.YNc(1,Ju,1,4,"ng-template",4),i.qZA()}if(2&n){const t=s.$implicit;i.Udp("background",t.Background.background)("background-image",t.Background.backgroundImage)("background-position",t.Background.backgroundPosition)("background-repeat",t.Background.backgroundRepeat)("background-size",t.Background.backgroundSize)("border-color",t.BorderColor)("border-top-width",t.BorderWidthTop)("border-right-width",t.BorderWidthRight)("grid-column-start",t.ColIndex+1)("grid-column-end",t.ColIndex+1+t.ColSpan)("grid-row-start",t.RowIndex)("grid-row-end",t.RowIndex+t.RowSpan),i.ekj("odd",t.RowIndex%2!=0)("even",t.RowIndex%2==0)("hidden",!t.Draw()),i.Q6J("ngClass",t.Child?"cell":"empty-row"),i.xp6(1),i.Q6J("ngIf",t.Child)}}function qu(n,s){1&n&&i.YNc(0,Zu,2,32,"ng-template",6),2&n&&i.Q6J("ngForOf",s.cells)}const $u=function(n){return{cells:n}};let Xu=(()=>{class n extends et{constructor(t,e,r,o){super(e,r,o),this.modelService=t,this.sp=e,this.el=r,this.cd=o,this.isTooltipDisabled=a=>this.sp.userAgentService.isMobile||null==a||null==a.Text||null==a.Font&&String.isNullOrEmpty(a.FontName),this.handleMouseOver=(a,l)=>{const c=this.dataObject.Children.at(l.RowIndex-1);c&&!this.isTooltipDisabled(c.Tooltip)&&(a.preventDefault(),a.stopPropagation(),this.sp.tooltipService.showTooltip(c.Tooltip,a.target))},this.handleMouseOut=()=>{this.sp.tooltipService.hideTooltip()}}handleControlUpdate(t){super.handleControlUpdate(t),this.initialize(),this.elementTemplateColumns=this.tableLayout.Columns.join(" "),this.elementTemplateRows=this.tableLayout.Rows.join(" ")}initialize(){this.tableLayout={Cells:[],Columns:[],Rows:[]},this.oddRowColor=this.sp.colorService.generateRGBAColor(this.dataObject.OddRowColor),this.evenRowColor=this.sp.colorService.generateRGBAColor(this.dataObject.EvenRowColor),this.gridLines=this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLines),this.gridLineColor=this.sp.colorService.generateRGBAColor(this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineColor)),this.gridLineWidth=`${this.sp.stylablePropertyService.getValueForStylableProperty(this.dataObject,_.GridLineWidth)}px`,this.initializeTableLayout()}initializeTableLayout(){this.initializeColumns();let t=!0,e=!1;this.dataObject.Children.forEach((r,o)=>{const a=o+1;e||(t=!t),e=r.CombineStriping;const c=this.determineBackground(r,t);this.initializeRow(r.RowHeight),this.initializeCells(r.Children,a,c,()=>r.Visibility===K.Visible)}),this.gridLines!=Z.None&&this.addGridLines()}initializeColumns(){this.dataObject.Columns.forEach(t=>{switch(t.UnitType){case k.Auto:this.tableLayout.Columns.push("min-content");break;case k.Pixels:this.tableLayout.Columns.push(`${t.Value}px`);break;case k.Percentage:this.tableLayout.Columns.push(`${t.Value}%`);break;case k.Star:this.tableLayout.Columns.push(`${t.Value}fr`)}})}determineBackground(t,e){let r={background:"transparent"};const o=this.sp.stylablePropertyService.getValueForStylableProperty(t,A.Background),a=this.sp.styleGeneratorService.generateBackgroundStyle(o);switch(o.BrushType){case Xt.SolidColor:this.sp.colorService.hasColor(o.SolidColor)?r=Object.assign(r,a):r.background=e?this.evenRowColor:this.oddRowColor;break;case Xt.Image:r=Object.assign(r,a);break;case Xt.LinearGradient:r=Object.assign(r,a),r.backgroundImage=r.background,r.background="transparent"}return r}initializeRow(t){switch(t.UnitType){case k.Auto:this.tableLayout.Rows.push("min-content");break;case k.Pixels:this.tableLayout.Rows.push(`${t.Value}px`);break;case k.Percentage:this.tableLayout.Rows.push(`${t.Value}%`);break;case k.Star:this.tableLayout.Rows.push(`${t.Value}fr`)}}initializeCells(t,e,r,o){t.isEmpty()?this.initializeEmptyCells(e,r,o):this.dataObject.Columns.forEach((a,l)=>{const c=t.find(d=>d.ColumnIndex===l);if(c){let d,u;switch(this.sp.stylablePropertyService.getValueForStylableProperty(c,A.VerticalAlignment)){case mt.Top:d="stretch";break;case mt.Middle:d="center";break;case mt.Bottom:d="end"}switch(this.sp.stylablePropertyService.getValueForStylableProperty(c,A.HorizontalAlignment)){case X.Left:u="stretch";break;case X.Center:u="center";break;case X.Right:u="end"}const h=c.ColumnIndex;c.ColumnIndex=0,c.RowIndex=0,this.tableLayout.Cells.push({ColIndex:h,RowIndex:e,ColSpan:c.ColSpan,RowSpan:c.RowSpan,Child:this.modelService.createChild(c,this.dataObject.ID),Background:r,HorizontalAlignment:u,VerticalAlignment:d,Draw:o})}else-1===t.findIndex(u=>u.ColumnIndex<l&&u.ColumnIndex+u.ColSpan>=l)&&this.tableLayout.Cells.push({ColIndex:l,RowIndex:e,ColSpan:1,RowSpan:1,Background:r,Draw:o})})}initializeEmptyCells(t,e,r){this.dataObject.Columns.forEach((o,a)=>{this.tableLayout.Cells.push({ColIndex:a,RowIndex:t,ColSpan:1,RowSpan:1,Draw:r,Background:e})})}addGridLines(){const t=this.gridLineColor,e=this.gridLineWidth,r=0!=(1&this.gridLines),o=0!=(2&this.gridLines);this.tableLayout.Cells.forEach(a=>{a.BorderColor=t;const u=o&&!(a.ColIndex===this.tableLayout.Columns.length-1);a.BorderWidthTop=`${r&&1!==a.RowIndex?e:"0"}`,a.BorderWidthRight=`${u?e:"0"}`})}}return n.\u0275fac=function(t){return new(t||n)(i.Y36((0,i.Gpc)(()=>me)),i.Y36((0,i.Gpc)(()=>E)),i.Y36(i.SBq),i.Y36(i.sBO))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-css-table"]],hostVars:4,hostBindings:function(t,e){2&t&&i.Udp("--odd-row-color",e.oddRowColor)("--even-row-color",e.evenRowColor)},features:[i.qOj],decls:6,vars:10,consts:[[3,"ngClass","ngStyle","bl5Aria","bl5Tooltip","bl5MouseEvent"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["component",""],["cells",""],[3,"ngIf"],["bl5Component","",3,"childType","dataObject","parentId"],["ngFor","",3,"ngForOf"],[3,"ngClass","mouseover","mouseout"]],template:function(t,e){if(1&t&&(i.TgZ(0,"div",0),i.YNc(1,Uu,1,0,"ng-container",1),i.qZA(),i.YNc(2,Yu,1,1,"ng-template",null,2,i.W1O),i.YNc(4,qu,1,1,"ng-template",null,3,i.W1O)),2&t){const r=i.MAs(5);i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("bl5Aria",e.ariaObject)("bl5Tooltip",e.dataObject.Tooltip)("bl5MouseEvent",e.dataObject),i.uIk("id",e.controlId),i.xp6(1),i.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",i.VKq(8,$u,e.tableLayout.Cells))}},dependencies:[g.mk,g.sg,g.O5,g.tP,g.PC,N,z,we,R],styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}[_nghost-%COMP%]{--odd-row-color: transparent;--even-row-color: transparent}.empty-row[_ngcontent-%COMP%], .cell[_ngcontent-%COMP%]{display:grid;border-style:solid}"],changeDetection:0}),n})();var He=(()=>{return(n=He||(He={}))[n.Bing=0]="Bing",n[n.GoogleMaps=1]="GoogleMaps",n[n.ArcGis=2]="ArcGis",He;var n})();let me=(()=>{class n{constructor(){this.defaultStr="default",this.componentTypes={},this.mapsComponentTypes={},this.setComponentTypes()}createChild(t,e,r=t?.Kind){const o=this.useGetMapType(r)?()=>this.getMapType(t.Provider):()=>this.getType(r);return{dataObject:t,type:o(),style:{},cssClass:[],parentId:e,controlId:t.ID,isEnabled:!1,isVisible:!1,getPosition:()=>null,getNeighbours:()=>[],getVersion:()=>NaN,sizeTreeSetWidth:()=>{},sizeTreeSetHeight:()=>{},sizeTreeReady:()=>{}}}addComponentType(t,e,r=!1){(!r||!this.componentTypes[t])&&(this.componentTypes[t]=e)}setComponentTypes(){this.componentTypes[this.defaultStr]=null,this.componentTypes[v.Grid]=qa,this.componentTypes[v.Panel]=Gc,this.componentTypes[v.ClassificationControl]=Ro,this.componentTypes[v.DateControl]=ps,this.componentTypes[v.DropDownList]=ua,this.componentTypes[v.NumberTextBox]=bc,this.componentTypes[v.StringTextBox]=Ld,this.componentTypes[v.TimeControl]=Cu,this.componentTypes[v.CategoryCheckBox]=Oo,this.componentTypes[v.CategoryRadioButton]=To,this.componentTypes[v.SpecialAnswerCheckBox]=cd,this.componentTypes[v.SpecialAnswerRadioButton]=dd,this.componentTypes[v.Response]=td,this.componentTypes[v.Text]=cu,this.componentTypes[v.Button]=wo,this.componentTypes[v.ImageControl]=ul,this.componentTypes[v.LanguageSelector]=Pl,this.componentTypes[v.HyperLink]=sl,this.componentTypes[v.Ellipse]=ha,this.componentTypes[v.Line]=El,this.componentTypes[v.Rectangle]=Xc,this.componentTypes[v.ErrorText]=ba,this.componentTypes[v.CategoryButton]=ko,this.componentTypes[v.SpecialAnswerButton]=ld,this.componentTypes[v.SetTextBox]=id,this.componentTypes[v.SuppressButton]=jd,this.componentTypes[v.EnumerationTextBox]=pa,this.componentTypes[v.NumberSlider]=mc,this.componentTypes[v.LookupTextBox]=Gl,this.componentTypes[v.LanguageButton]=Al,this.componentTypes[v.ParallelButton]=Yc,this.componentTypes[v.IndexItemButton]=fl,this.componentTypes[v.GroupErrorText]=$a,this.componentTypes[v.PageErrorText]=yc,this.componentTypes[v.GroupSuppressButton]=rl,this.componentTypes[v.PageSuppressButton]=_c,this.componentTypes[v.AudioControl]=Co,this.componentTypes[v.VideoControl]=Fu,this.componentTypes[v.TableControl]=eu,this.componentTypes[v.TableRowControl]=su,this.componentTypes[v.InvolvedFieldsControl]=yl,this.componentTypes[v.GroupInvolvedFieldsControl]=el,this.componentTypes[v.PageInvolvedFieldsControl]=Ac,this.componentTypes[v.Timer]=Su,this.componentTypes[v.DataGrid]=Ls,this.componentTypes[v.DataGridNavigator]=Ks,this.componentTypes[v.DataGridSearchBox]=qs,this.componentTypes[v.DataGridKeySelector]=zs,this.componentTypes[v.DataGridSearchButton]=Zs,this.componentTypes[v.RecordErrorsListBox]=$c,this.componentTypes[v.RecordErrorsInvolvedFieldsControl]=Jc,this.componentTypes[v.Menu]=Jl,this.componentTypes[v.UploadControl]=ku,this.componentTypes[v.TextBox]=au,this.componentTypes[v.SkiplinksContainer]=od,this.componentTypes[v.StringDropDownList]=Pd,this.componentTypes[v.MapsControl]=null,this.mapsComponentTypes[this.defaultStr]=null,this.mapsComponentTypes[He.ArcGis]=Lu,this.mapsComponentTypes[He.Bing]=ju,this.mapsComponentTypes[He.GoogleMaps]=Hu,this.componentTypes.CssTableControl=Xu}getType(t=this.defaultStr){return this.componentTypes[t]??null}useGetMapType(t){return t===v.MapsControl&&null==this.componentTypes[t]}getMapType(t=this.defaultStr){return this.mapsComponentTypes[t]??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();const th=["bl5-menu-item",""];function eh(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"ul",5),i.NdJ("itemClicked",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.handleItemClick(r))}),i.qZA()}if(2&n){const t=i.oxw();i.Q6J("ngStyle",t.submenuBackground)("level",t.level+1)("enabled",t.isEnabled)("menuItems",t.children)("parentId",t.menuItemId)("submenuBackground",t.submenuBackground)("aetSubject",t.aetSubject)}}let ih=(()=>{class n{constructor(t){this.subscriptionService=t,this.itemChanged=new i.vpe,this.itemClicked=new i.vpe}get isEnabled(){return this.menuItem?.Enabled}get isDisabled(){return!this.isEnabled}get isVisible(){return this.menuItem?.Visibility===K.Visible}get isHidden(){return this.menuItem?.Visibility===K.Hidden}get isCollapsed(){return!this.menuItem||this.menuItem.Visibility===K.Collapsed}get hasChildren(){return!Array.isNullOrEmpty(this.menuItem?.MenuItems)}get children(){return this.hasChildren?this.menuItem.MenuItems:[]}get text(){return this.menuItem?.Text}get shortcut(){return this.menuItem?.Shortcut}get tabindex(){return this.isEnabled?1:-1}ngOnInit(){if(!this.menuItemSubscription&&this.menuItemId){const t=this.subscriptionService.getMenuItemSubjectById(this.menuItemId);t&&(this.menuItemSubscription=t.subscribe({next:e=>{this.menuItem=e,this.itemChanged.emit(e)}}))}}ngOnDestroy(){this.menuItemSubscription&&this.menuItemSubscription.unsubscribe()}handleItemClick(t){this.itemClicked.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(pt))},n.\u0275cmp=i.Xpm({type:n,selectors:[["li","bl5-menu-item",""]],hostVars:11,hostBindings:function(t,e){2&t&&(i.uIk("id",e.menuItemId),i.ekj("enabled",e.isEnabled)("disabled",e.isDisabled)("visibility-hidden",e.isHidden)("hidden",e.isCollapsed)("menu-parent",e.hasChildren))},inputs:{aetSubject:"aetSubject",menuItemId:"menuItemId",level:"level",submenuBackground:"submenuBackground"},outputs:{itemChanged:"itemChanged",itemClicked:"itemClicked"},attrs:th,decls:5,vars:5,consts:[[1,"menu-item-link"],[1,"text",3,"innerText"],[1,"shortcut",3,"innerText"],[1,"arrow"],[3,"ngIf"],["bl5-menu-list","",1,"menu-list","submenu",3,"ngStyle","level","enabled","menuItems","parentId","submenuBackground","aetSubject","itemClicked"]],template:function(t,e){1&t&&(i.TgZ(0,"a",0),i._UZ(1,"span",1)(2,"span",2)(3,"span",3),i.qZA(),i.YNc(4,eh,1,7,"ng-template",4)),2&t&&(i.uIk("tabindex",e.tabindex)("disabled",e.isDisabled?"disabled":void 0),i.xp6(1),i.Q6J("innerText",e.text),i.xp6(1),i.Q6J("innerText",e.shortcut),i.xp6(2),i.Q6J("ngIf",e.hasChildren&&e.isEnabled))},dependencies:[g.O5,g.PC,fn],changeDetection:0}),n})();function nh(n,s){if(1&n){const t=i.EpF();i.TgZ(0,"a",1),i.NdJ("click",function(r){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.onClick(r,a))}),i.ALo(1,"safeHtml"),i.qZA()}if(2&n){const t=s.$implicit;i.ekj("error",t.isError),i.Q6J("innerHTML",i.lcZ(1,5,t.description),i.oJD),i.uIk("id","sl_"+t.id)("title",t.description)}}let rh=(()=>{class n{constructor(t,e){this.subscriptionService=t,this.renderStateService=e,this.skipLinks=[]}ngOnInit(){this.subscription=this.subscriptionService.skipLinksSubject.subscribe({next:()=>this.skipLinks=this.subscriptionService.skipLinksArray})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onClick(t,e){if([v.ErrorText,v.GroupInvolvedFieldsControl,v.PageInvolvedFieldsControl].indexOf(e.kind)>-1)e.fieldName&&this.renderStateService.setActiveFieldName(e.fieldName,void 0,"component");else{const r=document.getElementById(e.name);r&&(r.scrollIntoView(!0),r.focus())}t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(pt),i.Y36(ut))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-skiplinks"]],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["href","#","tabindex","1",1,"skipLink",3,"innerHTML","click"]],template:function(t,e){1&t&&i.YNc(0,nh,2,7,"ng-template",0),2&t&&i.Q6J("ngForOf",e.skipLinks)},dependencies:[g.sg,ft],styles:[".skipLink[_ngcontent-%COMP%]{display:block;left:-1000em;position:absolute}.skipLink[_ngcontent-%COMP%]:focus, .skipLink[_ngcontent-%COMP%]:active{top:1em;left:1em;z-index:1000;color:#1e6891}.skipLink.error[_ngcontent-%COMP%]{border:2px solid #12405C;font-size:1.3em;padding:.8em;z-index:10;background-color:#900000;border:2px solid #FFFFFF}.skipLink.error[_ngcontent-%COMP%]:focus, .skipLink.error[_ngcontent-%COMP%]:active{color:#fff}"]}),n})();var oh=U(2722);function sh(n,s){if(1&n&&(i.TgZ(0,"div",1),i._UZ(1,"img",2),i.qZA()),2&n){const t=i.oxw();i.Q6J("ngClass",t.showSplash?"splash splash-active":"splash"),i.xp6(1),i.uIk("src",t.src,i.LSH)}}let ah=(()=>{class n{constructor(t,e,r){this.eventService=t,this.renderStateService=e,this.subscriptionService=r,this.showSplash=O.SHOW_SPLASH,this.optimizeNoStylesheets=!1,this.show=()=>{this.showSplash=!0},this.hide=()=>{this.showSplash=!1}}ngOnInit(){this.src="data:image/gif;base64,R0lGODlhgwAXAPIGANXh68HT4HSYsp24zK7F1t/p8P///wAAACH5BAUAAAYAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAgwAXAAADzGi63P4wykmrvTjrzbv/YCiOZGmeaKGuy8oqrtrGs1u/RlzcMkz7NiBOx9sJew7i0Zj7NYPPoVMZRVKv0yyU2sButdKvOEy2gs1jNK57ZnrL7nZxvqRX42kmO29/q/94cH1ydYVJhHeDfIZ+gYCKgg+NkI+MiJOWi4mSl52amJuhoKB7kaKepqOolaGlrKqfq46zlLScsbipsrW8hq62p7mvu5m6UL+9wcbLw8LAyMXNzMCw03bQytLa1MTZzyjg4eLj5OXm5+jp6usmCQAh+QQEAAAAACwEAAQABgAPAAADCSi63P4wyklpAgAh+QQFAAAGACwEAAQADwAPAAADKDi61vJwMQefVM1Ue/MW1+Bt4ViV1Nml0aqR7oe+qmS2NsvlND71jwQAIfkEBQAABgAsBAAEABgADwAAA0ZIutbzsBlB62IOPlntJZK2NR31gZnGlWcorl2bRiT7uWod3/M42Rcc7bcL9gYwj9EgQuqUGObraeJJc0SoQugrCWTXoTcBACH5BAUAAAYALAQABAAhAA8AAANjGLrW9LCZQasUOC/m4JOV1WTaFkje14TURQrm2Xkg65IxmtbhXW462so2euVmkWGviDMFkxOi4QVzIlXR5dRoNaQIPNG2CbyClWLq0btDt5g/DluYTXPLcyhr4MOsv2FvYxkJACH5BAUAAAYALAQABAAqAA8AAAOECLrW8bAZQqscOEvB+2IO9EiV1WRa03kfIIljU1IXOmyr0LqhSM41FG61e8F+pWDKkNO1jD4Z8GQbsj7QiDRJFapyxZ52MjXYbl/iUxwjc83V9BVkgAWQJriXCV7Xj1t5Z1YcYX9RboJxfGpYbHeBNF1LTYZ2eJJ6lH2Oh2MzBEoYhAIJACH5BAUAAAYALAQABAAzAA8AAAOmWLrW8LCZQKskOMvBuxRguDAO9EiV1WRa03lNKI6FZJ5NSl0ssb2Dj0xAq5VMKB2P9XsJZUXbLZlatgzAYGwYPUZyylWvCTMMiTQpElwVM13A52yk/k7Chp4P7txC0144d215Y3xlZ10GNwBUKoVvWHF+cySLU2yPemQcciCKjI47bldZnmh0gY2Zo5Clk2ZcgJdrg5qGkn2xf6m0djoBVhicWrshCQAh+QQFAAAGACwNAAQAMwAPAAADpli61vCwmUCrJDjLwbsUYLgwDvRIldVkWtN5TSiOhWSeTUpdLLG9g49MQKuVTCgdj/V7CWVF2y2ZWrYMwGBsGD1GcspVrwkzDIk0KRJcFTNdwOdspP5OwoaeD+7cQtNeOHdteWN8ZWddBjcAVCqFb1hxfnMki1Nsj3pkHHIgioyOO25XWZ5odIGNmaOQpZNmXICXa4OahpJ9sX+ptHY6AVYYnFq7IQkAIfkEBQAABgAsFgAEADMADwAAA6ZYutbwsJlAqyQ4y8G7FGC4MA70SJXVZFrTeU0ojoVknk1KXSyxvYOPTECrlUwoHY/1ewllRdstmVq2DMBgbBg9RnLKVa8JMwyJNCkSXBUzXcDnbKT+TsKGng/u3ELTXjh3bXljfGVnXQY3AFQqhW9YcX5zJItTbI96ZBxyIIqMjjtuV1meaHSBjZmjkKWTZlyAl2uDmoaSfbF/qbR2OgFWGJxauyEJACH5BAUAAAYALB8ABAAzAA8AAAOmWLrW8LCZQKskOMvBuxRguDAO9EiV1WRa03lNKI6FZJ5NSl0ssb2Dj0xAq5VMKB2P9XsJZUXbLZlatgzAYGwYPUZyylWvCTMMiTQpElwVM13A52yk/k7Chp4P7txC0144d215Y3xlZ10GNwBUKoVvWHF+cySLU2yPemQcciCKjI47bldZnmh0gY2Zo5Clk2ZcgJdrg5qGkn2xf6m0djoBVhicWrshCQAh+QQFAAAGACwoAAQAMwAPAAADpli61vCwmUCrJDjLwbsUYLgwDvRIldVkWtN5TSiOhWSeTUpdLLG9g49MQKuVTCgdj/V7CWVF2y2ZWrYMwGBsGD1GcspVrwkzDIk0KRJcFTNdwOdspP5OwoaeD+7cQtNeOHdteWN8ZWddBjcAVCqFb1hxfnMki1Nsj3pkHHIgioyOO25XWZ5odIGNmaOQpZNmXICXa4OahpJ9sX+ptHY6AVYYnFq7IQkAIfkEBQAABgAsMQAEADMADwAAA6ZYutbwsJlAqyQ4y8G7FGC4MA70SJXVZFrTeU0ojoVknk1KXSyxvYOPTECrlUwoHY/1ewllRdstmVq2DMBgbBg9RnLKVa8JMwyJNCkSXBUzXcDnbKT+TsKGng/u3ELTXjh3bXljfGVnXQY3AFQqhW9YcX5zJItTbI96ZBxyIIqMjjtuV1meaHSBjZmjkKWTZlyAl2uDmoaSfbF/qbR2OgFWGJxauyEJACH5BAUAAAYALDoABAAzAA8AAAOmWLrW8LCZQKskOMvBuxRguDAO9EiV1WRa03lNKI6FZJ5NSl0ssb2Dj0xAq5VMKB2P9XsJZUXbLZlatgzAYGwYPUZyylWvCTMMiTQpElwVM13A52yk/k7Chp4P7txC0144d215Y3xlZ10GNwBUKoVvWHF+cySLU2yPemQcciCKjI47bldZnmh0gY2Zo5Clk2ZcgJdrg5qGkn2xf6m0djoBVhicWrshCQAh+QQFAAAGACxDAAQAMwAPAAADpli61vCwmUCrJDjLwbsUYLgwDvRIldVkWtN5TSiOhWSeTUpdLLG9g49MQKuVTCgdj/V7CWVF2y2ZWrYMwGBsGD1GcspVrwkzDIk0KRJcFTNdwOdspP5OwoaeD+7cQtNeOHdteWN8ZWddBjcAVCqFb1hxfnMki1Nsj3pkHHIgioyOO25XWZ5odIGNmaOQpZNmXICXa4OahpJ9sX+ptHY6AVYYnFq7IQkAIfkEBQAABgAsTAAEADMADwAAA5JYutbLDcjZTLi4ks3r+OCjVGJRTVSDZQ3XNWAoknOEAtV6aS7hxYMS7XG65XQ81y8mdNQMN5wK2eotZURnFmqcrpIvAzD4bHJRx29VCQOazdE0y9DztZnlZ9w7r18/b3pdFlR0VndYEAZwgzoBYBt/ZFuMaHw7a2FjgVt7hGqGbGJueZ2NhX6IgKWKno6QdqMxCQAh+QQFAAAGACxeAAQAIQAPAAADY1i61vCwmUCrJDgv5uCTldVk2lZI3teE1EUS5tl5IOuSMZrW4V1uOtrKNnrlZpFhr4gzBZMTouEFcyJV0eXUaDWkADzRtgm8gpVi6tG7Q7eYPw5bmE1zy3MoK+DDrL9hb2MZCQAh+QQFAAAGACxnAAQAGAAPAAADRli61vCwmUDrYg4+We0tkrY1HfWBmcaVZyiuXZtGJPu5ah3f8zjZFxzttwv2ADCP0SBC6pQY5utp4klzRKhC6CsFZNehNwEAIfkEBQAABgAscAAEAA8ADwAAAx1Yutb7sBlIi6zRYaa37dvlfdMoemcIYim7Vi38JgA7",this.renderStateSubscription=this.subscriptionService.renderStateSubject.subscribe({next:r=>{r&&(this.optimizeNoStylesheets=this.renderStateService.optimizeNoStylesheets)}});const t=(0,Wi.T)(this.eventService.showSplashEvent),e=(0,Wi.T)(this.eventService.hideSplashEvent,this.eventService.sizeTreeReadyEvent,this.eventService.windowResizedEvent);this.showSplashSubscription=t.subscribe({next:()=>this.setDelayedSplash(e)}),this.hideSplashSubscription=e.subscribe({next:()=>this.hide()})}ngOnDestroy(){this.showSplashSubscription&&this.showSplashSubscription.unsubscribe(),this.hideSplashSubscription&&this.hideSplashSubscription.unsubscribe(),this.renderStateSubscription&&this.renderStateSubscription.unsubscribe()}setDelayedSplash(t){(0,jn.H)(O.SHOW_SPLASH_DELAY).pipe((0,oh.R)(t)).subscribe(()=>this.show())}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(q),i.Y36(ut),i.Y36(pt))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-splash"]],decls:1,vars:1,consts:[[3,"ngIf"],["id","qa_progress_bar","aria-hidden","true","aria-disabled","true","tabindex","-1",3,"ngClass"],["alt","Loading page"]],template:function(t,e){1&t&&i.YNc(0,sh,2,2,"ng-template",0),2&t&&i.Q6J("ngIf",!e.optimizeNoStylesheets)},dependencies:[g.mk,g.O5],styles:[".splash[_ngcontent-%COMP%]{visibility:hidden;background-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;z-index:9999!important}.splash[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{visibility:hidden;opacity:0;position:absolute;top:calc(50% - 11.5px);left:calc(50% - 66px)}.splash-active[_ngcontent-%COMP%]{visibility:visible;background-color:#e7e7e7;transition:background .15s ease}.splash-active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:all 125ms linear}"]}),n})(),lh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-svg"]],decls:14,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg",1,"hidden"],["d","M19 4v12l-8 -6 8 -6zM11 4v12l-8 -6 8 -6zM3 4v12h-2v-12h2z","id","skip-to-first-horizontal"],["d","M1 4v12l8 -6 -8 -6zM9 4v12l8 -6 -8 -6zM17 4v12h2v-12h-2z","id","skip-to-last-horizontal"],["d","M18 4v12l-8 -6 8 -6zM10 4v12l-8 -6 8 -6z","id","previous-page-horizontal"],["d","M2 4v12l8 -6 -8 -6zM10 4v12l8 -6 -8 -6z","id","next-page-horizontal"],["d","M14 4v12l-8 -6 8 -6z","id","previous-record-horizontal"],["d","M6 4v12l8 -6 -8 -6z","id","next-record-horizontal"],["d","M4 19h12l-6 -8 -6 8zM4 11h12l-6 -8 -6 8zM4 3h12v-2h-12v2z","id","skip-to-first-vertical"],["d","M4 1h12l-6 8 -6 -8zM4 9h12l-6 8 -6 -8zM4 17h12v2h-12v-2z","id","skip-to-last-vertical"],["d","M4 18h12l-6 -8 -6 8zM4 10h12l-6 -8 -6 8z","id","previous-page-vertical"],["d","M4 2h12l-6 8 -6 -8zM4 10h12l-6 8 -6 -8z","id","next-page-vertical"],["d","M4 14h12l-6 -8 -6 8z","id","previous-record-vertical"],["d","M4 6h12l-6 8 -6 -8z","id","next-record-vertical"]],template:function(t,e){1&t&&(i.O4$(),i.TgZ(0,"svg",0)(1,"defs"),i._UZ(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4)(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8)(10,"path",9)(11,"path",10)(12,"path",11)(13,"path",12),i.qZA()())},styles:["[_nghost-%COMP%]{--width: auto;--height: auto;--display: grid;--align-self: stretch;--justify-self: stretch;--align-content: stretch;--justify-content: stretch;--vertical-text-alignment: top;--horizontal-text-alignment: left;--columns: 1;--rows: 1;--grid-template-rows: minmax(0, min-content);--grid-template-columns: minmax(0, min-content);--grid-column-start: 1;--grid-column-end: 2;--grid-row-start: 1;--grid-row-end: 2;--background: none;--background-clip: initial;--background-image: none;--background-position: 0% 0%;--background-repeat: repeat;--background-size: initial;--opacity: 1;--border-color: none;--border-radius: 0;--border-top-left-radius: 0;--border-top-right-radius: 0;--border-bottom-left-radius: 0;--border-bottom-right-radius: 0;--border-style: none;--border-width: 0;--margin: 0;--padding: 0;--overflow-x: auto;--overflow-y: auto;--text-align: left;--visibility: visible;--font-color: inherit;--font-family: inherit;--font-size: inherit;--font-style: normal;--font-weight: normal;--font-decoration: none;--watermark-font-color: inherit;--watermark-font-family: inherit;--watermark-font-size: inherit;--watermark-font-style: normal;--watermark-font-weight: normal;--watermark-font-decoration: none;grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end);align-self:var(--align-self);justify-self:var(--justify-self)}.css-vars[_ngcontent-%COMP%]{display:var(--display)!important;height:var(--height)!important;width:var(--width)!important;background:var(--background);background-clip:var(--background-clip);background-image:var(--background-image);background-position:var(--background-position);background-repeat:var(--background-repeat);background-size:var(--background-size);opacity:var(--opacity);border-color:var(--border-color);border-radius:var(--border-radius);border-bottom-left-radius:var(--border-bottom-left-radius);border-bottom-right-radius:var(--border-bottom-right-radius);border-top-left-radius:var(--border-top-left-radius);border-top-right-radius:var(--border-top-right-radius);border-style:var(--border-style);border-width:var(--border-width);margin:var(--margin);padding:var(--padding);text-align:var(--text-align);visibility:var(--visibility)}.css-vars.PanelComponent[_ngcontent-%COMP%], .css-vars.TableComponent[_ngcontent-%COMP%], .css-vars.TableRowComponent[_ngcontent-%COMP%], .css-vars.GridComponent[_ngcontent-%COMP%]{grid-template-columns:var(--grid-template-columns);grid-template-rows:var(--grid-template-rows)}.css-vars.default-line-height[_ngcontent-%COMP%]{line-height:normal}.font-object[_ngcontent-%COMP%]{color:var(--font-color);font-family:var(--font-family);font-size:var(--font-size);font-style:var(--font-style);font-weight:var(--font-weight);-webkit-text-decoration:var(--font-decoration);text-decoration:var(--font-decoration)}.watermark-font[_ngcontent-%COMP%]::placeholder{color:var(--watermark-font-color);font-family:var(--watermark-font-family);font-size:var(--watermark-font-size);font-style:var(--watermark-font-style);font-weight:var(--watermark-font-weight);-webkit-text-decoration:var(--watermark-font-decoration);text-decoration:var(--watermark-font-decoration)}"]}),n})();class ch{constructor(s,t){this.hostDimensions=s,this.targetHeight=t}center(){return this.hostDimensions.top+(this.hostDimensions.height>>1)-(this.targetHeight>>1)}top(){return this.hostDimensions.top}bottom(){return this.hostDimensions.top+this.hostDimensions.height}}class dh{constructor(s,t){this.hostDimensions=s,this.targetWidth=t}center(){return this.hostDimensions.left+this.hostDimensions.width>>1-this.targetWidth>>1}left(){return this.hostDimensions.left}right(){return this.hostDimensions.left+this.hostDimensions.width}}let uh=(()=>{class n{constructor(t,e,r,o){this.element=t,this.colorService=e,this.tooltipService=r,this.richTextConverterService=o,this.animation=!0,this.placement="bottom",this.top=-1e5,this.left=-1e5,this.isIn=!1,this.isFade=!1,this.content="",this.cssClass=["tooltip"],this.tooltipService.handleTooltip.subscribe({next:a=>this.handleEvent(a)})}handleEvent(t){t.visible?this.show(t.tooltip,t.hostElement):this.hide()}show(t,e=null){if(null==t||null==e)return;const r=this.positionElements(e,this.element.nativeElement.children[0],this.placement);this.top=r.top,this.left=r.left,this.isIn=!0,this.cssClass.push(t.FontName||"initial"),t.Text&&(this.content=this.richTextConverterService.convertToHTML(t.Text,!0)),this.animation&&(this.isFade=!0),t.Font&&(this.style={},t.Font.Color&&(this.style.color=this.colorService.generateRGBAColor(t.Font.Color)),t.Font.Family&&(this.style.fontFamily=t.Font.Family),t.Font.Size&&(this.style.fontSize=`${t.Font.Size}px`),t.Font.Bold&&(this.style.fontWeight="bold"),t.Font.Italic&&(this.style.fontStyle="italic"),t.Font.Underline&&(this.style.textDecoration="underline"))}hide(){this.top=-1e5,this.left=-1e5,this.isIn=!0,this.cssClass=["tooltip"],this.style={},this.animation&&(this.isFade=!1)}positionElements(t,e,r,o=!1){const a=r.split("-"),l=a[0],c=a[1]||"left",d=o?this.offset(t):this.position(t),u=e.offsetWidth,h=e.offsetHeight,m=new dh(d,u),f=new ch(d,h);let w;switch(l){case"right":w={top:f[c](),left:m[l]()};break;case"left":w={top:f[c](),left:d.left-u};break;case"bottom":w={top:f[l](),left:m[c]()};break;default:w={top:d.top-h,left:m[c]()}}return w}position(t){let e={top:0,left:0};const r=this.offset(t),o=this.parentOffsetEl();o!==window.document&&(e=this.offset(o),e.top+=o.clientTop-o.scrollTop,e.left+=o.clientLeft-o.scrollLeft);const a=t.getBoundingClientRect();return{width:a.width||t.offsetWidth,height:a.height||t.offsetHeight,top:r.top-e.top,left:r.left-e.left}}offset(t){const e=t.getBoundingClientRect();return{width:e.width||t.offsetWidth,height:e.height||t.offsetHeight,top:e.top+(window.pageYOffset||window.document.documentElement.scrollTop),left:e.left+(window.pageXOffset||window.document.documentElement.scrollLeft)}}getStyle(t,e){let o;return o=t.currentStyle?t.currentStyle:window.getComputedStyle?window.getComputedStyle(t):t.style,o[e]}parentOffsetEl(){let t=window.document;for(;t&&t!==window.document&&this.isStaticPositioned(t);)t=t.offsetParent;return t||window.document}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(qt),i.Y36(Fi),i.Y36(sn))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-tooltip"]],decls:2,vars:13,consts:[["role","tooltip","aria-hidden","true","aria-disabled","true",3,"ngClass","ngStyle","innerHTML"]],template:function(t,e){1&t&&(i._UZ(0,"div",0),i.ALo(1,"safeHtml")),2&t&&(i.Udp("top",e.top+"px")("left",e.left+"px"),i.ekj("in",e.isIn)("fade",e.isFade),i.Q6J("ngClass",e.cssClass)("ngStyle",e.style)("innerHTML",i.lcZ(1,11,e.content),i.oJD))},dependencies:[g.mk,g.PC,ft],styles:['div.tooltip[_ngcontent-%COMP%]{position:absolute;margin-top:2px;padding:8px;border:1px solid lightgrey;border-radius:4px;background-color:#fff;-webkit-box-shadow:none;-moz-box-shadow:none;-o-box-shadow:none;-ms-box-shadow:none}div.tooltip[_ngcontent-%COMP%] > div.text-container[_ngcontent-%COMP%]{width:100%;height:100%}div.tooltip[_ngcontent-%COMP%]:before, div.tooltip[_ngcontent-%COMP%]:after{content:"";display:inline-block;position:absolute}div.tooltip[_ngcontent-%COMP%]:before{border-left:7px solid transparent;border-right:7px solid transparent;left:7px}div.tooltip[_ngcontent-%COMP%]:after{border-left:6px solid transparent;border-right:6px solid transparent;left:8px}div.tooltip.above[_ngcontent-%COMP%]:before{border-top:7px solid lightgrey;bottom:-7px}div.tooltip.above[_ngcontent-%COMP%]:after{border-top:6px solid white;bottom:-6px}div.tooltip.under[_ngcontent-%COMP%]:before{border-bottom:7px solid lightgrey;top:-7px}div.tooltip.under[_ngcontent-%COMP%]:after{border-bottom:6px solid white;top:-6px}']}),n})(),hh=(()=>{class n{constructor(t){this.mouseEventService=t}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(Vi))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5WindowMouseEvent",""]]}),n})();class gh extends Ft{constructor(s){super(p.SetLayoutSet),this.LayoutSetName=s}}let ph=(()=>{class n{constructor(t,e,r,o,a,l){this.dataService=t,this.eventService=e,this.expressionService=r,this.renderStateService=o,this.userAgentService=a,this.viewContainerRef=l}get useCssVars(){return this.renderStateService.useCssGrids}get event(){return this.userAgentService.isMobile?"orientationchange":"resize"}ngOnInit(){window.addEventListener(this.event,()=>this.windowResize()),this.windowResizingSubscription=(0,It.R)(window,this.event).pipe((0,Ne.b)(300)).subscribe({next:()=>{this.windowResized()}})}ngOnDestroy(){window.removeEventListener(this.event,()=>this.windowResize()),this.windowResizingSubscription&&this.windowResizingSubscription.unsubscribe()}windowResize(){this.renderStateService.isLastPage||this.useCssVars?window.removeEventListener(this.event,()=>this.windowResize()):this.eventService.showSplashEvent.emit()}windowResized(){if(this.renderStateService.isLastPage)this.windowResizingSubscription&&!this.windowResizingSubscription.closed&&this.windowResizingSubscription.unsubscribe();else if(this.userAgentService.updateClientSize(),this.userAgentService.client.HasChanged)if(this.viewContainerRef.element.nativeElement.style.height=window.innerHeight-1,null!=this.dataService.layoutSets&&this.dataService.layoutSets.length>1){let t="";for(let e=0,r=this.dataService.layoutSets.length;e<r;e++){const o=this.dataService.layoutSets[e].Condition;if(!o||this.expressionService.evaluateExpression(o)){t=this.dataService.layoutSets[e].Name;break}}""===t&&(t=this.dataService.layoutSets[0].Name),this.renderStateService.actualLayoutSetName===t?this.eventService.windowResizedEvent.emit({pixelWidth:this.userAgentService.client.Width,pixelHeight:this.userAgentService.client.Height}):(this.useCssVars&&this.eventService.showSplashEvent.emit(),this.eventService.emitHandleActionEvent(new gh(t)))}else this.userAgentService.isIOS?setTimeout(()=>{this.eventService.windowResizedEvent.emit({pixelWidth:this.userAgentService.client.Width,pixelHeight:this.userAgentService.client.Height})},1e3):this.eventService.windowResizedEvent.emit({pixelWidth:this.userAgentService.client.Width,pixelHeight:this.userAgentService.client.Height});else this.eventService.hideSplashEvent.emit()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(Di),i.Y36(q),i.Y36(Fe),i.Y36(ut),i.Y36(Yt),i.Y36(i.s_b))},n.\u0275dir=i.lG2({type:n,selectors:[["","bl5WindowResize",""]]}),n})();function mh(n,s){if(1&n&&i.GkF(0,3),2&n){const t=i.oxw();i.Q6J("childType",t.child.type)("dataObject",t.child.dataObject)("parentId",t.child.parentId)}}const fh=[{path:"",component:(()=>{class n{constructor(t,e,r,o,a,l,c,d,u,h,m,f,w,D,G,B,j,H,F,ct){this.activatedRoute=t,this.document=e,this.domSanitizer=r,this.http=o,this.title=a,this.auditTrailService=l,this.cultureInfoService=c,this.dataService=d,this.eventService=u,this.fontService=h,this.helperService=m,this.modelService=f,this.performanceService=w,this.renderStateService=D,this.runtimeParametersService=G,this.shortcutService=B,this.sizeTreeService=j,this.subscriptionService=H,this.toastrService=F,this.userAgentService=ct,this.cssLinkHref="",this.pageInitialized=!1,this.newPage=!1,this.determineDepthOfObject=gt=>{let St=0;switch(gt.Kind){case v.Grid:gt.Children.forEach(yt=>{const Dt=this.determineDepthOfObject(yt);Dt>St&&(St=Dt)});break;case v.TableControl:gt.Children.forEach(yt=>{const Dt=this.determineDepthOfObject(yt);Dt>St&&(St=Dt)});break;case v.Panel:{const yt=this.determineDepthOfObject(gt.Child);yt>St&&(St=yt);break}}return St+1}}ngOnInit(){this.rootControlSubscription=this.setRootControlSubscription(),this.renderStateSubscription=this.setRenderStateSubscription(),this.initializePage()}ngAfterViewChecked(){this.pageInitialized&&this.newPage&&(this.newPage=!1,this.eventService.pageInitializedEvent.emit())}ngOnDestroy(){this.queryParamsSubscription&&this.queryParamsSubscription.unsubscribe(),this.rootControlSubscription&&this.rootControlSubscription.unsubscribe(),this.renderStateSubscription&&this.renderStateSubscription.unsubscribe(),this.runtimeParametersSubscription&&this.runtimeParametersSubscription.unsubscribe()}handleKeyboardEvent(t){this.auditTrailService.logKeyStrokeEvent(t)}setRootControlSubscription(){return this.subscriptionService.rootControlSubject.subscribe({next:t=>{this.performanceService.measure(this.constructor.name,"handleRootControlChanged",()=>{this.newPage=!0,this.child=t?this.modelService.createChild(t,null):null})}})}setRenderStateSubscription(){return this.subscriptionService.renderStateSubject.subscribe({next:t=>{null!=t&&this.performanceService.measure(this.constructor.name,"handleRenderStateChanged",()=>{const e=document.getElementById("initialLoader");let r,o;e&&e.parentNode&&e.parentNode.removeChild(e),this.runtimeParametersService.runtimeParameters&&this.runtimeParametersService.runtimeParameters.IsTesting?(r=!1,o="/default.css"):(r="unsafe"===this.domSanitizer.sanitize(i.q3G.STYLE,this.renderStateService.styleName),o=this.helperService.generateStyleCssLink(this.renderStateService.surveyRoot,this.renderStateService.styleName,this.renderStateService.resourceSetName,this.renderStateService.resourceLanguageName)),o!==this.cssLinkHref&&!r&&(this.cssLink&&this.document.head.removeChild(this.cssLink),this.sizeTreeService.cssLoaded=!1,this.cssLink=this.document.createElement("link"),this.cssLink.id="blaise-style",this.cssLink.type="text/css",this.cssLink.rel="stylesheet",this.cssLinkHref=o,this.cssLink.href=o,this.document.head.appendChild(this.cssLink),this.cssLink.onload=()=>{this.eventService.cssLoadedEvent.emit()},this.cssLink.onerror=()=>{console.info("css for language not found"),this.toastrService.error("Css style for current language not found."),this.eventService.cssLoadedEvent.emit()}),this.title.setTitle(t.InstrumentTitle||t.LayoutModelState.InstrumentName);const a=this.cultureInfoService.getShortCultureId(t.LayoutModelState.ActiveCultureId);this.document.getElementsByTagName("html")[0].setAttribute("lang",a),this.document.getElementsByTagName("app-root")[0].setAttribute("dir",this.cultureInfoService.cultureInfo.IsRightToLeft?"rtl":"ltr"),this.document.getElementsByTagName("html")[0].classList.add(this.userAgentService.getBrowserClass()),this.shortcutService.ngOnInit()})}})}initializePage(){this.cssLink=this.document.getElementById("blaise-style"),this.cssLink||(this.cssLink=this.document.createElement("link"),this.cssLink.id="blaise-style",this.cssLink.type="text/css",this.cssLink.rel="stylesheet",this.document.head.appendChild(this.cssLink),this.cssLink.onload=()=>{this.eventService.cssLoadedEvent.emit()}),this.fontStyles=this.document.getElementById("blaise-fonts"),this.fontStyles||(this.fontStyles=this.document.createElement("style"),this.fontStyles.id="blaise-fonts",this.document.head.appendChild(this.fontStyles)),null==this.renderStateService.renderState&&(this.queryParamsSubscription=this.activatedRoute.queryParams.subscribe({next:t=>{this.dataService.startSurvey(t)}})),this.pageInitialized=!0}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(Ve.gz),i.Y36(g.K0),i.Y36(jt.H7),i.Y36(Nt.eN),i.Y36(jt.Dx),i.Y36(qe),i.Y36(Wt),i.Y36(Di),i.Y36(q),i.Y36(Ii),i.Y36(Jt),i.Y36(me),i.Y36(Le),i.Y36(ut),i.Y36(en),i.Y36(an),i.Y36(Li),i.Y36(pt),i.Y36(We._W),i.Y36(Yt))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-main"]],hostBindings:function(t,e){1&t&&i.NdJ("keyup",function(o){return e.handleKeyboardEvent(o)},!1,i.evT)},inputs:{child:"child"},decls:7,vars:1,consts:[["id","placeholder"],["bl5WindowMouseEvent","","bl5WindowResize","",1,"rootControl"],[3,"ngIf"],["bl5Component","",3,"childType","dataObject","parentId"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"bl5-svg")(2,"bl5-skiplinks")(3,"bl5-splash"),i.TgZ(4,"div",1),i.YNc(5,mh,1,3,"ng-template",2),i.qZA(),i._UZ(6,"bl5-tooltip"),i.qZA()),2&t&&(i.xp6(5),i.Q6J("ngIf",e.child))},dependencies:[g.O5,rh,ah,lh,uh,we,hh,ph]}),n})()},{path:"login",component:(()=>{class n{constructor(t,e,r,o,a,l){this.eventService=t,this.renderStateService=e,this.router=r,this.securityService=o,this.storageService=a,this.title=l,this.user={name:"",password:""},this.showError=!1}ngOnInit(){this.title.setTitle("Login"),this.renderStateService.renderState=null,this.securityService.accessToken=null;const t=document.getElementById("initialLoader");t&&t.parentNode&&t.parentNode.removeChild(t)}ngOnDestroy(){this.requestSubscription&&this.requestSubscription.unsubscribe()}onSubmit(){this.requestSubscription=this.securityService.requestAccessToken(this.user).subscribe({next:t=>{t?this.onLoginSuccess():this.onLoginFail(),this.requestSubscription&&(this.requestSubscription.unsubscribe(),delete this.requestSubscription)}})}onLoginSuccess(){this.eventService.showSplashEvent.emit(),this.router.navigate(["/"],{queryParams:this.storageService.getSessionStorageItem("queryStringParameters")})}onLoginFail(){this.showError=!0}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(q),i.Y36(ut),i.Y36(Ve.F0),i.Y36(Ci),i.Y36(Ti),i.Y36(jt.Dx))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-login"]],decls:14,vars:3,consts:[[1,"content-container"],[3,"ngSubmit"],["f","ngForm"],[1,"login-container"],[1,"login-description"],[1,"login-error",3,"hidden"],[1,"login-username"],["type","text","name","name","id","username","autofocus","","required","","placeholder","username","aria-required","true","aria-label","Please enter your username",3,"ngModel","ngModelChange"],[1,"login-password"],["type","password","name","password","id","password","required","","placeholder","password","aria-required","true","aria-label","Please enter your password",3,"ngModel","ngModelChange"],[1,"login-actions"],["type","submit","value","LOGIN"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0)(1,"form",1,2),i.NdJ("ngSubmit",function(){return e.onSubmit()}),i.TgZ(3,"div",3)(4,"h1",4),i._uU(5," Login Required "),i.qZA(),i.TgZ(6,"div",5),i._uU(7," Login failed. Please try again. "),i.qZA(),i.TgZ(8,"div",6)(9,"input",7),i.NdJ("ngModelChange",function(o){return e.user.name=o}),i.qZA()(),i.TgZ(10,"div",8)(11,"input",9),i.NdJ("ngModelChange",function(o){return e.user.password=o}),i.qZA()(),i.TgZ(12,"div",10),i._UZ(13,"input",11),i.qZA()()()()),2&t&&(i.xp6(6),i.Q6J("hidden",!e.showError),i.xp6(3),i.Q6J("ngModel",e.user.name),i.xp6(2),i.Q6J("ngModel",e.user.password))},dependencies:[V._Y,V.Fj,V.JJ,V.JL,V.Q7,V.On,V.F],styles:["[_nghost-%COMP%]{--defaultBottomMargin: .75rem;--defaultRadius: .375rem;--defaultPadding: .375rem;--errorColor: #842029;--errorBgColor: #f8d7da;--errorBorderColor: #f5c2c7;--loginColor: #fff;--loginBgColor: #0d6efd;--loginBorderColor: #0d6efd;--loginBgColorHover: #0257d5;--fontSize: 1rem;--fontSizeSmall: .75rem}div.content-container[_ngcontent-%COMP%]{display:grid;justify-items:center;font-family:Verdana,sans-serif}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]{display:grid;min-width:300px;margin-top:200px}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-error[_ngcontent-%COMP%]{color:var(--errorColor);background-color:var(--errorBgColor);padding:calc(var(--defaultPadding) * 2);margin:0 0 var(--defaultBottomMargin);border:1px solid var(--errorBorderColor);border-radius:var(--defaultRadius);font-size:var(--fontSizeSmall)}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   h1.login-description[_ngcontent-%COMP%]{width:100%;margin-bottom:var(--defaultBottomMargin)}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-username[_ngcontent-%COMP%], div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-password[_ngcontent-%COMP%]{margin-bottom:var(--defaultBottomMargin);width:100%;outline:0}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-username[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:calc(var(--defaultPadding)) calc(var(--defaultPadding) * 2);font-weight:400;line-height:1.5;border-radius:var(--defaultRadius);width:100%;appearance:none}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-actions[_ngcontent-%COMP%]{width:100%}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-actions[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{padding:12px;float:right;border:0;color:var(--loginColor);background-color:var(--loginBgColor);border-color:var(--loginBorderColor);font-weight:700;cursor:pointer;border-radius:var(--defaultRadius);text-transform:uppercase;transition:ease-in-out,background-color .15s}div.content-container[_ngcontent-%COMP%]   div.login-container[_ngcontent-%COMP%]   div.login-actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-color:var(--loginBgColorHover)}"]}),n})()},{path:"**",redirectTo:window.location.href.includes("?")?"/?"+window.location.href.split("?")[1]:"/",pathMatch:"full"}];let bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[Ve.Bz.forRoot(fh,{relativeLinkResolution:"legacy"}),Ve.Bz]}),n})(),vh=(()=>{class n{constructor(t){this.actionService=t,t.initialize()}initialize(){}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(Rn))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yh=(()=>{class n{constructor(t,e){if(this.coreService=e,t)throw new Error("You have already injected the BlaiseCoreModule");e.initialize()}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(n,12),i.LFG(vh))},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[Rn,qe,Qi,xi,En,Ji,zn,Fn,qt,se,Wt,Gn,Di,Qn,q,Fe,ue,Ii,Tn,Zn,Jt,qi,Jn,tn,Oi,bo,ei,Un,dn,me,Vi,nt,Pe,Le,en,ut,pt,Ci,E,an,Li,ln,Vn,Ti,De,ye,qn,br,_i,Fi,cn,Yt,yi,Ar,fi,Hi,ce,Ni,Je,bi,sn,de,Te,Ui],imports:[Sn.rt,jt.b2,_r.PW,g.ez,V.u5,hi.Y4,zi._zm,Nt.JF,Nt.Ed,gi.TW,We.Rh.forRoot(),bh,wn,xn,_n,Gi,pi,kn,Or,Tr,On,wn,xn,_n,Gi,pi,kn,On]}),n})();i.B6R(fn,function(){return[g.mk,g.sg,g.O5,ih]},[]);const ee=["0",".",",","0.","0,","0.0","0,0",".0",",0",".7",",7","1.7","1,7"],_e=["-","-,","-.","-0","-0,","-0.","-0,0","-0.0"],ie=["a","--","-,-","-,0,",",0-"],ne=new Map;ne.set("REAL or REAL[18]",{DataType:2,AllowedValues:[...ee,..._e,"123456789012345678","1234567890123456.8","1234567890123456,8","-23456789012345678","-234567890123456.8","-234567890123456,8","-2.456789012345678","-2,456789012345678",".05",",07"],DisAllowedValues:[...ie,"1234567890123456789",",34567890123456789","12345678901234567."]}),ne.set("REAL[18,16]",{DataType:2,MaxLength:18,Decimals:16,AllowedValues:[...ee,".05",",07",".0005",",0000000000000005","1.3456789012345678","1,3456789012345678"],DisAllowedValues:[..._e,...ie,".34567890123456789"]}),ne.set("REAL[3]",{DataType:2,MaxLength:3,AllowedValues:[...ee.filter(n=>n.length<4),"-","-0","123","-23"],DisAllowedValues:[...ie,"-0,","-,","-.","1234","-234","-2.4"]}),ne.set("REAL[3,1]",{DataType:2,MaxLength:3,Decimals:1,AllowedValues:[...ee.filter(n=>n.length<4)],DisAllowedValues:[..._e.filter(n=>n.length<4),...ie,"123","-23","-2.4"]}),ne.set("REAL[10]",{DataType:2,MaxLength:10,AllowedValues:[...ee,..._e,".05",",07"],DisAllowedValues:[...ie]}),ne.set("-10000.00..10000.00",{DataType:2,Decimals:2,Ranges:[{MinValue:{Kind:2,Value:-1e4},MaxValue:{Kind:2,Value:1e4}}],AllowedValues:[...ee,..._e,"-10000","-10000.0","-10000,0","-10000.00","-10000,00","-1","-12","-123","-1234","-2345","10000","10000.0","10000,0","10000.00","10000,00","1234"],DisAllowedValues:[...ie,"-234.678"]}),ne.set("1000.00..10000.00",{DataType:2,Decimals:2,Ranges:[{MinValue:{Kind:2,Value:1e3},MaxValue:{Kind:2,Value:1e4}}],AllowedValues:[...ee,"1","10","23","100","234","1000","2345","1000,1","1000,99","9999,99","10000",".05",",07"],DisAllowedValues:[...ie,"-","1234,553"]}),ne.set("-10000.00..-1000.00",{DataType:2,Decimals:1,Ranges:[{MinValue:{Kind:2,Value:-1e4},MaxValue:{Kind:2,Value:-1e3}}],AllowedValues:[..._e],DisAllowedValues:[...ee,...ie]}),ne.set("0.00..1001.00",{DataType:2,Decimals:2,Ranges:[{MinValue:{Kind:2,Value:0},MaxValue:{Kind:2,Value:1001}}],AllowedValues:[...ee,".05",",07"],DisAllowedValues:[..._e,...ie]});let Ch=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})(),Sh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[Ch],imports:[g.ez,V.u5,Gi]}),n})(),Ah=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-core"]],decls:1,vars:0,template:function(t,e){1&t&&i._UZ(0,"router-outlet")},dependencies:[Ve.lC],styles:['@charset "UTF-8";html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:"";content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{background-color:#ff9;color:#000;text-decoration:none}mark{background-color:#ff9;color:#000;font-style:italic;font-weight:700}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-spacing:0}hr{display:block;height:1px;border:0;border-top:1px solid #cccccc;margin:1em 0;padding:0}input,select{vertical-align:middle}input[type=button],input[type=submit],input[type=reset],input[type=file]::-webkit-file-upload-button,button{text-align:left}*::-ms-clear{display:none}@media all and (max-device-width: 480px){*{-webkit-text-size-adjust:none}}@media all and (min-device-width: 768px) and (max-device-width: 1024px){*{-webkit-text-size-adjust:none}}@font-face{font-family:blaise-icons;src:url(data:application/octet-stream;base64,FAcAAHAGAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABYcwcQAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIEkwAAALwAAABgY21hcBdW0ooAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmAfF5zgAAAXgAAAKgaGVhZArVYncAAAQYAAAANmhoZWEHeQPJAAAEUAAAACRobXR4EAAAJQAABHQAAAAgbG9jYQKAAcwAAASUAAAAEm1heHAADQBdAAAEqAAAACBuYW1lmUoJ+wAABMgAAAGGcG9zdAADAAAAAAZQAAAAIAADAmYBkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkDA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpA//9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAMAAAAAA24DbgAaADMATAAAAREUBwYrASInJj0BNDc2OwE1NDc2OwEyFxYVFzQnJicmIyIHBgcGFRQXFhcWMzI3Njc2NTMUBwYHBiMiJyYnJjU0NzY3NjMyFxYXFhUCAAUFCLcIBQUFBQiABQUIJQgFBe4qKkdIVFVHSCkqKilIR1VUSEcqKoA7O2Vld3hkZTs7OztlZHh3ZWU7OwKA/wAIBQUFBQglCAUFyQgFBQUFCMlUSEcqKioqR0hUVUdIKSoqKUhHVXhkZTs7OztlZHh3ZWU7Ozs7ZWV3AAAEAAD/twO3A7cABAAZAC0AWgAANyERIRETNTQnJisBIgcGHQEUFxY7ATI3NjUhNTQnJisBIgcGHQEUFxY7ATI3NjcRFAcGIyEiJyY1ETQ3NjsBNTQ3NjsBMhcWHQEzNTQ3NjsBMhcWHQEzMhcWFUkDJfzb3AYFCCQIBQYGBQgkCAUGAbYFBQgkCAYFBQYIJAgFBdwWFh382x4VFhYVHkkbGyYkJhsb2xsbJiQmGxtJHRYWAAJJ/bcCt6QIBgUFBgikCAUFBQUIpAgGBQUGCKQIBQUFBSz9JR4VFhYVHgLbHhYWNiYbGxsbJjY2JhsbGxsmNhYWHgAAAAEAJQCSAW4C2wATAAABERQHBiMiJwEmNTQ3ATYzMhcWFQFuCwsPDwv/AAoKAQALDw8LCwK3/gAPCwsLAQALDw8LAQAKCgsPAAEAAACSAUkC2wATAAABFAcBBiMiJyY1ETQ3NjMyFwEWFQFJC/8ACw4PCwsLCw8OCwEACwG3Dwv/AAsLCw8CAA8LCgr/AAsPAAEAAAAAAABxMIcFXw889QALBAAAAAAA1AAPBgAAAADUAA8GAAD/twO3A7cAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA7cAAQAAAAAAAAAAAAAAAAAAAAgEAAAAAAAAAAAAAAACAAAAA24AAAO3AAABkgAlAUkAAAAAAAAACgAUAB4AjAEIASwBUAAAAAEAAAAIAFsABAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA);src:url(data:application/octet-stream;base64,FAcAAHAGAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABYcwcQAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIEkwAAALwAAABgY21hcBdW0ooAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmAfF5zgAAAXgAAAKgaGVhZArVYncAAAQYAAAANmhoZWEHeQPJAAAEUAAAACRobXR4EAAAJQAABHQAAAAgbG9jYQKAAcwAAASUAAAAEm1heHAADQBdAAAEqAAAACBuYW1lmUoJ+wAABMgAAAGGcG9zdAADAAAAAAZQAAAAIAADAmYBkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkDA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpA//9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAMAAAAAA24DbgAaADMATAAAAREUBwYrASInJj0BNDc2OwE1NDc2OwEyFxYVFzQnJicmIyIHBgcGFRQXFhcWMzI3Njc2NTMUBwYHBiMiJyYnJjU0NzY3NjMyFxYXFhUCAAUFCLcIBQUFBQiABQUIJQgFBe4qKkdIVFVHSCkqKilIR1VUSEcqKoA7O2Vld3hkZTs7OztlZHh3ZWU7OwKA/wAIBQUFBQglCAUFyQgFBQUFCMlUSEcqKioqR0hUVUdIKSoqKUhHVXhkZTs7OztlZHh3ZWU7Ozs7ZWV3AAAEAAD/twO3A7cABAAZAC0AWgAANyERIRETNTQnJisBIgcGHQEUFxY7ATI3NjUhNTQnJisBIgcGHQEUFxY7ATI3NjcRFAcGIyEiJyY1ETQ3NjsBNTQ3NjsBMhcWHQEzNTQ3NjsBMhcWHQEzMhcWFUkDJfzb3AYFCCQIBQYGBQgkCAUGAbYFBQgkCAYFBQYIJAgFBdwWFh382x4VFhYVHkkbGyYkJhsb2xsbJiQmGxtJHRYWAAJJ/bcCt6QIBgUFBgikCAUFBQUIpAgGBQUGCKQIBQUFBSz9JR4VFhYVHgLbHhYWNiYbGxsbJjY2JhsbGxsmNhYWHgAAAAEAJQCSAW4C2wATAAABERQHBiMiJwEmNTQ3ATYzMhcWFQFuCwsPDwv/AAoKAQALDw8LCwK3/gAPCwsLAQALDw8LAQAKCgsPAAEAAACSAUkC2wATAAABFAcBBiMiJyY1ETQ3NjMyFwEWFQFJC/8ACw4PCwsLCw8OCwEACwG3Dwv/AAsLCw8CAA8LCgr/AAsPAAEAAAAAAABxMIcFXw889QALBAAAAAAA1AAPBgAAAADUAA8GAAD/twO3A7cAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA7cAAQAAAAAAAAAAAAAAAAAAAAgEAAAAAAAAAAAAAAACAAAAA24AAAO3AAABkgAlAUkAAAAAAAAACgAUAB4AjAEIASwBUAAAAAEAAAAIAFsABAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA) format("embedded-opentype"),url(data:application/octet-stream;base64,AAEAAAALAIAAAwAwT1MvMg8SBJMAAAC8AAAAYGNtYXAXVtKKAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgHxec4AAAF4AAACoGhlYWQK1WJ3AAAEGAAAADZoaGVhB3kDyQAABFAAAAAkaG10eBAAACUAAAR0AAAAIGxvY2ECgAHMAAAElAAAABJtYXhwAA0AXQAABKgAAAAgbmFtZZlKCfsAAATIAAABhnBvc3QAAwAAAAAGUAAAACAAAwJmAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QP//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAADAAAAAANuA24AGgAzAEwAAAERFAcGKwEiJyY9ATQ3NjsBNTQ3NjsBMhcWFRc0JyYnJiMiBwYHBhUUFxYXFjMyNzY3NjUzFAcGBwYjIicmJyY1NDc2NzYzMhcWFxYVAgAFBQi3CAUFBQUIgAUFCCUIBQXuKipHSFRVR0gpKiopSEdVVEhHKiqAOztlZXd4ZGU7Ozs7ZWR4d2VlOzsCgP8ACAUFBQUIJQgFBckIBQUFBQjJVEhHKioqKkdIVFVHSCkqKilIR1V4ZGU7Ozs7ZWR4d2VlOzs7O2VldwAABAAA/7cDtwO3AAQAGQAtAFoAADchESEREzU0JyYrASIHBh0BFBcWOwEyNzY1ITU0JyYrASIHBh0BFBcWOwEyNzY3ERQHBiMhIicmNRE0NzY7ATU0NzY7ATIXFh0BMzU0NzY7ATIXFh0BMzIXFhVJAyX829wGBQgkCAUGBgUIJAgFBgG2BQUIJAgGBQUGCCQIBQXcFhYd/NseFRYWFR5JGxsmJCYbG9sbGyYkJhsbSR0WFgACSf23ArekCAYFBQYIpAgFBQUFCKQIBgUFBgikCAUFBQUs/SUeFRYWFR4C2x4WFjYmGxsbGyY2NiYbGxsbJjYWFh4AAAABACUAkgFuAtsAEwAAAREUBwYjIicBJjU0NwE2MzIXFhUBbgsLDw8L/wAKCgEACw8PCwsCt/4ADwsLCwEACw8PCwEACgoLDwABAAAAkgFJAtsAEwAAARQHAQYjIicmNRE0NzYzMhcBFhUBSQv/AAsODwsLCwsPDgsBAAsBtw8L/wALCwsPAgAPCwoK/wALDwABAAAAAAAAcTCHBV8PPPUACwQAAAAAANQADwYAAAAA1AAPBgAA/7cDtwO3AAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAO3AAEAAAAAAAAAAAAAAAAAAAAIBAAAAAAAAAAAAAAAAgAAAANuAAADtwAAAZIAJQFJAAAAAAAAAAoAFAAeAIwBCAEsAVAAAAABAAAACABbAAQAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("truetype"),url(data:application/font-woff;base64,d09GRgABAAAAAAa8AAsAAAAABnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIEk2NtYXAAAAFoAAAAVAAAAFQXVtKKZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAqAAAAKgAfF5zmhlYWQAAARkAAAANgAAADYK1WJ3aGhlYQAABJwAAAAkAAAAJAd5A8lobXR4AAAEwAAAACAAAAAgEAAAJWxvY2EAAATgAAAAEgAAABICgAHMbWF4cAAABPQAAAAgAAAAIAANAF1uYW1lAAAFFAAAAYYAAAGGmUoJ+3Bvc3QAAAacAAAAIAAAACAAAwAAAAMCZgGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QMDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkD//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwAAAAADbgNuABoAMwBMAAABERQHBisBIicmPQE0NzY7ATU0NzY7ATIXFhUXNCcmJyYjIgcGBwYVFBcWFxYzMjc2NzY1MxQHBgcGIyInJicmNTQ3Njc2MzIXFhcWFQIABQUItwgFBQUFCIAFBQglCAUF7ioqR0hUVUdIKSoqKUhHVVRIRyoqgDs7ZWV3eGRlOzs7O2VkeHdlZTs7AoD/AAgFBQUFCCUIBQXJCAUFBQUIyVRIRyoqKipHSFRVR0gpKiopSEdVeGRlOzs7O2VkeHdlZTs7OztlZXcAAAQAAP+3A7cDtwAEABkALQBaAAA3IREhERM1NCcmKwEiBwYdARQXFjsBMjc2NSE1NCcmKwEiBwYdARQXFjsBMjc2NxEUBwYjISInJjURNDc2OwE1NDc2OwEyFxYdATM1NDc2OwEyFxYdATMyFxYVSQMl/NvcBgUIJAgFBgYFCCQIBQYBtgUFCCQIBgUFBggkCAUF3BYWHfzbHhUWFhUeSRsbJiQmGxvbGxsmJCYbG0kdFhYAAkn9twK3pAgGBQUGCKQIBQUFBQikCAYFBQYIpAgFBQUFLP0lHhUWFhUeAtseFhY2JhsbGxsmNjYmGxsbGyY2FhYeAAAAAQAlAJIBbgLbABMAAAERFAcGIyInASY1NDcBNjMyFxYVAW4LCw8PC/8ACgoBAAsPDwsLArf+AA8LCwsBAAsPDwsBAAoKCw8AAQAAAJIBSQLbABMAAAEUBwEGIyInJjURNDc2MzIXARYVAUkL/wALDg8LCwsLDw4LAQALAbcPC/8ACwsLDwIADwsKCv8ACw8AAQAAAAAAAHEwhwVfDzz1AAsEAAAAAADUAA8GAAAAANQADwYAAP+3A7cDtwAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADtwABAAAAAAAAAAAAAAAAAAAACAQAAAAAAAAAAAAAAAIAAAADbgAAA7cAAAGSACUBSQAAAAAAAAAKABQAHgCMAQgBLAFQAAAAAQAAAAgAWwAEAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format("woff"),url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8bWV0YWRhdGE+R2VuZXJhdGVkIGJ5IEljb01vb248L21ldGFkYXRhPgo8ZGVmcz4KPGZvbnQgaWQ9Imljb21vb24iIGhvcml6LWFkdi14PSIxMDI0Ij4KPGZvbnQtZmFjZSB1bml0cy1wZXItZW09IjEwMjQiIGFzY2VudD0iOTYwIiBkZXNjZW50PSItNjQiIC8+CjxtaXNzaW5nLWdseXBoIGhvcml6LWFkdi14PSIxMDI0IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4MjA7IiBob3Jpei1hZHYteD0iNTEyIiBkPSIiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTAwOyIgZ2x5cGgtbmFtZT0iY2xvY2stbyIgaG9yaXotYWR2LXg9Ijg3OCIgZD0iTTUxMiA2NDB2LTI1NnEwLTgtNS4xNDMtMTMuMTQzdC0xMy4xNDMtNS4xNDNoLTE4Mi44NTdxLTggMC0xMy4xNDMgNS4xNDN0LTUuMTQzIDEzLjE0M3YzNi41NzFxMCA4IDUuMTQzIDEzLjE0M3QxMy4xNDMgNS4xNDNoMTI4djIwMS4xNDNxMCA4IDUuMTQzIDEzLjE0M3QxMy4xNDMgNS4xNDNoMzYuNTcxcTggMCAxMy4xNDMtNS4xNDN0NS4xNDMtMTMuMTQzek03NDkuNzE0IDQzOC44NTdxMCA4NC41NzEtNDEuNzE0IDE1NnQtMTEzLjE0MyAxMTMuMTQzLTE1NiA0MS43MTQtMTU2LTQxLjcxNC0xMTMuMTQzLTExMy4xNDMtNDEuNzE0LTE1NiA0MS43MTQtMTU2IDExMy4xNDMtMTEzLjE0MyAxNTYtNDEuNzE0IDE1NiA0MS43MTQgMTEzLjE0MyAxMTMuMTQzIDQxLjcxNCAxNTZ6TTg3Ny43MTQgNDM4Ljg1N3EwLTExOS40MjktNTguODU3LTIyMC4yODZ0LTE1OS43MTQtMTU5LjcxNC0yMjAuMjg2LTU4Ljg1Ny0yMjAuMjg2IDU4Ljg1Ny0xNTkuNzE0IDE1OS43MTQtNTguODU3IDIyMC4yODYgNTguODU3IDIyMC4yODYgMTU5LjcxNCAxNTkuNzE0IDIyMC4yODYgNTguODU3IDIyMC4yODYtNTguODU3IDE1OS43MTQtMTU5LjcxNCA1OC44NTctMjIwLjI4NnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTAxOyIgZ2x5cGgtbmFtZT0iY2FsZW5kYXItbyIgaG9yaXotYWR2LXg9Ijk1MSIgZD0iTTczLjE0MyAwaDgwNC41NzF2NTg1LjE0M2gtODA0LjU3MXYtNTg1LjE0M3pNMjkyLjU3MSA2OTQuODU3djE2NC41NzFxMCA4LTUuMTQzIDEzLjE0M3QtMTMuMTQzIDUuMTQzaC0zNi41NzFxLTggMC0xMy4xNDMtNS4xNDN0LTUuMTQzLTEzLjE0M3YtMTY0LjU3MXEwLTggNS4xNDMtMTMuMTQzdDEzLjE0My01LjE0M2gzNi41NzFxOCAwIDEzLjE0MyA1LjE0M3Q1LjE0MyAxMy4xNDN6TTczMS40MjkgNjk0Ljg1N3YxNjQuNTcxcTAgOC01LjE0MyAxMy4xNDN0LTEzLjE0MyA1LjE0M2gtMzYuNTcxcS04IDAtMTMuMTQzLTUuMTQzdC01LjE0My0xMy4xNDN2LTE2NC41NzFxMC04IDUuMTQzLTEzLjE0M3QxMy4xNDMtNS4xNDNoMzYuNTcxcTggMCAxMy4xNDMgNS4xNDN0NS4xNDMgMTMuMTQzek05NTAuODU3IDczMS40Mjh2LTczMS40MjlxMC0yOS43MTQtMjEuNzE0LTUxLjQyOXQtNTEuNDI5LTIxLjcxNGgtODA0LjU3MXEtMjkuNzE0IDAtNTEuNDI5IDIxLjcxNHQtMjEuNzE0IDUxLjQyOXY3MzEuNDI5cTAgMjkuNzE0IDIxLjcxNCA1MS40Mjl0NTEuNDI5IDIxLjcxNGg3My4xNDN2NTQuODU3cTAgMzcuNzE0IDI2Ljg1NyA2NC41NzF0NjQuNTcxIDI2Ljg1N2gzNi41NzFxMzcuNzE0IDAgNjQuNTcxLTI2Ljg1N3QyNi44NTctNjQuNTcxdi01NC44NTdoMjE5LjQyOXY1NC44NTdxMCAzNy43MTQgMjYuODU3IDY0LjU3MXQ2NC41NzEgMjYuODU3aDM2LjU3MXEzNy43MTQgMCA2NC41NzEtMjYuODU3dDI2Ljg1Ny02NC41NzF2LTU0Ljg1N2g3My4xNDNxMjkuNzE0IDAgNTEuNDI5LTIxLjcxNHQyMS43MTQtNTEuNDI5eiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDI7IiBnbHlwaC1uYW1lPSJjYXJldC1sZWZ0IiBob3Jpei1hZHYteD0iNDAyIiBkPSJNMzY1LjcxNCA2OTQuODU3di01MTJxMC0xNC44NTctMTAuODU3LTI1LjcxNHQtMjUuNzE0LTEwLjg1Ny0yNS43MTQgMTAuODU3bC0yNTYgMjU2cS0xMC44NTcgMTAuODU3LTEwLjg1NyAyNS43MTR0MTAuODU3IDI1LjcxNGwyNTYgMjU2cTEwLjg1NyAxMC44NTcgMjUuNzE0IDEwLjg1N3QyNS43MTQtMTAuODU3IDEwLjg1Ny0yNS43MTR6IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4ZTkwMzsiIGdseXBoLW5hbWU9ImNhcmV0LXJpZ2h0IiBob3Jpei1hZHYteD0iMzI5IiBkPSJNMzI5LjE0MyA0MzguODU3cTAtMTQuODU3LTEwLjg1Ny0yNS43MTRsLTI1Ni0yNTZxLTEwLjg1Ny0xMC44NTctMjUuNzE0LTEwLjg1N3QtMjUuNzE0IDEwLjg1Ny0xMC44NTcgMjUuNzE0djUxMnEwIDE0Ljg1NyAxMC44NTcgMjUuNzE0dDI1LjcxNCAxMC44NTcgMjUuNzE0LTEwLjg1N2wyNTYtMjU2cTEwLjg1Ny0xMC44NTcgMTAuODU3LTI1LjcxNHoiIC8+CjwvZm9udD48L2RlZnM+PC9zdmc+) format("svg");font-weight:400;font-style:normal}[class^=icon-],[class*=" icon-"]{font-family:blaise-icons!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-close:before,.icon-remove:before,.icon-times:before{content:"\\f00d"}.icon-clock-o:before{content:"\\f017"}.icon-chevron-left:before{content:"\\f053"}.icon-chevron-right:before{content:"\\f054"}.icon-calendar:before{content:"\\f073"}.icon-chevron-up:before{content:"\\f077"}.icon-chevron-down:before{content:"\\f078"}.icon-caret-down:before{content:"\\f0d7"}.icon-caret-up:before{content:"\\f0d8"}.icon-caret-left:before{content:"\\f0d9"}.icon-caret-right:before{content:"\\f0da"}.clearfix:before,.clearfix:after{content:" ";display:table}.clearfix:after{clear:both}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.hidden{display:none!important}.affix{position:fixed}.visibility-hidden,.visibility-hidden *.visibility-visible{visibility:hidden!important}iframe.visibility-hidden{opacity:0}.hyperlink-display{text-decoration:underline;color:#00f;display:inline-block}.hyperlink-display:not(:disabled){cursor:pointer}.clip-child>div{overflow:hidden;height:inherit;width:inherit}.reset-font{font-family:none;font-size:100%;line-height:normal;font-weight:400;font-style:normal;text-decoration:none}.focus-outline:focus,.focus-outline btn:focus,.focus-outline th:focus,.focus-outline td:focus,.focus-outline li:focus{outline:thin dotted;outline:thin solid -webkit-focus-ring-color}.focus-no-outline:focus,.focus-no-outline>button:focus,.focus-no-outline>th:focus,.focus-no-outline>td:focus,.focus-no-outline>li:focus{outline:0}bl5-audio>div{display:inline-flex}bl5-button .ButtonComponent{background-color:transparent;display:inline-flex}bl5-button .ButtonComponent.enabled{cursor:pointer}bl5-category-button .CategoryButtonComponent{background-color:transparent;display:inline-flex}bl5-category-button .CategoryButtonComponent.enabled{cursor:pointer}bl5-special-answer-button .SpecialAnswerButtonComponent{background-color:transparent;display:inline-flex}bl5-special-answer-button .SpecialAnswerButtonComponent.enabled{cursor:pointer}bl5-suppress-button .SuppressButtonComponent{background-color:transparent;display:inline-flex}bl5-suppress-button .SuppressButtonComponent.enabled{cursor:pointer}bl5-language-button .LanguageButtonComponent{background-color:transparent;display:inline-flex}bl5-language-button .LanguageButtonComponent.enabled{cursor:pointer}bl5-parallel-button .ParallelButtonComponent{background-color:transparent;display:inline-flex}bl5-parallel-button .ParallelButtonComponent.enabled{cursor:pointer}bl5-index-item-button .IndexItemButtonComponent{background-color:transparent;display:inline-flex}bl5-index-item-button .IndexItemButtonComponent.enabled{cursor:pointer}bl5-group-suppress-button .GroupSuppressButtonComponent{background-color:transparent;display:inline-flex}bl5-group-suppress-button .GroupSuppressButtonComponent.enabled{cursor:pointer}bl5-page-suppress-button .PageSuppressButtonComponent{background-color:transparent;display:inline-flex}bl5-page-suppress-button .PageSuppressButtonComponent.enabled{cursor:pointer}bl5-datagrid-search-button .DataGridSearchButtonComponent{background-color:transparent;display:inline-flex}bl5-datagrid-search-button .DataGridSearchButtonComponent.enabled{cursor:pointer}bl5-upload .UploadComponent{background-color:transparent;display:inline-flex}bl5-upload .UploadComponent.enabled{cursor:pointer}bl5-datagrid table{table-layout:fixed}bl5-datagrid table>thead>tr>th{text-align:left}bl5-datagrid table>thead>tr>th,bl5-datagrid table>tbody>tr>td{white-space:nowrap}bl5-datagrid table>tbody>tr:not(.filler)>td:not(.filler):hover{cursor:pointer}bl5-datagrid table.css-vars{overflow:var(--overflow-x)}bl5-datagrid .determine-font{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}bl5-datagrid-navigator>div.horizontal,bl5-datagrid-navigator>div.vertical{position:relative;vertical-align:middle}bl5-datagrid-navigator>div.horizontal>.navThumb,bl5-datagrid-navigator>div.vertical>.navThumb{position:absolute}bl5-datagrid-navigator>div.horizontal>.btn,bl5-datagrid-navigator>div.vertical>.btn{position:absolute}bl5-datagrid-navigator>div.horizontal>.btn.enabled,bl5-datagrid-navigator>div.vertical>.btn.enabled{cursor:pointer}bl5-datagrid-navigator>div.horizontal>.btn.disabled>svg,bl5-datagrid-navigator>div.vertical>.btn.disabled>svg{fill:gray}bl5-datagrid-navigator>div.horizontal>.btn>svg,bl5-datagrid-navigator>div.vertical>.btn>svg{width:20px;height:20px;vertical-align:top}bl5-datagrid-navigator>div.horizontal{height:24px}bl5-datagrid-navigator>div.horizontal>.navThumb{height:inherit}bl5-datagrid-navigator>div.horizontal>.navThumb:first-child:last-child{width:100%;left:0;right:0}bl5-datagrid-navigator>div.horizontal>.navThumb:nth-child(2):nth-last-child(2){width:calc(100% - 48px);left:24px;right:24px}bl5-datagrid-navigator>div.horizontal>.navThumb:nth-child(3):nth-last-child(3){width:calc(100% - 96px);left:48px;right:48px}bl5-datagrid-navigator>div.horizontal>.navThumb:nth-child(4):nth-last-child(4){width:calc(100% - 144px);left:72px;right:72px}bl5-datagrid-navigator>div.horizontal>.navThumb .noUi-target.noUi-vertical{margin:0 20px}bl5-datagrid-navigator>div.horizontal>.navThumb .noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle{height:23px;top:-9px}bl5-datagrid-navigator>div.horizontal>.navThumb .noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:before,bl5-datagrid-navigator>div.horizontal>.navThumb .noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:after{top:0}bl5-datagrid-navigator>div.horizontal .btn+.btn,bl5-datagrid-navigator>div.horizontal .btn+.btn-group,bl5-datagrid-navigator>div.horizontal .btn-group+.btn,bl5-datagrid-navigator>div.horizontal .btn-group+.btn-group{margin-left:0}bl5-datagrid-navigator>div.horizontal>.btn{top:0}bl5-datagrid-navigator>div.horizontal>.btn.left:nth-child(1){left:0}bl5-datagrid-navigator>div.horizontal>.btn.left:nth-child(2){left:24px}bl5-datagrid-navigator>div.horizontal>.btn.left:nth-child(3){left:48px}bl5-datagrid-navigator>div.horizontal>.btn.right:nth-last-child(3){right:48px}bl5-datagrid-navigator>div.horizontal>.btn.right:nth-last-child(2){right:24px}bl5-datagrid-navigator>div.horizontal>.btn.right:nth-last-child(1){right:0}bl5-datagrid-navigator>div.vertical{width:24px}bl5-datagrid-navigator>div.vertical>.navThumb{width:inherit}bl5-datagrid-navigator>div.vertical>.navThumb:first-child:last-child{height:100%;top:0;bottom:0}bl5-datagrid-navigator>div.vertical>.navThumb:nth-child(2):nth-last-child(2){height:calc(100% - 48px);top:24px;bottom:24px}bl5-datagrid-navigator>div.vertical>.navThumb:nth-child(3):nth-last-child(3){height:calc(100% - 96px);top:48px;bottom:48px}bl5-datagrid-navigator>div.vertical>.navThumb:nth-child(4):nth-last-child(4){height:calc(100% - 144px);top:72px;bottom:72px}bl5-datagrid-navigator>div.vertical>.navThumb .noUi-target.noUi-vertical{margin:20px 0}bl5-datagrid-navigator>div.vertical>.navThumb .noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle{width:23px;left:-9px}bl5-datagrid-navigator>div.vertical>.navThumb .noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:before,bl5-datagrid-navigator>div.vertical>.navThumb .noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:after{left:0}bl5-datagrid-navigator>div.vertical .btn+.btn,bl5-datagrid-navigator>div.vertical .btn+.btn-group,bl5-datagrid-navigator>div.vertical .btn-group+.btn,bl5-datagrid-navigator>div.vertical .btn-group+.btn-group{margin-top:0}bl5-datagrid-navigator>div.vertical>.btn{left:0}bl5-datagrid-navigator>div.vertical>.btn.top:nth-child(1){top:0}bl5-datagrid-navigator>div.vertical>.btn.top:nth-child(2){top:24px}bl5-datagrid-navigator>div.vertical>.btn.top:nth-child(3){top:48px}bl5-datagrid-navigator>div.vertical>.btn.bottom:nth-last-child(3){bottom:48px}bl5-datagrid-navigator>div.vertical>.btn.bottom:nth-last-child(2){bottom:24px}bl5-datagrid-navigator>div.vertical>.btn.bottom:nth-last-child(1){bottom:0}.classification-selected{padding:.3rem 1.7rem}.classification{margin:0;padding:0;list-style:none;flex-direction:column;flex-wrap:nowrap;display:flex;line-height:1.6}.classification a:hover{background-color:#d3d3d3}.classification>li{display:block;outline:0;margin:0;padding:0}.classification>li>a{position:relative;padding:.3rem 1.7rem;line-height:1;text-decoration:none;white-space:nowrap;display:block;cursor:pointer}.classification>li>a.hasChildren:after{position:absolute;top:50%;margin-top:-6px;right:1rem;display:block;width:0;height:0;content:"";border:inset 6px;border-right-width:0;border-left-style:solid;border-color:transparent transparent transparent grey}.classification>li.classification-back>a{position:relative}.classification>li.classification-back>a:after{position:absolute;top:50%;margin-top:-6px;left:1rem;display:block;width:0;height:0;content:"";border:inset 6px;border-left-width:0;border-right-style:solid;border-color:transparent grey transparent transparent}.classification>li.selected{background-color:#d3d3d3}.classification>li.focused{background-color:gray}ul.classification-history{padding:.3rem 1.7rem;list-style:none}ul.classification-history>li{display:inline}ul.classification-history>li>a{text-decoration:none;cursor:pointer}ul.classification-history>li>a:hover{text-decoration:underline}ul.classification-history>li+li:before{padding:4px;content:"/"}ul.classification-history.selected{background-color:#d3d3d3}ul.classification-history.focused{background-color:gray}bl5-enumeration-textbox .determine-font{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}bl5-enumeration-textbox input,bl5-enumeration-textbox input.watermark{text-decoration:none!important}bl5-enumeration-textbox input.watermark::placeholder{text-decoration:none!important;opacity:1}bl5-error-text,bl5-group-error-text,bl5-page-error-text{display:inline-block;vertical-align:top;font-size:0}bl5-error-text>:not(.css-vars) [data-text-alignment],bl5-group-error-text>:not(.css-vars) [data-text-alignment],bl5-page-error-text>:not(.css-vars) [data-text-alignment]{display:inline-table!important;text-decoration:inherit}bl5-error-text>:not(.css-vars) [data-text-alignment]>div,bl5-group-error-text>:not(.css-vars) [data-text-alignment]>div,bl5-page-error-text>:not(.css-vars) [data-text-alignment]>div{display:table-cell;vertical-align:top;text-align:left}bl5-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment],bl5-group-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment],bl5-page-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment]{width:100%}bl5-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment][data-horizontal-text-alignment="1"]>div,bl5-group-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment][data-horizontal-text-alignment="1"]>div,bl5-page-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment][data-horizontal-text-alignment="1"]>div{text-align:center}bl5-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment][data-horizontal-text-alignment="2"]>div,bl5-group-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment][data-horizontal-text-alignment="2"]>div,bl5-page-error-text>:not(.css-vars):not(.width-auto)>[data-text-alignment][data-horizontal-text-alignment="2"]>div{text-align:right}bl5-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment],bl5-group-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment],bl5-page-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment]{height:100%}bl5-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment][data-vertical-text-alignment="1"]>div,bl5-group-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment][data-vertical-text-alignment="1"]>div,bl5-page-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment][data-vertical-text-alignment="1"]>div{vertical-align:middle}bl5-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment][data-vertical-text-alignment="2"]>div,bl5-group-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment][data-vertical-text-alignment="2"]>div,bl5-page-error-text>:not(.css-vars):not(.height-auto)>[data-text-alignment][data-vertical-text-alignment="2"]>div{vertical-align:bottom}bl5-error-text>.ErrorComponent,bl5-error-text>.GroupErrorTextComponent,bl5-error-text>.PageErrorTextComponent,bl5-group-error-text>.ErrorComponent,bl5-group-error-text>.GroupErrorTextComponent,bl5-group-error-text>.PageErrorTextComponent,bl5-page-error-text>.ErrorComponent,bl5-page-error-text>.GroupErrorTextComponent,bl5-page-error-text>.PageErrorTextComponent{display:inline-block}bl5-grid{font-size:0}bl5-grid>table{empty-cells:show;table-layout:fixed;border-collapse:collapse;display:inline-block;vertical-align:top;border-spacing:0}bl5-grid>table.ltr{text-align:left}bl5-grid>table.ltr>tbody>tr>td{text-align:left}bl5-grid>table.ltr>tbody>tr>td[data-horizontal-alignment="0"]{text-align:left}bl5-grid>table.ltr>tbody>tr>td[data-horizontal-alignment="0"]>div>.TextComponent{text-align:left}bl5-grid>table.ltr>tbody>tr>td[data-horizontal-alignment="1"]{text-align:center}bl5-grid>table.ltr>tbody>tr>td[data-horizontal-alignment="1"]>div>.TextComponent{text-align:center}bl5-grid>table.ltr>tbody>tr>td[data-horizontal-alignment="2"]{text-align:right}bl5-grid>table.ltr>tbody>tr>td[data-horizontal-alignment="2"]>div>.TextComponent{text-align:right}bl5-grid>table.rtl{text-align:right}bl5-grid>table.rtl>tbody>tr>td{text-align:right}bl5-grid>table.rtl>tbody>tr>td[data-horizontal-alignment="0"]{text-align:right}bl5-grid>table.rtl>tbody>tr>td[data-horizontal-alignment="0"]>div>.TextComponent{text-align:right}bl5-grid>table.rtl>tbody>tr>td[data-horizontal-alignment="1"]{text-align:center}bl5-grid>table.rtl>tbody>tr>td[data-horizontal-alignment="1"]>div>.TextComponent{text-align:center}bl5-grid>table.rtl>tbody>tr>td[data-horizontal-alignment="2"]{text-align:left}bl5-grid>table.rtl>tbody>tr>td[data-horizontal-alignment="2"]>div>.TextComponent{text-align:left}bl5-grid>table>tbody>tr>td{vertical-align:top;padding:0}bl5-grid>table>tbody>tr>td[data-vertical-alignment="0"]{vertical-align:top}bl5-grid>table>tbody>tr>td[data-vertical-alignment="0"]>div>.TextComponent{vertical-align:top}bl5-grid>table>tbody>tr>td[data-vertical-alignment="1"]{vertical-align:middle}bl5-grid>table>tbody>tr>td[data-vertical-alignment="1"]>div>.TextComponent{vertical-align:middle}bl5-grid>table>tbody>tr>td[data-vertical-alignment="2"]{vertical-align:bottom}bl5-grid>table>tbody>tr>td[data-vertical-alignment="2"]>div>.TextComponent{vertical-align:bottom}bl5-hyperlink>div{display:inline-flex}bl5-hyperlink>div.enabled{cursor:pointer}bl5-hyperlink>div:focus{outline:1px dotted #212121;outline:5px auto -webkit-focus-ring-color}bl5-hyperlink>div>a:link,bl5-hyperlink>div>a:visited,bl5-hyperlink>div>a:hover,bl5-hyperlink>div>a:active{color:inherit}bl5-image>div:not(.css-vars){display:inline-flex}bl5-image>div:not(.css-vars).clickable{cursor:pointer}bl5-image>div:not(.css-vars):focus{outline:1px dotted #212121;outline:5px auto -webkit-focus-ring-color}bl5-image>div:not(.css-vars)>img{width:1px;height:1px}bl5-image>a.imageAnchor{position:absolute;width:0;height:0}bl5-image>img:focus{outline:1px dotted #212121;outline:5px auto -webkit-focus-ring-color}bl5-involved-fields>ul,bl5-group-involved-fields>ul,bl5-page-involved-fields>ul{display:inline-block;outline:0;list-style-type:none}bl5-involved-fields>ul>li,bl5-group-involved-fields>ul>li,bl5-page-involved-fields>ul>li{background:transparent;color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit}bl5-involved-fields>ul.disabled>li,bl5-group-involved-fields>ul.disabled>li,bl5-page-involved-fields>ul.disabled>li{pointer-events:none;cursor:default}bl5-involved-fields>ul.enabled>li,bl5-group-involved-fields>ul.enabled>li,bl5-page-involved-fields>ul.enabled>li{cursor:pointer}bl5-involved-fields>ul.enabled>li:hover,bl5-group-involved-fields>ul.enabled>li:hover,bl5-page-involved-fields>ul.enabled>li:hover{background-color:#d3d3d3}bl5-line{font-size:0}bl5-line>div{display:inline-block;vertical-align:top}bl5-lookup-textbox>input[type=text]{width:100%}bl5-lookup-textbox>div{position:absolute;z-index:9999;-moz-transform:translateZ(1px);-o-transform:translateZ(1px);-ms-transform:translateZ(1px);-webkit-transform:translateZ(1px);top:-9999px;left:-9999px;background-color:#fff;border:1px solid lightgrey}bl5-lookup-textbox>div>table{padding:0;margin:0;background-color:#fff;z-index:999}bl5-lookup-textbox>div>table>thead>tr>th,bl5-lookup-textbox>div>table>tbody>tr>td{padding:5px;white-space:nowrap}bl5-lookup-textbox>div>table>thead>tr>th{text-align:center}bl5-lookup-textbox>div>table>tbody>tr{cursor:pointer}bl5-lookup-textbox>div>table>tbody>tr.selected,bl5-lookup-textbox>div>table>tbody>tr:hover{background-color:#90caf9}bl5-lookup-textbox>div>table>tbody>tr>td{text-align:left}bl5-lookup-textbox .determine-font{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}bl5-lookup-textbox input,bl5-lookup-textbox input.watermark{text-decoration:none!important}bl5-lookup-textbox input.watermark::placeholder{text-decoration:none!important;opacity:1}bl5-lookup-textbox>div,bl5-lookup-textbox>div.watermark{text-decoration:none!important}bl5-lookup-textbox>div.watermark::placeholder{text-decoration:none!important;opacity:1}bl5-bing-maps>div.MapsComponent{position:relative}bl5-bing-maps>div.MapsComponent>ejs-maps#rn-container{display:block}bl5-menu>div.MenuComponent ul.menu-list{list-style:none;cursor:default}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item{position:relative;vertical-align:top;z-index:500}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.disabled:hover,bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.separator:hover{cursor:default}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item:not(.disabled):hover,bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.enabled:hover{cursor:pointer;border-color:#26a0dacc;box-shadow:inset 0 0 0 1000px #5cddeb33}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.disabled>a.menu-item-link{color:#686868}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.disabled,bl5-menu>div.MenuComponent ul.menu-list>li.menu-item:not(.separator){border:1px solid transparent}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.active{z-index:1000;border-color:#26a0dacc;box-shadow:inset 0 0 0 1000px #5cddeb33}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item.active>ul.menu-list.submenu{display:block}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item>a.menu-item-link{display:block;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}bl5-menu>div.MenuComponent ul.menu-list>li.menu-item>a.menu-item-link:hover{text-decoration:none}bl5-menu>div.MenuComponent>ul.menu-list.root-list{display:inline-block}bl5-menu>div.MenuComponent>ul.menu-list.root-list>li.menu-item{display:inline-block}bl5-menu>div.MenuComponent>ul.menu-list.root-list>li.menu-item.separator{vertical-align:middle}bl5-menu>div.MenuComponent>ul.menu-list.root-list>li.menu-item.separator>a{display:inline;padding:0;border-right:1px solid #9b9b9b}bl5-menu>div.MenuComponent>ul.menu-list.root-list>li.menu-item:not(separator)>a.menu-item-link{padding:1px 5px;white-space:nowrap}bl5-menu>div.MenuComponent>ul.menu-list.root-list>li.menu-item:not(separator)>a.menu-item-link>span.shortcut,bl5-menu>div.MenuComponent>ul.menu-list.root-list>li.menu-item:not(separator)>a.menu-item-link>span.arrow{display:none}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu{display:none;position:absolute;border:1px solid #9b9b9b}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item{display:block}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item.separator>a{display:block;padding:0;border-bottom:1px solid #9b9b9b}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item:not(.separator){margin:3px;padding:3px}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item:not(.separator)>a.menu-item-link{display:table;white-space:nowrap}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item:not(.separator)>a.menu-item-link>span.text,bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item:not(.separator)>a.menu-item-link>span.shortcut{display:table-cell;width:50%;padding:0 20px}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item:not(.separator)>a.menu-item-link>span.shortcut{color:#4d4d4d}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item:not(.separator)>a.menu-item-link>span.arrow{display:none}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item.menu-parent>a.menu-item-link>span.shortcut{display:none}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item.menu-parent>ul.menu-list.submenu{left:100%;top:-4px}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item.menu-parent:not(.disabled)>a.menu-item-link>span.arrow{display:table-cell}bl5-menu>div.MenuComponent>ul.menu-list.root-list ul.menu-list.submenu>li.menu-item.menu-parent:not(.disabled)>a.menu-item-link>span.arrow:after{content:"\\25ba";font-size:.6em;position:absolute;top:calc(50% - .6em);right:-15px}bl5-number-slider{display:inline-block}.number-slider:not(.css-vars){width:0;height:100%;margin:0;padding:0;position:relative}.number-slider:not(.css-vars).horizontal-alignment-left{left:0}.number-slider:not(.css-vars).horizontal-alignment-center{left:50%;transform:translate(-50%)}.number-slider:not(.css-vars).horizontal-alignment-right{left:100%;transform:translate(-100.2%)}.number-slider:not(.css-vars)>.ng2-nouislider{position:absolute;margin:0;padding:0;background:transparent;min-height:24px}.number-slider:not(.css-vars)>bl5-number-slider-ticks,.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks{position:absolute;width:0;height:0;margin:0;padding:0;box-sizing:border-box}.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks{list-style:none}.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks>li.tick{position:absolute;margin:0;padding:0}.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks>li.tick.enabled{cursor:pointer}.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks>li.tick.selected>span.marker{background:#0db9f0}.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks>li.tick>span.marker{position:absolute;background:black;margin:0;padding:0}.number-slider:not(.css-vars)>bl5-number-slider-ticks>ul.ticks>li.tick>span.tick-value{position:absolute;margin:0;padding:0}.number-slider:not(.css-vars).orientation-horizontal.ticks-topleft,.number-slider:not(.css-vars).orientation-horizontal.ticks-bottomright{min-height:30px}.number-slider:not(.css-vars).orientation-horizontal.ticks-both{min-height:60px}.number-slider:not(.css-vars).orientation-horizontal.ticks-none{min-height:0}.number-slider:not(.css-vars).orientation-horizontal.ticks-topleft>ul.ticks{top:0}.number-slider:not(.css-vars).orientation-horizontal.ticks-topleft>.ng2-nouislider{bottom:0}.number-slider:not(.css-vars).orientation-horizontal.ticks-bottomright>ul.ticks{bottom:0}.number-slider:not(.css-vars).orientation-horizontal.ticks-bottomright>.ng2-nouislider{top:0}.number-slider:not(.css-vars).orientation-horizontal.ticks-both>.ng2-nouislider,.number-slider:not(.css-vars).orientation-horizontal.ticks-none>.ng2-nouislider{top:50%;-moz-transform:translateY(-50%);-o-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%)}.number-slider:not(.css-vars).orientation-horizontal>.ng2-nouislider{width:calc(100% - 38px)}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks{width:100%}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks.topleft{top:0}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks.topleft>ul.ticks>li.tick>span.tick-value{top:0}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks.topleft>ul.ticks>li.tick>span.marker{top:14px}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks.bottomright{bottom:0}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks.bottomright>ul.ticks>li.tick>span.marker{bottom:14px}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks.bottomright>ul.ticks>li.tick>span.tick-value{bottom:0}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks>ul.ticks{left:50%;width:calc(100% - 40px);-moz-transform:translateX(-50%);-o-transform:translateX(-50%);-ms-transform:translateX(-50%);-webkit-transform:translateX(-50%)}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks>ul.ticks>li.tick>span.marker{width:1pt}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks>ul.ticks>li.tick>span.marker.marker-large{height:12px}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks>ul.ticks>li.tick>span.marker.marker-normal{height:8px}.number-slider:not(.css-vars).orientation-horizontal>bl5-number-slider-ticks>ul.ticks>li.tick>span.tick-value{left:50%;-moz-transform:translateX(-50%);-o-transform:translateX(-50%);-ms-transform:translateX(-50%);-webkit-transform:translateX(-50%)}.number-slider:not(.css-vars).orientation-vertical.ticks-topleft,.number-slider:not(.css-vars).orientation-vertical.ticks-bottomright{min-width:50px}.number-slider:not(.css-vars).orientation-vertical.ticks-both{min-width:136px}.number-slider:not(.css-vars).orientation-vertical.ticks-none{min-width:18px}.number-slider:not(.css-vars).orientation-vertical.ticks-topleft>ul.ticks{left:0}.number-slider:not(.css-vars).orientation-vertical.ticks-topleft>.ng2-nouislider{left:50px}.number-slider:not(.css-vars).orientation-vertical.ticks-bottomright>ul.ticks{left:50px}.number-slider:not(.css-vars).orientation-vertical.ticks-bottomright>.ng2-nouislider{left:0}.number-slider:not(.css-vars).orientation-vertical.ticks-both>.ng2-nouislider{left:50px}.number-slider:not(.css-vars).orientation-vertical.ticks-none>.ng2-nouislider{left:0}.number-slider:not(.css-vars).orientation-vertical>.ng2-nouislider{height:calc(100% - 38px)}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks{height:100%}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks.topleft{left:0}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks.topleft>ul.ticks>li.tick>span.tick-value{left:2px}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks.topleft>ul.ticks>li.tick>span.marker{left:36px}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks.bottomright{right:0}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks.bottomright>ul.ticks>li.tick>span.marker{right:36px}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks.bottomright>ul.ticks>li.tick>span.tick-value{right:2px}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks>ul.ticks{top:50%;height:calc(100% - 40px);-moz-transform:translateY(-50%);-o-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%)}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks>ul.ticks>li.tick>span.marker{height:1pt}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks>ul.ticks>li.tick>span.marker.marker-large{width:12px}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks>ul.ticks>li.tick>span.marker.marker-normal{width:8px}.number-slider:not(.css-vars).orientation-vertical bl5-number-slider-ticks>ul.ticks>li.tick>span.tick-value{top:50%;-moz-transform:translateY(-50%);-o-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%)}.noUi-target{margin:0;padding:0;background:lightgrey;border:1px solid darkgrey}.noUi-target>.noUi-base{background:inherit}.noUi-target>.noUi-base>.noUi-connects{background:inherit}.noUi-target>.noUi-base>.noUi-origin{background:darkgrey}.noUi-target>.noUi-base>.noUi-origin>.noUi-handle{background:inherit;border:1px solid grey;opacity:1;transition:opacity 1s}.noUi-target>.noUi-base>.noUi-origin>.noUi-handle>.noUi-touch-area{background:inherit}.noUi-target>.noUi-base>.noUi-origin>.noUi-handle.default-value{opacity:.6}.noUi-target>.noUi-base>.noUi-origin>.noUi-handle.value-selected{border:1px solid #0db9f0}.noUi-target>.noUi-base>.noUi-origin>.noUi-handle.value-selected:before{background:#0db9f0}.noUi-target>.noUi-base>.noUi-origin>.noUi-handle.value-selected:after{background:#0db9f0}.noUi-target.noUi-horizontal>.noUi-base>.noUi-origin{top:50%;transform:translateY(-50%)}.noUi-target.noUi-horizontal>.noUi-base>.noUi-origin>.noUi-handle{top:-15px!important}.noUi-target.noUi-horizontal>.noUi-base>.noUi-origin>.noUi-handle:before{left:15px}.noUi-target.noUi-horizontal>.noUi-base>.noUi-origin>.noUi-handle:after{right:15px}.noUi-target.noUi-horizontal>.noUi-base>.noUi-origin>.noUi-handle:before,.noUi-target.noUi-horizontal>.noUi-base>.noUi-origin>.noUi-handle:after{height:calc(100% - 12px)!important}.noUi-target.noUi-vertical>.noUi-base>.noUi-origin{left:50%;transform:translate(-50%)}.noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle{left:-14px}.noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:before{top:15px}.noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:after{bottom:15px}.noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:before,.noUi-target.noUi-vertical>.noUi-base>.noUi-origin>.noUi-handle:after{width:calc(100% - 12px)!important}.number-slider .noUi-target.noUi-horizontal{width:100%}.number-slider .noUi-target.noUi-vertical{height:100%}.number-slider:not(.css-vars) .noUi-target.noUi-horizontal{margin:7px 20px}.number-slider:not(.css-vars) .noUi-target.noUi-vertical{margin:20px 7px}.number-slider.css-vars .noUi-target{grid-column-start:var(--grid-column-start);grid-column-end:var(--grid-column-end);grid-row-start:var(--grid-row-start);grid-row-end:var(--grid-row-end)}.number-slider.css-vars .noUi-target.noUi-horizontal{height:var(--numberslider-track-size)}.number-slider.css-vars .noUi-target.noUi-vertical{width:var(--numberslider-track-size)}bl5-number-textbox input{vertical-align:top}bl5-number-textbox .determine-font{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}bl5-number-textbox input,bl5-number-textbox input.watermark{text-decoration:none!important}bl5-number-textbox input.watermark::placeholder{text-decoration:none!important;opacity:1}bl5-number-textbox input{box-shadow:none}bl5-record-errors-involved-fields{display:inline-block;margin:0;padding:0;border:0}bl5-record-errors-involved-fields>div>ul{list-style:none;text-align:left}bl5-record-errors-involved-fields>div>ul>li{transition:background-color .15s ease-in-out}bl5-record-errors-involved-fields>div>ul>li:hover{cursor:pointer}bl5-record-errors-involved-fields>div.width-auto>ul>li{white-space:nowrap}bl5-record-errors-listbox{display:inline-block;margin:0;padding:0;border:0}bl5-record-errors-listbox>div>ul{list-style:none;border:1px solid darkgrey;padding:1px;text-align:left}bl5-record-errors-listbox>div>ul>li{padding:1px 2px;border:1px solid transparent;transition:background-color .15s ease-in-out,border-color .15s ease-in-out}bl5-record-errors-listbox>div>ul>li:hover{cursor:pointer}bl5-record-errors-listbox>div.width-auto>ul>li{white-space:nowrap}bl5-skiplinks-container .ParentType-SkiplinksContainerComponent{position:absolute;top:1em;left:-10000px;z-index:1000}bl5-skiplinks-container .ParentType-SkiplinksContainerComponent.width-stretch{width:calc(100% - 2em)}bl5-skiplinks-container .ParentType-SkiplinksContainerComponent.focus,bl5-skiplinks-container .ParentType-SkiplinksContainerComponent:focus-within{left:1em}bl5-string-textbox input{vertical-align:top}bl5-string-textbox .determine-font{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}bl5-string-textbox input,bl5-string-textbox input.watermark{text-decoration:none!important}bl5-string-textbox input.watermark::placeholder{text-decoration:none!important;opacity:1}bl5-string-textbox textarea,bl5-string-textbox textarea.watermark{text-decoration:none!important}bl5-string-textbox textarea.watermark::placeholder{text-decoration:none!important;opacity:1}bl5-string-textbox textarea{overflow:auto;resize:none}bl5-table:not(.css-vars)>table{empty-cells:show;table-layout:fixed;border-collapse:collapse;display:inline-block;border-spacing:0}bl5-table:not(.css-vars)>table>tbody>tr>td{padding:0}bl5-upload a.button,bl5-upload button.button{background-color:transparent;border:1px solid #757575;width:auto;height:auto;margin:0;padding:2px;white-space:nowrap}bl5-upload>input.file{position:absolute;width:0;height:0}bl5-video>div{display:inline-flex}bl5-video iframe{border:0}div.text-container.auto{white-space:nowrap}div.text-container.no-auto{white-space:pre-wrap}div.text-container.word-break{word-wrap:break-word}div.text-container.no-word-break{word-wrap:normal}div.text-container div.center{text-align:center}div.text-container div.right{text-align:right}div.text-container div span img{vertical-align:middle}a.disabled{pointer-events:none;cursor:default}.icon-calendar-o:before{content:"\\e901"}.icon-caret-left:before{content:"\\e902"}.icon-caret-right:before{content:"\\e903"}.icon-clock-o:before{content:"\\e900"}input[type=radio],input[type=checkbox]{min-width:1em;min-height:1em}input[type=radio]:not([disabled]):hover,input[type=checkbox]:not([disabled]):hover{cursor:pointer}.no-overflow{overflow:hidden;width:inherit;height:inherit}html.css-vars #placeholder,html.css-vars #placeholder .rootControl{height:100%;width:100%;position:fixed}html.css-vars .text-container{align-self:var(--vertical-text-alignment);justify-self:var(--horizontal-text-alignment)}*{padding:0;margin:0;box-sizing:border-box}.mouse-events{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}html,body,div{scroll-behavior:smooth}body{overflow:hidden}app-root[dir=ltr] *[style*="text-align: start"],app-root[dir=ltr] *.text-align-start{text-align:left}app-root[dir=ltr] *[style*="text-align: center"],app-root[dir=ltr] *.text-align-center{text-align:center}app-root[dir=ltr] *[style*="text-align: end"],app-root[dir=ltr] *.text-align-end{text-align:right}app-root[dir=rtl] *[style*="text-align: start"],app-root[dir=rtl] *.text-align-start{text-align:right}app-root[dir=rtl] *[style*="text-align: center"],app-root[dir=rtl] *.text-align-center{text-align:center}app-root[dir=rtl] *[style*="text-align: end"],app-root[dir=rtl] *.text-align-end{text-align:left}app-root[dir=rtl] *[style*="display: inline-block;"],app-root[dir=rtl] *[data-bl5-string-textbox]>input,app-root[dir=rtl] *[data-bl5-grid]>table{float:right}h1,h2,h3,h4,h5,h6{display:inline}h1{font-size:24px}h2{font-size:18px}h3{font-size:14px}h4{font-size:12px}h5{font-size:10px}h6{font-size:8px}.focus-no-outline:focus{outline:0!important}.determine-font{position:absolute;left:-9999px;top:-9999px;white-space:nowrap;visibility:hidden}.aria-description{position:absolute;left:-9999px;top:-9999px;display:none}\n'],encapsulation:2}),n})();const wh=["*"];let xh=(()=>{class n{constructor(t,e){this.modalService=t,this.el=e,this.modalOpenedEvent=new i.vpe,this.modalClosedEvent=new i.vpe}ngOnInit(){this.id?(this.el.nativeElement.addEventListener("click",t=>{"bl5-modal"===t.target.className&&this.close()}),this.modalService.add(this),this.close()):console.error("modal must have an id")}ngOnDestroy(){this.modalService.remove(this.id),this.el.nativeElement.remove()}open(){this.el.nativeElement.style.display="block",document.body.classList.add("bl5-modal-open"),this.modalOpenedEvent.emit()}close(){this.el.nativeElement.style.display="none",document.body.classList.remove("bl5-modal-open"),this.modalClosedEvent.emit()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(dn),i.Y36(i.SBq))},n.\u0275cmp=i.Xpm({type:n,selectors:[["bl5-modal"]],inputs:{id:"id"},outputs:{modalOpenedEvent:"modalOpenedEvent",modalClosedEvent:"modalClosedEvent"},ngContentSelectors:wh,decls:4,vars:0,consts:[[1,"bl5-modal"],[1,"bl5-modal-body"],[1,"bl5-modal-background"]],template:function(t,e){1&t&&(i.F$t(),i.TgZ(0,"div",0)(1,"div",1),i.Hsn(2),i.qZA()(),i._UZ(3,"div",2))},styles:[".bl5-modal[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1000;overflow:auto}.bl5-modal[_ngcontent-%COMP%]   .bl5-modal-body[_ngcontent-%COMP%]{padding:20px;background:#222;margin:40px;text-align:center}.bl5-modal-background[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000;opacity:.75;z-index:900}"],changeDetection:0}),n})(),_h=(()=>{class n{ngOnInit(){this.subscription=this.gameEvents.subscribe({next:()=>{this.init()}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}init(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-easter-egg"]],inputs:{gameEvents:"gameEvents"},decls:3,vars:0,consts:[["id","easteregg"],["id","easteregg-loading"],["id","easteregg-canvas","width","600","height","600"]],template:function(t,e){1&t&&(i.TgZ(0,"bl5-modal",0)(1,"div",1),i._UZ(2,"canvas",2),i.qZA()())},dependencies:[xh],styles:["#easteregg-loading{display:flex;justify-content:center;align-items:center;color:#eee}#easteregg-loading #easteregg-canvas{background:#333333}#easteregg-loading #easteregg-canvas #ready,#easteregg-loading #easteregg-canvas #over,#easteregg-loading #easteregg-canvas #clear{font-size:30px;position:absolute;color:#fff;text-align:center}#easteregg-loading #easteregg-canvas p{font-size:15px;font-weight:lighter}\n"],encapsulation:2,changeDetection:0}),n})(),kh=(()=>{class n{constructor(){this.konami=new i.vpe,this.sequence=[];const t=b.ArrowUp,e=b.ArrowDown,r=b.ArrowLeft,o=b.ArrowRight;this.konamiCode=[t,t,e,e,r,o,r,o,"b","a"]}handleKeyboardEvent(t){t.key&&(this.sequence.push(t.key),this.sequence.length>this.konamiCode.length&&this.sequence.shift(),this.isKonamiCode()&&this.konami.emit())}isKonamiCode(){return this.konamiCode.every((t,e)=>t===this.sequence[e])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=i.lG2({type:n,selectors:[["","appKonami",""]],hostBindings:function(t,e){1&t&&i.NdJ("keydown",function(o){return e.handleKeyboardEvent(o)},!1,i.evT)},outputs:{konami:"appKonami"}}),n})(),Oh=(()=>{class n{constructor(t){this.modalService=t,this.game=new Qt.x}openModal(t){this.modalService.open(t),this.game.next("start")}closeModal(t){this.game.next("stop"),this.modalService.close(t)}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(dn))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:1,consts:[[3,"appKonami"],[3,"gameEvents"]],template:function(t,e){1&t&&(i.TgZ(0,"bl5-core",0),i.NdJ("appKonami",function(){return e.openModal("easteregg")}),i.qZA(),i._UZ(1,"app-easter-egg",1)),2&t&&(i.xp6(1),i.Q6J("gameEvents",e.game.asObservable()))},dependencies:[Ah,_h,kh],styles:["body.bl5-modal-open[_ngcontent-%COMP%]{overflow:hidden}"]}),n})(),Th=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n,bootstrap:[Oh]}),n.\u0275inj=i.cJS({imports:[jt.b2,yh,Sh]}),n})();(0,xr.GG)("ORg4AjUWIQA/Gnt2VlhhQlJCfV5AQmBIYVp/TGpJfl96cVxMZVVBJAtUQF1hSn5ad01iWX9dcHVcTmVY"),(0,i.G48)(),jt.q6().bootstrapModule(Th,{ngZoneEventCoalescing:!0}).catch(n=>console.log(n)),function Ph(){return"ontouchstart"in window||navigator.maxTouchPoints>0}()&&document.getElementsByTagName("html")[0].classList.add("touchevents")}},Ue=>{Ue.O(0,[736],()=>Ue(Ue.s=932)),Ue.O()}]);